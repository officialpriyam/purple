const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-kFVzMmTw.js","assets/index-8zJ_uXMx.js","assets/components-Dk2Pd0pW.js","assets/client-only-CTKTvWNL.js","assets/index-DvHkd5jU.js","assets/index-BkoNQ2qa.js","assets/index-DbWhsDkn.js","assets/index-D_O1Fmz7.js","assets/index-V57EQhqn.js","assets/index-DRlC8gDY.js","assets/index-DcFcEvWa.js","assets/index-Dk0UaRgw.js","assets/angular-html-LfdN0zeE.js","assets/html-C2L_23MC.js","assets/javascript-ySlJ1b_l.js","assets/css-BPhBrDlE.js","assets/angular-ts-CKsD7JZE.js","assets/scss-C31hgJw-.js","assets/apl-BBq3IX1j.js","assets/xml-e3z08dGr.js","assets/java-xI-RfyKK.js","assets/json-BQoSv7ci.js","assets/astro-CqkE3fuf.js","assets/typescript-Dj6nwHGl.js","assets/postcss-B3ZDOciz.js","assets/blade-a8OxSdnT.js","assets/sql-COK4E0Yg.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo--RitsXJZ.js","assets/python-DhUJRlN_.js","assets/cobol-PTqiYgYu.js","assets/coffee-dyiR41kL.js","assets/cpp-BksuvNSY.js","assets/regexp-DWJ3fJO_.js","assets/glsl-DBO2IWDn.js","assets/c-C3t2pwGQ.js","assets/crystal-DtDmRg-F.js","assets/shellscript-atvbtKCR.js","assets/edge-D5gP-w-T.js","assets/html-derivative-CSfWNPLT.js","assets/elixir-CLiX3zqd.js","assets/elm-CmHSxxaM.js","assets/erb-BYTLMnw6.js","assets/ruby-DeZ3UC14.js","assets/haml-B2EZWmdv.js","assets/graphql-cDcHW_If.js","assets/jsx-BAng5TT0.js","assets/tsx-B6W0miNI.js","assets/lua-CvWAzNxB.js","assets/yaml-CVw76BM1.js","assets/fortran-fixed-form-TqA4NnZg.js","assets/fortran-free-form-DKXYxT9g.js","assets/fsharp-XplgxFYe.js","assets/markdown-UIAJJxZW.js","assets/gdresource-BHYsBjWJ.js","assets/gdshader-SKMF96pI.js","assets/gdscript-DfxzS6Rs.js","assets/git-commit-i4q6IMui.js","assets/diff-BgYniUM_.js","assets/git-rebase-B-v9cOL2.js","assets/glimmer-js-D-cwc0-E.js","assets/glimmer-ts-pgjy16dm.js","assets/hack-D1yCygmZ.js","assets/handlebars-BQGss363.js","assets/http-FRrOvY1W.js","assets/hxml-TIA70rKU.js","assets/haxe-C5wWYbrZ.js","assets/imba-bv_oIlVt.js","assets/jinja-DGy0s7-h.js","assets/jison-BqZprYcd.js","assets/julia-BBuGR-5E.js","assets/r-CwjWoCRV.js","assets/latex-C-cWTeAZ.js","assets/tex-rYs2v40G.js","assets/liquid-D3W5UaiH.js","assets/marko-z0MBrx5-.js","assets/less-BfCpw3nA.js","assets/mdc-DB_EDNY_.js","assets/nginx-D_VnBJ67.js","assets/nim-ZlGxZxc3.js","assets/perl-CHQXSrWU.js","assets/php-B5ebYQev.js","assets/pug-CM9l7STV.js","assets/qml-D8XfuvdV.js","assets/razor-CNLDkMZG.js","assets/csharp-D9R-vmeu.js","assets/rst-4NLicBqY.js","assets/cmake-DbXoA79R.js","assets/sas-BmTFh92c.js","assets/shaderlab-B7qAK45m.js","assets/hlsl-ifBTmRxC.js","assets/shellsession-C_rIy8kc.js","assets/soy-C-lX7w71.js","assets/sparql-bYkjHRlG.js","assets/turtle-BMR_PYu6.js","assets/stata-DorPZHa4.js","assets/svelte-MSaWC3Je.js","assets/templ-dwX3ZSMB.js","assets/go-B1SYOhNW.js","assets/ts-tags-CipyTH0X.js","assets/twig-NC5TFiHP.js","assets/vue-BuYVFjOK.js","assets/vue-html-xdeiXROB.js","assets/xsl-Dd0NUgwM.js"])))=>i.map(i=>d[i]);
import{r as R,n as L,w as Ye,x as O_,l as eT,y as CN,z as tT,A as TN,B as Gh,C as dd}from"./components-Dk2Pd0pW.js";import{a as ni,u as Pt,t as ug,b as AN,C as $r}from"./client-only-CTKTvWNL.js";const kN=5,_c=6,bc=10;let RN=(t,e,n,r)=>(t.events=t.events||{},t.events[n+bc]||(t.events[n+bc]=r(i=>{t.events[n].reduceRight((s,o)=>(o(s),s),{shared:{},...i})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let i=t.events[n],s=i.indexOf(e);i.splice(s,1),i.length||(delete t.events[n],t.events[n+bc](),delete t.events[n+bc])}),IN=1e3,DN=(t,e)=>RN(t,r=>{let i=e(r);i&&t.events[_c].push(i)},kN,r=>{let i=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,r()),i(...o));let s=t.off;return t.events[_c]=[],t.off=()=>{s(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[_c])o();t.events[_c]=[]}},IN)},()=>{t.listen=i,t.off=s}}),LN=(t,e,n)=>{Array.isArray(t)||(t=[t]);let r,i=0,s=()=>{let l=t.map(u=>u.get());if(r===void 0||l.some((u,c)=>u!==r[c])){let u=++i;r=l;let c=e(...l);c&&c.then&&c.t?c.then(h=>{u===i&&o.set(h)}):o.set(c)}},o=ni(void 0,Math.max(...t.map(l=>l.l))+1),a=s;return DN(o,()=>{let l=t.map(u=>u.listen(a,-1/o.l));return s(),()=>{for(let u of l)u()}}),o},M_=(t,e)=>LN(t,e),cs=(t={})=>{let e=ni(t);return e.setKey=function(n,r){let i=e.value;typeof r>"u"&&n in e.value?(e.value={...e.value},delete e.value[n],e.notify(i,n)):e.value[n]!==r&&(e.value={...e.value,[n]:r},e.notify(i,n))},e};const N_=R.createContext({});function $l(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const pd=R.createContext(null),B_=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class PN extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ON({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(B_);return R.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),L.jsx(PN,{isPresent:e,childRef:r,sizeRef:i,children:R.cloneElement(t,{ref:r})})}const MN=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=$l(NN),l=R.useId(),u=R.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),c=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),u]:[n,u]);return R.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=L.jsx(ON,{isPresent:n,children:t})),L.jsx(pd.Provider,{value:c,children:t})};function NN(){return new Map}function nT(t=!0){const e=R.useContext(pd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=R.useId();R.useEffect(()=>{t&&i(s)},[t]);const o=R.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const yc=t=>t.key||"";function R1(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const F_=typeof window<"u",rT=F_?R.useLayoutEffect:R.useEffect,Kh=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=nT(o),u=R.useMemo(()=>R1(t),[t]),c=o&&!a?[]:u.map(yc),h=R.useRef(!0),f=R.useRef(u),d=$l(()=>new Map),[_,b]=R.useState(u),[p,m]=R.useState(u);rT(()=>{h.current=!1,f.current=u;for(let v=0;v<p.length;v++){const S=yc(p[v]);c.includes(S)?d.delete(S):d.get(S)!==!0&&d.set(S,!1)}},[p,c.length,c.join("-")]);const g=[];if(u!==_){let v=[...u];for(let S=0;S<p.length;S++){const E=p[S],C=yc(E);c.includes(C)||(v.splice(S,0,E),g.push(E))}s==="wait"&&g.length&&(v=g),m(R1(v)),b(u);return}const{forceRender:y}=R.useContext(N_);return L.jsx(L.Fragment,{children:p.map(v=>{const S=yc(v),E=o&&!a?!1:u===p||c.includes(S),C=()=>{if(d.has(S))d.set(S,!0);else return;let x=!0;d.forEach(A=>{A||(x=!1)}),x&&(y?.(),m(f.current),o&&l?.(),r&&r())};return L.jsx(MN,{isPresent:E,initial:!h.current||n?void 0:!1,custom:E?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:E?void 0:C,children:v},S)})})},Jn=t=>t;let iT=Jn;function H_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Gs=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ri=t=>t*1e3,ii=t=>t/1e3,BN={useManualTiming:!1};function FN(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,c=!1,h=!1)=>{const d=h&&r?e:n;return c&&s.add(u),d.has(u)||d.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const vc=["read","resolveKeyframes","update","preRender","render","postRender"],HN=40;function sT(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=vc.reduce((m,g)=>(m[g]=FN(s),m),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:h,postRender:f}=o,d=()=>{const m=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(m-i.timestamp,HN),1),i.timestamp=m,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(d))},_=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:vc.reduce((m,g)=>{const y=o[g];return m[g]=(v,S=!1,E=!1)=>(n||_(),y.schedule(v,S,E)),m},{}),cancel:m=>{for(let g=0;g<vc.length;g++)o[vc[g]].cancel(m)},state:i,steps:o}}const{schedule:wt,cancel:Ji,state:rn,steps:mp}=sT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jn,!0),oT=R.createContext({strict:!1}),I1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},la={};for(const t in I1)la[t]={isEnabled:e=>I1[t].some(n=>!!e[n])};function UN(t){for(const e in t)la[e]={...la[e],...t[e]}}const jN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jN.has(t)}let aT=t=>!Yh(t);function VN(t){t&&(aT=e=>e.startsWith("on")?!Yh(e):t(e))}try{VN(require("@emotion/is-prop-valid").default)}catch{}function $N(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(aT(i)||n===!0&&Yh(i)||!e&&!Yh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function zN(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const md=R.createContext({});function zl(t){return typeof t=="string"||Array.isArray(t)}function gd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const U_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j_=["initial",...U_];function _d(t){return gd(t.animate)||j_.some(e=>zl(t[e]))}function lT(t){return!!(_d(t)||t.variants)}function WN(t,e){if(_d(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zl(n)?n:void 0,animate:zl(r)?r:void 0}}return t.inherit!==!1?e:{}}function qN(t){const{initial:e,animate:n}=WN(t,R.useContext(md));return R.useMemo(()=>({initial:e,animate:n}),[D1(e),D1(n)])}function D1(t){return Array.isArray(t)?t.join(" "):t}const GN=Symbol.for("motionComponentSymbol");function Ro(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function KN(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ro(n)&&(n.current=r))},[e])}const V_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YN="framerAppearId",uT="data-"+V_(YN),{schedule:$_}=sT(queueMicrotask,!1),cT=R.createContext({});function XN(t,e,n,r,i){var s,o;const{visualElement:a}=R.useContext(md),l=R.useContext(oT),u=R.useContext(pd),c=R.useContext(B_).reducedMotion,h=R.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=h.current,d=R.useContext(cT);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&QN(h.current,n,i,d);const _=R.useRef(!1);R.useInsertionEffect(()=>{f&&_.current&&f.update(n,u)});const b=n[uT],p=R.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return rT(()=>{f&&(_.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),$_.render(f.render),p.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!p.current&&f.animationState&&f.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,b)}),p.current=!1))}),f}function QN(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hT(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ro(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function hT(t){if(t)return t.options.allowProjection!==!1?t.projection:hT(t.parent)}function JN({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&UN(t);function a(u,c){let h;const f={...R.useContext(B_),...u,layoutId:ZN(u)},{isStatic:d}=f,_=qN(u),b=r(u,d);if(!d&&F_){e3();const p=t3(f);h=p.MeasureLayout,_.visualElement=XN(i,b,f,e,p.ProjectionNode)}return L.jsxs(md.Provider,{value:_,children:[h&&_.visualElement?L.jsx(h,{visualElement:_.visualElement,...f}):null,n(i,u,KN(b,_.visualElement,c),b,d,_.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=R.forwardRef(a);return l[GN]=i,l}function ZN({layoutId:t}){const e=R.useContext(N_).id;return e&&t!==void 0?e+"-"+t:t}function e3(t,e){R.useContext(oT).strict}function t3(t){const{drag:e,layout:n}=la;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const n3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function z_(t){return typeof t!="string"||t.includes("-")?!1:!!(n3.indexOf(t)>-1||/[A-Z]/u.test(t))}function L1(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function W_(t,e,n,r){if(typeof e=="function"){const[i,s]=L1(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=L1(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const cg=t=>Array.isArray(t),r3=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),i3=t=>cg(t)?t[t.length-1]||0:t,tn=t=>!!(t&&t.getVelocity);function vh(t){const e=tn(t)?t.get():t;return r3(e)?e.toValue():e}function s3({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:o3(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const fT=t=>(e,n)=>{const r=R.useContext(md),i=R.useContext(pd),s=()=>s3(t,e,r,i);return n?s():$l(s)};function o3(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=vh(s[f]);let{initial:o,animate:a}=t;const l=_d(t),u=lT(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!gd(h)){const f=Array.isArray(h)?h:[h];for(let d=0;d<f.length;d++){const _=W_(t,f[d]);if(_){const{transitionEnd:b,transition:p,...m}=_;for(const g in m){let y=m[g];if(Array.isArray(y)){const v=c?y.length-1:0;y=y[v]}y!==null&&(i[g]=y)}for(const g in b)i[g]=b[g]}}}return i}const Sa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ro=new Set(Sa),dT=t=>e=>typeof e=="string"&&e.startsWith(t),pT=dT("--"),a3=dT("var(--"),q_=t=>a3(t)?l3.test(t.split("/*")[0].trim()):!1,l3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ti=(t,e,n)=>n>e?e:n<t?t:n,wa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wl={...wa,transform:t=>Ti(0,1,t)},Ec={...wa,default:1},$u=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fi=$u("deg"),si=$u("%"),Le=$u("px"),u3=$u("vh"),c3=$u("vw"),P1={...si,parse:t=>si.parse(t)/100,transform:t=>si.transform(t*100)},h3={borderWidth:Le,borderTopWidth:Le,borderRightWidth:Le,borderBottomWidth:Le,borderLeftWidth:Le,borderRadius:Le,radius:Le,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomRightRadius:Le,borderBottomLeftRadius:Le,width:Le,maxWidth:Le,height:Le,maxHeight:Le,top:Le,right:Le,bottom:Le,left:Le,padding:Le,paddingTop:Le,paddingRight:Le,paddingBottom:Le,paddingLeft:Le,margin:Le,marginTop:Le,marginRight:Le,marginBottom:Le,marginLeft:Le,backgroundPositionX:Le,backgroundPositionY:Le},f3={rotate:Fi,rotateX:Fi,rotateY:Fi,rotateZ:Fi,scale:Ec,scaleX:Ec,scaleY:Ec,scaleZ:Ec,skew:Fi,skewX:Fi,skewY:Fi,distance:Le,translateX:Le,translateY:Le,translateZ:Le,x:Le,y:Le,z:Le,perspective:Le,transformPerspective:Le,opacity:Wl,originX:P1,originY:P1,originZ:Le},O1={...wa,transform:Math.round},G_={...h3,...f3,zIndex:O1,size:Le,fillOpacity:Wl,strokeOpacity:Wl,numOctaves:O1},d3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},p3=Sa.length;function m3(t,e,n){let r="",i=!0;for(let s=0;s<p3;s++){const o=Sa[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=mT(a,G_[o]);if(!l){i=!1;const c=d3[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function K_(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(ro.has(l)){o=!0;continue}else if(pT(l)){i[l]=u;continue}else{const c=mT(u,G_[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=m3(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const g3={offset:"stroke-dashoffset",array:"stroke-dasharray"},_3={offset:"strokeDashoffset",array:"strokeDasharray"};function b3(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?g3:_3;t[s.offset]=Le.transform(-r);const o=Le.transform(e),a=Le.transform(n);t[s.array]=`${o} ${a}`}function M1(t,e,n){return typeof t=="string"?t:Le.transform(e+n*t)}function y3(t,e,n){const r=M1(e,t.x,t.width),i=M1(n,t.y,t.height);return`${r} ${i}`}function Y_(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h){if(K_(t,u,h),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:d,dimensions:_}=t;f.transform&&(_&&(d.transform=f.transform),delete f.transform),_&&(i!==void 0||s!==void 0||d.transform)&&(d.transformOrigin=y3(_,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&b3(f,o,a,l,!1)}const X_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gT=()=>({...X_(),attrs:{}}),Q_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _T(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const bT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yT(t,e,n,r){_T(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(bT.has(i)?i:V_(i),e.attrs[i])}const Xh={};function v3(t){Object.assign(Xh,t)}function vT(t,{layout:e,layoutId:n}){return ro.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xh[t]||t==="opacity")}function J_(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(tn(i[o])||e.style&&tn(e.style[o])||vT(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function ET(t,e,n){const r=J_(t,e,n);for(const i in t)if(tn(t[i])||tn(e[i])){const s=Sa.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function E3(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const N1=["x","y","width","height","cx","cy","r"],S3={useVisualState:fT({scrapeMotionValuesFromProps:ET,createRenderState:gT,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ro.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<N1.length;a++){const l=N1[a];t[l]!==e[l]&&(o=!0)}o&&wt.read(()=>{E3(n,r),wt.render(()=>{Y_(r,i,Q_(n.tagName),t.transformTemplate),yT(n,r)})})}})},w3={useVisualState:fT({scrapeMotionValuesFromProps:J_,createRenderState:X_})};function ST(t,e,n){for(const r in e)!tn(e[r])&&!vT(r,n)&&(t[r]=e[r])}function x3({transformTemplate:t},e){return R.useMemo(()=>{const n=X_();return K_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function C3(t,e){const n=t.style||{},r={};return ST(r,n,t),Object.assign(r,x3(t,e)),r}function T3(t,e){const n={},r=C3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function A3(t,e,n,r){const i=R.useMemo(()=>{const s=gT();return Y_(s,e,Q_(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};ST(s,t.style,t),i.style={...s,...i.style}}return i}function k3(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(z_(n)?A3:T3)(r,s,o,n),u=$N(r,typeof n=="string",t),c=n!==R.Fragment?{...u,...l,ref:i}:{},{children:h}=r,f=R.useMemo(()=>tn(h)?h.get():h,[h]);return R.createElement(n,{...c,children:f})}}function R3(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...z_(r)?S3:w3,preloadedFeatures:t,useRender:k3(i),createVisualElement:e,Component:r};return JN(o)}}function wT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function bd(t,e,n){const r=t.getProps();return W_(r,e,n!==void 0?n:r.custom,t)}const I3=H_(()=>window.ScrollTimeline!==void 0);class D3{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(I3()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class xT extends D3{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Z_(t,e){return t?t[e]||t.default||t:void 0}const Qh=2e4;function eb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Qh;)e+=n,r=t.next(e);return e>=Qh?1/0:e}function L3(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(eb(r),Qh);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:ii(i)}}function yd(t){return typeof t=="function"}function B1(t,e){t.timeline=e,t.onfinish=null}const tb=t=>Array.isArray(t)&&typeof t[0]=="number",P3={linearEasing:void 0};function O3(t,e){const n=H_(t);return()=>{var r;return(r=P3[e])!==null&&r!==void 0?r:n()}}const Jh=O3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),CT=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Gs(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function TT(t){return!!(typeof t=="function"&&Jh()||!t||typeof t=="string"&&(t in hg||Jh())||tb(t)||Array.isArray(t)&&t.every(TT))}const ol=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,hg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ol([0,.65,.55,1]),circOut:ol([.55,0,1,.45]),backIn:ol([.31,.01,.66,-.59]),backOut:ol([.33,1.53,.69,.99])};function AT(t,e){if(t)return typeof t=="function"&&Jh()?CT(t,e):tb(t)?ol(t):Array.isArray(t)?t.map(n=>AT(n,e)||hg.easeOut):hg[t]}const gr={x:!1,y:!1};function kT(){return gr.x||gr.y}function RT(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;e&&(i=e.current);const s=(r=n?.[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function IT(t,e){const n=RT(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function F1(t){return e=>{e.pointerType==="touch"||kT()||t(e)}}function M3(t,e,n={}){const[r,i,s]=IT(t,n),o=F1(a=>{const{target:l}=a,u=e(a);if(typeof u!="function"||!l)return;const c=F1(h=>{u(h),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const DT=(t,e)=>e?t===e?!0:DT(t,e.parentElement):!1,nb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,N3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function B3(t){return N3.has(t.tagName)||t.tabIndex!==-1}const al=new WeakSet;function H1(t){return e=>{e.key==="Enter"&&t(e)}}function gp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const F3=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=H1(()=>{if(al.has(n))return;gp(n,"down");const i=H1(()=>{gp(n,"up")}),s=()=>gp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function U1(t){return nb(t)&&!kT()}function H3(t,e,n={}){const[r,i,s]=IT(t,n),o=a=>{const l=a.currentTarget;if(!U1(a)||al.has(l))return;al.add(l);const u=e(a),c=(d,_)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!U1(d)||!al.has(l))&&(al.delete(l),typeof u=="function"&&u(d,{success:_}))},h=d=>{c(d,n.useGlobalTarget||DT(l,d.target))},f=d=>{c(d,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!B3(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",u=>F3(u,i),i)}),s}function U3(t){return t==="x"||t==="y"?gr[t]?null:(gr[t]=!0,()=>{gr[t]=!1}):gr.x||gr.y?null:(gr.x=gr.y=!0,()=>{gr.x=gr.y=!1})}const LT=new Set(["width","height","top","left","right","bottom",...Sa]);let Eh;function j3(){Eh=void 0}const oi={now:()=>(Eh===void 0&&oi.set(rn.isProcessing||BN.useManualTiming?rn.timestamp:performance.now()),Eh),set:t=>{Eh=t,queueMicrotask(j3)}};function rb(t,e){t.indexOf(e)===-1&&t.push(e)}function vd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ib{constructor(){this.subscriptions=[]}add(e){return rb(this.subscriptions,e),()=>vd(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function PT(t,e){return e?t*(1e3/e):0}const j1=30,V3=t=>!isNaN(parseFloat(t));class $3{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=oi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=oi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=V3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ib);const r=this.events[e].add(n);return e==="change"?()=>{r(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=oi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>j1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,j1);return PT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ql(t,e){return new $3(t,e)}function z3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ql(n))}function W3(t,e){const n=bd(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=i3(s[o]);z3(t,o,a)}}function q3(t){return!!(tn(t)&&t.add)}function fg(t,e){const n=t.getValue("willChange");if(q3(n))return n.add(e)}function OT(t){return t.props[uT]}const MT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,G3=1e-7,K3=12;function Y3(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=MT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>G3&&++a<K3);return o}function io(t,e,n,r){if(t===e&&n===r)return Jn;const i=s=>Y3(s,0,1,t,n);return s=>s===0||s===1?s:MT(i(s),e,r)}const NT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,BT=t=>e=>1-t(1-e),FT=io(.33,1.53,.69,.99),sb=BT(FT),HT=NT(sb),UT=t=>(t*=2)<1?.5*sb(t):.5*(2-Math.pow(2,-10*(t-1))),ob=t=>1-Math.sin(Math.acos(t)),jT=BT(ob),VT=NT(ob),$T=t=>/^0[^.\s]+$/u.test(t);function X3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$T(t):!0}const Sl=t=>Math.round(t*1e5)/1e5,ab=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Q3(t){return t==null}const J3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lb=(t,e)=>n=>!!(typeof n=="string"&&J3.test(n)&&n.startsWith(t)||e&&!Q3(n)&&Object.prototype.hasOwnProperty.call(n,e)),zT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(ab);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Z3=t=>Ti(0,255,t),_p={...wa,transform:t=>Math.round(Z3(t))},Ls={test:lb("rgb","red"),parse:zT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+_p.transform(t)+", "+_p.transform(e)+", "+_p.transform(n)+", "+Sl(Wl.transform(r))+")"};function eB(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const dg={test:lb("#"),parse:eB,transform:Ls.transform},Io={test:lb("hsl","hue"),parse:zT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+si.transform(Sl(e))+", "+si.transform(Sl(n))+", "+Sl(Wl.transform(r))+")"},pn={test:t=>Ls.test(t)||dg.test(t)||Io.test(t),parse:t=>Ls.test(t)?Ls.parse(t):Io.test(t)?Io.parse(t):dg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ls.transform(t):Io.transform(t)},tB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nB(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ab))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(tB))===null||n===void 0?void 0:n.length)||0)>0}const WT="number",qT="color",rB="var",iB="var(",V1="${}",sB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(sB,l=>(pn.test(l)?(r.color.push(s),i.push(qT),n.push(pn.parse(l))):l.startsWith(iB)?(r.var.push(s),i.push(rB),n.push(l)):(r.number.push(s),i.push(WT),n.push(parseFloat(l))),++s,V1)).split(V1);return{values:n,split:a,indexes:r,types:i}}function GT(t){return Gl(t).values}function KT(t){const{split:e,types:n}=Gl(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===WT?s+=Sl(i[o]):a===qT?s+=pn.transform(i[o]):s+=i[o]}return s}}const oB=t=>typeof t=="number"?0:t;function aB(t){const e=GT(t);return KT(t)(e.map(oB))}const Zi={test:nB,parse:GT,createTransformer:KT,getAnimatableNone:aB},lB=new Set(["brightness","contrast","saturate","opacity"]);function uB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ab)||[];if(!r)return t;const i=n.replace(r,"");let s=lB.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const cB=/\b([a-z-]*)\(.*?\)/gu,pg={...Zi,getAnimatableNone:t=>{const e=t.match(cB);return e?e.map(uB).join(" "):t}},hB={...G_,color:pn,backgroundColor:pn,outlineColor:pn,fill:pn,stroke:pn,borderColor:pn,borderTopColor:pn,borderRightColor:pn,borderBottomColor:pn,borderLeftColor:pn,filter:pg,WebkitFilter:pg},ub=t=>hB[t];function YT(t,e){let n=ub(t);return n!==pg&&(n=Zi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fB=new Set(["auto","none","0"]);function dB(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!fB.has(s)&&Gl(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=YT(n,i)}const $1=t=>t===wa||t===Le,z1=(t,e)=>parseFloat(t.split(", ")[e]),W1=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return z1(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?z1(s[1],t):0}},pB=new Set(["x","y","z"]),mB=Sa.filter(t=>!pB.has(t));function gB(t){const e=[];return mB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ua={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:W1(4,13),y:W1(5,14)};ua.translateX=ua.x;ua.translateY=ua.y;const js=new Set;let mg=!1,gg=!1;function XT(){if(gg){const t=Array.from(js).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=gB(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gg=!1,mg=!1,js.forEach(t=>t.complete()),js.clear()}function QT(){js.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(gg=!0)})}function _B(){QT(),XT()}class cb{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(js.add(this),mg||(mg=!0,wt.read(QT),wt.resolveKeyframes(XT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),js.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,js.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const JT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),bB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yB(t){const e=bB.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function ZT(t,e,n=1){const[r,i]=yB(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return JT(o)?parseFloat(o):o}return q_(i)?ZT(i,e,n+1):i}const eA=t=>e=>e.test(t),vB={test:t=>t==="auto",parse:t=>t},tA=[wa,Le,si,Fi,c3,u3,vB],q1=t=>tA.find(eA(t));class nA extends cb{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),q_(u))){const c=ZT(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!LT.has(r)||e.length!==2)return;const[i,s]=e,o=q1(i),a=q1(s);if(o!==a)if($1(o)&&$1(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)X3(e[i])&&r.push(i);r.length&&dB(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ua[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=ua[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const G1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zi.test(t)||t==="0")&&!t.startsWith("url("));function EB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function SB(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=G1(i,e),a=G1(s,e);return!o||!a?!1:EB(t)||(n==="spring"||yd(n))&&r}const wB=t=>t!==null;function Ed(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(wB),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const xB=40;class rA{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=oi.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>xB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&_B(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=oi.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!SB(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Ed(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Tt=(t,e,n)=>t+(e-t)*n;function bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function CB({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=bp(l,a,t+1/3),s=bp(l,a,t),o=bp(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Zh(t,e){return n=>n>0?e:t}const yp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},TB=[dg,Ls,Io],AB=t=>TB.find(e=>e.test(t));function K1(t){const e=AB(t);if(!e)return!1;let n=e.parse(t);return e===Io&&(n=CB(n)),n}const Y1=(t,e)=>{const n=K1(t),r=K1(e);if(!n||!r)return Zh(t,e);const i={...n};return s=>(i.red=yp(n.red,r.red,s),i.green=yp(n.green,r.green,s),i.blue=yp(n.blue,r.blue,s),i.alpha=Tt(n.alpha,r.alpha,s),Ls.transform(i))},kB=(t,e)=>n=>e(t(n)),zu=(...t)=>t.reduce(kB),_g=new Set(["none","hidden"]);function RB(t,e){return _g.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function IB(t,e){return n=>Tt(t,e,n)}function hb(t){return typeof t=="number"?IB:typeof t=="string"?q_(t)?Zh:pn.test(t)?Y1:PB:Array.isArray(t)?iA:typeof t=="object"?pn.test(t)?Y1:DB:Zh}function iA(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>hb(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function DB(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hb(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function LB(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const PB=(t,e)=>{const n=Zi.createTransformer(e),r=Gl(t),i=Gl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_g.has(t)&&!i.values.length||_g.has(e)&&!r.values.length?RB(t,e):zu(iA(LB(r,i),i.values),n):Zh(t,e)};function sA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Tt(t,e,n):hb(t)(t,e)}const OB=5;function oA(t,e,n){const r=Math.max(e-OB,0);return PT(n-t(r),e-r)}const It={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vp=.001;function MB({duration:t=It.duration,bounce:e=It.bounce,velocity:n=It.velocity,mass:r=It.mass}){let i,s,o=1-e;o=Ti(It.minDamping,It.maxDamping,o),t=Ti(It.minDuration,It.maxDuration,ii(t)),o<1?(i=u=>{const c=u*o,h=c*t,f=c-n,d=bg(u,o),_=Math.exp(-h);return vp-f/d*_},s=u=>{const h=u*o*t,f=h*n+n,d=Math.pow(o,2)*Math.pow(u,2)*t,_=Math.exp(-h),b=bg(Math.pow(u,2),o);return(-i(u)+vp>0?-1:1)*((f-d)*_)/b}):(i=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-vp+c*h},s=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=BB(i,s,a);if(t=ri(t),isNaN(l))return{stiffness:It.stiffness,damping:It.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const NB=12;function BB(t,e,n){let r=n;for(let i=1;i<NB;i++)r=r-t(r)/e(r);return r}function bg(t,e){return t*Math.sqrt(1-e*e)}const FB=["duration","bounce"],HB=["stiffness","damping","mass"];function X1(t,e){return e.some(n=>t[n]!==void 0)}function UB(t){let e={velocity:It.velocity,stiffness:It.stiffness,damping:It.damping,mass:It.mass,isResolvedFromDuration:!1,...t};if(!X1(t,HB)&&X1(t,FB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ti(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:It.mass,stiffness:i,damping:s}}else{const n=MB(t);e={...e,...n,mass:It.mass},e.isResolvedFromDuration=!0}return e}function fb(t=It.visualDuration,e=It.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:d}=UB({...n,velocity:-ii(n.velocity||0)}),_=f||0,b=u/(2*Math.sqrt(l*c)),p=o-s,m=ii(Math.sqrt(l/c)),g=Math.abs(p)<5;r||(r=g?It.restSpeed.granular:It.restSpeed.default),i||(i=g?It.restDelta.granular:It.restDelta.default);let y;if(b<1){const S=bg(m,b);y=E=>{const C=Math.exp(-b*m*E);return o-C*((_+b*m*p)/S*Math.sin(S*E)+p*Math.cos(S*E))}}else if(b===1)y=S=>o-Math.exp(-m*S)*(p+(_+m*p)*S);else{const S=m*Math.sqrt(b*b-1);y=E=>{const C=Math.exp(-b*m*E),x=Math.min(S*E,300);return o-C*((_+b*m*p)*Math.sinh(x)+S*p*Math.cosh(x))/S}}const v={calculatedDuration:d&&h||null,next:S=>{const E=y(S);if(d)a.done=S>=h;else{let C=0;b<1&&(C=S===0?ri(_):oA(y,S,E));const x=Math.abs(C)<=r,A=Math.abs(o-E)<=i;a.done=x&&A}return a.value=a.done?o:E,a},toString:()=>{const S=Math.min(eb(v),Qh),E=CT(C=>v.next(S*C).value,S,30);return S+"ms "+E}};return v}function Q1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],f={done:!1,value:h},d=x=>a!==void 0&&x<a||l!==void 0&&x>l,_=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let b=n*e;const p=h+b,m=o===void 0?p:o(p);m!==p&&(b=m-h);const g=x=>-b*Math.exp(-x/r),y=x=>m+g(x),v=x=>{const A=g(x),D=y(x);f.done=Math.abs(A)<=u,f.value=f.done?m:D};let S,E;const C=x=>{d(f.value)&&(S=x,E=fb({keyframes:[f.value,_(f.value)],velocity:oA(y,x,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return C(0),{calculatedDuration:null,next:x=>{let A=!1;return!E&&S===void 0&&(A=!0,v(x),C(x)),S!==void 0&&x>=S?E.next(x-S):(!A&&v(x),f)}}}const jB=io(.42,0,1,1),VB=io(0,0,.58,1),aA=io(.42,0,.58,1),lA=t=>Array.isArray(t)&&typeof t[0]!="number",$B={linear:Jn,easeIn:jB,easeInOut:aA,easeOut:VB,circIn:ob,circInOut:VT,circOut:jT,backIn:sb,backInOut:HT,backOut:FT,anticipate:UT},J1=t=>{if(tb(t)){iT(t.length===4);const[e,n,r,i]=t;return io(e,n,r,i)}else if(typeof t=="string")return $B[t];return t};function zB(t,e,n){const r=[],i=n||sA,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Jn:e;a=zu(l,a)}r.push(a)}return r}function WB(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(iT(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=zB(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=Gs(t[h],t[h+1],c);return a[h](f)};return n?c=>u(Ti(t[0],t[s-1],c)):u}function uA(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gs(0,e,r);t.push(Tt(n,1,i))}}function cA(t){const e=[0];return uA(e,t.length-1),e}function qB(t,e){return t.map(n=>n*e)}function GB(t,e){return t.map(()=>e||aA).splice(0,t.length-1)}function ef({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=lA(r)?r.map(J1):J1(r),s={done:!1,value:e[0]},o=qB(n&&n.length===e.length?n:cA(e),t),a=WB(o,e,{ease:Array.isArray(i)?i:GB(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const KB=t=>{const e=({timestamp:n})=>t(n);return{start:()=>wt.update(e,!0),stop:()=>Ji(e),now:()=>rn.isProcessing?rn.timestamp:oi.now()}},YB={decay:Q1,inertia:Q1,tween:ef,keyframes:ef,spring:fb},XB=t=>t/100;class db extends rA{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||cb,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=yd(n)?n:YB[n]||ef;let l,u;a!==ef&&typeof e[0]!="number"&&(l=zu(XB,sA(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=eb(c));const{calculatedDuration:h}=c,f=h+i,d=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:d,repeatType:_,repeatDelay:b,onUpdate:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?m<0:m>c;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let y=this.currentTime,v=s;if(d){const x=Math.min(this.currentTime,c)/h;let A=Math.floor(x),D=x%1;!D&&x>=1&&(D=1),D===1&&A--,A=Math.min(A,d+1),!!(A%2)&&(_==="reverse"?(D=1-D,b&&(D-=b/h)):_==="mirror"&&(v=o)),y=Ti(0,1,D)*h}const S=g?{done:!1,value:l[0]}:v.next(y);a&&(S.value=a(S.value));let{done:E}=S;!g&&u!==null&&(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return C&&i!==void 0&&(S.value=Ed(l,this.options,i)),p&&p(S.value),C&&this.finish(),S}get duration(){const{resolved:e}=this;return e?ii(e.calculatedDuration):0}get time(){return ii(this.currentTime)}set time(e){e=ri(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ii(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=KB,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const QB=new Set(["opacity","clipPath","filter","transform"]);function JB(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=AT(a,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const ZB=H_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tf=10,e6=2e4;function t6(t){return yd(t.type)||t.type==="spring"||!TT(t.ease)}function n6(t,e){const n=new db({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<e6;)r=n.sample(s),i.push(r.value),s+=tf;return{times:void 0,keyframes:i,duration:s-tf,ease:"linear"}}const hA={anticipate:UT,backInOut:HT,circInOut:VT};function r6(t){return t in hA}class Z1 extends rA{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new nA(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Jh()&&r6(s)&&(s=hA[s]),t6(this.options)){const{onComplete:h,onUpdate:f,motionValue:d,element:_,...b}=this.options,p=n6(e,b);e=p.keyframes,e.length===1&&(e[1]=e[0]),r=p.duration,i=p.times,s=p.ease,o="keyframes"}const c=JB(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(B1(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:h}=this.options;a.set(Ed(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ii(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ii(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ri(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Jn;const{animation:r}=n;B1(r,e)}return Jn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:h,element:f,...d}=this.options,_=new db({...d,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),b=ri(this.time);u.setWithVelocity(_.sample(b-tf).value,_.sample(b).value,tf)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return ZB()&&r&&QB.has(r)&&!l&&!u&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const i6={type:"spring",stiffness:500,damping:25,restSpeed:10},s6=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),o6={type:"keyframes",duration:.8},a6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l6=(t,{keyframes:e})=>e.length>2?o6:ro.has(t)?t.startsWith("scale")?s6(e[1]):i6:a6;function u6({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const pb=(t,e,n,r={},i,s)=>o=>{const a=Z_(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ri(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};u6(a)||(c={...c,...l6(t,c)}),c.duration&&(c.duration=ri(c.duration)),c.repeatDelay&&(c.repeatDelay=ri(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=Ed(c.keyframes,a);if(f!==void 0)return wt.update(()=>{c.onUpdate(f),c.onComplete()}),new xT([])}return!s&&Z1.supports(c)?new Z1(c):new db(c)};function c6({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function mb(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),d=l[h];if(d===void 0||c&&c6(c,h))continue;const _={delay:n,...Z_(o||{},h)};let b=!1;if(window.MotionHandoffAnimation){const m=OT(t);if(m){const g=window.MotionHandoffAnimation(m,h,wt);g!==null&&(_.startTime=g,b=!0)}}fg(t,h),f.start(pb(h,f,d,t.shouldReduceMotion&&LT.has(h)?{type:!1}:_,t,b));const p=f.animation;p&&u.push(p)}return a&&Promise.all(u).then(()=>{wt.update(()=>{a&&W3(t,a)})}),u}function yg(t,e,n={}){var r;const i=bd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(mb(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return h6(t,e,c+u,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function h6(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(f6).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(yg(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function f6(t,e){return t.sortNodePosition(e)}function d6(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>yg(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=yg(t,e,n);else{const i=typeof e=="function"?bd(t,e,n.custom):e;r=Promise.all(mb(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const p6=j_.length;function fA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<p6;n++){const r=j_[n],i=t.props[r];(zl(i)||i===!1)&&(e[r]=i)}return e}const m6=[...U_].reverse(),g6=U_.length;function _6(t){return e=>Promise.all(e.map(({animation:n,options:r})=>d6(t,n,r)))}function b6(t){let e=_6(t),n=ev(),r=!0;const i=l=>(u,c)=>{var h;const f=bd(t,c,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:_,...b}=f;u={...u,...b,..._}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=fA(t.parent)||{},h=[],f=new Set;let d={},_=1/0;for(let p=0;p<g6;p++){const m=m6[p],g=n[m],y=u[m]!==void 0?u[m]:c[m],v=zl(y),S=m===l?g.isActive:null;S===!1&&(_=p);let E=y===c[m]&&y!==u[m]&&v;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),g.protectedKeys={...d},!g.isActive&&S===null||!y&&!g.prevProp||gd(y)||typeof y=="boolean")continue;const C=y6(g.prevProp,y);let x=C||m===l&&g.isActive&&!E&&v||p>_&&v,A=!1;const D=Array.isArray(y)?y:[y];let M=D.reduce(i(m),{});S===!1&&(M={});const{prevResolvedValues:H={}}=g,B={...H,...M},$=ee=>{x=!0,f.has(ee)&&(A=!0,f.delete(ee)),g.needsAnimating[ee]=!0;const X=t.getValue(ee);X&&(X.liveStyle=!1)};for(const ee in B){const X=M[ee],P=H[ee];if(d.hasOwnProperty(ee))continue;let I=!1;cg(X)&&cg(P)?I=!wT(X,P):I=X!==P,I?X!=null?$(ee):f.add(ee):X!==void 0&&f.has(ee)?$(ee):g.protectedKeys[ee]=!0}g.prevProp=y,g.prevResolvedValues=M,g.isActive&&(d={...d,...M}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(E&&C)||A)&&h.push(...D.map(ee=>({animation:ee,options:{type:m}})))}if(f.size){const p={};f.forEach(m=>{const g=t.getBaseTarget(m),y=t.getValue(m);y&&(y.liveStyle=!0),p[m]=g??null}),h.push({animation:p})}let b=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(h):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(f=>{var d;return(d=f.animationState)===null||d===void 0?void 0:d.setActive(l,u)}),n[l].isActive=u;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=ev(),r=!0}}}function y6(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wT(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ev(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class hs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class v6 extends hs{constructor(e){super(e),e.animationState||(e.animationState=b6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();gd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let E6=0;class S6 extends hs{constructor(){super(...arguments),this.id=E6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const w6={animation:{Feature:v6},exit:{Feature:S6}};function Kl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wu(t){return{point:{x:t.pageX,y:t.pageY}}}const x6=t=>e=>nb(e)&&t(e,Wu(e));function wl(t,e,n,r){return Kl(t,e,x6(n),r)}const tv=(t,e)=>Math.abs(t-e);function C6(t,e){const n=tv(t.x,e.x),r=tv(t.y,e.y);return Math.sqrt(n**2+r**2)}class dA{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Sp(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=C6(h.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:_}=h,{timestamp:b}=rn;this.history.push({..._,timestamp:b});const{onStart:p,onMove:m}=this.handlers;f||(p&&p(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ep(f,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:d,onSessionEnd:_,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Sp(h.type==="pointercancel"?this.lastMoveEventInfo:Ep(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(h,p),_&&_(h,p)},!nb(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Wu(e),a=Ep(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=rn;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,Sp(a,this.history)),this.removeListeners=zu(wl(this.contextWindow,"pointermove",this.handlePointerMove),wl(this.contextWindow,"pointerup",this.handlePointerUp),wl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ji(this.updatePoint)}}function Ep(t,e){return e?{point:e(t.point)}:t}function nv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sp({point:t},e){return{point:t,delta:nv(t,pA(e)),offset:nv(t,T6(e)),velocity:A6(e,.1)}}function T6(t){return t[0]}function pA(t){return t[t.length-1]}function A6(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=pA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ri(e)));)n--;if(!r)return{x:0,y:0};const s=ii(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const mA=1e-4,k6=1-mA,R6=1+mA,gA=.01,I6=0-gA,D6=0+gA;function er(t){return t.max-t.min}function L6(t,e,n){return Math.abs(t-e)<=n}function rv(t,e,n,r=.5){t.origin=r,t.originPoint=Tt(e.min,e.max,t.origin),t.scale=er(n)/er(e),t.translate=Tt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=k6&&t.scale<=R6||isNaN(t.scale))&&(t.scale=1),(t.translate>=I6&&t.translate<=D6||isNaN(t.translate))&&(t.translate=0)}function xl(t,e,n,r){rv(t.x,e.x,n.x,r?r.originX:void 0),rv(t.y,e.y,n.y,r?r.originY:void 0)}function iv(t,e,n){t.min=n.min+e.min,t.max=t.min+er(e)}function P6(t,e,n){iv(t.x,e.x,n.x),iv(t.y,e.y,n.y)}function sv(t,e,n){t.min=e.min-n.min,t.max=t.min+er(e)}function Cl(t,e,n){sv(t.x,e.x,n.x),sv(t.y,e.y,n.y)}function O6(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Tt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Tt(n,t,r.max):Math.min(t,n)),t}function ov(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M6(t,{top:e,left:n,bottom:r,right:i}){return{x:ov(t.x,n,i),y:ov(t.y,e,r)}}function av(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function N6(t,e){return{x:av(t.x,e.x),y:av(t.y,e.y)}}function B6(t,e){let n=.5;const r=er(t),i=er(e);return i>r?n=Gs(e.min,e.max-r,t.min):r>i&&(n=Gs(t.min,t.max-i,e.min)),Ti(0,1,n)}function F6(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const vg=.35;function H6(t=vg){return t===!1?t=0:t===!0&&(t=vg),{x:lv(t,"left","right"),y:lv(t,"top","bottom")}}function lv(t,e,n){return{min:uv(t,e),max:uv(t,n)}}function uv(t,e){return typeof t=="number"?t:t[e]||0}const cv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Do=()=>({x:cv(),y:cv()}),hv=()=>({min:0,max:0}),Rt=()=>({x:hv(),y:hv()});function rr(t){return[t("x"),t("y")]}function _A({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function U6({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function j6(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function wp(t){return t===void 0||t===1}function Eg({scale:t,scaleX:e,scaleY:n}){return!wp(t)||!wp(e)||!wp(n)}function Ss(t){return Eg(t)||bA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function bA(t){return fv(t.x)||fv(t.y)}function fv(t){return t&&t!=="0%"}function nf(t,e,n){const r=t-n,i=e*r;return n+i}function dv(t,e,n,r,i){return i!==void 0&&(t=nf(t,i,r)),nf(t,n,r)+e}function Sg(t,e=0,n=1,r,i){t.min=dv(t.min,e,n,r,i),t.max=dv(t.max,e,n,r,i)}function yA(t,{x:e,y:n}){Sg(t.x,e.translate,e.scale,e.originPoint),Sg(t.y,n.translate,n.scale,n.originPoint)}const pv=.999999999999,mv=1.0000000000001;function V6(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Po(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,yA(t,o)),r&&Ss(s.latestValues)&&Po(t,s.latestValues))}e.x<mv&&e.x>pv&&(e.x=1),e.y<mv&&e.y>pv&&(e.y=1)}function Lo(t,e){t.min=t.min+e,t.max=t.max+e}function gv(t,e,n,r,i=.5){const s=Tt(t.min,t.max,i);Sg(t,e,n,s,r)}function Po(t,e){gv(t.x,e.x,e.scaleX,e.scale,e.originX),gv(t.y,e.y,e.scaleY,e.scale,e.originY)}function vA(t,e){return _A(j6(t.getBoundingClientRect(),e))}function $6(t,e,n){const r=vA(t,n),{scroll:i}=e;return i&&(Lo(r.x,i.offset.x),Lo(r.y,i.offset.y)),r}const EA=({current:t})=>t?t.ownerDocument.defaultView:null,z6=new WeakMap;class W6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wu(c).point)},s=(c,h)=>{const{drag:f,dragPropagation:d,onDragStart:_}=this.getProps();if(f&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=U3(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rr(p=>{let m=this.getAxisMotionValue(p).get()||0;if(si.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const y=g.layout.layoutBox[p];y&&(m=er(y)*(parseFloat(m)/100))}}this.originPoint[p]=m}),_&&wt.postRender(()=>_(c,h)),fg(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:f,dragDirectionLock:d,onDirectionLock:_,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:p}=h;if(d&&this.currentDirection===null){this.currentDirection=q6(p),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,p),this.updateAxis("y",h.point,p),this.visualElement.render(),b&&b(c,h)},a=(c,h)=>this.stop(c,h),l=()=>rr(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new dA(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:EA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&wt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Sc(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=O6(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ro(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=M6(i.layoutBox,n):this.constraints=!1,this.elastic=H6(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=F6(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ro(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$6(r,i.root,this.visualElement.getTransformPagePoint());let o=N6(i.layout.layoutBox,s);if(n){const a=n(U6(o));this.hasMutatedConstraints=!!a,a&&(o=_A(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=rr(c=>{if(!Sc(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const f=i?200:1e6,d=i?40:1e7,_={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,_)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return fg(this.visualElement,e),r.start(pb(e,r,0,n,this.visualElement,!1))}stopAnimation(){rr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){rr(n=>{const{drag:r}=this.getProps();if(!Sc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Tt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ro(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};rr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=B6({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),rr(o=>{if(!Sc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Tt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;z6.set(this.visualElement,this);const e=this.visualElement.current,n=wl(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ro(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),wt.read(r);const o=Kl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(rr(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=vg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Sc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function q6(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class G6 extends hs{constructor(e){super(e),this.removeGroupControls=Jn,this.removeListeners=Jn,this.controls=new W6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _v=t=>(e,n)=>{t&&wt.postRender(()=>t(e,n))};class K6 extends hs{constructor(){super(...arguments),this.removePointerDownListener=Jn}onPointerDown(e){this.session=new dA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_v(e),onStart:_v(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&wt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=wl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Le.test(t))t=parseFloat(t);else return t;const n=bv(t,e.target.x),r=bv(t,e.target.y);return`${n}% ${r}%`}},Y6={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zi.parse(t);if(i.length>5)return r;const s=Zi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Tt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class X6 extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;v3(Q6),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Sh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||wt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function SA(t){const[e,n]=nT(),r=R.useContext(N_);return L.jsx(X6,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(cT),isPresent:e,safeToRemove:n})}const Q6={borderRadius:{...Wa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wa,borderTopRightRadius:Wa,borderBottomLeftRadius:Wa,borderBottomRightRadius:Wa,boxShadow:Y6};function wA(t,e,n){const r=tn(t)?t:ql(t);return r.start(pb("",r,e,n)),r.animation}function xA(t){return t instanceof SVGElement&&t.tagName!=="svg"}const J6=(t,e)=>t.depth-e.depth;class Z6{constructor(){this.children=[],this.isDirty=!1}add(e){rb(this.children,e),this.isDirty=!0}remove(e){vd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J6),this.isDirty=!1,this.children.forEach(e)}}function e4(t,e){const n=oi.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ji(r),t(s-e))};return wt.read(r,!0),()=>Ji(r)}const CA=["TopLeft","TopRight","BottomLeft","BottomRight"],t4=CA.length,yv=t=>typeof t=="string"?parseFloat(t):t,vv=t=>typeof t=="number"||Le.test(t);function n4(t,e,n,r,i,s){i?(t.opacity=Tt(0,n.opacity!==void 0?n.opacity:1,r4(r)),t.opacityExit=Tt(e.opacity!==void 0?e.opacity:1,0,i4(r))):s&&(t.opacity=Tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<t4;o++){const a=`border${CA[o]}Radius`;let l=Ev(e,a),u=Ev(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||vv(l)===vv(u)?(t[a]=Math.max(Tt(yv(l),yv(u),r),0),(si.test(u)||si.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Tt(e.rotate||0,n.rotate||0,r))}function Ev(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const r4=TA(0,.5,jT),i4=TA(.5,.95,Jn);function TA(t,e,n){return r=>r<t?0:r>e?1:n(Gs(t,e,r))}function Sv(t,e){t.min=e.min,t.max=e.max}function tr(t,e){Sv(t.x,e.x),Sv(t.y,e.y)}function wv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xv(t,e,n,r,i){return t-=e,t=nf(t,1/n,r),i!==void 0&&(t=nf(t,1/i,r)),t}function s4(t,e=0,n=1,r=.5,i,s=t,o=t){if(si.test(e)&&(e=parseFloat(e),e=Tt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Tt(s.min,s.max,r);t===s&&(a-=e),t.min=xv(t.min,e,n,a,i),t.max=xv(t.max,e,n,a,i)}function Cv(t,e,[n,r,i],s,o){s4(t,e[n],e[r],e[i],e.scale,s,o)}const o4=["x","scaleX","originX"],a4=["y","scaleY","originY"];function Tv(t,e,n,r){Cv(t.x,e,o4,n?n.x:void 0,r?r.x:void 0),Cv(t.y,e,a4,n?n.y:void 0,r?r.y:void 0)}function Av(t){return t.translate===0&&t.scale===1}function AA(t){return Av(t.x)&&Av(t.y)}function kv(t,e){return t.min===e.min&&t.max===e.max}function l4(t,e){return kv(t.x,e.x)&&kv(t.y,e.y)}function Rv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function kA(t,e){return Rv(t.x,e.x)&&Rv(t.y,e.y)}function Iv(t){return er(t.x)/er(t.y)}function Dv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class u4{constructor(){this.members=[]}add(e){rb(this.members,e),e.scheduleRender()}remove(e){if(vd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function c4(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:f,skewX:d,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),d&&(r+=`skewX(${d}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const ws={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ll=typeof window<"u"&&window.MotionDebug!==void 0,xp=["","X","Y","Z"],h4={visibility:"hidden"},Lv=1e3;let f4=0;function Cp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function RA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=OT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&RA(r)}function IA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=f4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ll&&(ws.totalNodes=ws.resolvedTargetDeltas=ws.recalculatedProjection=0),this.nodes.forEach(m4),this.nodes.forEach(v4),this.nodes.forEach(E4),this.nodes.forEach(g4),ll&&window.MotionDebug.record(ws)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Z6)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ib),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xA(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=e4(f,250),Sh.hasAnimatedSinceResize&&(Sh.hasAnimatedSinceResize=!1,this.nodes.forEach(Ov))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:d,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||c.getDefaultTransition()||T4,{onLayoutAnimationStart:p,onLayoutAnimationComplete:m}=c.getProps(),g=!this.targetLayout||!kA(this.targetLayout,_)||d,y=!f&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const v={...Z_(b,"layout"),onPlay:p,onComplete:m};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else f||Ov(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ji(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Pv);return}this.isUpdating||this.nodes.forEach(b4),this.isUpdating=!1,this.nodes.forEach(y4),this.nodes.forEach(d4),this.nodes.forEach(p4),this.clearAllSnapshots();const a=oi.now();rn.delta=Ti(0,1e3/60,a-rn.timestamp),rn.timestamp=a,rn.isProcessing=!0,mp.update.process(rn),mp.preRender.process(rn),mp.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_4),this.sharedNodes.forEach(w4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!AA(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Ss(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),A4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Rt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(k4))){const{scroll:c}=this.root;c&&(Lo(l.x,c.offset.x),Lo(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=Rt();if(tr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;c!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&tr(l,o),Lo(l.x,h.offset.x),Lo(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Rt();tr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Po(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ss(c.latestValues)&&Po(l,c.latestValues)}return Ss(this.latestValues)&&Po(l,this.latestValues),l}removeTransform(o){const a=Rt();tr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ss(u.latestValues))continue;Eg(u.latestValues)&&u.updateSnapshot();const c=Rt(),h=u.measurePageBox();tr(c,h),Tv(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ss(this.latestValues)&&Tv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=rn.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),Cl(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rt(),this.targetWithTransforms=Rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),yA(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),Cl(this.relativeTargetOrigin,this.target,d.target),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ll&&ws.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Eg(this.parent.latestValues)||bA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;tr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;V6(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Rt());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wv(this.prevProjectionDelta.x,this.projectionDelta.x),wv(this.prevProjectionDelta.y,this.projectionDelta.y)),xl(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!Dv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),ll&&ws.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Do(),this.projectionDelta=Do(),this.projectionDeltaWithTransform=Do()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=Do();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Rt(),d=l?l.source:void 0,_=this.layout?this.layout.source:void 0,b=d!==_,p=this.getStack(),m=!p||p.members.length<=1,g=!!(b&&!m&&this.options.crossfade===!0&&!this.path.some(C4));this.animationProgress=0;let y;this.mixTargetDelta=v=>{const S=v/1e3;Mv(h.x,o.x,S),Mv(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x4(this.relativeTarget,this.relativeTargetOrigin,f,S),y&&l4(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Rt()),tr(y,this.relativeTarget)),b&&(this.animationValues=c,n4(c,u,this.latestValues,S,g,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ji(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{Sh.hasAnimatedSinceResize=!0,this.currentAnimation=wA(0,Lv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Lv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&DA(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Rt();const h=er(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=er(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}tr(a,l),Po(a,c),xl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new u4),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Cp("z",o,u,this.animationValues);for(let c=0;c<xp.length;c++)Cp(`rotate${xp[c]}`,o,u,this.animationValues),Cp(`skew${xp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return h4;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=vh(o?.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=vh(o?.pointerEvents)||""),this.hasProjected&&!Ss(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1),b}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=c4(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:d,y:_}=this.projectionDelta;u.transformOrigin=`${d.origin*100}% ${_.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in Xh){if(f[b]===void 0)continue;const{correct:p,applyTo:m}=Xh[b],g=u.transform==="none"?f[b]:p(f[b],h);if(m){const y=m.length;for(let v=0;v<y;v++)u[m[v]]=g}else u[b]=g}return this.options.layoutId&&(u.pointerEvents=h===this?vh(o?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Pv),this.root.sharedNodes.clear()}}}function d4(t){t.updateLayout()}function p4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?rr(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],d=er(f);f.min=r[h].min,f.max=f.min+d}):DA(s,n.layoutBox,r)&&rr(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],d=er(r[h]);f.max=f.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+d)});const a=Do();xl(a,r,n.layoutBox);const l=Do();o?xl(l,t.applyTransform(i,!0),n.measuredBox):xl(l,r,n.layoutBox);const u=!AA(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:d}=h;if(f&&d){const _=Rt();Cl(_,n.layoutBox,f.layoutBox);const b=Rt();Cl(b,r,d.layoutBox),kA(_,b)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function m4(t){ll&&ws.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function g4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _4(t){t.clearSnapshot()}function Pv(t){t.clearMeasurements()}function b4(t){t.isLayoutDirty=!1}function y4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ov(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function v4(t){t.resolveTargetDelta()}function E4(t){t.calcProjection()}function S4(t){t.resetSkewAndRotation()}function w4(t){t.removeLeadSnapshot()}function Mv(t,e,n){t.translate=Tt(e.translate,0,n),t.scale=Tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Nv(t,e,n,r){t.min=Tt(e.min,n.min,r),t.max=Tt(e.max,n.max,r)}function x4(t,e,n,r){Nv(t.x,e.x,n.x,r),Nv(t.y,e.y,n.y,r)}function C4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const T4={duration:.45,ease:[.4,0,.1,1]},Bv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Fv=Bv("applewebkit/")&&!Bv("chrome/")?Math.round:Jn;function Hv(t){t.min=Fv(t.min),t.max=Fv(t.max)}function A4(t){Hv(t.x),Hv(t.y)}function DA(t,e,n){return t==="position"||t==="preserve-aspect"&&!L6(Iv(e),Iv(n),.2)}function k4(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const R4=IA({attachResizeListener:(t,e)=>Kl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tp={current:void 0},LA=IA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tp.current){const t=new R4({});t.mount(window),t.setOptions({layoutScroll:!0}),Tp.current=t}return Tp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),I4={pan:{Feature:K6},drag:{Feature:G6,ProjectionNode:LA,MeasureLayout:SA}};function Uv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&wt.postRender(()=>s(e,Wu(e)))}class D4 extends hs{mount(){const{current:e}=this.node;e&&(this.unmount=M3(e,n=>(Uv(this.node,n,"Start"),r=>Uv(this.node,r,"End"))))}unmount(){}}class L4 extends hs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zu(Kl(this.node.current,"focus",()=>this.onFocus()),Kl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jv(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&wt.postRender(()=>s(e,Wu(e)))}class P4 extends hs{mount(){const{current:e}=this.node;e&&(this.unmount=H3(e,n=>(jv(this.node,n,"Start"),(r,{success:i})=>jv(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wg=new WeakMap,Ap=new WeakMap,O4=t=>{const e=wg.get(t.target);e&&e(t)},M4=t=>{t.forEach(O4)};function N4({root:t,...e}){const n=t||document;Ap.has(n)||Ap.set(n,{});const r=Ap.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(M4,{root:t,...e})),r[i]}function B4(t,e,n){const r=N4(e);return wg.set(t,n),r.observe(t),()=>{wg.delete(t),r.unobserve(t)}}const F4={some:0,all:1};class H4 extends hs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:F4[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=u?c:h;f&&f(l)};return B4(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(U4(e,n))&&this.startObserver()}unmount(){}}function U4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const j4={inView:{Feature:H4},tap:{Feature:P4},focus:{Feature:L4},hover:{Feature:D4}},V4={layout:{ProjectionNode:LA,MeasureLayout:SA}},xg={current:null},PA={current:!1};function $4(){if(PA.current=!0,!!F_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xg.current=t.matches;t.addListener(e),e()}else xg.current=!1}const z4=[...tA,pn,Zi],W4=t=>z4.find(eA(t)),ca=new WeakMap;function q4(t,e,n){for(const r in e){const i=e[r],s=n[r];if(tn(i))t.addValue(r,i);else if(tn(s))t.addValue(r,ql(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ql(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Vv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class OA{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=oi.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,wt.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=_d(n),this.isVariantNode=lT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in f){const _=f[d];l[d]!==void 0&&tn(_)&&_.set(l[d],!1)}}mount(e){this.current=e,ca.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),PA.current||$4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ca.delete(this.current),this.projection&&this.projection.unmount(),Ji(this.notifyUpdate),Ji(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ro.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in la){const n=la[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Vv.length;r++){const i=Vv[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=q4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ql(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(JT(i)||$T(i))?i=parseFloat(i):!W4(i)&&Zi.test(n)&&(i=YT(e,n)),this.setBaseTarget(e,tn(i)?i.get():i)),tn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=W_(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!tn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ib),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class MA extends OA{constructor(){super(...arguments),this.KeyframeResolver=nA}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;tn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function G4(t){return window.getComputedStyle(t)}class NA extends MA{constructor(){super(...arguments),this.type="html",this.renderInstance=_T}readValueFromInstance(e,n){if(ro.has(n)){const r=ub(n);return r&&r.default||0}else{const r=G4(e),i=(pT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vA(e,n)}build(e,n,r){K_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return J_(e,n,r)}}class BA extends MA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ro.has(n)){const r=ub(n);return r&&r.default||0}return n=bT.has(n)?n:V_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return ET(e,n,r)}build(e,n,r){Y_(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){yT(e,n,r,i)}mount(e){this.isSVGTag=Q_(e.tagName),super.mount(e)}}const K4=(t,e)=>z_(t)?new BA(e):new NA(e,{allowProjection:t!==R.Fragment}),Y4=R3({...w6,...j4,...I4,...V4},K4),xr=zN(Y4);function X4(t){return R.useEffect(()=>()=>t(),[])}const Q4=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function FA(t,e){return lA(t)?t[Q4(0,t.length,e)]:t}function gb(t){return typeof t=="object"&&!Array.isArray(t)}function HA(t,e,n,r){return typeof t=="string"&&gb(e)?RT(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function J4(t,e,n){return t*(e+1)}function $v(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}function Z4(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(vd(t,i),r--)}}function e5(t,e,n,r,i,s){Z4(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Tt(i,s,r[o]),easing:FA(n,o)})}function t5(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function n5(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const r5="easeInOut";function i5(t,{defaultTransition:e={},...n}={},r,i){const s=e.duration||.3,o=new Map,a=new Map,l={},u=new Map;let c=0,h=0,f=0;for(let d=0;d<t.length;d++){const _=t[d];if(typeof _=="string"){u.set(_,h);continue}else if(!Array.isArray(_)){u.set(_.name,$v(h,_.at,c,u));continue}let[b,p,m={}]=_;m.at!==void 0&&(h=$v(h,m.at,c,u));let g=0;const y=(v,S,E,C=0,x=0)=>{const A=s5(v),{delay:D=0,times:M=cA(A),type:H="keyframes",repeat:B,repeatType:$,repeatDelay:G=0,...Z}=S;let{ease:ee=e.ease||"easeOut",duration:X}=S;const P=typeof D=="function"?D(C,x):D,I=A.length,z=yd(H)?H:i?.[H];if(I<=2&&z){let re=100;if(I===2&&l5(A)){const F=A[1]-A[0];re=Math.abs(F)}const oe={...Z};X!==void 0&&(oe.duration=ri(X));const q=L3(oe,re,z);ee=q.ease,X=q.duration}X??(X=s);const K=h+P;M.length===1&&M[0]===0&&(M[1]=1);const O=M.length-A.length;if(O>0&&uA(M,O),A.length===1&&A.unshift(null),B){X=J4(X,B);const re=[...A],oe=[...M];ee=Array.isArray(ee)?[...ee]:[ee];const q=[...ee];for(let F=0;F<B;F++){A.push(...re);for(let ie=0;ie<re.length;ie++)M.push(oe[ie]+(F+1)),ee.push(ie===0?"linear":FA(q,ie-1))}t5(M,B)}const J=K+X;e5(E,A,ee,M,K,J),g=Math.max(P+X,g),f=Math.max(J,f)};if(tn(b)){const v=zv(b,a);y(p,m,Wv("default",v))}else{const v=HA(b,p,r,l),S=v.length;for(let E=0;E<S;E++){p=p,m=m;const C=v[E],x=zv(C,a);for(const A in p)y(p[A],o5(m,A),Wv(A,x),E,S)}}c=h,h+=g}return a.forEach((d,_)=>{for(const b in d){const p=d[b];p.sort(n5);const m=[],g=[],y=[];for(let S=0;S<p.length;S++){const{at:E,value:C,easing:x}=p[S];m.push(C),g.push(Gs(0,f,E)),y.push(x||"easeOut")}g[0]!==0&&(g.unshift(0),m.unshift(m[0]),y.unshift(r5)),g[g.length-1]!==1&&(g.push(1),m.push(null)),o.has(_)||o.set(_,{keyframes:{},transition:{}});const v=o.get(_);v.keyframes[b]=m,v.transition[b]={...e,duration:f,ease:y,times:g,...n}}}),o}function zv(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Wv(t,e){return e[t]||(e[t]=[]),e[t]}function s5(t){return Array.isArray(t)?t:[t]}function o5(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const a5=t=>typeof t=="number",l5=t=>t.every(a5);function u5(t,e){return t in e}class c5 extends OA{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(u5(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return Rt()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function h5(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=xA(t)?new BA(e):new NA(e);n.mount(t),ca.set(t,n)}function f5(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new c5(e);n.mount(t),ca.set(t,n)}function d5(t,e){return tn(t)||typeof t=="number"||typeof t=="string"&&!gb(e)}function UA(t,e,n,r){const i=[];if(d5(t,e))i.push(wA(t,gb(e)&&e.default||e,n&&(n.default||n)));else{const s=HA(t,e,r),o=s.length;for(let a=0;a<o;a++){const l=s[a],u=l instanceof Element?h5:f5;ca.has(l)||u(l);const c=ca.get(l),h={...n};"delay"in h&&typeof h.delay=="function"&&(h.delay=h.delay(a,o)),i.push(...mb(c,{...e,transition:h},{}))}}return i}function p5(t,e,n){const r=[];return i5(t,e,n,{spring:fb}).forEach(({keyframes:s,transition:o},a)=>{r.push(...UA(a,s,o))}),r}function m5(t){return Array.isArray(t)&&t.some(Array.isArray)}function g5(t){function e(n,r,i){let s=[];m5(n)?s=p5(n,r,t):s=UA(n,r,i,t);const o=new xT(s);return t&&t.animations.push(o),o}return e}function _5(){const t=$l(()=>({current:null,animations:[]})),e=$l(()=>g5(t));return X4(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}function jA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=jA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Gi(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=jA(t))&&(r&&(r+=" "),r+=e);return r}const Yl=t=>typeof t=="number"&&!isNaN(t),Vs=t=>typeof t=="string",Xn=t=>typeof t=="function",wh=t=>Vs(t)||Xn(t)?t:null,Cg=t=>R.isValidElement(t)||Vs(t)||Xn(t)||Yl(t);function b5(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function qu(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:u,done:c,nodeRef:h,isIn:f,playToast:d}=o;const _=r?`${e}--${l}`:e,b=r?`${n}--${l}`:n,p=R.useRef(0);return R.useLayoutEffect(()=>{const m=h.current,g=_.split(" "),y=v=>{v.target===h.current&&(d(),m.removeEventListener("animationend",y),m.removeEventListener("animationcancel",y),p.current===0&&v.type!=="animationcancel"&&m.classList.remove(...g))};m.classList.add(...g),m.addEventListener("animationend",y),m.addEventListener("animationcancel",y)},[]),R.useEffect(()=>{const m=h.current,g=()=>{m.removeEventListener("animationend",g),i?b5(m,c,s):c()};f||(u?g():(p.current=1,m.className+=` ${b}`,m.addEventListener("animationend",g)))},[f]),Ye.createElement(Ye.Fragment,null,a)}}function qv(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const xn=new Map;let Xl=[];const Tg=new Set,y5=t=>Tg.forEach(e=>e(t)),VA=()=>xn.size>0;function $A(t,e){var n;if(e)return!((n=xn.get(e))==null||!n.isToastActive(t));let r=!1;return xn.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function zA(t,e){Cg(t)&&(VA()||Xl.push({content:t,options:e}),xn.forEach(n=>{n.buildToast(t,e)}))}function Gv(t,e){xn.forEach(n=>{e!=null&&e!=null&&e.containerId?e?.containerId===n.id&&n.toggle(t,e?.id):n.toggle(t,e?.id)})}function v5(t){const{subscribe:e,getSnapshot:n,setProps:r}=R.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(c,h,f){let d=1,_=0,b=[],p=[],m=[],g=h;const y=new Map,v=new Set,S=()=>{m=Array.from(y.values()),v.forEach(x=>x())},E=x=>{p=x==null?[]:p.filter(A=>A!==x),S()},C=x=>{const{toastId:A,onOpen:D,updateId:M,children:H}=x.props,B=M==null;x.staleId&&y.delete(x.staleId),y.set(A,x),p=[...p,x.props.toastId].filter($=>$!==x.staleId),S(),f(qv(x,B?"added":"updated")),B&&Xn(D)&&D(R.isValidElement(H)&&H.props)};return{id:c,props:g,observe:x=>(v.add(x),()=>v.delete(x)),toggle:(x,A)=>{y.forEach(D=>{A!=null&&A!==D.props.toastId||Xn(D.toggle)&&D.toggle(x)})},removeToast:E,toasts:y,clearQueue:()=>{_-=b.length,b=[]},buildToast:(x,A)=>{if((K=>{let{containerId:O,toastId:J,updateId:re}=K;const oe=O?O!==c:c!==1,q=y.has(J)&&re==null;return oe||q})(A))return;const{toastId:D,updateId:M,data:H,staleId:B,delay:$}=A,G=()=>{E(D)},Z=M==null;Z&&_++;const ee={...g,style:g.toastStyle,key:d++,...Object.fromEntries(Object.entries(A).filter(K=>{let[O,J]=K;return J!=null})),toastId:D,updateId:M,data:H,closeToast:G,isIn:!1,className:wh(A.className||g.toastClassName),bodyClassName:wh(A.bodyClassName||g.bodyClassName),progressClassName:wh(A.progressClassName||g.progressClassName),autoClose:!A.isLoading&&(X=A.autoClose,P=g.autoClose,X===!1||Yl(X)&&X>0?X:P),deleteToast(){const K=y.get(D),{onClose:O,children:J}=K.props;Xn(O)&&O(R.isValidElement(J)&&J.props),f(qv(K,"removed")),y.delete(D),_--,_<0&&(_=0),b.length>0?C(b.shift()):S()}};var X,P;ee.closeButton=g.closeButton,A.closeButton===!1||Cg(A.closeButton)?ee.closeButton=A.closeButton:A.closeButton===!0&&(ee.closeButton=!Cg(g.closeButton)||g.closeButton);let I=x;R.isValidElement(x)&&!Vs(x.type)?I=R.cloneElement(x,{closeToast:G,toastProps:ee,data:H}):Xn(x)&&(I=x({closeToast:G,toastProps:ee,data:H}));const z={content:I,props:ee,staleId:B};g.limit&&g.limit>0&&_>g.limit&&Z?b.push(z):Yl($)?setTimeout(()=>{C(z)},$):C(z)},setProps(x){g=x},setToggle:(x,A)=>{y.get(x).toggle=A},isToastActive:x=>p.some(A=>A===x),getSnapshot:()=>m}}(o,s,y5);xn.set(o,l);const u=l.observe(a);return Xl.forEach(c=>zA(c.content,c.options)),Xl=[],()=>{u(),xn.delete(o)}},setProps(a){var l;(l=xn.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=xn.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=R.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:$A,count:i?.length}}function E5(t){const[e,n]=R.useState(!1),[r,i]=R.useState(!1),s=R.useRef(null),o=R.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:u,onClick:c,closeOnClick:h}=t;var f,d;function _(){n(!0)}function b(){n(!1)}function p(y){const v=s.current;o.canDrag&&v&&(o.didMove=!0,e&&b(),o.delta=t.draggableDirection==="x"?y.clientX-o.start:y.clientY-o.start,o.start!==y.clientX&&(o.canCloseOnClick=!1),v.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,v.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function m(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",m);const y=s.current;if(o.canDrag&&o.didMove&&y){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();y.style.transition="transform 0.2s, opacity 0.2s",y.style.removeProperty("transform"),y.style.removeProperty("opacity")}}(d=xn.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||d.setToggle(f.id,f.fn),R.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||b(),window.addEventListener("focus",_),window.addEventListener("blur",b),()=>{window.removeEventListener("focus",_),window.removeEventListener("blur",b)}},[t.pauseOnFocusLoss]);const g={onPointerDown:function(y){if(t.draggable===!0||t.draggable===y.pointerType){o.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",m);const v=s.current;o.canCloseOnClick=!0,o.canDrag=!0,v.style.transition="none",t.draggableDirection==="x"?(o.start=y.clientX,o.removalDistance=v.offsetWidth*(t.draggablePercent/100)):(o.start=y.clientY,o.removalDistance=v.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(y){const{top:v,bottom:S,left:E,right:C}=s.current.getBoundingClientRect();y.nativeEvent.type!=="touchend"&&t.pauseOnHover&&y.clientX>=E&&y.clientX<=C&&y.clientY>=v&&y.clientY<=S?b():_()}};return a&&l&&(g.onMouseEnter=b,t.stacked||(g.onMouseLeave=_)),h&&(g.onClick=y=>{c&&c(y),o.canCloseOnClick&&u()}),{playToast:_,pauseToast:b,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:g}}function S5(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:u,rtl:c,isIn:h,theme:f}=t;const d=s||l&&u===0,_={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(_.transform=`scaleX(${u})`);const b=Gi("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":c}),p=Xn(o)?o({rtl:c,type:i,defaultClassName:b}):Gi(b,o),m={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&r()}};return Ye.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},Ye.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),Ye.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:p,style:_,...m}))}let w5=1;const WA=()=>""+w5++;function x5(t){return t&&(Vs(t.toastId)||Yl(t.toastId))?t.toastId:WA()}function Tl(t,e){return zA(t,e),e.toastId}function rf(t,e){return{...e,type:e&&e.type||t,toastId:x5(e)}}function wc(t){return(e,n)=>Tl(e,rf(t,n))}function it(t,e){return Tl(t,rf("default",e))}it.loading=(t,e)=>Tl(t,rf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),it.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Vs(i)?it.loading(i,n):it.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(c,h,f)=>{if(h==null)return void it.dismiss(r);const d={type:c,...a,...n,data:f},_=Vs(h)?{render:h}:h;return r?it.update(r,{...d,..._}):it(_.render,{...d,..._}),f},u=Xn(t)?t():t;return u.then(c=>l("success",o,c)).catch(c=>l("error",s,c)),u},it.success=wc("success"),it.info=wc("info"),it.error=wc("error"),it.warning=wc("warning"),it.warn=it.warning,it.dark=(t,e)=>Tl(t,rf("default",{theme:"dark",...e})),it.dismiss=function(t){(function(e){var n;if(VA()){if(e==null||Vs(n=e)||Yl(n))xn.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=xn.get(e.containerId);r?r.removeToast(e.id):xn.forEach(i=>{i.removeToast(e.id)})}}else Xl=Xl.filter(r=>e!=null&&r.options.toastId!==e)})(t)},it.clearWaitingQueue=function(t){t===void 0&&(t={}),xn.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},it.isActive=$A,it.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=xn.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:WA()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Tl(o,s)}},it.done=t=>{it.update(t,{progress:1})},it.onChange=function(t){return Tg.add(t),()=>{Tg.delete(t)}},it.play=t=>Gv(!0,t),it.pause=t=>Gv(!1,t);const C5=typeof window<"u"?R.useLayoutEffect:R.useEffect,xc=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return Ye.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},kp={info:function(t){return Ye.createElement(xc,{...t},Ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Ye.createElement(xc,{...t},Ye.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Ye.createElement(xc,{...t},Ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Ye.createElement(xc,{...t},Ye.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ye.createElement("div",{className:"Toastify__spinner"})}},T5=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=E5(t),{closeButton:o,children:a,autoClose:l,onClick:u,type:c,hideProgressBar:h,closeToast:f,transition:d,position:_,className:b,style:p,bodyClassName:m,bodyStyle:g,progressClassName:y,progressStyle:v,updateId:S,role:E,progress:C,rtl:x,toastId:A,deleteToast:D,isIn:M,isLoading:H,closeOnClick:B,theme:$}=t,G=Gi("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":B}),Z=Xn(b)?b({rtl:x,position:_,type:c,defaultClassName:G}):Gi(G,b),ee=function(z){let{theme:K,type:O,isLoading:J,icon:re}=z,oe=null;const q={theme:K,type:O};return re===!1||(Xn(re)?oe=re({...q,isLoading:J}):R.isValidElement(re)?oe=R.cloneElement(re,q):J?oe=kp.spinner():(F=>F in kp)(O)&&(oe=kp[O](q))),oe}(t),X=!!C||!l,P={closeToast:f,type:c,theme:$};let I=null;return o===!1||(I=Xn(o)?o(P):R.isValidElement(o)?R.cloneElement(o,P):function(z){let{closeToast:K,theme:O,ariaLabel:J="close"}=z;return Ye.createElement("button",{className:`Toastify__close-button Toastify__close-button--${O}`,type:"button",onClick:re=>{re.stopPropagation(),K(re)},"aria-label":J},Ye.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ye.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(P)),Ye.createElement(d,{isIn:M,done:D,position:_,preventExitTransition:n,nodeRef:r,playToast:s},Ye.createElement("div",{id:A,onClick:u,"data-in":M,className:Z,...i,style:p,ref:r},Ye.createElement("div",{...M&&{role:E},className:Xn(m)?m({type:c}):Gi("Toastify__toast-body",m),style:g},ee!=null&&Ye.createElement("div",{className:Gi("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!H})},ee),Ye.createElement("div",null,a)),I,Ye.createElement(S5,{...S&&!X?{key:`pb-${S}`}:{},rtl:x,theme:$,delay:l,isRunning:e,isIn:M,closeToast:f,hide:h,type:c,style:v,className:y,controlledProgress:X,progress:C||0})))},Sd=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},A5=qu(Sd("bounce",!0));qu(Sd("slide",!0));qu(Sd("zoom"));qu(Sd("flip"));const k5={position:"top-right",transition:A5,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function R5(t){let e={...k5,...t};const n=t.stacked,[r,i]=R.useState(!0),s=R.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=v5(e),{className:u,style:c,rtl:h,containerId:f}=e;function d(b){const p=Gi("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":h});return Xn(u)?u({position:b,rtl:h,defaultClassName:p}):Gi(p,wh(u))}function _(){n&&(i(!0),it.play())}return C5(()=>{if(n){var b;const p=s.current.querySelectorAll('[data-in="true"]'),m=12,g=(b=e.position)==null?void 0:b.includes("top");let y=0,v=0;Array.from(p).reverse().forEach((S,E)=>{const C=S;C.classList.add("Toastify__toast--stacked"),E>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=g?"top":"bot");const x=y*(r?.2:1)+(r?0:m*E);C.style.setProperty("--y",`${g?x:-1*x}px`),C.style.setProperty("--g",`${m}`),C.style.setProperty("--s",""+(1-(r?v:0))),y+=C.offsetHeight,v+=.025})}},[r,l,n]),Ye.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),it.pause())},onMouseLeave:_},o((b,p)=>{const m=p.length?{...c}:{...c,pointerEvents:"none"};return Ye.createElement("div",{className:d(b),style:m,key:`container-${b}`},p.map(g=>{let{content:y,props:v}=g;return Ye.createElement(T5,{...v,stacked:n,collapseAll:_,isIn:a(v.toastId,v.containerId),style:v.style,key:`toast-${v.key}`},y)}))}))}function Qe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function Kv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wd(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Kv(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Kv(t[i],null)}}}}function ln(...t){return R.useCallback(wd(...t),t)}function I5(t,e){const n=R.createContext(e),r=s=>{const{children:o,...a}=s,l=R.useMemo(()=>a,Object.values(a));return L.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=R.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function xa(t,e=[]){let n=[];function r(s,o){const a=R.createContext(o),l=n.length;n=[...n,o];const u=h=>{const{scope:f,children:d,..._}=h,b=f?.[t]?.[l]||a,p=R.useMemo(()=>_,Object.values(_));return L.jsx(b.Provider,{value:p,children:d})};u.displayName=s+"Provider";function c(h,f){const d=f?.[t]?.[l]||a,_=R.useContext(d);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,c]}const i=()=>{const s=n.map(o=>R.createContext(o));return function(a){const l=a?.[t]||s;return R.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,D5(i,...e)]}function D5(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var es=globalThis?.document?R.useLayoutEffect:()=>{},L5=O_[" useId ".trim().toString()]||(()=>{}),P5=0;function Uo(t){const[e,n]=R.useState(L5());return es(()=>{n(r=>r??String(P5++))},[t]),t||(e?`radix-${e}`:"")}var O5=O_[" useInsertionEffect ".trim().toString()]||es;function _b({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=M5({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const c=R.useRef(t!==void 0);R.useEffect(()=>{const h=c.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=a},[a,r])}const u=R.useCallback(c=>{if(a){const h=N5(c)?c(t):c;h!==t&&o.current?.(h)}else s(c)},[a,t,s,o]);return[l,u]}function M5({defaultProp:t,onChange:e}){const[n,r]=R.useState(t),i=R.useRef(n),s=R.useRef(e);return O5(()=>{s.current=e},[e]),R.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function N5(t){return typeof t=="function"}function Ql(t){const e=B5(t),n=R.forwardRef((r,i)=>{const{children:s,...o}=r,a=R.Children.toArray(s),l=a.find(H5);if(l){const u=l.props.children,c=a.map(h=>h===l?R.Children.count(u)>1?R.Children.only(null):R.isValidElement(u)?u.props.children:null:h);return L.jsx(e,{...o,ref:i,children:R.isValidElement(u)?R.cloneElement(u,void 0,c):null})}return L.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function B5(t){const e=R.forwardRef((n,r)=>{const{children:i,...s}=n;if(R.isValidElement(i)){const o=j5(i),a=U5(s,i.props);return i.type!==R.Fragment&&(a.ref=r?wd(r,o):o),R.cloneElement(i,a)}return R.Children.count(i)>1?R.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var F5=Symbol("radix.slottable");function H5(t){return R.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===F5}function U5(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function j5(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var V5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wt=V5.reduce((t,e)=>{const n=Ql(`Primitive.${e}`),r=R.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),L.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function qA(t,e){t&&eT.flushSync(()=>t.dispatchEvent(e))}function Ai(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>e.current?.(...n),[])}function $5(t,e=globalThis?.document){const n=Ai(t);R.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var z5="DismissableLayer",Ag="dismissableLayer.update",W5="dismissableLayer.pointerDownOutside",q5="dismissableLayer.focusOutside",Yv,GA=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bb=R.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=R.useContext(GA),[c,h]=R.useState(null),f=c?.ownerDocument??globalThis?.document,[,d]=R.useState({}),_=ln(e,C=>h(C)),b=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),m=b.indexOf(p),g=c?b.indexOf(c):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,v=g>=m,S=Y5(C=>{const x=C.target,A=[...u.branches].some(D=>D.contains(x));!v||A||(i?.(C),o?.(C),C.defaultPrevented||a?.())},f),E=X5(C=>{const x=C.target;[...u.branches].some(D=>D.contains(x))||(s?.(C),o?.(C),C.defaultPrevented||a?.())},f);return $5(C=>{g===u.layers.size-1&&(r?.(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),R.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Yv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),Xv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Yv)}},[c,f,n,u]),R.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),Xv())},[c,u]),R.useEffect(()=>{const C=()=>d({});return document.addEventListener(Ag,C),()=>document.removeEventListener(Ag,C)},[]),L.jsx(Wt.div,{...l,ref:_,style:{pointerEvents:y?v?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,S.onPointerDownCapture)})});bb.displayName=z5;var G5="DismissableLayerBranch",K5=R.forwardRef((t,e)=>{const n=R.useContext(GA),r=R.useRef(null),i=ln(e,r);return R.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),L.jsx(Wt.div,{...t,ref:i})});K5.displayName=G5;function Y5(t,e=globalThis?.document){const n=Ai(t),r=R.useRef(!1),i=R.useRef(()=>{});return R.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){KA(W5,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function X5(t,e=globalThis?.document){const n=Ai(t),r=R.useRef(!1);return R.useEffect(()=>{const i=s=>{s.target&&!r.current&&KA(q5,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Xv(){const t=new CustomEvent(Ag);document.dispatchEvent(t)}function KA(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?qA(i,s):i.dispatchEvent(s)}var Rp="focusScope.autoFocusOnMount",Ip="focusScope.autoFocusOnUnmount",Qv={bubbles:!1,cancelable:!0},Q5="FocusScope",yb=R.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=R.useState(null),u=Ai(i),c=Ai(s),h=R.useRef(null),f=ln(e,b=>l(b)),d=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let b=function(y){if(d.paused||!a)return;const v=y.target;a.contains(v)?h.current=v:Hi(h.current,{select:!0})},p=function(y){if(d.paused||!a)return;const v=y.relatedTarget;v!==null&&(a.contains(v)||Hi(h.current,{select:!0}))},m=function(y){if(document.activeElement===document.body)for(const S of y)S.removedNodes.length>0&&Hi(a)};document.addEventListener("focusin",b),document.addEventListener("focusout",p);const g=new MutationObserver(m);return a&&g.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",p),g.disconnect()}}},[r,a,d.paused]),R.useEffect(()=>{if(a){Zv.add(d);const b=document.activeElement;if(!a.contains(b)){const m=new CustomEvent(Rp,Qv);a.addEventListener(Rp,u),a.dispatchEvent(m),m.defaultPrevented||(J5(rF(YA(a)),{select:!0}),document.activeElement===b&&Hi(a))}return()=>{a.removeEventListener(Rp,u),setTimeout(()=>{const m=new CustomEvent(Ip,Qv);a.addEventListener(Ip,c),a.dispatchEvent(m),m.defaultPrevented||Hi(b??document.body,{select:!0}),a.removeEventListener(Ip,c),Zv.remove(d)},0)}}},[a,u,c,d]);const _=R.useCallback(b=>{if(!n&&!r||d.paused)return;const p=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,m=document.activeElement;if(p&&m){const g=b.currentTarget,[y,v]=Z5(g);y&&v?!b.shiftKey&&m===v?(b.preventDefault(),n&&Hi(y,{select:!0})):b.shiftKey&&m===y&&(b.preventDefault(),n&&Hi(v,{select:!0})):m===g&&b.preventDefault()}},[n,r,d.paused]);return L.jsx(Wt.div,{tabIndex:-1,...o,ref:f,onKeyDown:_})});yb.displayName=Q5;function J5(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Hi(r,{select:e}),document.activeElement!==n)return}function Z5(t){const e=YA(t),n=Jv(e,t),r=Jv(e.reverse(),t);return[n,r]}function YA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jv(t,e){for(const n of t)if(!eF(n,{upTo:e}))return n}function eF(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function tF(t){return t instanceof HTMLInputElement&&"select"in t}function Hi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&tF(t)&&e&&t.select()}}var Zv=nF();function nF(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=eE(t,e),t.unshift(e)},remove(e){t=eE(t,e),t[0]?.resume()}}}function eE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function rF(t){return t.filter(e=>e.tagName!=="A")}var iF="Portal",vb=R.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=R.useState(!1);es(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?CN.createPortal(L.jsx(Wt.div,{...r,ref:e}),o):null});vb.displayName=iF;function sF(t,e){return R.useReducer((n,r)=>e[n][r]??n,t)}var fs=t=>{const{present:e,children:n}=t,r=oF(e),i=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),s=ln(r.ref,aF(i));return typeof n=="function"||r.isPresent?R.cloneElement(i,{ref:s}):null};fs.displayName="Presence";function oF(t){const[e,n]=R.useState(),r=R.useRef(null),i=R.useRef(t),s=R.useRef("none"),o=t?"mounted":"unmounted",[a,l]=sF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const u=Cc(r.current);s.current=a==="mounted"?u:"none"},[a]),es(()=>{const u=r.current,c=i.current;if(c!==t){const f=s.current,d=Cc(u);t?l("MOUNT"):d==="none"||u?.display==="none"?l("UNMOUNT"):l(c&&f!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),es(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,h=d=>{const b=Cc(r.current).includes(CSS.escape(d.animationName));if(d.target===e&&b&&(l("ANIMATION_END"),!i.current)){const p=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=p)})}},f=d=>{d.target===e&&(s.current=Cc(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:R.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Cc(t){return t?.animationName||"none"}function aF(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Dp=0;function XA(){R.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??tE()),document.body.insertAdjacentElement("beforeend",t[1]??tE()),Dp++,()=>{Dp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Dp--}},[])}function tE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Wr=function(){return Wr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wr.apply(this,arguments)};function QA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lF(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var xh="right-scroll-bar-position",Ch="width-before-scroll-bar",uF="with-scroll-bars-hidden",cF="--removed-body-scroll-bar-size";function Lp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hF(t,e){var n=R.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var fF=typeof window<"u"?R.useLayoutEffect:R.useEffect,nE=new WeakMap;function dF(t,e){var n=hF(null,function(r){return t.forEach(function(i){return Lp(i,r)})});return fF(function(){var r=nE.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Lp(a,null)}),s.forEach(function(a){i.has(a)||Lp(a,o)})}nE.set(n,t)},[t]),n}function pF(t){return t}function mF(t,e){e===void 0&&(e=pF);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function gF(t){t===void 0&&(t={});var e=mF(null);return e.options=Wr({async:!0,ssr:!1},t),e}var JA=function(t){var e=t.sideCar,n=QA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Wr({},n))};JA.isSideCarExport=!0;function _F(t,e){return t.useMedium(e),JA}var ZA=gF(),Pp=function(){},xd=R.forwardRef(function(t,e){var n=R.useRef(null),r=R.useState({onScrollCapture:Pp,onWheelCapture:Pp,onTouchMoveCapture:Pp}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,h=t.shards,f=t.sideCar,d=t.noRelative,_=t.noIsolation,b=t.inert,p=t.allowPinchZoom,m=t.as,g=m===void 0?"div":m,y=t.gapMode,v=QA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=dF([n,e]),C=Wr(Wr({},v),i);return R.createElement(R.Fragment,null,c&&R.createElement(S,{sideCar:ZA,removeScrollBar:u,shards:h,noRelative:d,noIsolation:_,inert:b,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?R.cloneElement(R.Children.only(a),Wr(Wr({},C),{ref:E})):R.createElement(g,Wr({},C,{className:l,ref:E}),a))});xd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xd.classNames={fullWidth:Ch,zeroRight:xh};var bF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=bF();return e&&t.setAttribute("nonce",e),t}function vF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function EF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var SF=function(){var t=0,e=null;return{add:function(n){t==0&&(e=yF())&&(vF(e,n),EF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},wF=function(){var t=SF();return function(e,n){R.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ek=function(){var t=wF(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},xF={left:0,top:0,right:0,gap:0},Op=function(t){return parseInt(t||"",10)||0},CF=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Op(n),Op(r),Op(i)]},TF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return xF;var e=CF(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},AF=ek(),jo="data-scroll-locked",kF=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(uF,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(jo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ch,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xh," .").concat(xh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ch," .").concat(Ch,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(jo,`] {
    `).concat(cF,": ").concat(a,`px;
  }
`)},rE=function(){var t=parseInt(document.body.getAttribute(jo)||"0",10);return isFinite(t)?t:0},RF=function(){R.useEffect(function(){return document.body.setAttribute(jo,(rE()+1).toString()),function(){var t=rE()-1;t<=0?document.body.removeAttribute(jo):document.body.setAttribute(jo,t.toString())}},[])},IF=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;RF();var s=R.useMemo(function(){return TF(i)},[i]);return R.createElement(AF,{styles:kF(s,!e,i,n?"":"!important")})},kg=!1;if(typeof window<"u")try{var Tc=Object.defineProperty({},"passive",{get:function(){return kg=!0,!0}});window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{kg=!1}var _o=kg?{passive:!1}:!1,DF=function(t){return t.tagName==="TEXTAREA"},tk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!DF(t)&&n[e]==="visible")},LF=function(t){return tk(t,"overflowY")},PF=function(t){return tk(t,"overflowX")},iE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=nk(t,r);if(i){var s=rk(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},OF=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},MF=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},nk=function(t,e){return t==="v"?LF(e):PF(e)},rk=function(t,e){return t==="v"?OF(e):MF(e)},NF=function(t,e){return t==="h"&&e==="rtl"?-1:1},BF=function(t,e,n,r,i){var s=NF(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,c=o>0,h=0,f=0;do{if(!a)break;var d=rk(t,a),_=d[0],b=d[1],p=d[2],m=b-p-s*_;(_||m)&&nk(t,a)&&(h+=m,f+=_);var g=a.parentNode;a=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&Math.abs(h)<1||!c&&Math.abs(f)<1)&&(u=!0),u},Ac=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},sE=function(t){return[t.deltaX,t.deltaY]},oE=function(t){return t&&"current"in t?t.current:t},FF=function(t,e){return t[0]===e[0]&&t[1]===e[1]},HF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},UF=0,bo=[];function jF(t){var e=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),i=R.useState(UF++)[0],s=R.useState(ek)[0],o=R.useRef(t);R.useEffect(function(){o.current=t},[t]),R.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var b=lF([t.lockRef.current],(t.shards||[]).map(oE),!0).filter(Boolean);return b.forEach(function(p){return p.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=R.useCallback(function(b,p){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var m=Ac(b),g=n.current,y="deltaX"in b?b.deltaX:g[0]-m[0],v="deltaY"in b?b.deltaY:g[1]-m[1],S,E=b.target,C=Math.abs(y)>Math.abs(v)?"h":"v";if("touches"in b&&C==="h"&&E.type==="range")return!1;var x=window.getSelection(),A=x&&x.anchorNode,D=A?A===E||A.contains(E):!1;if(D)return!1;var M=iE(C,E);if(!M)return!0;if(M?S=C:(S=C==="v"?"h":"v",M=iE(C,E)),!M)return!1;if(!r.current&&"changedTouches"in b&&(y||v)&&(r.current=S),!S)return!0;var H=r.current||S;return BF(H,p,b,H==="h"?y:v)},[]),l=R.useCallback(function(b){var p=b;if(!(!bo.length||bo[bo.length-1]!==s)){var m="deltaY"in p?sE(p):Ac(p),g=e.current.filter(function(S){return S.name===p.type&&(S.target===p.target||p.target===S.shadowParent)&&FF(S.delta,m)})[0];if(g&&g.should){p.cancelable&&p.preventDefault();return}if(!g){var y=(o.current.shards||[]).map(oE).filter(Boolean).filter(function(S){return S.contains(p.target)}),v=y.length>0?a(p,y[0]):!o.current.noIsolation;v&&p.cancelable&&p.preventDefault()}}},[]),u=R.useCallback(function(b,p,m,g){var y={name:b,delta:p,target:m,should:g,shadowParent:VF(m)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(v){return v!==y})},1)},[]),c=R.useCallback(function(b){n.current=Ac(b),r.current=void 0},[]),h=R.useCallback(function(b){u(b.type,sE(b),b.target,a(b,t.lockRef.current))},[]),f=R.useCallback(function(b){u(b.type,Ac(b),b.target,a(b,t.lockRef.current))},[]);R.useEffect(function(){return bo.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,_o),document.addEventListener("touchmove",l,_o),document.addEventListener("touchstart",c,_o),function(){bo=bo.filter(function(b){return b!==s}),document.removeEventListener("wheel",l,_o),document.removeEventListener("touchmove",l,_o),document.removeEventListener("touchstart",c,_o)}},[]);var d=t.removeScrollBar,_=t.inert;return R.createElement(R.Fragment,null,_?R.createElement(s,{styles:HF(i)}):null,d?R.createElement(IF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function VF(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const $F=_F(ZA,jF);var Eb=R.forwardRef(function(t,e){return R.createElement(xd,Wr({},t,{ref:e,sideCar:$F}))});Eb.classNames=xd.classNames;var zF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yo=new WeakMap,kc=new WeakMap,Rc={},Mp=0,ik=function(t){return t&&(t.host||ik(t.parentNode))},WF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ik(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},qF=function(t,e,n,r){var i=WF(e,Array.isArray(t)?t:[t]);Rc[n]||(Rc[n]=new WeakMap);var s=Rc[n],o=[],a=new Set,l=new Set(i),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};i.forEach(u);var c=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))c(f);else try{var d=f.getAttribute(r),_=d!==null&&d!=="false",b=(yo.get(f)||0)+1,p=(s.get(f)||0)+1;yo.set(f,b),s.set(f,p),o.push(f),b===1&&_&&kc.set(f,!0),p===1&&f.setAttribute(n,"true"),_||f.setAttribute(r,"true")}catch(m){console.error("aria-hidden: cannot operate on ",f,m)}})};return c(e),a.clear(),Mp++,function(){o.forEach(function(h){var f=yo.get(h)-1,d=s.get(h)-1;yo.set(h,f),s.set(h,d),f||(kc.has(h)||h.removeAttribute(r),kc.delete(h)),d||h.removeAttribute(n)}),Mp--,Mp||(yo=new WeakMap,yo=new WeakMap,kc=new WeakMap,Rc={})}},sk=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=zF(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),qF(r,i,n,"aria-hidden")):function(){return null}},Cd="Dialog",[ok]=xa(Cd),[GF,kr]=ok(Cd),ak=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=R.useRef(null),l=R.useRef(null),[u,c]=_b({prop:r,defaultProp:i??!1,onChange:s,caller:Cd});return L.jsx(GF,{scope:e,triggerRef:a,contentRef:l,contentId:Uo(),titleId:Uo(),descriptionId:Uo(),open:u,onOpenChange:c,onOpenToggle:R.useCallback(()=>c(h=>!h),[c]),modal:o,children:n})};ak.displayName=Cd;var lk="DialogTrigger",uk=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=kr(lk,n),s=ln(e,i.triggerRef);return L.jsx(Wt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":xb(i.open),...r,ref:s,onClick:Qe(t.onClick,i.onOpenToggle)})});uk.displayName=lk;var Sb="DialogPortal",[KF,ck]=ok(Sb,{forceMount:void 0}),hk=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=kr(Sb,e);return L.jsx(KF,{scope:e,forceMount:n,children:R.Children.map(r,o=>L.jsx(fs,{present:n||s.open,children:L.jsx(vb,{asChild:!0,container:i,children:o})}))})};hk.displayName=Sb;var sf="DialogOverlay",fk=R.forwardRef((t,e)=>{const n=ck(sf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=kr(sf,t.__scopeDialog);return s.modal?L.jsx(fs,{present:r||s.open,children:L.jsx(XF,{...i,ref:e})}):null});fk.displayName=sf;var YF=Ql("DialogOverlay.RemoveScroll"),XF=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=kr(sf,n);return L.jsx(Eb,{as:YF,allowPinchZoom:!0,shards:[i.contentRef],children:L.jsx(Wt.div,{"data-state":xb(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ks="DialogContent",dk=R.forwardRef((t,e)=>{const n=ck(Ks,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=kr(Ks,t.__scopeDialog);return L.jsx(fs,{present:r||s.open,children:s.modal?L.jsx(QF,{...i,ref:e}):L.jsx(JF,{...i,ref:e})})});dk.displayName=Ks;var QF=R.forwardRef((t,e)=>{const n=kr(Ks,t.__scopeDialog),r=R.useRef(null),i=ln(e,n.contentRef,r);return R.useEffect(()=>{const s=r.current;if(s)return sk(s)},[]),L.jsx(pk,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Qe(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Qe(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Qe(t.onFocusOutside,s=>s.preventDefault())})}),JF=R.forwardRef((t,e)=>{const n=kr(Ks,t.__scopeDialog),r=R.useRef(!1),i=R.useRef(!1);return L.jsx(pk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),pk=R.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=kr(Ks,n),l=R.useRef(null),u=ln(e,l);return XA(),L.jsxs(L.Fragment,{children:[L.jsx(yb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:L.jsx(bb,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":xb(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),L.jsxs(L.Fragment,{children:[L.jsx(ZF,{titleId:a.titleId}),L.jsx(t8,{contentRef:l,descriptionId:a.descriptionId})]})]})}),wb="DialogTitle",mk=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=kr(wb,n);return L.jsx(Wt.h2,{id:i.titleId,...r,ref:e})});mk.displayName=wb;var gk="DialogDescription",_k=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=kr(gk,n);return L.jsx(Wt.p,{id:i.descriptionId,...r,ref:e})});_k.displayName=gk;var bk="DialogClose",yk=R.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=kr(bk,n);return L.jsx(Wt.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,()=>i.onOpenChange(!1))})});yk.displayName=bk;function xb(t){return t?"open":"closed"}var vk="DialogTitleWarning",[tpe,Ek]=I5(vk,{contentName:Ks,titleName:wb,docsSlug:"dialog"}),ZF=({titleId:t})=>{const e=Ek(vk),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return R.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},e8="DialogDescriptionWarning",t8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ek(e8).contentName}}.`;return R.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Sk=ak,wk=uk,xk=hk,Ck=fk,Tk=dk,Ak=mk,n8=_k,kk=yk;function Xe(...t){let e="";for(const n of t)e=Rk(e,r8(n));return e}function r8(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return Xe(...t);let e="";for(const n in t)t[n]&&(e=Rk(e,n));return e}function Rk(t,e){return e?t?t+" "+e:t+e:t}const ui=io(.4,0,.2,1),ci=R.memo(({icon:t,size:e="xl",className:n,iconClassName:r,disabledClassName:i,disabled:s=!1,title:o,onClick:a,children:l})=>L.jsx("button",{className:Xe("flex items-center text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive rounded-md p-1 enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Xe("opacity-30",i)]:s},n),title:o,disabled:s,onClick:u=>{s||a?.(u)},children:l||L.jsx("div",{className:Xe(t,i8(e),r)})}));function i8(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}const of={duration:.15,ease:ui},s8={closed:{opacity:0,transition:of},open:{opacity:1,transition:of}},o8={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:of},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:of}},aE=R.memo(({type:t,children:e,onClick:n})=>L.jsx("button",{className:Xe("inline-flex h-[35px] items-center justify-center rounded-lg px-4 text-sm leading-none focus:outline-none",{"bg-bolt-elements-button-primary-background text-bolt-elements-button-primary-text hover:bg-bolt-elements-button-primary-backgroundHover":t==="primary","bg-bolt-elements-button-secondary-background text-bolt-elements-button-secondary-text hover:bg-bolt-elements-button-secondary-backgroundHover":t==="secondary","bg-bolt-elements-button-danger-background text-bolt-elements-button-danger-text hover:bg-bolt-elements-button-danger-backgroundHover":t==="danger"}),onClick:n,children:e})),a8=R.memo(({className:t,children:e,...n})=>L.jsx(Ak,{className:Xe("px-5 py-4 flex items-center justify-between border-b border-bolt-elements-borderColor text-lg font-semibold leading-6 text-bolt-elements-textPrimary",t),...n,children:e})),l8=R.memo(({className:t,children:e,...n})=>L.jsx(n8,{className:Xe("px-5 py-4 text-bolt-elements-textPrimary text-md",t),...n,children:e})),u8=R.memo(({className:t,children:e,onBackdrop:n,onClose:r})=>L.jsxs(xk,{children:[L.jsx(Ck,{onClick:n,asChild:!0,children:L.jsx(xr.div,{className:"bg-black/50 fixed inset-0 z-max",initial:"closed",animate:"open",exit:"closed",variants:s8})}),L.jsx(Tk,{asChild:!0,children:L.jsxs(xr.div,{className:Xe("fixed top-[50%] left-[50%] z-max max-h-[85vh] w-[90vw] max-w-[450px] translate-x-[-50%] translate-y-[-50%] border border-bolt-elements-borderColor rounded-lg bg-bolt-elements-background-depth-2 shadow-lg focus:outline-none overflow-hidden",t),initial:"closed",animate:"open",exit:"closed",variants:o8,children:[e,L.jsx(kk,{asChild:!0,onClick:r,children:L.jsx(ci,{icon:"i-ph:x",className:"absolute top-[10px] right-[10px]"})})]})})]})),c8=R.memo(({className:t})=>{const e=Pt(ug),[n,r]=R.useState(!1);return R.useEffect(()=>{r(!0)},[]),n&&L.jsx(ci,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:AN})});let Ik="info";const h8="HTMLRewriter"in globalThis,f8=!h8,d8={trace:(...t)=>qr("trace",void 0,t),debug:(...t)=>qr("debug",void 0,t),info:(...t)=>qr("info",void 0,t),warn:(...t)=>qr("warn",void 0,t),error:(...t)=>qr("error",void 0,t),setLevel:Dk};function Mn(t){return{trace:(...e)=>qr("trace",t,e),debug:(...e)=>qr("debug",t,e),info:(...e)=>qr("info",t,e),warn:(...e)=>qr("warn",t,e),error:(...e)=>qr("error",t,e),setLevel:Dk}}function Dk(t){t==="trace"||t==="debug"||(Ik=t)}function qr(t,e,n){const r=["trace","debug","info","warn","error"];if(r.indexOf(t)<r.indexOf(Ik))return;const i=n.reduce((c,h)=>c.endsWith(`
`)?c+h:c?`${c} ${h}`:h,"");if(!f8){console.log(`[${t.toUpperCase()}]`,i);return}const s=p8(t),a=lE(s,t==="warn"?"black":"white"),l=lE("#77828D","white"),u=[a];typeof e=="string"&&u.push("",l),console.log(`%c${t.toUpperCase()}${e?`%c %c${e}`:""}`,...u,i)}function lE(t,e){return`background-color: ${t}; color: white; border: 4px solid ${t}; color: ${e};`}function p8(t){switch(t){case"trace":case"debug":return"#77828D";case"info":return"#1389FD";case"warn":return"#FFDB6C";case"error":return"#EE4744";default:return"black"}}const Ca=Mn("Render"),m8=Mn("ChatHistory");async function g8(){return new Promise(t=>{const e=indexedDB.open("boltHistory",1);e.onupgradeneeded=n=>{const r=n.target.result;if(!r.objectStoreNames.contains("chats")){const i=r.createObjectStore("chats",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("urlId","urlId",{unique:!0})}},e.onsuccess=n=>{t(n.target.result)},e.onerror=n=>{t(void 0),m8.error(n.target.error)}})}async function Lk(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})}async function _8(t,e,n,r,i){return new Promise((s,o)=>{const u=t.transaction("chats","readwrite").objectStore("chats").put({id:e,messages:n,urlId:r,description:i,timestamp:new Date().toISOString()});u.onsuccess=()=>s(),u.onerror=()=>o(u.error)})}async function b8(t,e){return await v8(t,e)||await y8(t,e)}async function y8(t,e){return new Promise((n,r)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})}async function v8(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=()=>n(o.result),o.onerror=()=>r(o.error)})}async function Pk(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readwrite").objectStore("chats").delete(e);o.onsuccess=()=>n(void 0),o.onerror=()=>r(o.error)})}async function E8(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAllKeys();s.onsuccess=()=>{const o=s.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},s.onerror=()=>n(s.error)})}async function S8(t,e){const n=await w8(t);if(n.includes(e)){let r=2;for(;n.includes(`${e}-${r}`);)r++;return`${e}-${r}`}else return e}async function w8(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats"),s=[],o=i.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(s.push(l.value.urlId),l.continue()):e(s)},o.onerror=()=>{n(o.error)}})}const x8="https://stackblitz.com",C8=new Error;C8.stack="";function T8(){let t,e;function n(){e=new Promise(r=>t=r)}return n(),{get promise(){return e},resolve(r){return t(r)},reset:n}}let Ic;const A8={authComplete:T8(),get editorOrigin(){return Ic==null&&(Ic=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??x8).origin),Ic},set editorOrigin(t){Ic=t}};function Ok(t){const e={d:{}};for(const n of Object.keys(t)){const r=t[n];if("file"in r){const s=r.file.contents,o=typeof s=="string"?s:k8(s),a=typeof s=="string"?{}:{b:!0};e.d[n]={f:{c:o,...a}};continue}const i=Ok(r.directory);e.d[n]=i}return e}function k8(t){let e="";for(const n of t)e+=String.fromCharCode(n);return e}var Al;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(Al||(Al={}));var R8=Object.defineProperty,I8=(t,e)=>{for(var n in e)R8(t,n,{get:e[n],enumerable:!0})},fr={};I8(fr,{createEndpoint:()=>Mk,expose:()=>Ab,proxy:()=>Vk,proxyMarker:()=>Cb,releaseProxy:()=>Nk,transfer:()=>jk,transferHandlers:()=>Tb,windowEndpoint:()=>M8,wrap:()=>Hk});var Cb=Symbol("Comlink.proxy"),Mk=Symbol("Comlink.endpoint"),Nk=Symbol("Comlink.releaseProxy"),Rg=Symbol("Comlink.thrown"),Bk=t=>typeof t=="object"&&t!==null||typeof t=="function",D8={canHandle:t=>Bk(t)&&t[Cb],serialize(t){const{port1:e,port2:n}=new MessageChannel;return Ab(t,e),[n,[n]]},deserialize(t){return t.start(),Hk(t)}},L8={canHandle:t=>Bk(t)&&Rg in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Tb=new Map([["proxy",D8],["throw",L8]]);function Ab(t,e=self){e.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:i,type:s,path:o}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(As);let l;try{const u=o.slice(0,-1).reduce((h,f)=>h[f],t),c=o.reduce((h,f)=>h[f],t);switch(s){case 0:l=c;break;case 1:u[o.slice(-1)[0]]=As(r.data.value),l=!0;break;case 2:l=c.apply(u,a);break;case 3:{const h=new c(...a);l=Vk(h)}break;case 4:{const{port1:h,port2:f}=new MessageChannel;Ab(t,f),l=jk(h,[h])}break;case 5:l=void 0;break}}catch(u){l={value:u,[Rg]:0}}Promise.resolve(l).catch(u=>({value:u,[Rg]:0})).then(u=>{const[c,h]=kb(u);e.postMessage(Object.assign(Object.assign({},c),{id:i}),h),s===5&&(e.removeEventListener("message",n),Fk(e))})}),e.start&&e.start()}function P8(t){return t.constructor.name==="MessagePort"}function Fk(t){P8(t)&&t.close()}function Hk(t,e){return Ig(t,[],e)}function Dc(t){if(t)throw new Error("Proxy has been released and is not useable")}function Ig(t,e=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(s,o){if(Dc(r),o===Nk)return()=>vo(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{Fk(t),r=!0});if(o==="then"){if(e.length===0)return{then:()=>i};const a=vo(t,{type:0,path:e.map(l=>l.toString())}).then(As);return a.then.bind(a)}return Ig(t,[...e,o])},set(s,o,a){Dc(r);const[l,u]=kb(a);return vo(t,{type:1,path:[...e,o].map(c=>c.toString()),value:l},u).then(As)},apply(s,o,a){Dc(r);const l=e[e.length-1];if(l===Mk)return vo(t,{type:4}).then(As);if(l==="bind")return Ig(t,e.slice(0,-1));const[u,c]=uE(a);return vo(t,{type:2,path:e.map(h=>h.toString()),argumentList:u},c).then(As)},construct(s,o){Dc(r);const[a,l]=uE(o);return vo(t,{type:3,path:e.map(u=>u.toString()),argumentList:a},l).then(As)}});return i}function O8(t){return Array.prototype.concat.apply([],t)}function uE(t){const e=t.map(kb);return[e.map(n=>n[0]),O8(e.map(n=>n[1]))]}var Uk=new WeakMap;function jk(t,e){return Uk.set(t,e),t}function Vk(t){return Object.assign(t,{[Cb]:!0})}function M8(t,e=self,n="*"){return{postMessage:(r,i)=>t.postMessage(r,n,i),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function kb(t){for(const[e,n]of Tb)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:3,name:e,value:r},i]}return[{type:0,value:t},Uk.get(t)||[]]}function As(t){switch(t.type){case 3:return Tb.get(t.name).deserialize(t.value);case 0:return t.value}}function vo(t,e,n){return new Promise(r=>{const i=N8();t.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(t.removeEventListener("message",s),r(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),n)})}function N8(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const B8=[Al.ConsoleError,Al.UncaughtException,Al.UnhandledRejection];function F8(t){return!(t==null||typeof t!="object"||!("type"in t)||!B8.includes(t.type))}let Lc=null,Pc=null,Np={};const H8=new TextDecoder,U8=new TextEncoder;class Ps{_instance;_runtimeInfo;fs;internal;static _instance=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,n,r){this._instance=e,this._runtimeInfo=r,this.fs=new G8(n),this.internal=new j8(e)}async spawn(e,n,r){let i=[];Array.isArray(n)?i=n:r=n;let s,o=new ReadableStream;if(r?.output!==!1){const b=Fp();s=b.push,o=b.stream}let a,l,u,c;if(l=new ReadableStream,c=new ReadableStream,r?.stdout){const b=Fp();a=b.push,l=b.stream}if(r?.stderr){const b=Fp();u=b.push,c=b.stream}const h=Th(Bp(s)),f=Th(Bp(a)),d=Th(Bp(u)),_=await this._instance.run({command:e,args:i,cwd:r?.cwd,env:r?.env,terminal:r?.terminal},f,d,h);return new q8(_,o,l,c)}on(e,n){if(e==="preview-message"){const s=n;n=o=>{F8(o)&&s(o)}}const{listener:r,subscribe:i}=Dg(n);return i(this._instance.on(e,fr.proxy(r)))}mount(e,n){const r=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):U8.encode(JSON.stringify(Ok(e)));return this._instance.loadFiles(fr.transfer(r,[r.buffer]),{mountPoints:n?.mountPoint})}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[fr.releaseProxy](),Ps._instance===this&&(Ps._instance=null)}static async boot(e={}){const{workdirName:n}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),n?.includes("/")||n===".."||n===".")throw new Error("workdirName should be a valid folder name");for(;Lc;)await Lc;if(Ps._instance)throw new Error("Only a single WebContainer instance can be booted");const r=K8(e);Lc=r.catch(()=>{});try{const i=await r;return Ps._instance=i,i}finally{Lc=null}}}class j8{_instance;constructor(e){this._instance=e}watchPaths(e,n){const{listener:r,subscribe:i}=Dg(n);return i(this._instance.watchPaths(e,fr.proxy(r)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:n,subscribe:r}=Dg(e);return r(this._instance.onProcessesRemove(fr.proxy(n)))}serialize(e,n){return this._instance.serialize(e,n)}}const V8=1,$8=2;class z8{name;_type;constructor(e,n){this.name=e,this._type=n}isFile(){return this._type===V8}isDirectory(){return this._type===$8}}class W8{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,n,r,i){this._apiClient=e,this._path=n,this._options=r,this._listener=i,this._apiClient._watchers.add(this),this._wrappedListener=(s,o)=>{this._listener&&!this._closed&&this._listener(s,o)},this._apiClient._fs.watch(this._path,this._options,Th(this._wrappedListener)).then(s=>{this._watcher=s,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[fr.releaseProxy]()})}}class q8{output;input;exit;_process;stdout;stderr;constructor(e,n,r,i){this.output=n,this._process=e,this.input=new WritableStream({write:s=>{this._getProcess()?.write(s).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=r,this.stderr=i}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[fr.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class G8{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,n){return await this._fs.readFile(e,n)}async rename(e,n){return await this._fs.rename(e,n)}async writeFile(e,n,r){if(n instanceof Uint8Array){const i=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);n=fr.transfer(new Uint8Array(i),[i])}await this._fs.writeFile(e,n,r)}async readdir(e,n){const r=await this._fs.readdir(e,n);return X8(r)||Q8(r)?r:r.map(s=>new z8(s.name,s["Symbol(type)"]))}async mkdir(e,n){return await this._fs.mkdir(e,n)}watch(e,n,r){return typeof n=="function"&&(r=n,n=null),new W8(this,e,n,r)}_teardown(){this._fs[fr.releaseProxy]();for(const e of this._watchers)e.close()}}async function K8(t){const{serverPromise:e}=Y8(t),r=await(await e).build({host:window.location.host,version:"1.3.0-internal.10",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),i=await r.fs(),s=await r.runtimeInfo();return new Ps(r,i,s)}function Bp(t){if(t!=null)return e=>{e instanceof Uint8Array?t(H8.decode(e)):e==null&&t(null)}}function Th(t){if(t!=null)return fr.proxy(t)}function Y8(t){if(Pc!=null)return t.coep!==Np.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${Np.coep}', new settings will not take effect!`)),{serverPromise:Pc};const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const n=J8();t.coep&&n.searchParams.set("coep",t.coep),e.src=n.toString();const{origin:r}=n;return Np={...t},Pc=new Promise(i=>{const s=o=>{if(o.origin!==r)return;const{data:a}=o;if(a.type==="init"){i(fr.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",s)}),document.body.insertBefore(e,null),{serverPromise:Pc}}function X8(t){return typeof t[0]=="string"}function Q8(t){return t[0]instanceof Uint8Array}function J8(){const t=new URL(A8.editorOrigin);return t.pathname="/headless",t.searchParams.set("version","1.3.0-internal.10"),t}function Fp(){let t=null;return{stream:new ReadableStream({start(r){t=r}}),push:r=>{r!=null?t?.enqueue(r):(t?.close(),t=null)}}}function Dg(t){let e=!1,n=()=>{};return{subscribe(i){return i.then(s=>{n=s,e&&n()}),()=>{e=!0,n()}},listener:(...i)=>{e||t(...i)}}}function Z8(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $k={exports:{}},Mt=$k.exports={},jr,Vr;function Lg(){throw new Error("setTimeout has not been defined")}function Pg(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?jr=setTimeout:jr=Lg}catch{jr=Lg}try{typeof clearTimeout=="function"?Vr=clearTimeout:Vr=Pg}catch{Vr=Pg}})();function zk(t){if(jr===setTimeout)return setTimeout(t,0);if((jr===Lg||!jr)&&setTimeout)return jr=setTimeout,setTimeout(t,0);try{return jr(t,0)}catch{try{return jr.call(null,t,0)}catch{return jr.call(this,t,0)}}}function eH(t){if(Vr===clearTimeout)return clearTimeout(t);if((Vr===Pg||!Vr)&&clearTimeout)return Vr=clearTimeout,clearTimeout(t);try{return Vr(t)}catch{try{return Vr.call(null,t)}catch{return Vr.call(this,t)}}}var vi=[],Vo=!1,Os,Ah=-1;function tH(){!Vo||!Os||(Vo=!1,Os.length?vi=Os.concat(vi):Ah=-1,vi.length&&Wk())}function Wk(){if(!Vo){var t=zk(tH);Vo=!0;for(var e=vi.length;e;){for(Os=vi,vi=[];++Ah<e;)Os&&Os[Ah].run();Ah=-1,e=vi.length}Os=null,Vo=!1,eH(t)}}Mt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];vi.push(new qk(t,e)),vi.length===1&&!Vo&&zk(Wk)};function qk(t,e){this.fun=t,this.array=e}qk.prototype.run=function(){this.fun.apply(null,this.array)};Mt.title="browser";Mt.browser=!0;Mt.env={};Mt.argv=[];Mt.version="";Mt.versions={};function Pi(){}Mt.on=Pi;Mt.addListener=Pi;Mt.once=Pi;Mt.off=Pi;Mt.removeListener=Pi;Mt.removeAllListeners=Pi;Mt.emit=Pi;Mt.prependListener=Pi;Mt.prependOnceListener=Pi;Mt.listeners=function(t){return[]};Mt.binding=function(t){throw new Error("process.binding is not supported")};Mt.cwd=function(){return"/"};Mt.chdir=function(t){throw new Error("process.chdir is not supported")};Mt.umask=function(){return 0};var nH=$k.exports;const Og=Z8(nH);function Lr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function cE(t,e){for(var n="",r=0,i=-1,s=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}function rH(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var $o={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=Og.cwd()),s=r),Lr(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=cE(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Lr(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=cE(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return Lr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Lr(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":$o.normalize(e)},relative:function(e,n){if(Lr(e),Lr(n),e===n||(e=$o.resolve(e),n=$o.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var a=n.length,l=a-o,u=s<l?s:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(n.charCodeAt(o+h)===47)return n.slice(o+h+1);if(h===0)return n.slice(o+h)}else s>u&&(e.charCodeAt(r+h)===47?c=h:h===0&&(c=0));break}var f=e.charCodeAt(r+h),d=n.charCodeAt(o+h);if(f!==d)break;f===47&&(c=h)}var _="";for(h=r+c+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+n.slice(o+c):(o+=c,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Lr(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!s){i=o;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Lr(e);var r=0,i=-1,s=!0,o;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(u===47){if(!s){r=o+1;break}}else l===-1&&(s=!1,l=o+1),a>=0&&(u===n.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=l))}return r===i?i=l:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){r=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(r,i)}},extname:function(e){Lr(e);for(var n=-1,r=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===46?n===-1?n=a:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||i===-1||o===0||o===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return rH("/",e)},parse:function(e){Lr(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var o=-1,a=0,l=-1,u=!0,c=e.length-1,h=0;c>=s;--c){if(r=e.charCodeAt(c),r===47){if(!u){a=c+1;break}continue}l===-1&&(u=!1,l=c+1),r===46?o===-1?o=c:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||l===-1||h===0||h===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(a,l)):(a===0&&i?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(a,o),n.base=e.slice(a,l)),n.ext=e.slice(o,l)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};$o.posix=$o;var Gk=$o;function $s(t){throw new Error(`Unreachable: ${t}`)}const qa=Mn("ActionRunner");class iH{#e;#t=Promise.resolve();actions=cs({});constructor(e){this.#e=e}addAction(e){const{actionId:n}=e;if(this.actions.get()[n])return;const s=new AbortController;this.actions.setKey(n,{...e.action,status:"pending",executed:!1,abort:()=>{s.abort(),this.#s(n,{status:"aborted"})},abortSignal:s.signal}),this.#t.then(()=>{this.#s(n,{status:"running"})})}async runAction(e){const{actionId:n}=e,r=this.actions.get()[n];r||$s(`Action ${n} not found`),!r.executed&&(this.#s(n,{...r,...e.action,executed:!0}),this.#t=this.#t.then(()=>this.#n(n)).catch(i=>{console.error("Action failed:",i)}))}async#n(e){const n=this.actions.get()[e];this.#s(e,{status:"running"});try{switch(n.type){case"shell":{await this.#i(n);break}case"file":{await this.#r(n);break}}this.#s(e,{status:n.abortSignal.aborted?"aborted":"complete"})}catch(r){throw this.#s(e,{status:"failed",error:"Action failed"}),r}}async#i(e){e.type!=="shell"&&$s("Expected shell action");const r=await(await this.#e).spawn("jsh",["-c",e.content],{env:{npm_config_yes:!0}});e.abortSignal.addEventListener("abort",()=>{r.kill()}),r.output.pipeTo(new WritableStream({write(s){console.log(s)}}));const i=await r.exit;qa.debug(`Process terminated with code ${i}`)}async#r(e){e.type!=="file"&&$s("Expected file action");const n=await this.#e;let r=Gk.dirname(e.filePath);if(r=r.replace(/\/+$/g,""),r!==".")try{await n.fs.mkdir(r,{recursive:!0}),qa.debug("Created folder",r)}catch(i){qa.error(`Failed to create folder

`,i)}try{await n.fs.writeFile(e.filePath,e.content),qa.debug(`File written ${e.filePath}`)}catch(i){qa.error(`Failed to write file

`,i)}}#s(e,n){const r=this.actions.get();this.actions.setKey(e,{...r[e],...n})}}const Kk="project",Rb=`/home/${Kk}`,af="bolt_file_modifications";let ul=new Promise(()=>{});ul=Promise.resolve().then(()=>Ps.boot({workdirName:Kk})).then(t=>t);class sH{#e;selectedFile=ni();documents=cs({});currentDocument=M_([this.documents,this.selectedFile],(e,n)=>{if(n)return e[n]});constructor(e){this.#e=e}setDocuments(e){const n=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([r,i])=>{if(i===void 0||i.type==="folder")return;const s=n?.[r];return[r,{value:i.content,filePath:r,scroll:s?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,n){const i=this.documents.get()[e];i&&this.documents.setKey(e,{...i,scroll:n})}updateFile(e,n){const i=this.documents.get()[e];if(!i)return;i.value!==n&&this.documents.setKey(e,{...i,value:n})}}function kh(t,e){if(!t)return null;const n="utf8",r="binary",i=e?.chunkLength??24;let s=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=kh(t,{chunkLength:i,chunkBegin:s});return o===n&&(s=Math.max(0,Math.floor(t.length/2)-i),o=kh(t,{chunkLength:i,chunkBegin:s}),o===n&&(s=Math.max(0,t.length-i),o=kh(t,{chunkLength:i,chunkBegin:s}))),o}else{if(s=oH(t,s),s===-1)return r;const o=aH(t,Math.min(t.length,s+i));if(o>t.length)return r;const a=t.toString(n,s,o);for(let l=0;l<a.length;++l){const u=a.charCodeAt(l);if(u===65533||u<=8)return r}return n}}function oH(t,e){if(e===0)return 0;if(!lH(t[e]))return e;let n=e-3;return n>=0&&zo(t[n])||(n=e-2,n>=0&&(zo(t[n])||lf(t[n])))||(n=e-1,n>=0&&(zo(t[n])||lf(t[n])||Yk(t[n])))?n:-1}function aH(t,e){if(e===t.length)return e;let n=e-3;if(n>=0&&zo(t[n]))return e+1;if(n=e-2,n>=0){if(zo(t[n]))return e+2;if(lf(t[n]))return e+1}if(n=e-1,n>=0){if(zo(t[n]))return e+3;if(lf(t[n]))return e+2;if(Yk(t[n]))return e+1}return e}function zo(t){return t>>3===30}function lf(t){return t>>4===14}function Yk(t){return t>>5===6}function lH(t){return t>>6===2}var Ib={},Td={};Td.byteLength=hH;Td.toByteArray=dH;Td.fromByteArray=gH;var Gr=[],ir=[],uH=typeof Uint8Array<"u"?Uint8Array:Array,Hp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Eo=0,cH=Hp.length;Eo<cH;++Eo)Gr[Eo]=Hp[Eo],ir[Hp.charCodeAt(Eo)]=Eo;ir[45]=62;ir[95]=63;function Xk(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function hH(t){var e=Xk(t),n=e[0],r=e[1];return(n+r)*3/4-r}function fH(t,e,n){return(e+n)*3/4-n}function dH(t){var e,n=Xk(t),r=n[0],i=n[1],s=new uH(fH(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=ir[t.charCodeAt(l)]<<18|ir[t.charCodeAt(l+1)]<<12|ir[t.charCodeAt(l+2)]<<6|ir[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=ir[t.charCodeAt(l)]<<2|ir[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=ir[t.charCodeAt(l)]<<10|ir[t.charCodeAt(l+1)]<<4|ir[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function pH(t){return Gr[t>>18&63]+Gr[t>>12&63]+Gr[t>>6&63]+Gr[t&63]}function mH(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(pH(r));return i.join("")}function gH(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(mH(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Gr[e>>2]+Gr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Gr[e>>10]+Gr[e>>4&63]+Gr[e<<2&63]+"=")),i.join("")}var Db={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Db.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+t[e+h],h+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+t[e+h],h+=f,c-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(d?-1:1)*o*Math.pow(2,s-r)};Db.write=function(t,e,n,r,i,s){var o,a,l,u=s*8-i-1,c=(1<<u)-1,h=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,_=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=a&255,d+=_,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[n+d]=o&255,d+=_,o/=256,u-=8);t[n+d-_]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Td,n=Db,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;c.TYPED_ARRAY_SUPPORT=l(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const N=new s(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,s.prototype),Object.setPrototypeOf(N,T),N.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(N){if(N>i)throw new RangeError('The value "'+N+'" is invalid for option "size"');const T=new s(N);return Object.setPrototypeOf(T,c.prototype),T}function c(N,T,k){if(typeof N=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(N)}return h(N,T,k)}c.poolSize=8192;function h(N,T,k){if(typeof N=="string")return b(N,T);if(o.isView(N))return m(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(nt(N,o)||N&&nt(N.buffer,o)||typeof a<"u"&&(nt(N,a)||N&&nt(N.buffer,a)))return g(N,T,k);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const V=N.valueOf&&N.valueOf();if(V!=null&&V!==N)return c.from(V,T,k);const Q=y(N);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return c.from(N[Symbol.toPrimitive]("string"),T,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}c.from=function(N,T,k){return h(N,T,k)},Object.setPrototypeOf(c.prototype,s.prototype),Object.setPrototypeOf(c,s);function f(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function d(N,T,k){return f(N),N<=0?u(N):T!==void 0?typeof k=="string"?u(N).fill(T,k):u(N).fill(T):u(N)}c.alloc=function(N,T,k){return d(N,T,k)};function _(N){return f(N),u(N<0?0:v(N)|0)}c.allocUnsafe=function(N){return _(N)},c.allocUnsafeSlow=function(N){return _(N)};function b(N,T){if((typeof T!="string"||T==="")&&(T="utf8"),!c.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const k=E(N,T)|0;let V=u(k);const Q=V.write(N,T);return Q!==k&&(V=V.slice(0,Q)),V}function p(N){const T=N.length<0?0:v(N.length)|0,k=u(T);for(let V=0;V<T;V+=1)k[V]=N[V]&255;return k}function m(N){if(nt(N,s)){const T=new s(N);return g(T.buffer,T.byteOffset,T.byteLength)}return p(N)}function g(N,T,k){if(T<0||N.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<T+(k||0))throw new RangeError('"length" is outside of buffer bounds');let V;return T===void 0&&k===void 0?V=new s(N):k===void 0?V=new s(N,T):V=new s(N,T,k),Object.setPrototypeOf(V,c.prototype),V}function y(N){if(c.isBuffer(N)){const T=v(N.length)|0,k=u(T);return k.length===0||N.copy(k,0,0,T),k}if(N.length!==void 0)return typeof N.length!="number"||ae(N.length)?u(0):p(N);if(N.type==="Buffer"&&Array.isArray(N.data))return p(N.data)}function v(N){if(N>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return N|0}function S(N){return+N!=N&&(N=0),c.alloc(+N)}c.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==c.prototype},c.compare=function(T,k){if(nt(T,s)&&(T=c.from(T,T.offset,T.byteLength)),nt(k,s)&&(k=c.from(k,k.offset,k.byteLength)),!c.isBuffer(T)||!c.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===k)return 0;let V=T.length,Q=k.length;for(let se=0,ce=Math.min(V,Q);se<ce;++se)if(T[se]!==k[se]){V=T[se],Q=k[se];break}return V<Q?-1:Q<V?1:0},c.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(T,k){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return c.alloc(0);let V;if(k===void 0)for(k=0,V=0;V<T.length;++V)k+=T[V].length;const Q=c.allocUnsafe(k);let se=0;for(V=0;V<T.length;++V){let ce=T[V];if(nt(ce,s))se+ce.length>Q.length?(c.isBuffer(ce)||(ce=c.from(ce)),ce.copy(Q,se)):s.prototype.set.call(Q,ce,se);else if(c.isBuffer(ce))ce.copy(Q,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ce.length}return Q};function E(N,T){if(c.isBuffer(N))return N.length;if(o.isView(N)||nt(N,o))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const k=N.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&k===0)return 0;let Q=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Oe(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return Ne(N).length;default:if(Q)return V?-1:Oe(N).length;T=(""+T).toLowerCase(),Q=!0}}c.byteLength=E;function C(N,T,k){let V=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,T>>>=0,k<=T))return"";for(N||(N="utf8");;)switch(N){case"hex":return K(this,T,k);case"utf8":case"utf-8":return ee(this,T,k);case"ascii":return I(this,T,k);case"latin1":case"binary":return z(this,T,k);case"base64":return Z(this,T,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,T,k);default:if(V)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),V=!0}}c.prototype._isBuffer=!0;function x(N,T,k){const V=N[T];N[T]=N[k],N[k]=V}c.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<T;k+=2)x(this,k,k+1);return this},c.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<T;k+=4)x(this,k,k+3),x(this,k+1,k+2);return this},c.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<T;k+=8)x(this,k,k+7),x(this,k+1,k+6),x(this,k+2,k+5),x(this,k+3,k+4);return this},c.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?ee(this,0,T):C.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(T){if(!c.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:c.compare(this,T)===0},c.prototype.inspect=function(){let T="";const k=t.INSPECT_MAX_BYTES;return T=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(T+=" ... "),"<Buffer "+T+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(T,k,V,Q,se){if(nt(T,s)&&(T=c.from(T,T.offset,T.byteLength)),!c.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(k===void 0&&(k=0),V===void 0&&(V=T?T.length:0),Q===void 0&&(Q=0),se===void 0&&(se=this.length),k<0||V>T.length||Q<0||se>this.length)throw new RangeError("out of range index");if(Q>=se&&k>=V)return 0;if(Q>=se)return-1;if(k>=V)return 1;if(k>>>=0,V>>>=0,Q>>>=0,se>>>=0,this===T)return 0;let ce=se-Q,Be=V-k;const lt=Math.min(ce,Be),xt=this.slice(Q,se),kt=T.slice(k,V);for(let ft=0;ft<lt;++ft)if(xt[ft]!==kt[ft]){ce=xt[ft],Be=kt[ft];break}return ce<Be?-1:Be<ce?1:0};function A(N,T,k,V,Q){if(N.length===0)return-1;if(typeof k=="string"?(V=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,ae(k)&&(k=Q?0:N.length-1),k<0&&(k=N.length+k),k>=N.length){if(Q)return-1;k=N.length-1}else if(k<0)if(Q)k=0;else return-1;if(typeof T=="string"&&(T=c.from(T,V)),c.isBuffer(T))return T.length===0?-1:D(N,T,k,V,Q);if(typeof T=="number")return T=T&255,typeof s.prototype.indexOf=="function"?Q?s.prototype.indexOf.call(N,T,k):s.prototype.lastIndexOf.call(N,T,k):D(N,[T],k,V,Q);throw new TypeError("val must be string, number or Buffer")}function D(N,T,k,V,Q){let se=1,ce=N.length,Be=T.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(N.length<2||T.length<2)return-1;se=2,ce/=2,Be/=2,k/=2}function lt(kt,ft){return se===1?kt[ft]:kt.readUInt16BE(ft*se)}let xt;if(Q){let kt=-1;for(xt=k;xt<ce;xt++)if(lt(N,xt)===lt(T,kt===-1?0:xt-kt)){if(kt===-1&&(kt=xt),xt-kt+1===Be)return kt*se}else kt!==-1&&(xt-=xt-kt),kt=-1}else for(k+Be>ce&&(k=ce-Be),xt=k;xt>=0;xt--){let kt=!0;for(let ft=0;ft<Be;ft++)if(lt(N,xt+ft)!==lt(T,ft)){kt=!1;break}if(kt)return xt}return-1}c.prototype.includes=function(T,k,V){return this.indexOf(T,k,V)!==-1},c.prototype.indexOf=function(T,k,V){return A(this,T,k,V,!0)},c.prototype.lastIndexOf=function(T,k,V){return A(this,T,k,V,!1)};function M(N,T,k,V){k=Number(k)||0;const Q=N.length-k;V?(V=Number(V),V>Q&&(V=Q)):V=Q;const se=T.length;V>se/2&&(V=se/2);let ce;for(ce=0;ce<V;++ce){const Be=parseInt(T.substr(ce*2,2),16);if(ae(Be))return ce;N[k+ce]=Be}return ce}function H(N,T,k,V){return at(Oe(T,N.length-k),N,k,V)}function B(N,T,k,V){return at(Ke(T),N,k,V)}function $(N,T,k,V){return at(Ne(T),N,k,V)}function G(N,T,k,V){return at(Ue(T,N.length-k),N,k,V)}c.prototype.write=function(T,k,V,Q){if(k===void 0)Q="utf8",V=this.length,k=0;else if(V===void 0&&typeof k=="string")Q=k,V=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(V)?(V=V>>>0,Q===void 0&&(Q="utf8")):(Q=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-k;if((V===void 0||V>se)&&(V=se),T.length>0&&(V<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let ce=!1;for(;;)switch(Q){case"hex":return M(this,T,k,V);case"utf8":case"utf-8":return H(this,T,k,V);case"ascii":case"latin1":case"binary":return B(this,T,k,V);case"base64":return $(this,T,k,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,T,k,V);default:if(ce)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),ce=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(N,T,k){return T===0&&k===N.length?e.fromByteArray(N):e.fromByteArray(N.slice(T,k))}function ee(N,T,k){k=Math.min(N.length,k);const V=[];let Q=T;for(;Q<k;){const se=N[Q];let ce=null,Be=se>239?4:se>223?3:se>191?2:1;if(Q+Be<=k){let lt,xt,kt,ft;switch(Be){case 1:se<128&&(ce=se);break;case 2:lt=N[Q+1],(lt&192)===128&&(ft=(se&31)<<6|lt&63,ft>127&&(ce=ft));break;case 3:lt=N[Q+1],xt=N[Q+2],(lt&192)===128&&(xt&192)===128&&(ft=(se&15)<<12|(lt&63)<<6|xt&63,ft>2047&&(ft<55296||ft>57343)&&(ce=ft));break;case 4:lt=N[Q+1],xt=N[Q+2],kt=N[Q+3],(lt&192)===128&&(xt&192)===128&&(kt&192)===128&&(ft=(se&15)<<18|(lt&63)<<12|(xt&63)<<6|kt&63,ft>65535&&ft<1114112&&(ce=ft))}}ce===null?(ce=65533,Be=1):ce>65535&&(ce-=65536,V.push(ce>>>10&1023|55296),ce=56320|ce&1023),V.push(ce),Q+=Be}return P(V)}const X=4096;function P(N){const T=N.length;if(T<=X)return String.fromCharCode.apply(String,N);let k="",V=0;for(;V<T;)k+=String.fromCharCode.apply(String,N.slice(V,V+=X));return k}function I(N,T,k){let V="";k=Math.min(N.length,k);for(let Q=T;Q<k;++Q)V+=String.fromCharCode(N[Q]&127);return V}function z(N,T,k){let V="";k=Math.min(N.length,k);for(let Q=T;Q<k;++Q)V+=String.fromCharCode(N[Q]);return V}function K(N,T,k){const V=N.length;(!T||T<0)&&(T=0),(!k||k<0||k>V)&&(k=V);let Q="";for(let se=T;se<k;++se)Q+=_e[N[se]];return Q}function O(N,T,k){const V=N.slice(T,k);let Q="";for(let se=0;se<V.length-1;se+=2)Q+=String.fromCharCode(V[se]+V[se+1]*256);return Q}c.prototype.slice=function(T,k){const V=this.length;T=~~T,k=k===void 0?V:~~k,T<0?(T+=V,T<0&&(T=0)):T>V&&(T=V),k<0?(k+=V,k<0&&(k=0)):k>V&&(k=V),k<T&&(k=T);const Q=this.subarray(T,k);return Object.setPrototypeOf(Q,c.prototype),Q};function J(N,T,k){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+T>k)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(T,k,V){T=T>>>0,k=k>>>0,V||J(T,k,this.length);let Q=this[T],se=1,ce=0;for(;++ce<k&&(se*=256);)Q+=this[T+ce]*se;return Q},c.prototype.readUintBE=c.prototype.readUIntBE=function(T,k,V){T=T>>>0,k=k>>>0,V||J(T,k,this.length);let Q=this[T+--k],se=1;for(;k>0&&(se*=256);)Q+=this[T+--k]*se;return Q},c.prototype.readUint8=c.prototype.readUInt8=function(T,k){return T=T>>>0,k||J(T,1,this.length),this[T]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(T,k){return T=T>>>0,k||J(T,2,this.length),this[T]|this[T+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(T,k){return T=T>>>0,k||J(T,2,this.length),this[T]<<8|this[T+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(T,k){return T=T>>>0,k||J(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(T,k){return T=T>>>0,k||J(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},c.prototype.readBigUInt64LE=Ce(function(T){T=T>>>0,we(T,"offset");const k=this[T],V=this[T+7];(k===void 0||V===void 0)&&de(T,this.length-8);const Q=k+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,se=this[++T]+this[++T]*2**8+this[++T]*2**16+V*2**24;return BigInt(Q)+(BigInt(se)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ce(function(T){T=T>>>0,we(T,"offset");const k=this[T],V=this[T+7];(k===void 0||V===void 0)&&de(T,this.length-8);const Q=k*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],se=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+V;return(BigInt(Q)<<BigInt(32))+BigInt(se)}),c.prototype.readIntLE=function(T,k,V){T=T>>>0,k=k>>>0,V||J(T,k,this.length);let Q=this[T],se=1,ce=0;for(;++ce<k&&(se*=256);)Q+=this[T+ce]*se;return se*=128,Q>=se&&(Q-=Math.pow(2,8*k)),Q},c.prototype.readIntBE=function(T,k,V){T=T>>>0,k=k>>>0,V||J(T,k,this.length);let Q=k,se=1,ce=this[T+--Q];for(;Q>0&&(se*=256);)ce+=this[T+--Q]*se;return se*=128,ce>=se&&(ce-=Math.pow(2,8*k)),ce},c.prototype.readInt8=function(T,k){return T=T>>>0,k||J(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},c.prototype.readInt16LE=function(T,k){T=T>>>0,k||J(T,2,this.length);const V=this[T]|this[T+1]<<8;return V&32768?V|4294901760:V},c.prototype.readInt16BE=function(T,k){T=T>>>0,k||J(T,2,this.length);const V=this[T+1]|this[T]<<8;return V&32768?V|4294901760:V},c.prototype.readInt32LE=function(T,k){return T=T>>>0,k||J(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},c.prototype.readInt32BE=function(T,k){return T=T>>>0,k||J(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},c.prototype.readBigInt64LE=Ce(function(T){T=T>>>0,we(T,"offset");const k=this[T],V=this[T+7];(k===void 0||V===void 0)&&de(T,this.length-8);const Q=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(V<<24);return(BigInt(Q)<<BigInt(32))+BigInt(k+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),c.prototype.readBigInt64BE=Ce(function(T){T=T>>>0,we(T,"offset");const k=this[T],V=this[T+7];(k===void 0||V===void 0)&&de(T,this.length-8);const Q=(k<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(Q)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+V)}),c.prototype.readFloatLE=function(T,k){return T=T>>>0,k||J(T,4,this.length),n.read(this,T,!0,23,4)},c.prototype.readFloatBE=function(T,k){return T=T>>>0,k||J(T,4,this.length),n.read(this,T,!1,23,4)},c.prototype.readDoubleLE=function(T,k){return T=T>>>0,k||J(T,8,this.length),n.read(this,T,!0,52,8)},c.prototype.readDoubleBE=function(T,k){return T=T>>>0,k||J(T,8,this.length),n.read(this,T,!1,52,8)};function re(N,T,k,V,Q,se){if(!c.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>Q||T<se)throw new RangeError('"value" argument is out of bounds');if(k+V>N.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(T,k,V,Q){if(T=+T,k=k>>>0,V=V>>>0,!Q){const Be=Math.pow(2,8*V)-1;re(this,T,k,V,Be,0)}let se=1,ce=0;for(this[k]=T&255;++ce<V&&(se*=256);)this[k+ce]=T/se&255;return k+V},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(T,k,V,Q){if(T=+T,k=k>>>0,V=V>>>0,!Q){const Be=Math.pow(2,8*V)-1;re(this,T,k,V,Be,0)}let se=V-1,ce=1;for(this[k+se]=T&255;--se>=0&&(ce*=256);)this[k+se]=T/ce&255;return k+V},c.prototype.writeUint8=c.prototype.writeUInt8=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,1,255,0),this[k]=T&255,k+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,2,65535,0),this[k]=T&255,this[k+1]=T>>>8,k+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,2,65535,0),this[k]=T>>>8,this[k+1]=T&255,k+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,4,4294967295,0),this[k+3]=T>>>24,this[k+2]=T>>>16,this[k+1]=T>>>8,this[k]=T&255,k+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,4,4294967295,0),this[k]=T>>>24,this[k+1]=T>>>16,this[k+2]=T>>>8,this[k+3]=T&255,k+4};function oe(N,T,k,V,Q){Je(T,V,Q,N,k,7);let se=Number(T&BigInt(4294967295));N[k++]=se,se=se>>8,N[k++]=se,se=se>>8,N[k++]=se,se=se>>8,N[k++]=se;let ce=Number(T>>BigInt(32)&BigInt(4294967295));return N[k++]=ce,ce=ce>>8,N[k++]=ce,ce=ce>>8,N[k++]=ce,ce=ce>>8,N[k++]=ce,k}function q(N,T,k,V,Q){Je(T,V,Q,N,k,7);let se=Number(T&BigInt(4294967295));N[k+7]=se,se=se>>8,N[k+6]=se,se=se>>8,N[k+5]=se,se=se>>8,N[k+4]=se;let ce=Number(T>>BigInt(32)&BigInt(4294967295));return N[k+3]=ce,ce=ce>>8,N[k+2]=ce,ce=ce>>8,N[k+1]=ce,ce=ce>>8,N[k]=ce,k+8}c.prototype.writeBigUInt64LE=Ce(function(T,k=0){return oe(this,T,k,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ce(function(T,k=0){return q(this,T,k,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(T,k,V,Q){if(T=+T,k=k>>>0,!Q){const lt=Math.pow(2,8*V-1);re(this,T,k,V,lt-1,-lt)}let se=0,ce=1,Be=0;for(this[k]=T&255;++se<V&&(ce*=256);)T<0&&Be===0&&this[k+se-1]!==0&&(Be=1),this[k+se]=(T/ce>>0)-Be&255;return k+V},c.prototype.writeIntBE=function(T,k,V,Q){if(T=+T,k=k>>>0,!Q){const lt=Math.pow(2,8*V-1);re(this,T,k,V,lt-1,-lt)}let se=V-1,ce=1,Be=0;for(this[k+se]=T&255;--se>=0&&(ce*=256);)T<0&&Be===0&&this[k+se+1]!==0&&(Be=1),this[k+se]=(T/ce>>0)-Be&255;return k+V},c.prototype.writeInt8=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,1,127,-128),T<0&&(T=255+T+1),this[k]=T&255,k+1},c.prototype.writeInt16LE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,2,32767,-32768),this[k]=T&255,this[k+1]=T>>>8,k+2},c.prototype.writeInt16BE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,2,32767,-32768),this[k]=T>>>8,this[k+1]=T&255,k+2},c.prototype.writeInt32LE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,4,2147483647,-2147483648),this[k]=T&255,this[k+1]=T>>>8,this[k+2]=T>>>16,this[k+3]=T>>>24,k+4},c.prototype.writeInt32BE=function(T,k,V){return T=+T,k=k>>>0,V||re(this,T,k,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[k]=T>>>24,this[k+1]=T>>>16,this[k+2]=T>>>8,this[k+3]=T&255,k+4},c.prototype.writeBigInt64LE=Ce(function(T,k=0){return oe(this,T,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ce(function(T,k=0){return q(this,T,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function F(N,T,k,V,Q,se){if(k+V>N.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function ie(N,T,k,V,Q){return T=+T,k=k>>>0,Q||F(N,T,k,4),n.write(N,T,k,V,23,4),k+4}c.prototype.writeFloatLE=function(T,k,V){return ie(this,T,k,!0,V)},c.prototype.writeFloatBE=function(T,k,V){return ie(this,T,k,!1,V)};function ue(N,T,k,V,Q){return T=+T,k=k>>>0,Q||F(N,T,k,8),n.write(N,T,k,V,52,8),k+8}c.prototype.writeDoubleLE=function(T,k,V){return ue(this,T,k,!0,V)},c.prototype.writeDoubleBE=function(T,k,V){return ue(this,T,k,!1,V)},c.prototype.copy=function(T,k,V,Q){if(!c.isBuffer(T))throw new TypeError("argument should be a Buffer");if(V||(V=0),!Q&&Q!==0&&(Q=this.length),k>=T.length&&(k=T.length),k||(k=0),Q>0&&Q<V&&(Q=V),Q===V||T.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),T.length-k<Q-V&&(Q=T.length-k+V);const se=Q-V;return this===T&&typeof s.prototype.copyWithin=="function"?this.copyWithin(k,V,Q):s.prototype.set.call(T,this.subarray(V,Q),k),se},c.prototype.fill=function(T,k,V,Q){if(typeof T=="string"){if(typeof k=="string"?(Q=k,k=0,V=this.length):typeof V=="string"&&(Q=V,V=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!c.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(T.length===1){const ce=T.charCodeAt(0);(Q==="utf8"&&ce<128||Q==="latin1")&&(T=ce)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(k<0||this.length<k||this.length<V)throw new RangeError("Out of range index");if(V<=k)return this;k=k>>>0,V=V===void 0?this.length:V>>>0,T||(T=0);let se;if(typeof T=="number")for(se=k;se<V;++se)this[se]=T;else{const ce=c.isBuffer(T)?T:c.from(T,Q),Be=ce.length;if(Be===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(se=0;se<V-k;++se)this[se+k]=ce[se%Be]}return this};const fe={};function me(N,T,k){fe[N]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(N,T){return`The "${N}" argument must be of type number. Received type ${typeof T}`},TypeError),me("ERR_OUT_OF_RANGE",function(N,T,k){let V=`The value of "${N}" is out of range.`,Q=k;return Number.isInteger(k)&&Math.abs(k)>2**32?Q=Te(String(k)):typeof k=="bigint"&&(Q=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(Q=Te(Q)),Q+="n"),V+=` It must be ${T}. Received ${Q}`,V},RangeError);function Te(N){let T="",k=N.length;const V=N[0]==="-"?1:0;for(;k>=V+4;k-=3)T=`_${N.slice(k-3,k)}${T}`;return`${N.slice(0,k)}${T}`}function Fe(N,T,k){we(T,"offset"),(N[T]===void 0||N[T+k]===void 0)&&de(T,N.length-(k+1))}function Je(N,T,k,V,Q,se){if(N>k||N<T){const ce=typeof T=="bigint"?"n":"";let Be;throw T===0||T===BigInt(0)?Be=`>= 0${ce} and < 2${ce} ** ${(se+1)*8}${ce}`:Be=`>= -(2${ce} ** ${(se+1)*8-1}${ce}) and < 2 ** ${(se+1)*8-1}${ce}`,new fe.ERR_OUT_OF_RANGE("value",Be,N)}Fe(V,Q,se)}function we(N,T){if(typeof N!="number")throw new fe.ERR_INVALID_ARG_TYPE(T,"number",N)}function de(N,T,k){throw Math.floor(N)!==N?(we(N,k),new fe.ERR_OUT_OF_RANGE("offset","an integer",N)):T<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,N)}const ke=/[^+/0-9A-Za-z-_]/g;function Pe(N){if(N=N.split("=")[0],N=N.trim().replace(ke,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function Oe(N,T){T=T||1/0;let k;const V=N.length;let Q=null;const se=[];for(let ce=0;ce<V;++ce){if(k=N.charCodeAt(ce),k>55295&&k<57344){if(!Q){if(k>56319){(T-=3)>-1&&se.push(239,191,189);continue}else if(ce+1===V){(T-=3)>-1&&se.push(239,191,189);continue}Q=k;continue}if(k<56320){(T-=3)>-1&&se.push(239,191,189),Q=k;continue}k=(Q-55296<<10|k-56320)+65536}else Q&&(T-=3)>-1&&se.push(239,191,189);if(Q=null,k<128){if((T-=1)<0)break;se.push(k)}else if(k<2048){if((T-=2)<0)break;se.push(k>>6|192,k&63|128)}else if(k<65536){if((T-=3)<0)break;se.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((T-=4)<0)break;se.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return se}function Ke(N){const T=[];for(let k=0;k<N.length;++k)T.push(N.charCodeAt(k)&255);return T}function Ue(N,T){let k,V,Q;const se=[];for(let ce=0;ce<N.length&&!((T-=2)<0);++ce)k=N.charCodeAt(ce),V=k>>8,Q=k%256,se.push(Q),se.push(V);return se}function Ne(N){return e.toByteArray(Pe(N))}function at(N,T,k,V){let Q;for(Q=0;Q<V&&!(Q+k>=T.length||Q>=N.length);++Q)T[Q+k]=N[Q];return Q}function nt(N,T){return N instanceof T||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===T.name}function ae(N){return N!==N}const _e=function(){const N="0123456789abcdef",T=new Array(256);for(let k=0;k<16;++k){const V=k*16;for(let Q=0;Q<16;++Q)T[V+Q]=N[k]+N[Q]}return T}();function Ce(N){return typeof BigInt>"u"?De:N}function De(){throw new Error("BigInt not supported")}})(Ib);const uf=Ib.Buffer,_H=Ib.Buffer;function bH(t,e){let n,r=[],i=Promise.resolve();const s=()=>{n=self.setTimeout(async()=>{await i,r.length>0&&(i=Promise.resolve(e(r))),n=void 0,r=[]},t)};return(...o)=>{r.push(o),n||s()}}function ds(){}ds.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={}),this.options=i;var o=this;function a(v){return s?(setTimeout(function(){s(void 0,v)},0),!0):v}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,u=e.length,c=1,h=l+u;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var f=(r=i.timeout)!==null&&r!==void 0?r:1/0,d=Date.now()+f,_=[{oldPos:-1,lastComponent:void 0}],b=this.extractCommon(_[0],n,e,0);if(_[0].oldPos+1>=u&&b+1>=l)return a([{value:this.join(n),count:n.length}]);var p=-1/0,m=1/0;function g(){for(var v=Math.max(p,-c);v<=Math.min(m,c);v+=2){var S=void 0,E=_[v-1],C=_[v+1];E&&(_[v-1]=void 0);var x=!1;if(C){var A=C.oldPos-v;x=C&&0<=A&&A<l}var D=E&&E.oldPos+1<u;if(!x&&!D){_[v]=void 0;continue}if(!D||x&&E.oldPos+1<C.oldPos?S=o.addToPath(C,!0,void 0,0):S=o.addToPath(E,void 0,!0,1),b=o.extractCommon(S,n,e,v),S.oldPos+1>=u&&b+1>=l)return a(yH(o,S.lastComponent,n,e,o.useLongestToken));_[v]=S,S.oldPos+1>=u&&(m=Math.min(m,v-1)),b+1>=l&&(p=Math.max(p,v+1))}c++}if(s)(function v(){setTimeout(function(){if(c>h||Date.now()>d)return s();g()||v()},0)})();else for(;c<=h&&Date.now()<=d;){var y=g();if(y)return y}},addToPath:function(e,n,r,i){var s=e.lastComponent;return s&&s.added===n&&s.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:n,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:s}}},extractCommon:function(e,n,r,i){for(var s=n.length,o=r.length,a=e.oldPos,l=a-i,u=0;l+1<s&&a+1<o&&this.equals(n[l+1],r[a+1]);)l++,a++,u++;return u&&(e.lastComponent={count:u,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function yH(t,e,n,r,i){for(var s=[],o;e;)s.push(e),o=e.previousComponent,delete e.previousComponent,e=o;s.reverse();for(var a=0,l=s.length,u=0,c=0;a<l;a++){var h=s[a];if(h.removed){if(h.value=t.join(r.slice(c,c+h.count)),c+=h.count,a&&s[a-1].added){var d=s[a-1];s[a-1]=s[a],s[a]=d}}else{if(!h.added&&i){var f=n.slice(u,u+h.count);f=f.map(function(b,p){var m=r[c+p];return m.length>b.length?m:b}),h.value=t.join(f)}else h.value=t.join(n.slice(u,u+h.count));u+=h.count,h.added||(c+=h.count)}}var _=s[l-1];return l>1&&typeof _.value=="string"&&(_.added||_.removed)&&t.equals("",_.value)&&(s[l-2].value+=_.value,s.pop()),s}var hE=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,fE=/\S/,Qk=new ds;Qk.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!fE.test(t)&&!fE.test(e)};Qk.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&hE.test(e[n])&&hE.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var Lb=new ds;Lb.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function vH(t,e,n){return Lb.diff(t,e,n)}var EH=new ds;EH.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var SH=new ds;SH.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Rh(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rh=function(e){return typeof e}:Rh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function Up(t){return wH(t)||xH(t)||CH(t)||TH()}function wH(t){if(Array.isArray(t))return Mg(t)}function xH(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function CH(t,e){if(t){if(typeof t=="string")return Mg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mg(t,e)}}function Mg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AH=Object.prototype.toString,Jl=new ds;Jl.useLongestToken=!0;Jl.tokenize=Lb.tokenize;Jl.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(s,o){return typeof o>"u"?n:o}:r;return typeof t=="string"?t:JSON.stringify(Ng(t,null,null,i),i,"  ")};Jl.equals=function(t,e){return ds.prototype.equals.call(Jl,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Ng(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var o;if(AH.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),n.push(o),s=0;s<t.length;s+=1)o[s]=Ng(t[s],e,n,r,i);return e.pop(),n.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),Rh(t)==="object"&&t!==null){e.push(t),o={},n.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=Ng(t[l],e,n,r,l);e.pop(),n.pop()}else o=t;return o}var Bg=new ds;Bg.tokenize=function(t){return t.slice()};Bg.join=Bg.removeEmpty=function(t){return t};function kH(t,e,n,r,i,s,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=vH(n,r,o);if(!a)return;a.push({value:"",lines:[]});function l(m){return m.map(function(g){return" "+g})}for(var u=[],c=0,h=0,f=[],d=1,_=1,b=function(g){var y=a[g],v=y.lines||y.value.replace(/\n$/,"").split(`
`);if(y.lines=v,y.added||y.removed){var S;if(!c){var E=a[g-1];c=d,h=_,E&&(f=o.context>0?l(E.lines.slice(-o.context)):[],c-=f.length,h-=f.length)}(S=f).push.apply(S,Up(v.map(function($){return(y.added?"+":"-")+$}))),y.added?_+=v.length:d+=v.length}else{if(c)if(v.length<=o.context*2&&g<a.length-2){var C;(C=f).push.apply(C,Up(l(v)))}else{var x,A=Math.min(v.length,o.context);(x=f).push.apply(x,Up(l(v.slice(0,A))));var D={oldStart:c,oldLines:d-c+A,newStart:h,newLines:_-h+A,lines:f};if(g>=a.length-2&&v.length<=o.context){var M=/\n$/.test(n),H=/\n$/.test(r),B=v.length==0&&f.length>D.oldLines;!M&&B&&n.length>0&&f.splice(D.oldLines,0,"\\ No newline at end of file"),(!M&&!B||!H)&&f.push("\\ No newline at end of file")}u.push(D),c=0,h=0,f=[]}d+=v.length,_+=v.length}},p=0;p<a.length;p++)b(p);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:s,hunks:u}}function Jk(t){if(Array.isArray(t))return t.map(Jk).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}function RH(t,e,n,r,i,s,o){return Jk(kH(t,e,n,r,i,s,o))}const IH=new RegExp(`^<${af}>[\\s\\S]*?<\\/${af}>\\s+`,"g");function DH(t,e){const n={};let r=!1;for(const[i,s]of e){const o=t[i];if(o?.type!=="file")continue;const a=LH(i,s,o.content);a&&(r=!0,a.length>o.content.length?n[i]={type:"file",content:o.content}:n[i]={type:"diff",content:a})}if(r)return n}function LH(t,e,n){let r=RH(t,t,e,n);const i=`--- ${t}
+++ ${t}
`,s=r.indexOf(i);if(s>=0&&(r=r.slice(s+i.length)),r!=="")return r}function PH(t){const e=Object.entries(t);if(e.length===0)return;const n=[`<${af}>`];for(const[r,{type:i,content:s}]of e)n.push(`<${i} path=${JSON.stringify(r)}>`,s,`</${i}>`);return n.push(`</${af}>`),n.join(`
`)}const dE=Mn("FilesStore"),OH=new TextDecoder("utf8",{fatal:!0});class MH{#e;#t=0;#n=new Map;files=cs({});get filesCount(){return this.#t}constructor(e){this.#e=e,this.#i()}getFile(e){const n=this.files.get()[e];if(n?.type==="file")return n}getFileModifications(){return DH(this.files.get(),this.#n)}resetFileModifications(){this.#n.clear()}async saveFile(e,n){const r=await this.#e;try{const i=Gk.relative(r.workdir,e);if(!i)throw new Error(`EINVAL: invalid file path, write '${i}'`);const s=this.getFile(e)?.content;s||$s("Expected content to be defined"),await r.fs.writeFile(i,n),this.#n.has(e)||this.#n.set(e,s),this.files.setKey(e,{type:"file",content:n,isBinary:!1}),dE.info("File updated")}catch(i){throw dE.error(`Failed to update file content

`,i),i}}async#i(){(await this.#e).internal.watchPaths({include:[`${Rb}/**`],exclude:["**/node_modules",".git"],includeContent:!0},bH(100,this.#r.bind(this)))}#r(e){const n=e.flat(2);for(const{type:r,path:i,buffer:s}of n){const o=i.replace(/\/+$/g,"");switch(r){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{r==="add_file"&&this.#t++;let a="";const l=NH(s);l||(a=this.#s(s)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#t--,this.files.setKey(o,void 0);break}}}}#s(e){if(!e||e.byteLength===0)return"";try{return OH.decode(e)}catch(n){return console.log(n),""}}}function NH(t){return t===void 0?!1:kh(BH(t),{chunkLength:100})==="binary"}function BH(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return Object.setPrototypeOf(e,_H.prototype),e}class FH{#e=new Map;#t;previews=ni([]);constructor(e){this.#t=e,this.#n()}async#n(){(await this.#t).on("port",(n,r,i)=>{let s=this.#e.get(n);if(r==="close"&&s){this.#e.delete(n),this.previews.set(this.previews.get().filter(a=>a.port!==n));return}const o=this.previews.get();s||(s={port:n,ready:r==="open",baseUrl:i},this.#e.set(n,s),o.push(s)),s.ready=r==="open",s.baseUrl=i,this.previews.set([...o])})}}function HH(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const n=new Promise((r,i)=>{t=r,e=i});return{resolve:t,reject:e,promise:n}}async function UH(t,e){const n=[],r=await t.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:e.cols??80,rows:e.rows??15}}),i=r.input.getWriter(),s=r.output,o=HH();let a=!1;return s.pipeTo(new WritableStream({write(l){if(!a){const[,u]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];u==="interactive"&&(a=!0,o.resolve())}e.write(l)}})),e.onData(l=>{a&&i.write(l)}),await o.promise,r}const jH="\x1B[0m",VH={red:"\x1B[1;31m"},$H={red:t=>`${VH.red}${t}${jH}`};class zH{#e;#t=[];showTerminal=ni(!1);constructor(e){this.#e=e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachTerminal(e){try{const n=await UH(await this.#e,e);this.#t.push({terminal:e,process:n})}catch(n){e.write($H.red(`Failed to spawn shell

`)+n.message);return}}onTerminalResize(e,n){for(const{process:r}of this.#t)r.resize({cols:e,rows:n})}}class WH{#e=new FH(ul);#t=new MH(ul);#n=new sH(this.#t);#i=new zH(ul);artifacts=cs({});showWorkbench=ni(!1);currentView=ni("code");unsavedFiles=ni(new Set);modifiedFiles=new Set;artifactIdList=[];constructor(){}get previews(){return this.#e.previews}get files(){return this.#t.files}get currentDocument(){return this.#n.currentDocument}get selectedFile(){return this.#n.selectedFile}get firstArtifact(){return this.#r(this.artifactIdList[0])}get filesCount(){return this.#t.filesCount}get showTerminal(){return this.#i.showTerminal}toggleTerminal(e){this.#i.toggleTerminal(e)}attachTerminal(e){this.#i.attachTerminal(e)}onTerminalResize(e,n){this.#i.onTerminalResize(e,n)}setDocuments(e){if(this.#n.setDocuments(e),this.#t.filesCount>0&&this.currentDocument.get()===void 0){for(const[n,r]of Object.entries(e))if(r?.type==="file"){this.setSelectedFile(n);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){const n=this.currentDocument.get()?.filePath;if(!n)return;const r=this.#t.getFile(n)?.content,i=r!==void 0&&r!==e;this.#n.updateFile(n,e);const s=this.currentDocument.get();if(s){const o=this.unsavedFiles.get();if(i&&o.has(s.filePath))return;const a=new Set(o);i?a.add(s.filePath):a.delete(s.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const n=this.currentDocument.get();if(!n)return;const{filePath:r}=n;this.#n.updateScrollPosition(r,e)}setSelectedFile(e){this.#n.setSelectedFile(e)}async saveFile(e){const r=this.#n.documents.get()[e];if(r===void 0)return;await this.#t.saveFile(e,r.value);const i=new Set(this.unsavedFiles.get());i.delete(e),this.unsavedFiles.set(i)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:n}=e,r=this.#t.getFile(n);r&&this.setCurrentDocumentContent(r.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#t.getFileModifications()}resetAllFileModifications(){this.#t.resetFileModifications()}abortAllActions(){}addArtifact({messageId:e,title:n,id:r}){this.#r(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:r,title:n,closed:!1,runner:new iH(ul)}))}updateArtifact({messageId:e},n){const r=this.#r(e);r&&this.artifacts.setKey(e,{...r,...n})}async addAction(e){const{messageId:n}=e,r=this.#r(n);r||$s("Artifact not found"),r.runner.addAction(e)}async runAction(e){const{messageId:n}=e,r=this.#r(n);r||$s("Artifact not found"),r.runner.runAction(e)}#r(e){return this.artifacts.get()[e]}}const He=new WH,Rn=await g8(),cl=ni(void 0),hl=ni(void 0);function qH(){const t=tT(),{id:e}=TN(),[n,r]=R.useState([]),[i,s]=R.useState(!1),[o,a]=R.useState();return R.useEffect(()=>{if(!Rn){s(!0),it.error("Chat persistence is unavailable");return}e&&b8(Rn,e).then(l=>{l&&l.messages.length>0?(r(l.messages),a(l.urlId),hl.set(l.description),cl.set(l.id)):t("/",{replace:!0}),s(!0)}).catch(l=>{it.error(l.message)})},[]),{ready:!e||i,initialMessages:n,storeMessageHistory:async l=>{if(!Rn||l.length===0)return;const{firstArtifact:u}=He;if(!o&&u?.id){const c=await S8(Rn,u.id);pE(c),a(c)}if(!hl.get()&&u?.title&&hl.set(u?.title),n.length===0&&!cl.get()){const c=await E8(Rn);cl.set(c),o||pE(c)}await _8(Rn,cl.get(),l,o,hl.get())}}}function pE(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({},"",e)}function GH({item:t,onDelete:e}){const[n,r]=R.useState(!1),i=R.useRef(null);return R.useEffect(()=>{function s(){r(!0)}function o(){r(!1)}return i.current?.addEventListener("mouseenter",s),i.current?.addEventListener("mouseleave",o),()=>{i.current?.removeEventListener("mouseenter",s),i.current?.removeEventListener("mouseleave",o)}},[]),L.jsx("div",{ref:i,className:"group rounded-md text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 overflow-hidden flex justify-between items-center px-2 py-1",children:L.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",children:[t.description,L.jsx("div",{className:"absolute right-0 z-1 top-0 bottom-0 bg-gradient-to-l from-bolt-elements-background-depth-2 group-hover:from-bolt-elements-background-depth-3 to-transparent w-10 flex justify-end group-hover:w-15 group-hover:from-45%",children:n&&L.jsx("div",{className:"flex items-center p-1 text-bolt-elements-textSecondary hover:text-bolt-elements-item-contentDanger",children:L.jsx(wk,{asChild:!0,children:L.jsx("button",{className:"i-ph:trash scale-110",onClick:s=>{s.preventDefault(),e?.(s)}})})})})]})})}function yn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ki(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function KH(t,e){const n=yn(t);return isNaN(e)?ki(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const Zk=6048e5,YH=864e5;let XH={};function Ad(){return XH}function Ys(t,e){const n=Ad(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=yn(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function cf(t){return Ys(t,{weekStartsOn:1})}function e2(t){const e=yn(t),n=e.getFullYear(),r=ki(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=cf(r),s=ki(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=cf(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function hf(t){const e=yn(t);return e.setHours(0,0,0,0),e}function mE(t){const e=yn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function QH(t,e){const n=hf(t),r=hf(e),i=+n-mE(n),s=+r-mE(r);return Math.round((i-s)/YH)}function JH(t){const e=e2(t),n=ki(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),cf(n)}function kd(t){return ki(t,Date.now())}function t2(t,e){const n=hf(t),r=hf(e);return+n==+r}function ZH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function e9(t){if(!ZH(t)&&typeof t!="number")return!1;const e=yn(t);return!isNaN(Number(e))}function t9(t){const e=yn(t),n=ki(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const n9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r9=(t,e,n)=>{let r;const i=n9[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function jp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const i9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},a9={date:jp({formats:i9,defaultWidth:"full"}),time:jp({formats:s9,defaultWidth:"full"}),dateTime:jp({formats:o9,defaultWidth:"full"})},l9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},u9=(t,e,n,r)=>l9[t];function Ga(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const c9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},h9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},f9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},d9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},p9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},m9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},g9=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_9={ordinalNumber:g9,era:Ga({values:c9,defaultWidth:"wide"}),quarter:Ga({values:h9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ga({values:f9,defaultWidth:"wide"}),day:Ga({values:d9,defaultWidth:"wide"}),dayPeriod:Ga({values:p9,defaultWidth:"wide",formattingValues:m9,defaultFormattingWidth:"wide"})};function Ka(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?y9(a,h=>h.test(o)):b9(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=e.slice(o.length);return{value:u,rest:c}}}function b9(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function y9(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function v9(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const E9=/^(\d+)(th|st|nd|rd)?/i,S9=/\d+/i,w9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},x9={any:[/^b/i,/^(a|c)/i]},C9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},T9={any:[/1/i,/2/i,/3/i,/4/i]},A9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},k9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},R9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},I9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},D9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},L9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},P9={ordinalNumber:v9({matchPattern:E9,parsePattern:S9,valueCallback:t=>parseInt(t,10)}),era:Ka({matchPatterns:w9,defaultMatchWidth:"wide",parsePatterns:x9,defaultParseWidth:"any"}),quarter:Ka({matchPatterns:C9,defaultMatchWidth:"wide",parsePatterns:T9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ka({matchPatterns:A9,defaultMatchWidth:"wide",parsePatterns:k9,defaultParseWidth:"any"}),day:Ka({matchPatterns:R9,defaultMatchWidth:"wide",parsePatterns:I9,defaultParseWidth:"any"}),dayPeriod:Ka({matchPatterns:D9,defaultMatchWidth:"any",parsePatterns:L9,defaultParseWidth:"any"})},O9={code:"en-US",formatDistance:r9,formatLong:a9,formatRelative:u9,localize:_9,match:P9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function M9(t){const e=yn(t);return QH(e,t9(e))+1}function N9(t){const e=yn(t),n=+cf(e)-+JH(e);return Math.round(n/Zk)+1}function n2(t,e){const n=yn(t),r=n.getFullYear(),i=Ad(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=ki(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Ys(o,e),l=ki(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const u=Ys(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function B9(t,e){const n=Ad(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=n2(t,e),s=ki(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Ys(s,e)}function F9(t,e){const n=yn(t),r=+Ys(n,e)-+B9(n,e);return Math.round(r/Zk)+1}function ht(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ni={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ht(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ht(n+1,2)},d(t,e){return ht(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ht(t.getHours()%12||12,e.length)},H(t,e){return ht(t.getHours(),e.length)},m(t,e){return ht(t.getMinutes(),e.length)},s(t,e){return ht(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ht(i,e.length)}},So={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gE={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ni.y(t,e)},Y:function(t,e,n,r){const i=n2(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ht(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ht(s,e.length)},R:function(t,e){const n=e2(t);return ht(n,e.length)},u:function(t,e){const n=t.getFullYear();return ht(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ht(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ht(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ni.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ht(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=F9(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ht(i,e.length)},I:function(t,e,n){const r=N9(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ht(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ni.d(t,e)},D:function(t,e,n){const r=M9(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ht(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ht(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ht(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ht(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=So.noon:r===0?i=So.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=So.evening:r>=12?i=So.afternoon:r>=4?i=So.morning:i=So.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ni.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ni.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ht(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ht(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ni.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ni.s(t,e)},S:function(t,e){return Ni.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bE(r);case"XXXX":case"XX":return xs(r);case"XXXXX":case"XXX":default:return xs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return bE(r);case"xxxx":case"xx":return xs(r);case"xxxxx":case"xxx":default:return xs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_E(r,":");case"OOOO":default:return"GMT"+xs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_E(r,":");case"zzzz":default:return"GMT"+xs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ht(r,e.length)},T:function(t,e,n){const r=t.getTime();return ht(r,e.length)}};function _E(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ht(s,2)}function bE(t,e){return t%60===0?(t>0?"-":"+")+ht(Math.abs(t)/60,2):xs(t,e)}function xs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ht(Math.trunc(r/60),2),s=ht(r%60,2);return n+i+e+s}const yE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},r2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},H9=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return yE(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",yE(r,e)).replace("{{time}}",r2(i,e))},U9={p:r2,P:H9},j9=/^D+$/,V9=/^Y+$/,$9=["D","DD","YY","YYYY"];function z9(t){return j9.test(t)}function W9(t){return V9.test(t)}function q9(t,e,n){const r=G9(t,e,n);if(console.warn(r),$9.includes(t))throw new RangeError(r)}function G9(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const K9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Y9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,X9=/^'([^]*?)'?$/,Q9=/''/g,J9=/[a-zA-Z]/;function Vp(t,e,n){const r=Ad(),i=r.locale??O9,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=yn(t);if(!e9(a))throw new RangeError("Invalid time value");let l=e.match(Y9).map(c=>{const h=c[0];if(h==="p"||h==="P"){const f=U9[h];return f(c,i.formatLong)}return c}).join("").match(K9).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const h=c[0];if(h==="'")return{isToken:!1,value:Z9(c)};if(gE[h])return{isToken:!0,value:c};if(h.match(J9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:c}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(c=>{if(!c.isToken)return c.value;const h=c.value;(W9(h)||z9(h))&&q9(h,e,String(t));const f=gE[h[0]];return f(a,h,i.localize,u)}).join("")}function Z9(t){const e=t.match(X9);return e?e[1].replace(Q9,"'"):t}function eU(t,e){const n=yn(t),r=yn(e);return n.getTime()>r.getTime()}function tU(t,e,n){const r=Ys(t,n),i=Ys(e,n);return+r==+i}function nU(t,e){const n=yn(t),r=yn(e);return n.getFullYear()===r.getFullYear()}function rU(t,e){return tU(t,kd(t),e)}function iU(t){return nU(t,kd(t))}function sU(t){return t2(t,kd(t))}function i2(t,e){return KH(t,-e)}function oU(t){return t2(t,i2(kd(t),1))}function aU(t){const e=t.toSorted((i,s)=>Date.parse(s.timestamp)-Date.parse(i.timestamp)),n={},r=[];return e.forEach(i=>{const s=lU(new Date(i.timestamp));if(s in n)n[s].items.push(i);else{const o={category:s,items:[i]};n[s]=o,r.push(o)}}),r}function lU(t){if(sU(t))return"Today";if(oU(t))return"Yesterday";if(rU(t))return Vp(t,"eeee");const e=i2(new Date,30);return eU(t,e)?"Last 30 Days":iU(t)?Vp(t,"MMMM"):Vp(t,"MMMM yyyy")}const uU={closed:{opacity:0,visibility:"hidden",left:"-150px",transition:{duration:.2,ease:ui}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:ui}}};function cU(){const t=R.useRef(null),[e,n]=R.useState([]),[r,i]=R.useState(!1),[s,o]=R.useState(null),a=R.useCallback(()=>{Rn&&Lk(Rn).then(c=>c.filter(h=>h.urlId&&h.description)).then(n).catch(c=>it.error(c.message))},[]),l=R.useCallback((c,h)=>{c.preventDefault(),Rn&&Pk(Rn,h.id).then(()=>{a(),cl.get()===h.id&&(window.location.pathname="/")}).catch(f=>{it.error("Failed to delete conversation"),d8.error(f)})},[]),u=()=>{o(null)};return R.useEffect(()=>{r&&a()},[r]),R.useEffect(()=>{function f(d){d.pageX<40&&i(!0),t.current&&d.clientX>t.current.getBoundingClientRect().right+40&&i(!1)}return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}},[]),L.jsxs(xr.div,{ref:t,initial:"closed",animate:r?"open":"closed",variants:uU,className:"flex flex-col side-menu fixed top-0 w-[350px] h-full bg-bolt-elements-background-depth-2 border-r rounded-r-3xl border-bolt-elements-borderColor z-sidebar shadow-xl shadow-bolt-elements-sidebar-dropdownShadow text-sm",children:[L.jsx("div",{className:"flex items-center h-[var(--header-height)]"}),L.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[L.jsxs("div",{className:"p-4 space-y-2",children:[L.jsxs("a",{href:"/",className:"flex gap-2 items-center bg-bolt-elements-sidebar-buttonBackgroundDefault text-bolt-elements-sidebar-buttonText hover:bg-bolt-elements-sidebar-buttonBackgroundHover rounded-md p-2 transition-theme",children:[L.jsx("span",{className:"inline-block i-ph:house scale-110"}),"Home"]}),L.jsxs("button",{className:"flex w-full gap-2 items-center text-bolt-elements-sidebar-buttonText hover:bg-bolt-elements-sidebar-buttonBackgroundHover rounded-md p-2 transition-theme",children:[L.jsx("span",{className:"inline-block i-ph:magnifying-glass scale-110"}),"Search"]})]}),L.jsx("div",{className:"text-bolt-elements-textPrimary font-medium pl-6 pr-5 my-2 text-xs uppercase tracking-wider",children:"Projects"}),L.jsxs("div",{className:"flex-1 overflow-scroll pl-4 pr-5 pb-5",children:[e.length===0&&L.jsx("div",{className:"pl-2 text-bolt-elements-textTertiary",children:"No recent projects"}),L.jsxs(Sk,{open:s!==null,children:[aU(e).map(({category:c,items:h})=>L.jsxs("div",{className:"mt-4 first:mt-0 space-y-1",children:[L.jsx("div",{className:"text-bolt-elements-textTertiary sticky top-0 z-1 bg-bolt-elements-background-depth-2 pl-2 pt-2 pb-1",children:c}),h.map(f=>L.jsx(GH,{item:f,onDelete:()=>o({type:"delete",item:f})},f.id))]},c)),L.jsx(u8,{onBackdrop:u,onClose:u,children:s?.type==="delete"&&L.jsxs(L.Fragment,{children:[L.jsx(a8,{children:"Delete Chat?"}),L.jsx(l8,{asChild:!0,children:L.jsxs("div",{children:[L.jsxs("p",{children:["You are about to delete ",L.jsx("strong",{children:s.item.description}),"."]}),L.jsx("p",{className:"mt-1",children:"Are you sure you want to delete this chat?"})]})}),L.jsxs("div",{className:"px-5 pb-4 bg-bolt-elements-background-depth-2 flex gap-2 justify-end",children:[L.jsx(aE,{type:"secondary",onClick:u,children:"Cancel"}),L.jsx(aE,{type:"danger",onClick:c=>{l(c,s.item),u()},children:"Delete"})]})]})})]})]}),L.jsxs("div",{className:"p-4 border-t border-bolt-elements-borderColor",children:[L.jsxs("div",{className:"bg-bolt-elements-bg-depth-3 rounded-lg p-3 mb-4",children:[L.jsx("div",{className:"font-bold text-sm text-bolt-elements-textPrimary mb-1",children:"Upgrade to Pro"}),L.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mb-2",children:"Unlock more benefits"}),L.jsx("button",{className:"w-full bg-bolt-elements-button-primary-background hover:bg-bolt-elements-button-primary-backgroundHover text-bolt-elements-button-primary-text rounded px-2 py-1 text-xs font-medium transition-colors",children:"Upgrade"})]}),L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary text-sm",children:[L.jsx("div",{className:"i-ph:user-circle text-xl"}),L.jsx("span",{children:"Profile"})]}),L.jsx(c8,{})]})]})]})]})}let Fg=[],s2=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?s2:Fg).push(n=n+t[e])})();function hU(t){if(t<768)return!1;for(let e=0,n=Fg.length;;){let r=e+n>>1;if(t<Fg[r])n=r;else if(t>=s2[r])e=r+1;else return!0;if(e==n)return!1}}function vE(t){return t>=127462&&t<=127487}const EE=8205;function fU(t,e,n=!0,r=!0){return(n?o2:dU)(t,e,r)}function o2(t,e,n){if(e==t.length)return e;e&&a2(t.charCodeAt(e))&&l2(t.charCodeAt(e-1))&&e--;let r=$p(t,e);for(e+=SE(r);e<t.length;){let i=$p(t,e);if(r==EE||i==EE||n&&hU(i))e+=SE(i),r=i;else if(vE(i)){let s=0,o=e-2;for(;o>=0&&vE($p(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function dU(t,e,n){for(;e>0;){let r=o2(t,e-2,n);if(r<e)return r;e--}return 0}function $p(t,e){let n=t.charCodeAt(e);if(!l2(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return a2(r)?(n-55296<<10)+(r-56320)+65536:n}function a2(t){return t>=56320&&t<57344}function l2(t){return t>=55296&&t<56320}function SE(t){return t<65536?1:2}let ut=class u2{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ha(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Kr.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ha(this,e,n);let r=[];return this.decompose(e,n,r,0),Kr.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new kl(this),s=new kl(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new kl(this,e)}iterRange(e,n=this.length){return new c2(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new h2(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?u2.empty:e.length<=32?new Lt(e):Kr.from(Lt.split(e,[]))}};class Lt extends ut{constructor(e,n=pU(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new mU(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Lt(wE(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Ih(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Lt(a,o.length+s.length));else{let l=a.length>>1;r.push(new Lt(a.slice(0,l)),new Lt(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Lt))return super.replace(e,n,r);[e,n]=ha(this,e,n);let i=Ih(this.text,Ih(r.text,wE(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Lt(i,s):Kr.from(Lt.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ha(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Lt(r,i)),r=[],i=-1);return i>-1&&n.push(new Lt(r,i)),n}}class Kr extends ut{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?r.push(a):a.decompose(e-o,n-o,r,u)}o=l+1}}replace(e,n,r){if([e,n]=ha(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new Kr(c,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ha(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Kr))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let _ of e)_.flatten(d);return new Lt(d,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function h(d){let _;if(d.lines>s&&d instanceof Kr)for(let b of d.children)h(b);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof Lt&&l&&(_=c[c.length-1])instanceof Lt&&d.lines+_.lines<=32?(l+=d.lines,u+=d.length+1,c[c.length-1]=new Lt(_.text.concat(d.text),_.length+1+d.length)):(l+d.lines>i&&f(),l+=d.lines,u+=d.length+1,c.push(d))}function f(){l!=0&&(a.push(c.length==1?c[0]:Kr.from(c,u)),u=-1,l=c.length=0)}for(let d of e)h(d);return f(),a.length==1?a[0]:new Kr(a,n)}}ut.empty=new Lt([""],0);function pU(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Ih(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function wE(t,e,n){return Ih(t,[""],e,n)}class kl{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Lt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Lt?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Lt){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Lt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class c2{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new kl(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class h2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},kl.prototype[Symbol.iterator]=c2.prototype[Symbol.iterator]=h2.prototype[Symbol.iterator]=function(){return this});class mU{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ha(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Kt(t,e,n=!0,r=!0){return fU(t,e,n,r)}function gU(t){return t>=56320&&t<57344}function _U(t){return t>=55296&&t<56320}function _r(t,e){let n=t.charCodeAt(e);if(!_U(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return gU(r)?(n-55296<<10)+(r-56320)+65536:n}function Pb(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function mi(t){return t<65536?1:2}const Hg=/\r\n?|\n/;var _n=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(_n||(_n={}));class ai{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){Ug(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new ai(e)}composeDesc(e){return this.empty?e:e.empty?this:f2(this,e)}mapDesc(e,n=!1){return e.empty?this:jg(this,e,n)}mapPos(e,n=-1,r=_n.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=_n.Simple&&u>=e&&(r==_n.TrackDel&&i<e&&u>e||r==_n.TrackBefore&&i<e||r==_n.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ai(e)}static create(e){return new ai(e)}}class Gt extends ai{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ug(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return jg(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(ut.empty);r.push(o?e.slice(s,s+o):ut.empty)}s+=o}return new Gt(n,r)}compose(e){return this.empty?e:e.empty?this:f2(this,e,!0)}map(e,n=!1){return e.empty?this:jg(this,e,n,!0)}iterChanges(e,n=!1){Ug(this,e,n)}get desc(){return ai.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Zl(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);mn(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;mn(n,c,h),h>0&&Ki(r,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);mn(n,c,-1),mn(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new Gt(n,r),filtered:ai.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<n&&mn(i,n-o,-1);let h=new Gt(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Gt){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let _=d?typeof d=="string"?ut.of(d.split(r||Hg)):d:ut.empty,b=_.length;if(h==f&&b==0)return;h<o&&l(),h>o&&mn(i,h-o,-1),mn(i,f-h,b),Ki(s,i,_),o=f}}return u(e),l(!a),a}static empty(e){return new Gt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(ut.empty);r[i]=ut.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Gt(n,r)}static createSet(e,n){return new Gt(e,n)}}function mn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Ki(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(ut.empty);t.push(n)}}function Ug(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,h=ut.empty;for(;u+=a,c+=l,l&&r&&(h=h.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,u,s,c,h),i=u,s=c}}}function jg(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Zl(t),a=new Zl(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);mn(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(mn(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(mn(i,0,o.ins),s&&Ki(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let h=Math.min(c,a.len);u+=h,c-=h,a.forward(h)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;mn(i,u,l<o.i?o.ins:0),s&&l<o.i&&Ki(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?Gt.createSet(i,s):ai.create(i);throw new Error("Mismatched change set lengths")}}}function f2(t,e,n=!1){let r=[],i=n?[]:null,s=new Zl(t),o=new Zl(e);for(let a=!1;;){if(s.done&&o.done)return i?Gt.createSet(r,i):ai.create(r);if(s.ins==0)mn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)mn(r,0,o.ins,a),i&&Ki(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;mn(r,l,c,a),i&&c&&Ki(i,r,o.text)}else o.ins==-1?(mn(r,s.off?0:s.len,l,a),i&&Ki(i,r,s.textBit(l))):(mn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Ki(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class Zl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ut.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?ut.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ms{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Ms(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return he.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return he.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return he.range(e.anchor,e.head)}static create(e,n,r){return new Ms(e,n,r)}}class he{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:he.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new he([this.main],0)}addRange(e,n=!0){return he.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,he.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new he(e.ranges.map(n=>Ms.fromJSON(n)),e.main)}static single(e,n=e){return new he([he.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return he.normalized(e.slice(),n);r=s.to}return new he(e,n)}static cursor(e,n=0,r,i){return Ms.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Ms.create(n,e,48|s):Ms.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?he.range(l,a):he.range(a,l))}}return new he(e,n)}}function d2(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Ob=0;class Re{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Ob++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Re(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Mb),!!e.static,e.enables)}of(e){return new Dh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dh(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Mb(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Dh{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Ob++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,f){if(l&&f.docChanged||u&&(f.docChanged||f.selection)||Vg(h,c)){let d=r(h);if(a?!xE(d,h.values[o],i):!i(d,h.values[o]))return h.values[o]=d,1}return 0},reconfigure:(h,f)=>{let d,_=f.config.address[s];if(_!=null){let b=df(f,_);if(this.dependencies.every(p=>p instanceof Re?f.facet(p)===h.facet(p):p instanceof nn?f.field(p,!1)==h.field(p,!1):!0)||(a?xE(d=r(h),b,i):i(d=r(h),b)))return h.values[o]=b,0}else d=r(h);return h.values[o]=d,1}}}}function xE(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Vg(t,e){let n=!1;for(let r of e)Rl(t,r)&1&&(n=!0);return n}function bU(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let h=df(l,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(l){for(let u of r)Rl(l,u);return l.values[o]=a(l),1},update(l,u){if(!Vg(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=Vg(l,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&Mb(n,h))return l.values[o]=f,0;let d=a(l);return e.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const Oc=Re.define({static:!0});class nn{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new nn(Ob++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Oc).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Oc),o=i.facet(Oc),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Oc.of({field:this,create:e})]}get extension(){return this}}const ks={lowest:4,low:3,default:2,high:1,highest:0};function Ya(t){return e=>new p2(e,t)}const ps={highest:Ya(ks.highest),high:Ya(ks.high),default:Ya(ks.default),low:Ya(ks.low),lowest:Ya(ks.lowest)};class p2{constructor(e,n){this.inner=e,this.prec=n}}class Ta{of(e){return new $g(this,e)}reconfigure(e){return Ta.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class $g{constructor(e,n){this.compartment=e,this.inner=n}}class ff{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of yU(e,n,o))f instanceof nn?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],u=[];for(let f of i)a[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r?.config.facets;for(let f in s){let d=s[f],_=d[0].facet,b=c&&c[f]||[];if(d.every(p=>p.type==0))if(a[_.id]=l.length<<1|1,Mb(b,d))l.push(r.facet(_));else{let p=_.combine(d.map(m=>m.value));l.push(r&&_.compare(p,r.facet(_))?r.facet(_):p)}else{for(let p of d)p.type==0?(a[p.id]=l.length<<1|1,l.push(p.value)):(a[p.id]=u.length<<1,u.push(m=>p.dynamicSlot(m)));a[_.id]=u.length<<1,u.push(p=>bU(p,_,d))}}let h=u.map(f=>f(a));return new ff(e,o,h,a,l,s)}}function yU(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof $g&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof $g){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof p2)s(o.inner,o.prec);else if(o instanceof nn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Dh)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,ks.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,ks.default),r.reduce((o,a)=>o.concat(a))}function Rl(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function df(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const m2=Re.define(),zg=Re.define({combine:t=>t.some(e=>e),static:!0}),g2=Re.define({combine:t=>t.length?t[0]:void 0,static:!0}),_2=Re.define(),b2=Re.define(),y2=Re.define(),v2=Re.define({combine:t=>t.length?t[0]:!1});class Oi{constructor(e,n){this.type=e,this.value=n}static define(){return new vU}}class vU{of(e){return new Oi(this,e)}}class EU{constructor(e){this.map=e}of(e){return new Ge(this,e)}}class Ge{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ge(this.type,n)}is(e){return this.type==e}static define(e={}){return new EU(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Ge.reconfigure=Ge.define();Ge.appendConfig=Ge.define();class jt{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&d2(r,n.newLength),s.some(a=>a.type==jt.time)||(this.annotations=s.concat(jt.time.of(Date.now())))}static create(e,n,r,i,s,o){return new jt(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(jt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}jt.time=Oi.define();jt.userEvent=Oi.define();jt.addToHistory=Oi.define();jt.remote=Oi.define();function SU(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function E2(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Gt.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Ge.mapEffects(t.effects,i).concat(Ge.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Wg(t,e,n){let r=e.selection,i=Wo(e.annotations);return e.userEvent&&(i=i.concat(jt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Gt?e.changes:Gt.of(e.changes||[],n,t.facet(g2)),selection:r&&(r instanceof he?r:he.single(r.anchor,r.head)),effects:Wo(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function S2(t,e,n){let r=Wg(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=E2(r,Wg(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=jt.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return xU(n?wU(i):i)}function wU(t){let e=t.startState,n=!0;for(let i of e.facet(_2)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:SU(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Gt.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=jt.create(e,i,t.selection&&t.selection.map(s),Ge.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(b2);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof jt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof jt?t=s[0]:t=S2(e,Wo(s),!1)}return t}function xU(t){let e=t.startState,n=e.facet(y2),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=E2(r,Wg(e,s,t.changes.newLength),!0))}return r==t?t:jt.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const CU=[];function Wo(t){return t==null?CU:Array.isArray(t)?t:[t]}var Vt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Vt||(Vt={}));const TU=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let qg;try{qg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function AU(t){if(qg)return qg.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||TU.test(n)))return!0}return!1}function kU(t){return e=>{if(!/\S/.test(e))return Vt.Space;if(AU(e))return Vt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Vt.Word;return Vt.Other}}class ot{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Rl(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Rl(this,r),df(this,r)}update(...e){return S2(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Ta.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,u)=>i.set(u,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Ge.reconfigure)?(n=null,r=a.value):a.is(Ge.appendConfig)&&(n=null,r=Wo(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=ff.resolve(r,i,this),s=new ot(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(zg)?e.newSelection:e.newSelection.asSingle();new ot(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:he.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Wo(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(l.range.map(h)),i=i.compose(c),o=Ge.mapEffects(o,c).concat(Ge.mapEffects(Wo(l.effects),h))}return{changes:i,selection:he.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Gt?e:Gt.of(e,this.doc.length,this.facet(ot.lineSeparator))}toText(e){return ut.of(e.split(this.facet(ot.lineSeparator)||Hg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Rl(this,n),df(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof nn&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ot.create({doc:e.doc,selection:he.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=ff.resolve(e.extensions||[],new Map),r=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(n.staticFacet(ot.lineSeparator)||Hg)),i=e.selection?e.selection instanceof he?e.selection:he.single(e.selection.anchor,e.selection.head):he.single(0);return d2(i,r.length),n.staticFacet(zg)||(i=i.asSingle()),new ot(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ot.tabSize)}get lineBreak(){return this.facet(ot.lineSeparator)||`
`}get readOnly(){return this.facet(v2)}phrase(e,...n){for(let r of this.facet(ot.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(m2))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return kU(n.length?n[0]:"")}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Kt(n,o,!1);if(s(n.slice(l,o))!=Vt.Word)break;o=l}for(;a<i;){let l=Kt(n,a);if(s(n.slice(a,l))!=Vt.Word)break;a=l}return o==a?null:he.range(o+r,a+r)}}ot.allowMultipleSelections=zg;ot.tabSize=Re.define({combine:t=>t.length?t[0]:4});ot.lineSeparator=g2;ot.readOnly=v2;ot.phrases=Re.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ot.languageData=m2;ot.changeFilter=_2;ot.transactionFilter=b2;ot.transactionExtender=y2;Ta.reconfigure=Ge.define();function so(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class ts{eq(e){return this==e}range(e,n=e){return Gg.create(e,n,this)}}ts.prototype.startSide=ts.prototype.endSide=0;ts.prototype.point=!1;ts.prototype.mapMode=_n.TrackDel;function Nb(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let Gg=class w2{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new w2(e,n,r)}};function Kg(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Bb{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,h=this.to[l]+e,f,d;if(c==h){let _=n.mapPos(c,u.startSide,u.mapMode);if(_==null||(f=d=_,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(a=Math.max(a,d-f)),r.push(u),i.push(f-o),s.push(d-o))}return{mapped:r.length?new Bb(i,s,r,a):null,pos:o}}}class et{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new et(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Kg)),this.isEmpty)return n.length?et.of(n):this;let a=new x2(this,null,-1).goto(0),l=0,u=[],c=new Xs;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let h=n[l++];c.addInner(h.from,h.to,h.value)||u.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(Gg.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?et.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:h}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new et(r,n,s||et.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return eu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return eu.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=CE(o,a,r),u=new Xa(o,l,s),c=new Xa(a,l,s);r.iterGaps((h,f,d)=>TE(u,h,c,f,d,i)),r.empty&&r.length==0&&TE(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=CE(s,o),l=new Xa(s,a,0).goto(r),u=new Xa(o,a,0).goto(r);for(;;){if(l.to!=u.to||!Yg(l.active,u.active)||l.point&&(!u.point||!Nb(l.point,u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,s=-1){let o=new Xa(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,o.point,c,h,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Xs;for(let i of e instanceof Gg?[e]:n?RU(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return et.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=et.empty;i=i.nextLayer)n=new et(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}et.empty=new et([],[],null,-1);function RU(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Kg(e,r)>0)return t.slice().sort(Kg);e=r}return t}et.empty.nextLayer=et.empty;class Xs{finishChunk(e){this.chunks.push(new Bb(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Xs)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(et.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=et.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function CE(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class x2{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class eu{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new x2(o,n,r,s));return i.length==1?i[0]:new eu(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)zp(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)zp(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),zp(this.heap,0)}}}function zp(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Xa{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=eu.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Mc(this.active,e),Mc(this.activeTo,e),Mc(this.activeRank,e),this.minActive=AE(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Nc(this.active,n,r),Nc(this.activeTo,n,i),Nc(this.activeRank,n,s),e&&Nc(e,n,this.cursor.from),this.minActive=AE(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Mc(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function TE(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e,u=!!s.boundChange;for(let c=!1;;){let h=t.to+l-n.to,f=h||t.endSide-n.endSide,d=f<0?t.to+l:n.to,_=Math.min(d,o);if(t.point||n.point?(t.point&&n.point&&Nb(t.point,n.point)&&Yg(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,_,t.point,n.point),c=!1):(c&&s.boundChange(a),_>a&&!Yg(t.active,n.active)&&s.compareRange(a,_,t.active,n.active),u&&_<o&&(h||t.openEnd(d)!=n.openEnd(d))&&(c=!0)),d>o)break;a=d,f<=0&&t.next(),f>=0&&n.next()}}function Yg(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!Nb(t[n],e[n]))return!1;return!0}function Mc(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Nc(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function AE(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Rd(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Kt(t,i));return r}function IU(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Kt(t,i)}return t.length}const Xg="",kE=typeof Symbol>"u"?"__"+Xg:Symbol.for(Xg),Qg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),RE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ns{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let d in a){let _=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(b=>o.map(p=>b.replace(/&/,p))).reduce((b,p)=>b.concat(p)),_,l);else if(_&&typeof _=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),_,c,f)}else _!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+_+";")}(c.length||f)&&l.push((r&&!h&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=RE[kE]||1;return RE[kE]=e+1,Xg+e.toString(36)}static mount(e,n,r){let i=e[Qg],s=r&&r.nonce;i?s&&i.setNonce(s):i=new DU(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let IE=new Map;class DU{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=IE.get(r);if(s)return e[Qg]=s;this.sheet=new i.CSSStyleSheet,IE.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Qg]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var rs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},LU=typeof navigator<"u"&&/Mac/.test(navigator.platform),PU=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var on=0;on<10;on++)rs[48+on]=rs[96+on]=String(on);for(var on=1;on<=24;on++)rs[on+111]="F"+on;for(var on=65;on<=90;on++)rs[on]=String.fromCharCode(on+32),tu[on]=String.fromCharCode(on);for(var Wp in rs)tu.hasOwnProperty(Wp)||(tu[Wp]=rs[Wp]);function OU(t){var e=LU&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||PU&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?tu:rs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Qt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)C2(t,arguments[e]);return t}function C2(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)C2(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let Sn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Jg=typeof document<"u"?document:{documentElement:{style:{}}};const Zg=/Edge\/(\d+)/.exec(Sn.userAgent),T2=/MSIE \d/.test(Sn.userAgent),e0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sn.userAgent),Id=!!(T2||e0||Zg),DE=!Id&&/gecko\/(\d+)/i.test(Sn.userAgent),qp=!Id&&/Chrome\/(\d+)/.exec(Sn.userAgent),MU="webkitFontSmoothing"in Jg.documentElement.style,t0=!Id&&/Apple Computer/.test(Sn.vendor),LE=t0&&(/Mobile\/\w+/.test(Sn.userAgent)||Sn.maxTouchPoints>2);var Ae={mac:LE||/Mac/.test(Sn.platform),windows:/Win/.test(Sn.platform),linux:/Linux|X11/.test(Sn.platform),ie:Id,ie_version:T2?Jg.documentMode||6:e0?+e0[1]:Zg?+Zg[1]:0,gecko:DE,gecko_version:DE?+(/Firefox\/(\d+)/.exec(Sn.userAgent)||[0,0])[1]:0,chrome:!!qp,chrome_version:qp?+qp[1]:0,ios:LE,android:/Android\b/.test(Sn.userAgent),webkit_version:MU?+(/\bAppleWebKit\/(\d+)/.exec(Sn.userAgent)||[0,0])[1]:0,safari:t0,safari_version:t0?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Sn.userAgent)||[0,0])[1]:0,tabSize:Jg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Fb(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const pf=Object.create(null);function Hb(t,e,n){if(t==e)return!0;t||(t=pf),e||(e=pf);let r=Object.keys(t),i=Object.keys(e);if(r.length-0!=i.length-0)return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function NU(t,e){for(let n=t.attributes.length-1;n>=0;n--){let r=t.attributes[n].name;e[r]==null&&t.removeAttribute(r)}for(let n in e){let r=e[n];n=="style"?t.style.cssText=r:t.getAttribute(n)!=r&&t.setAttribute(n,r)}}function PE(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function BU(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class oo{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var an=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(an||(an={}));class st extends ts{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Gu(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Qs(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=A2(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Qs(e,r,i,n,e.widget||null,!0)}static line(e){return new Ku(e)}static set(e,n=!1){return et.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}st.none=et.empty;class Gu extends st{constructor(e){let{start:n,end:r}=A2(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Fb(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||pf}eq(e){return this==e||e instanceof Gu&&this.tagName==e.tagName&&Hb(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Gu.prototype.point=!1;class Ku extends st{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ku&&this.spec.class==e.spec.class&&Hb(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Ku.prototype.mapMode=_n.TrackBefore;Ku.prototype.point=!0;class Qs extends st{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?_n.TrackBefore:_n.TrackAfter:_n.TrackDel}get type(){return this.startSide!=this.endSide?an.WidgetRange:this.startSide<=0?an.WidgetBefore:an.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Qs&&FU(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Qs.prototype.point=!0;function A2(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function FU(t,e){return t==e||!!(t&&e&&t.compare(e))}function qo(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class nu extends ts{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof nu&&this.tagName==e.tagName&&Hb(this.attributes,e.attributes)}static create(e){return new nu(e.tagName,e.attributes||pf)}static set(e,n=!1){return et.of(e,n)}}nu.prototype.startSide=nu.prototype.endSide=-1;function fa(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function n0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Il(t,e){if(!e.anchorNode)return!1;try{return n0(t,e.anchorNode)}catch{return!1}}function Lh(t){return t.nodeType==3?ru(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Dl(t,e,n,r){return n?OE(t,e,n,r,-1)||OE(t,e,n,r,1):!1}function is(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function mf(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function OE(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ri(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=is(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Ri(t):0}else return!1}}function Ri(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function gf(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function HU(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function k2(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function UU(t,e,n,r,i,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==l.body,_=1,b=1;if(d)f=HU(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let g=c.getBoundingClientRect();({scaleX:_,scaleY:b}=k2(c,g)),f={left:g.left,right:g.left+c.clientWidth*_,top:g.top,bottom:g.top+c.clientHeight*b}}let p=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+o),n>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,n<0&&e.top-m<f.top&&(m=e.top-(f.top+o)));else{let g=e.bottom-e.top,y=f.bottom-f.top;m=(i=="center"&&g<=y?e.top+g/2-y/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-y+o)-f.top}if(r=="nearest"?e.left<f.left?(p=e.left-(f.left+s),n>0&&e.right>f.right+p&&(p=e.right-f.right+s)):e.right>f.right&&(p=e.right-f.right+s,n<0&&e.left<f.left+p&&(p=e.left-(f.left+s))):p=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,p||m)if(d)u.scrollBy(p,m);else{let g=0,y=0;if(m){let v=c.scrollTop;c.scrollTop+=m/b,y=(c.scrollTop-v)*b}if(p){let v=c.scrollLeft;c.scrollLeft+=p/_,g=(c.scrollLeft-v)*_}e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y},g&&Math.abs(g-p)<1&&(r="nearest"),y&&Math.abs(y-m)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function jU(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class VU{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Ri(n):0),r,Math.min(e.focusOffset,r?Ri(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Cs=null;Ae.safari&&Ae.safari_version>=26&&(Cs=!1);function R2(t){if(t.setActive)return t.setActive();if(Cs)return t.focus(Cs);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Cs==null?{get preventScroll(){return Cs={preventScroll:!0},!0}}:void 0),!Cs){Cs=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let ME;function ru(t,e,n=e){let r=ME||(ME=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Go(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function $U(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function zU(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Ri(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Ri(n))}else{if(n==t)return!0;r=is(n),n=n.parentNode}}function I2(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function D2(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Ri(n)}else if(n.parentNode&&!mf(n))r=is(n),n=n.parentNode;else return null}}function L2(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!mf(n))r=is(n)+1,n=n.parentNode;else return null}}class vr{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new vr(e.parentNode,is(e),n)}static after(e,n){return new vr(e.parentNode,is(e)+1,n)}}var St=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(St||(St={}));const Js=St.LTR,Ub=St.RTL;function P2(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const WU=P2("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),qU=P2("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),r0=Object.create(null),Pr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);r0[e]=n,r0[n]=-e}function O2(t){return t<=247?WU[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?qU[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const GU=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ei{get dir(){return this.level%2?Ub:Js}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function M2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!M2(r.inner,i.inner))return!1}return!0}const dt=[];function KU(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let u=o,c=l,h=l;u<a;u++){let f=O2(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),dt[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=o,c=l,h=l;u<a;u++){let f=dt[u];if(f==128)u<a-1&&c==dt[u+1]&&c&24?f=dt[u]=c:dt[u]=256;else if(f==64){let d=u+1;for(;d<a&&dt[d]==64;)d++;let _=u&&c==8||d<n&&dt[d]==8?h==1?1:8:256;for(let b=u;b<d;b++)dt[b]=_;u=d-1}else f==8&&h==1&&(dt[u]=1);c=f,f&7&&(h=f)}}}function YU(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,c=o<r.length?r[o].from:n;for(let h=u,f,d,_;h<c;h++)if(d=r0[f=t.charCodeAt(h)])if(d<0){for(let b=a-3;b>=0;b-=3)if(Pr[b+1]==-d){let p=Pr[b+2],m=p&2?i:p&4?p&1?s:i:0;m&&(dt[h]=dt[Pr[b]]=m),a=b;break}}else{if(Pr.length==189)break;Pr[a++]=h,Pr[a++]=f,Pr[a++]=l}else if((_=dt[h])==2||_==1){let b=_==i;l=b?0:1;for(let p=a-3;p>=0;p-=3){let m=Pr[p+2];if(m&2)break;if(b)Pr[p+2]|=2;else{if(m&4)break;Pr[p+2]|=4}}}}}function XU(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let u=dt[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==n.length)break;c=n[i++].to,a=i<n.length?n[i].from:e}else if(dt[c]==256)c++;else break;let h=s==1,f=(c<e?dt[c]:r)==1,d=h==f?h?1:2:r;for(let _=c,b=i,p=b?n[b-1].to:t;_>l;)_==p&&(_=n[--b].from,p=b?n[b-1].to:t),dt[--_]=d;l=c}else s=u,l++}}}function i0(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<n;){let c=!0,h=!1;if(u==s.length||l<s[u].from){let b=dt[l];b!=a&&(c=!1,h=b==16)}let f=!c&&a==1?[]:null,d=c?r:r+1,_=l;e:for(;;)if(u<s.length&&_==s[u].from){if(h)break e;let b=s[u];if(!c)for(let p=b.to,m=u+1;;){if(p==n)break e;if(m<s.length&&s[m].from==p)p=s[m++].to;else{if(dt[p]==a)break e;break}}if(u++,f)f.push(b);else{b.from>l&&o.push(new Ei(l,b.from,d));let p=b.direction==Js!=!(d%2);s0(t,p?r+1:r,i,b.inner,b.from,b.to,o),l=b.to}_=b.to}else{if(_==n||(c?dt[_]!=a:dt[_]==a))break;_++}f?i0(t,l,_,r+1,i,f,o):l<_&&o.push(new Ei(l,_,d)),l=_}else for(let l=n,u=s.length;l>e;){let c=!0,h=!1;if(!u||l>s[u-1].to){let b=dt[l-1];b!=a&&(c=!1,h=b==16)}let f=!c&&a==1?[]:null,d=c?r:r+1,_=l;e:for(;;)if(u&&_==s[u-1].to){if(h)break e;let b=s[--u];if(!c)for(let p=b.from,m=u;;){if(p==e)break e;if(m&&s[m-1].to==p)p=s[--m].from;else{if(dt[p-1]==a)break e;break}}if(f)f.push(b);else{b.to<l&&o.push(new Ei(b.to,l,d));let p=b.direction==Js!=!(d%2);s0(t,p?r+1:r,i,b.inner,b.from,b.to,o),l=b.from}_=b.from}else{if(_==e||(c?dt[_-1]!=a:dt[_-1]==a))break;_--}f?i0(t,_,l,r+1,i,f,o):_<l&&o.push(new Ei(_,l,d)),l=_}}function s0(t,e,n,r,i,s,o){let a=e%2?2:1;KU(t,i,s,r,a),YU(t,i,s,r,a),XU(i,s,r,a),i0(t,i,s,e,n,r,o)}function QU(t,e,n){if(!t)return[new Ei(0,0,e==Ub?1:0)];if(e==Js&&!n.length&&!GU.test(t))return N2(t.length);if(n.length)for(;t.length>dt.length;)dt[dt.length]=256;let r=[],i=e==Js?0:1;return s0(t,i,i,n,0,t.length,r),r}function N2(t){return[new Ei(0,t,0)]}let B2="";function JU(t,e,n,r,i){var s;let o=r.head-t.from,a=Ei.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(i,n);if(o==u){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),u=l.side(i,n)}let c=Kt(t.text,o,l.forward(i,n));(c<l.from||c>l.to)&&(c=u),B2=t.text.slice(Math.min(o,c),Math.max(o,c));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<l.level?he.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):he.cursor(c+t.from,l.forward(i,n)?-1:1,l.level)}function ZU(t,e,n){for(let r=e;r<n;r++){let i=O2(t.charCodeAt(r));if(i==1)return Js;if(i==2||i==4)return Ub}return Js}const F2=Re.define(),H2=Re.define(),U2=Re.define(),j2=Re.define(),o0=Re.define(),V2=Re.define(),$2=Re.define(),jb=Re.define(),Vb=Re.define(),z2=Re.define({combine:t=>t.some(e=>e)}),W2=Re.define({combine:t=>t.some(e=>e)}),q2=Re.define();class Ko{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Ko(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ko(he.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Bc=Ge.define({map:(t,e)=>t.map(e)}),G2=Ge.define();function Qn(t,e,n){let r=t.facet(j2);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const gi=Re.define({combine:t=>t.length?t[0]:!0});let e7=0;const Oo=Re.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class un{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Oo.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Oo.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new un(e7++,e,r,i,a=>{let l=[];return o&&l.push(Ld.of(u=>{let c=u.plugin(a);return c?o(c):st.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return un.define((r,i)=>new e(r,i),n)}}class Gp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Qn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Qn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Qn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const K2=Re.define(),Dd=Re.define(),Ld=Re.define(),Y2=Re.define(),$b=Re.define(),Yu=Re.define(),X2=Re.define();function NE(t,e){let n=t.state.facet(X2);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return et.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,h=i;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,_;if(d==null&&(d=ZU(e.text,u,c)),l>0&&h.length&&(_=h[h.length-1]).to==u&&_.direction==d)_.to=c,h=_.inner;else{let b={from:u,to:c,direction:d,inner:[]};h.push(b),h=b.inner}}}}),i}const Q2=Re.define();function zb(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Q2)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const fl=Re.define();class lr{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new lr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0;;){let a=i<e.length?e[i].fromB:1e9,l=s<n.length?n[s]:1e9,u=Math.min(a,l);if(u==1e9)break;let c=u+o,h=u,f=c;for(;;)if(s<n.length&&n[s]<=h){let d=n[s+1];s+=2,h=Math.max(h,d);for(let _=i;_<e.length&&e[_].fromB<=h;_++)o=e[_].toA-e[_].toB;f=Math.max(f,d+o)}else if(i<e.length&&e[i].fromB<=h){let d=e[i++];h=Math.max(h,d.toB),f=Math.max(f,d.toA),o=d.toA-d.toB}else break;r.push(new lr(c,f,u,h))}return r}}class _f{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Gt.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new lr(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new _f(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const t7=[];class zt{constructor(e,n,r=0){this.dom=e,this.length=n,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return t7}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&NU(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let r=n;for(let i of this.children){if(i==e)return r;r+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let r=is(this.dom),i=this.length?e>0:n>0;return new vr(this.parent.dom,r+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Od)return e;return null}static get(e){return e.cmTile}}class Pd extends zt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,r=null,i,s=e?.node==n?e:null,o=0;for(let a of this.children){if(a.sync(e),o+=a.length+a.breakAfter,i=r?r.nextSibling:n.firstChild,s&&i!=a.dom&&(s.written=!0),a.dom.parentNode==n)for(;i&&i!=a.dom;)i=BE(i);else n.insertBefore(a.dom,i);r=a.dom}for(i=r?r.nextSibling:n.firstChild,s&&i&&(s.written=!0);i;)i=BE(i);this.length=o}}function BE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Od extends Pd{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=zt.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],r=this,i=0,s=0;;)if(i==r.children.length){if(!n.length)return;r=r.parent,r.breakAfter&&s++,i=n.pop()}else{let o=r.children[i++];if(o instanceof Xi)n.push(i),r=o,i=0;else{let a=s+o.length,l=e(o,s);if(l!==void 0)return l;s=a+o.breakAfter}}}resolveBlock(e,n){let r,i=-1,s,o=-1;if(this.blockTiles((a,l)=>{let u=l+a.length;if(e>=l&&e<=u){if(a.isWidget()&&n>=-1&&n<=1){if(a.flags&32)return!0;a.flags&16&&(r=void 0)}(l<e||e==u&&(n<-1?a.length:a.covers(1)))&&(!r||!a.isWidget()&&r.isWidget())&&(r=a,i=e-l),(u>e||e==l&&(n>1?a.length:a.covers(-1)))&&(!s||!a.isWidget()&&s.isWidget())&&(s=a,o=e-l)}}),!r&&!s)throw new Error("No tile at position "+e);return r&&n<0||!s?{tile:r,offset:i}:{tile:s,offset:o}}}class Xi extends Pd{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let r=new Xi(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class da extends Pd{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,r){let i=new da(n||document.createElement("div"),e);return(!n||!r)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,n,r){let i=null,s=-1,o=null,a=-1;function l(c,h){for(let f=0,d=0;f<c.children.length&&d<=h;f++){let _=c.children[f],b=d+_.length;b>=h&&(_.isComposite()?l(_,h-d):(!o||o.isHidden&&(n>0||r&&r7(o,_)))&&(b>h||_.flags&32)?(o=_,a=h-d):(d<h||_.flags&16&&!_.isHidden)&&(i=_,s=h-d)),d=b}}l(this,e);let u=(n<0?i:o)||i||o;return u?{tile:u,offset:u==i?s:a}:null}coordsIn(e,n){let r=this.resolveInline(e,n,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),n):n7(this)}domIn(e,n){let r=this.resolveInline(e,n);if(r){let{tile:i,offset:s}=r;if(this.dom.contains(i.dom))return i.isText()?new vr(i.dom,Math.min(i.dom.nodeValue.length,s)):i.domPosFor(s,i.flags&16?1:i.flags&32?-1:n);let o=r.tile.parent,a=!1;for(let l of o.children){if(a)return new vr(l.dom,0);l==r.tile&&(a=!0)}}return new vr(this.dom,0)}}function n7(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Lh(e);return n[n.length-1]||null}function r7(t,e){let n=t.coordsIn(0,1),r=e.coordsIn(0,1);return n&&r&&r.top<n.bottom}class Dn extends Pd{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let r=new Dn(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class Ns extends zt{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let r=this.dom.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Ae.chrome||Ae.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=ru(this.dom,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ae.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?gf(l,o<0):l||null}static of(e,n){let r=new Ns(n||document.createTextNode(e),e);return n||(r.flags|=2),r}}class Zs extends zt{constructor(e,n,r,i){super(e,n,i),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,r){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;if(r)return gf(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let l=a?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return gf(o,!a)}}get overrideDOMText(){if(!this.length)return ut.empty;let{root:e}=this;if(!e)return ut.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,r,i,s){return s||(s=e.toDOM(n),e.editable||(s.contentEditable="false")),new Zs(s,r,e,i)}}class bf extends zt{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return ut.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class i7{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,r){let{tile:i,index:s,beforeBreak:o,parents:a}=this;for(;e||n>0;)if(i.isComposite())if(o){if(!e)break;r&&r.break(),e--,o=!1}else if(s==i.children.length){if(!e&&!a.length)break;r&&r.leave(i),o=!!i.breakAfter,{tile:i,index:s}=a.pop(),s++}else{let l=i.children[s],u=l.breakAfter;(n>0?l.length<=e:l.length<e)&&(!r||r.skip(l,0,l.length)!==!1||!l.isComposite)?(o=!!u,s++,e-=l.length):(a.push({tile:i,index:s}),i=l,s=0,r&&l.isComposite()&&r.enter(l))}else if(s==i.length)o=!!i.breakAfter,{tile:i,index:s}=a.pop(),s++;else if(e){let l=Math.min(e,i.length-s);r&&r.skip(i,s,s+l),e-=l,s+=l}else break;return this.tile=i,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class s7{constructor(e,n,r,i){this.from=e,this.to=n,this.wrapper=r,this.rank=i}}class o7{constructor(e,n,r){this.cache=e,this.root=n,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,r,i){var s;this.flushBuffer();let o=this.ensureMarks(n,r),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)&&a.length+e.length<512){this.cache.reused.set(a,2);let l=o.children[o.children.length-1]=new Ns(a.dom,a.text+e);l.parent=o}else o.append(i||Ns.of(e,(s=this.cache.find(Ns))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let r=this.curLine;r.dom!=n.line.dom&&(r.setDOM(this.cache.reused.has(n.line)?Kp(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let i=r;for(let a=n.marks.length-1;a>=0;a--){let l=n.marks[a],u=i.lastChild;if(u instanceof Dn&&u.mark.eq(l.mark))u.dom!=l.dom&&u.setDOM(Kp(l.dom)),i=u;else{if(this.cache.reused.get(l)){let h=zt.get(l.dom);h&&h.setDOM(Kp(l.dom))}let c=Dn.of(l.mark,l.dom);i.append(c),i=c}this.cache.reused.set(l,2)}let s=zt.get(e.text);s&&this.cache.reused.set(s,2);let o=new Ns(e.text,e.text.nodeValue);o.flags|=8,i.append(o)}addInlineWidget(e,n,r){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let s=this.ensureMarks(n,r);!i&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,r){this.flushBuffer(),this.ensureMarks(n,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var r;e||(e=J2);let i=da.start(e,n||((r=this.cache.find(da))===null||r===void 0?void 0:r.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var r;let i=this.curLine;for(let s=e.length-1;s>=0;s--){let o=e[s],a;if(n>0&&(a=i.lastChild)&&a instanceof Dn&&a.mark.eq(o))i=a,n--;else{let l=Dn.of(o,(r=this.cache.find(Dn,u=>u.mark.eq(o)))===null||r===void 0?void 0:r.dom);i.append(l),i=l,n=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!FE(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Ae.ios&&FE(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Yp,0,32)||new Zs(Yp.toDOM(),0,Yp,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new s7(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-n.rank||this.wrappers[r-1].to-n.to)<0;)r--;this.wrappers.splice(r,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let r of this.wrappers){let i=n.lastChild;if(r.from<this.pos&&i instanceof Xi&&i.wrapper.eq(r.wrapper))n=i;else{let s=Xi.of(r.wrapper,(e=this.cache.find(Xi,o=>o.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);n.append(s),n=s}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),r=this.cache.find(bf,void 0,1);return r&&(r.flags=n),r||new bf(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class a7{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=i;let a=this.textOff=Math.min(e,i.length);return s?null:i.slice(0,a)}let n=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,n);return this.textOff=n,r}}const yf=[Zs,da,Ns,Dn,bf,Xi,Od];for(let t=0;t<yf.length;t++)yf[t].bucket=t;class l7{constructor(e){this.view=e,this.buckets=yf.map(()=>[]),this.index=yf.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,r=this.buckets[n];r.length<6?r.push(e):r[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,r=2){let i=e.bucket,s=this.buckets[i],o=this.index[i];for(let a=s.length-1;a>=0;a--){let l=(a+o)%s.length,u=s[l];if((!n||n(u))&&!this.reused.has(u))return s.splice(l,1),l<o&&this.index[i]--,this.reused.set(u,r),u}return null}findWidget(e,n,r){let i=this.buckets[0];if(i.length)for(let s=0,o=0;;s++){if(s==i.length){if(o)return null;o=1,s=0}let a=i[s];if(!this.reused.has(a)&&(o==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return i.splice(s,1),s<this.index[0]&&this.index[0]--,a.widget==e&&a.length==n&&(a.flags&497)==r?(this.reused.set(a,1),a):(this.reused.set(a,2),new Zs(a.dom,n,e,a.flags&-498|r))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class u7{constructor(e,n,r,i,s){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new l7(e),this.text=new a7(e.state.doc),this.builder=new o7(this.cache,new Od(e,e.contentDOM),et.iter(r)),this.cache.reused.set(n,2),this.old=new i7(n),this.reuseWalker={skip:(o,a,l)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,n){let r=n&&this.getCompositionContext(n.text);for(let i=0,s=0,o=0;;){let a=o<e.length?e[o++]:null,l=a?a.fromA:this.old.root.length;if(l>i){let u=l-i;this.preserve(u,!o,!a),i=l,s+=u}if(!a)break;n&&a.fromA<=n.range.fromA&&a.toA>=n.range.toA?(this.forward(a.fromA,n.range.fromA,n.range.fromA<n.range.toA?1:-1),this.emit(s,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,r),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,a.toA),this.emit(n.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(s,a.toB)),s=a.toB,i=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,r){let i=f7(this.old),s=this.openMarks;this.old.advance(e,r?1:-1,{skip:(o,a,l)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let u=l>0||a<o.length?Zs.of(o.widget,this.view,l-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);u.flags&256?(u.flags&=-2,this.builder.addBlockWidget(u)):(this.builder.ensureLine(null),this.builder.addInlineWidget(u,i,s),s=i.length)}else if(o.isText())this.builder.ensureLine(null),!a&&l==o.length?this.builder.addText(o.text,i,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,l),i,s)),s=i.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof bf)this.cache.add(o);else if(o instanceof Dn)this.builder.ensureLine(null),this.builder.addMark(o,i,s),this.cache.reused.set(o,1),s=i.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof Dn&&i.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?i.length&&(i.length=s=0):o instanceof Dn&&(i.shift(),s=Math.min(s,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let r=null,i=this.builder,s=0,o=et.spans(this.decorations,e,n,{point:(a,l,u,c,h,f)=>{if(u instanceof Qs){if(this.disallowBlockEffectsFor[f]){if(u.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=c.length,h>c.length)i.continueWidget(l-a);else{let d=u.widget||(u.block?pa.block:pa.inline),_=c7(u),b=this.cache.findWidget(d,l-a,_)||Zs.of(d,this.view,l-a,_);u.block?(u.startSide>0&&i.addLineStartIfNotCovered(r),i.addBlockWidget(b)):(i.ensureLine(r),i.addInlineWidget(b,c,h))}r=null}else r=h7(r,u);l>a&&this.text.skip(l-a)},span:(a,l,u,c)=>{for(let h=a;h<l;){let f=this.text.next(Math.min(512,l-h));f==null?(i.addLineStartIfNotCovered(r),i.addBreak(),h++):(i.ensureLine(r),i.addText(f,u,h==a?c:u.length),h+=f.length),r=null}}});i.addLineStartIfNotCovered(r),this.openWidget=o>s,this.openMarks=o}forward(e,n,r=1){n-e<=10?this.old.advance(n-e,r,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,r,this.reuseWalker))}getCompositionContext(e){let n=[],r=null;for(let i=e.parentNode;;i=i.parentNode){let s=zt.get(i);if(i==this.view.contentDOM)break;s instanceof Dn?n.push(s):s?.isLine()?r=s:i.nodeName=="DIV"&&!r&&i!=this.view.contentDOM?r=new da(i,J2):n.push(Dn.of(new Gu({tagName:i.nodeName.toLowerCase(),attributes:BU(i)}),i))}return{line:r,marks:n}}}function FE(t,e){let n=r=>{for(let i of r.children)if((e?i.isText():i.length)||n(i))return!0;return!1};return n(t)}function c7(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const J2={class:"cm-line"};function h7(t,e){let n=e.spec.attributes,r=e.spec.class;return!n&&!r||(t||(t={class:"cm-line"}),n&&Fb(n,t),r&&(t.class+=" "+r)),t}function f7(t){let e=[];for(let n=t.parents.length;n>1;n--){let r=n==t.parents.length?t.tile:t.parents[n].tile;r instanceof Dn&&e.push(r.mark)}return e}function Kp(t){let e=zt.get(t);return e&&e.setDOM(t.cloneNode()),t}class pa extends oo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}pa.inline=new pa("span");pa.block=new pa("div");const Yp=new class extends oo{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class HE{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=st.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Od(e,e.contentDOM),this.updateInner([new lr(0,0,0,e.state.doc.length)],null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!E7(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?p7(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:c,to:h}=this.hasComposition;r=new lr(c,h,e.changes.mapPos(c,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ae.ie||Ae.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let l=_7(o,this.decorations,e.changes);l.length&&(r=lr.extendWithRanges(r,l));let u=y7(a,this.blockWrappers,e.changes);return u.length&&(r=lr.extendWithRanges(r,u)),s&&!r.some(c=>c.fromA<=s.range.fromA&&c.toA>=s.range.toA)&&(r=s.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(n||e.length){let o=this.tile,a=new u7(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,n),a0(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Ae.chrome||Ae.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||r.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof Xp&&i.push(s.dom);r.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(G2)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,i=this.view.root.activeElement,s=i==r,o=!s&&!(this.view.state.facet(gi)||r.tabIndex>-1)&&Il(r,this.view.observer.selectionRange)&&!(i&&r.contains(i));if(!(s||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,u,c;if(l.empty?c=u=this.inlineDOMNearPos(l.anchor,l.assoc||1):(c=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),u=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),Ae.gecko&&l.empty&&!this.hasComposition&&d7(u)){let f=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(f,u.node.childNodes[u.offset]||null)),u=c=new vr(f,0),a=!0}let h=this.view.observer.selectionRange;(a||!h.focusNode||(!Dl(u.node,u.offset,h.anchorNode,h.anchorOffset)||!Dl(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{Ae.android&&Ae.chrome&&r.contains(h.focusNode)&&v7(h.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let f=fa(this.view.root);if(f)if(l.empty){if(Ae.gecko){let d=m7(u.node,u.offset);if(d&&d!=3){let _=(d==1?D2:L2)(u.node,u.offset);_&&(u=new vr(_.node,_.offset))}}f.collapse(u.node,u.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(u.node,u.offset);try{f.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();l.anchor>l.head&&([u,c]=[c,u]),d.setEnd(c.node,c.offset),d.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(d)}o&&this.view.root.activeElement==r&&(r.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(u,c)),this.impreciseAnchor=u.precise?null:new vr(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new vr(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Dl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=fa(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=this.lineAt(n.head,n.assoc);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc,n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}posFromDOM(e,n){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=r.posAtStart;if(r.isComposite()){let s;if(e==r.dom)s=r.dom.childNodes[n];else{let o=Ri(e)==0?0:n==0?-1:1;for(;;){let a=e.parentNode;if(a==r.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?s=e:s=e.nextSibling}if(s==r.dom.firstChild)return i;for(;s&&!zt.get(s);)s=s.nextSibling;if(!s)return i+r.length;for(let o=0,a=i;;o++){let l=r.children[o];if(l.dom==s)return a;a+=l.length+l.breakAfter}}else return r.isText()?e==r.dom?i+n:i+(n?r.length:0):i}domAtPos(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.domPosFor(e,n):r.domIn(i,n)}inlineDOMNearPos(e,n){let r,i=-1,s=!1,o,a=-1,l=!1;return this.tile.blockTiles((u,c)=>{if(u.isWidget()){if(u.flags&32&&c>=e)return!0;u.flags&16&&(s=!0)}else{let h=c+u.length;if(c<=e&&(r=u,i=e-c,s=h<e),h>=e&&!o&&(o=u,a=e-c,l=c>e),c>e&&o)return!0}}),!r&&!o?this.domAtPos(e,n):(s&&o?r=null:l&&r&&(o=null),r&&n<0||!o?r.domIn(i,n):o.domIn(a,n))}coordsAt(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.widget instanceof Xp?null:r.coordsInWidget(i,n,!0):r.coordsIn(i,n)}lineAt(e,n){let{tile:r}=this.tile.resolveBlock(e,n);return r.isLine()?r:null}coordsForChar(e){let{tile:n,offset:r}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function i(s,o){if(s.isComposite())for(let a of s.children){if(a.length>=o){let l=i(a,o);if(l)return l}if(o-=a.length,o<0)break}else if(s.isText()&&o<s.length){let a=Kt(s.text,o);if(a==o)return null;let l=ru(s.dom,o,a).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(u==l.length-1||c.top<c.bottom&&c.left<c.right)return c}}return null}return i(n,r)}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==St.LTR,u=0,c=(h,f,d)=>{for(let _=0;_<h.children.length&&!(f>i);_++){let b=h.children[_],p=f+b.length,m=b.dom.getBoundingClientRect(),{height:g}=m;if(d&&!_&&(u+=m.top-d.top),b instanceof Xi)p>r&&c(b,f,m);else if(f>=r&&(u>0&&n.push(-u),n.push(g+u),u=0,o)){let y=b.dom.lastChild,v=y?Lh(y):[];if(v.length){let S=v[v.length-1],E=l?S.right-m.left:m.right-S.left;E>a&&(a=E,this.minWidth=s,this.minWidthFrom=f,this.minWidthTo=p)}}d&&_==h.children.length-1&&(u+=d.bottom-m.bottom),f=p+b.breakAfter}};return c(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?St.RTL:St.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,l;for(let u of o.children){if(!u.isText()||/[^ -~]/.test(u.text))return;let c=Lh(u.dom);if(c.length!=1)return;a+=c[0].width,l=c[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:l}}});if(e)return e;let n=document.createElement("div"),r,i,s;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let o=Lh(n.firstChild)[0];r=n.getBoundingClientRect().height,i=o&&o.width?o.width/27:7,s=o&&o.height?o.height:r,n.remove()}),{lineHeight:r,charWidth:i,textHeight:s}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.view.state.doc.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(st.replace({widget:new Xp(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return st.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ld).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet($b).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(et.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(Y2).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(q2))try{if(u(this.view,e.range,e))return!0}catch(c){Qn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=zb(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;UU(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==St.LTR)}lineHasWidget(e){let n=r=>r.isWidget()||r.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){a0(this.tile)}}function a0(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let r of t.children)a0(r,e)}}function d7(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Z2(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=D2(n.focusNode,n.focusOffset),i=L2(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=zt.get(i.node);if(!a||a.isText()&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=zt.get(r.node);!l||l.isText()&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function p7(t,e,n){let r=Z2(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc;return{range:new lr(l.mapPos(s),l.mapPos(o),s,o),text:i}}function m7(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let g7=class{constructor(){this.changes=[]}compareRange(e,n){qo(e,n,this.changes)}comparePoint(e,n){qo(e,n,this.changes)}boundChange(e){qo(e,e,this.changes)}};function _7(t,e,n){let r=new g7;return et.compare(t,e,n,r),r.changes}class b7{constructor(){this.changes=[]}compareRange(e,n){qo(e,n,this.changes)}comparePoint(){}boundChange(e){qo(e,e,this.changes)}}function y7(t,e,n){let r=new b7;return et.compare(t,e,n,r),r.changes}function v7(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function E7(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}class Xp extends oo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function S7(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return he.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Kt(i.text,s,!1):a=Kt(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=Kt(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=Kt(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return he.range(o+i.from,a+i.from)}function w7(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+IU(o,s,t.state.tabSize)}function l0(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==an.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function x7(t,e,n,r){let i=l0(t,e.head,e.assoc||-1),s=!r||i.type!=an.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==St.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return he.cursor(l,n?-1:1)}return he.cursor(n?i.to:i.from,n?-1:1)}function UE(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let u=JU(i,s,o,a,n),c=B2;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function C7(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Vt.Space&&(i=o),i==o}}function T7(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return he.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let _=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-_.from))),a=(s<0?_.top:_.bottom)+c}let h=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1,d=u0(t,{x:h,y:a+f*s},!1,s);return he.cursor(d.pos,d.assoc,void 0,o)}function Ll(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function eR(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Ll(t,i.from,0);o!=i.from&&(s=he.cursor(o,-1))}else{let o=Ll(t,i.from,-1),a=Ll(t,i.to,1);(o!=i.from||a!=i.to)&&(s=he.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?he.create(n,e.mainIndex):e}function Qp(t,e,n){let r=Ll(t.state.facet(Yu).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:he.cursor(r,r<n.from?1:-1)}class Yr{constructor(e,n){this.pos=e,this.assoc=n}}function u0(t,e,n,r){let i=t.contentDOM.getBoundingClientRect(),s=i.top+t.viewState.paddingTop,{x:o,y:a}=e,l=a-s,u;for(;;){if(l<0)return new Yr(0,1);if(l>t.viewState.docHeight)return new Yr(t.state.doc.length,-1);if(u=t.elementAtHeight(l),r==null)break;if(u.type==an.Text){if(r<0?u.to<t.viewport.from:u.from>t.viewport.to)break;let f=t.docView.coordsAt(r<0?u.from:u.to,r);if(f&&(r<0?f.top<=l+s:f.bottom>=l+s))break}let h=t.viewState.heightOracle.textHeight/2;l=r>0?u.bottom+h:u.top-h}if(t.viewport.from>=u.to||t.viewport.to<=u.from){if(n)return null;if(u.type==an.Text){let h=w7(t,i,u,o,a);return new Yr(h,h==u.from?1:-1)}}if(u.type!=an.Text)return l<(u.top+u.bottom)/2?new Yr(u.from,1):new Yr(u.to,-1);let c=t.docView.lineAt(u.from,2);return(!c||c.length!=u.length)&&(c=t.docView.lineAt(u.from,-2)),tR(t,c,u.from,o,a)}function tR(t,e,n,r,i){let s=-1,o=null,a=1e9,l=1e9,u=i,c=i,h=(f,d)=>{for(let _=0;_<f.length;_++){let b=f[_];if(b.top==b.bottom)continue;let p=b.left>r?b.left-r:b.right<r?r-b.right:0,m=b.top>i?b.top-i:b.bottom<i?i-b.bottom:0;b.top<=c&&b.bottom>=u&&(u=Math.min(b.top,u),c=Math.max(b.bottom,c),m=0),(s<0||(m-l||p-a)<0)&&(s>=0&&l&&a<p&&o.top<=c-2&&o.bottom>=u+2?l=0:(s=d,a=p,l=m,o=b))}};if(e.isText()){for(let d=0;d<e.length;){let _=Kt(e.text,d);if(h(ru(e.dom,d,_).getClientRects(),d),!a&&!l)break;d=_}return r>(o.left+o.right)/2==(jE(t,s+n)==St.LTR)?new Yr(n+Kt(e.text,s),-1):new Yr(n+s,1)}else{if(!e.length)return new Yr(n,1);for(let b=0;b<e.children.length;b++){let p=e.children[b];if(p.flags&48)continue;let m=(p.dom.nodeType==1?p.dom:ru(p.dom,0,p.length)).getClientRects();if(h(m,b),!a&&!l)break}let f=e.children[s],d=e.posBefore(f,n);return f.isComposite()||f.isText()?tR(t,f,d,Math.max(o.left,Math.min(o.right,r)),i):r>(o.left+o.right)/2==(jE(t,s+n)==St.LTR)?new Yr(d+f.length,-1):new Yr(d,1)}}function jE(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[Ei.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const dl="";class A7{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(ot.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=dl}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=zt.get(i),a=i.nextSibling;if(a==n){o?.breakAfter&&!a&&r!=this.view.contentDOM&&this.lineBreak();break}let l=zt.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:mf(i))||mf(a)&&(i.nodeName!="BR"||o?.isWidget())&&this.text.length>s)&&!R7(a,n)&&this.lineBreak(),i=a}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){let n=zt.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(k7(e,r.node,r.offset)?n:0))}}function k7(t,e,n){for(;;){if(!e||n<Ri(e))return!1;if(e==t)return!0;n=is(e)+1,e=e.parentNode}}function R7(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=zt.get(t);if(!r?.isWidget())return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}class VE{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class I7{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=nR(e.docView.tile,n,r,0))){let a=s||o?[]:L7(e),l=new A7(a,e);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=P7(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!n0(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!n0(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Ae.ios||Ae.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(l,u),f=Math.max(l,u),d=c.from-h,_=c.to-f;(d==0||d==1||h==0)&&(_==0||_==-1||f==e.state.doc.length)&&(l=0,u=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(he.range(u,l)):this.newSel=he.single(u,l)}}}function nR(t,e,n,r){if(t.isComposite()){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<t.children.length;l++){let h=t.children[l],f=u+h.length;if(u<e&&f>n)return nR(h,e,n,u);if(f>=e&&i==-1&&(i=l,s=u),u>n&&h.dom.parentNode==t.dom){o=l,a=c;break}c=f,u=f+h.breakAfter}return{from:s,to:a<0?r+t.length:a,startDOM:(i?t.children[i-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:o<t.children.length&&o>=0?t.children[o].dom:null}}else return t.isText()?{from:r,to:r+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function rR(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||Ae.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=iR(t.state.doc.sliceString(o,a,dl),e.text,l-o,u);c&&(Ae.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==dl+dl&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:ut.of(e.text.slice(c.from,c.toB).split(dl))})}else r&&(!t.hasFocus&&t.state.facet(gi)||vf(r,i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Ae.mac||Ae.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=he.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:ut.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:Ae.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=he.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:ut.of([" "])}),n)return Wb(t,n,r,s);if(r&&!vf(r,i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=eR(t.state.facet(Yu).map(l=>l(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function Wb(t,e,n,r=-1){if(Ae.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Ae.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Go(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Go(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Go(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=D7(t,e,n));return t.state.facet(V2).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function D7(t,e,n){let r,i=t.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let l=e.from<s.from?-1:1,u=l<0?s.from:s.to,c=Ll(i.facet(Yu).map(h=>h(t)),u,l);e.from==c&&(o=c)}if(o>-1)r={changes:e,selection:he.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let l=i.changes(e),u=n&&n.main.to<=l.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&Z2(t,n.main.head);if(f){let _=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-_}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to;r=i.changeByRange(_=>{if(_.from==s.from&&_.to==s.to)return{changes:l,range:u||_.map(l)};let b=_.to-d,p=b-c.length;if(t.state.sliceDoc(p,b)!=c||b>=h.from&&p<=h.to)return{range:_};let m=i.changes({from:p,to:b,insert:e.insert}),g=_.to-s.to;return{changes:m,range:u?he.range(Math.max(0,u.anchor+g),Math.max(0,u.head+g)):_.map(m)}})}else r={changes:l,selection:u&&i.selection.replaceRange(u)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:a,scrollIntoView:!0})}function iR(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function L7(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new VE(n,r)),(i!=n||s!=r)&&e.push(new VE(i,s))),e}function P7(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?he.single(n+e,r+e):null}function vf(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class O7{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ae.safari&&e.contentDOM.addEventListener("input",()=>null),Ae.gecko&&Y7(e.contentDOM.ownerDocument)}handleEvent(e){!V7(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=M7(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&oR.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ae.android&&Ae.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ae.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=sR.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||N7.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Go(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ae.safari&&!Ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function $E(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Qn(n.state,i)}}}function M7(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push($E(r.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push($E(r.value,l))}}for(let r in Cr)n(r).handlers.push(Cr[r]);for(let r in pr)n(r).observers.push(pr[r]);return e}const sR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],N7="dthko",oR=[16,17,18,20,91,92,224,225],Fc=6;function Hc(t){return Math.max(0,t)*.7+8}function B7(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class F7{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=jU(e.contentDOM),this.atoms=e.state.facet(Yu).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ot.allowMultipleSelections)&&H7(e,n),this.dragging=j7(e,n)&&uR(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&B7(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=zb(this.view);e.clientX-l.left<=i+Fc?n=-Hc(i-e.clientX):e.clientX+l.right>=o-Fc&&(n=Hc(e.clientX-o)),e.clientY-l.top<=s+Fc?r=-Hc(s-e.clientY):e.clientY+l.bottom>=a-Fc&&(r=Hc(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=eR(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function H7(t,e){let n=t.state.facet(F2);return n.length?n[0](e):Ae.mac?e.metaKey:e.ctrlKey}function U7(t,e){let n=t.state.facet(H2);return n.length?n[0](e):Ae.mac?!e.altKey:!e.ctrlKey}function j7(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=fa(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function V7(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=zt.get(n))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const Cr=Object.create(null),pr=Object.create(null),aR=Ae.ie&&Ae.ie_version<15||Ae.ios&&Ae.webkit_version<604;function $7(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),lR(t,n.value)},50)}function Md(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function lR(t,e){e=Md(t.state,jb,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(c0!=null&&n.selection.ranges.every(l=>l.empty)&&c0==s.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let h=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:he.cursor(u.from+h.length)}})}else o?r=n.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:he.cursor(l.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}pr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Cr.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);pr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};pr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Cr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(U2))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=W7(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new F7(t,e,n,r)),r&&t.observer.ignore(()=>{R2(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function zE(t,e,n,r){if(r==1)return he.cursor(e,n);if(r==2)return S7(t.state,e,n);{let i=t.docView.lineAt(e,n),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,he.range(o,a)}}const z7=Ae.ie&&Ae.ie_version<=11;let WE=null,qE=0,GE=0;function uR(t){if(!z7)return t.detail;let e=WE,n=GE;return WE=t,GE=Date.now(),qE=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(qE+1)%3:1}function W7(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=uR(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=t.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),u,c=zE(t,l.pos,l.assoc,r);if(n.pos!=l.pos&&!o){let h=zE(t,n.pos,n.assoc,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?he.range(f,d):he.range(d,f)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=q7(i,l.pos))?u:a?i.addRange(c):he.create([c])}}}function q7(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return he.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Cr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.tile.nearest(e.target);if(i&&i.isWidget()){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=he.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Md(t.state,Vb,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Cr.dragend=t=>(t.inputState.draggedContent=null,!1);function KE(t,e,n,r){if(n=Md(t.state,jb,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&U7(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Cr.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&KE(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return KE(t,e,r,!0),!0}return!1};Cr.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=aR?null:e.clipboardData;return n?(lR(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):($7(t),!1)};function G7(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function K7(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Md(t,Vb,e.join(t.lineBreak)),ranges:n,linewise:r}}let c0=null;Cr.copy=Cr.cut=(t,e)=>{let n=fa(t.root);if(n&&!Il(t.contentDOM,n))return!1;let{text:r,ranges:i,linewise:s}=K7(t.state);if(!r&&!s)return!1;c0=s?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=aR?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",r),!0):(G7(t,r),!1)};const cR=Oi.define();function hR(t,e){let n=[];for(let r of t.facet($2)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:cR.of(!0)}):null}function fR(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=hR(t.state,e);n?t.dispatch(n):t.update([])}},10)}pr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),fR(t)};pr.blur=t=>{t.observer.clearSelectionRange(),fR(t)};pr.compositionstart=pr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};pr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ae.chrome&&Ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};pr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Cr.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return Wb(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let i;if(Ae.chrome&&Ae.android&&(i=sR.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ae.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ae.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>pr.compositionend(t,e),20),!1};const YE=new Set;function Y7(t){YE.has(t)||(YE.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const XE=["pre-wrap","normal","pre-line","break-spaces"];let ma=!1;function QE(){ma=!1}class X7{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return XE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=XE.indexOf(e)>-1,l=Math.abs(n-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(r-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class Q7{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class br{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?an.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Qs?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new br(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var vt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(vt||(vt={}));const Ph=.001;class Cn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ph&&(ma=!0),this.height=e)}replace(e,n,r){return Cn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:h}=i[a],f=s.lineAt(l,vt.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,vt.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,vt.ByPosNoHeight,r,0,0));c+=f.from-l,l=f.from;let _=qb.build(r.setDoc(o),e,c,h);s=Ef(s,s.replace(l,u,_))}return s.updateHeight(r,0)}static empty(){return new Gn(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new Z7(Cn.of(e.slice(0,n)),o,Cn.of(e.slice(r)))}}function Ef(t,e){return t==e?t:(t.constructor!=e.constructor&&(ma=!0),e)}Cn.prototype.size=1;const J7=st.replace({});class dR extends Cn{constructor(e,n,r){super(e,n),this.deco=r,this.spaceAbove=0}mainBlock(e,n){return new br(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,r,i){return this.spaceAbove&&e<r+this.spaceAbove?new br(i,0,r,this.spaceAbove,J7):this.mainBlock(r,i)}lineAt(e,n,r,i,s){let o=this.mainBlock(i,s);return this.spaceAbove?this.blockAt(0,r,i,s).join(o):o}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.lineAt(0,vt.ByPos,r,i,s))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Gn extends dR{constructor(e,n,r){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,n){return new br(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Gn||i instanceof sn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof sn?i=new Gn(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):Cn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setMeasuredHeight(i):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class sn extends Cn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=a+c.length*l,f=Math.max(r,e-h/2);return new br(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:h}=n.doc.line(s+u);return new br(c,h,r+a*u,a,0)}}lineAt(e,n,r,i,s){if(n==vt.ByHeight)return this.blockAt(e,r,i,s);if(n==vt.ByPosNoHeight){let{from:d,to:_}=r.doc.lineAt(e);return new br(d,_-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,h=u.number-o,f=i+a*h+l*(u.from-s-h);return new br(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let _=f.number-a;h+=l*_+u*(e-s-_)}let d=l+u*f.length;o(new br(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof sn?r[r.length-1]=new sn(s.length+i):r.push(null,new sn(i-1))}if(e>0){let s=r[0];s instanceof sn?r[0]=new sn(e+s.length):r.unshift(new sn(e-1),null)}return Cn.of(r)}decomposeLeft(e,n){n.push(new sn(e-1),null)}decomposeRight(e,n){n.push(null,new sn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new sn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++],f=0;h<0&&(f=-h,h=i.heights[i.index++]),l==-1?l=h:Math.abs(h-l)>=Ph&&(l=-2);let d=new Gn(c,h,f);d.outdated=!1,o.push(d),a+=c+1}a<=s&&o.push(null,new sn(s-a).updateHeight(e,a));let u=Cn.of(o);return(l<0||Math.abs(u.height-this.height)>=Ph||Math.abs(l-this.heightMetrics(e,n).perLine)>=Ph)&&(ma=!0),Ef(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Z7 extends Cn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==vt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==vt.ByPosNoHeight?vt.ByPosNoHeight:vt.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let u=this.lineAt(l,vt.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&JE(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),JE(s,a)}return Cn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Cn.of(this.break?[e,null,n]:[e,n]):(this.left=Ef(this.left,e),this.right=Ef(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function JE(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof sn&&(r=t[e+1])instanceof sn&&t.splice(e-1,3,new sn(n.length+1+r.length))}const ej=5;class qb{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Gn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Gn(r-this.pos,-1,0)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new dR(o,i,r)):(o||s||i>=ej)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Gn(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let r=new sn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Gn)return e;let n=new Gn(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Gn)&&!this.isCovered?this.nodes.push(new Gn(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Gn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new qb(r,e);return et.spans(n,r,i,s,0),s.finish(r)}}function tj(t,e,n){let r=new nj;return et.compare(t,e,n,r,0),r.changes}class nj{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&qo(e,n,this.changes,5)}}function rj(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(u==t.parentNode?i.innerHeight:l,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function ij(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function sj(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Jp{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return st.replace({widget:new oj(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class oj extends oo{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ZE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=eS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=St.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Dd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new X7(n),this.stateDeco=tS(e),this.heightMap=Cn.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new lr(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=st.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Uc(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?eS:new Gb(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(pl(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=tS(this.state);let i=e.changedRanges,s=lr.extendWithRanges(i,tj(r,this.stateDeco,e?e.changes:Gt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);QE(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||ma)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(W2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?St.RTL:St.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:v,scaleY:S}=k2(n,a);(v>.005&&Math.abs(this.scaleX-v)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=v,this.scaleY=S,u|=16,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=I2(e.scrollDOM);let _=(this.printing?sj:rj)(n,this.paddingTop),b=_.top-this.pixelViewport.top,p=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget&&!ij(e.dom))return 0;let g=a.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let v=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(v)&&(o=!0),o||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=S>0&&i.refresh(s,S,E,C,Math.max(5,g/E),v),o&&(e.docView.minWidth=0,u|=16)}b>0&&p>0?c=Math.max(b,p):b<0&&p<0&&(c=Math.min(b,p)),QE();for(let S of this.viewports){let E=S.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?Cn.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Q7(S.from,E))}ma&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Uc(i.lineAt(o-r*1e3,vt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,vt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,vt.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?f=h.top:f=h.bottom-c,l=new Uc(i.lineAt(f-1e3/2,vt.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,vt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Uc(this.heightMap.lineAt(r,vt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,vt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,vt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,vt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Jp(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=St.LTR&&!r)return[];let a=[],l=(c,h,f,d)=>{if(h-c<s)return;let _=this.state.selection.main,b=[_.from];_.empty||b.push(_.to);for(let m of b)if(m>c&&m<h){l(c,m-10,f,d),l(m+10,h,f,d);return}let p=lj(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-h)<s&&!b.some(g=>m.from<g&&m.to>g));if(!p){if(h<f.to&&n&&r&&n.visibleRanges.some(y=>y.from<=h&&y.to>=h)){let y=n.moveToLineBoundary(he.cursor(h),!1,!0).head;y>c&&(h=y)}let m=this.gapSize(f,c,h,d),g=r||m<2e6?m:2e6;p=new Jp(c,h,m,g)}a.push(p)},u=c=>{if(c.length<o||c.type!=an.Text)return;let h=aj(c.from,c.to,this.stateDeco);if(h.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,_;if(r){let b=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,m;if(f!=null){let g=Vc(h,f),y=((this.visibleBottom-this.visibleTop)/2+b)/c.height;p=g-y,m=g+y}else p=(this.visibleTop-c.top-b)/c.height,m=(this.visibleBottom-c.top+b)/c.height;d=jc(h,p),_=jc(h,m)}else{let b=h.total*this.heightOracle.charWidth,p=i*this.heightOracle.charWidth,m=0;if(b>2e6)for(let E of e)E.from>=c.from&&E.from<c.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=E.size-E.displaySize);let g=this.pixelViewport.left+m,y=this.pixelViewport.right+m,v,S;if(f!=null){let E=Vc(h,f),C=((y-g)/2+p)/b;v=E-C,S=E+C}else v=(g-p)/b,S=(y+p)/b;d=jc(h,v),_=jc(h,S)}d>c.from&&l(c.from,d,c,h),_<c.to&&l(_,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,r,i){let s=Vc(i,r)-Vc(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Jp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=st.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];et.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||pl(this.heightMap.lineAt(e,vt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||pl(this.heightMap.lineAt(this.scaler.fromDOM(e),vt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return pl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Uc{constructor(e,n){this.from=e,this.to=n}}function aj(t,e,n){let r=[],i=t,s=0;return et.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function jc({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Vc(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function lj(t,e){for(let n of t)if(e(n))return n}const eS={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function tS(t){let e=t.facet(Ld).filter(r=>typeof r!="function"),n=t.facet($b).filter(r=>typeof r!="function");return n.length&&e.push(et.join(n)),e}class Gb{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=n.lineAt(a,vt.ByPos,e,0,0).top,c=n.lineAt(l,vt.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Gb?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function pl(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new br(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>pl(i,e)):t._content)}const $c=Re.define({combine:t=>t.join(" ")}),h0=Re.define({combine:t=>t.indexOf(!0)>-1}),f0=ns.newName(),pR=ns.newName(),mR=ns.newName(),gR={"&light":"."+pR,"&dark":"."+mR};function d0(t,e,n){return new ns(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const uj=d0("."+f0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},gR),cj={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Zp=Ae.ie&&Ae.ie_version<=11;class hj{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new VU,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ae.ie&&Ae.ie_version<=11||Ae.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ae.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ae.chrome&&Ae.chrome_version<126)&&(this.editContext=new dj(e),e.state.facet(gi)&&(e.contentDOM.editContext=this.editContext.editContext)),Zp&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(gi)?r.root.activeElement!=this.dom:!Il(this.dom,i))return;let s=i.anchorNode&&r.docView.tile.nearest(i.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ae.ie&&Ae.ie_version<=11||Ae.android&&Ae.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Dl(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=fa(e.root);if(!n)return!1;let r=Ae.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&fj(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Il(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&zU(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,cj),Zp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Zp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Go(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Il(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new I7(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=rR(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!vf(this.view.state.selection,n.newSel.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let r=nS(n,e.previousSibling||e.target.previousSibling,-1),i=nS(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(gi)!=e.state.facet(gi)&&(e.view.contentDOM.editContext=e.state.facet(gi)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function nS(t,e,n){for(;e;){let r=zt.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function rS(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor,1);return Dl(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function fj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return rS(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?rS(t,n):null}class dj{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let u=l-a>r.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let c=iR(e.state.sliceDoc(a,l),r.text,(u?i.from:i.to)-a,u?"end":null);if(!c){let f=he.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));vf(f,i)||e.dispatch({selection:f,userEvent:"select"});return}let h={from:c.from+a,to:c.toA+a,insert:ut.of(r.text.slice(c.from,c.toB).split(`
`))};if((Ae.mac||Ae.android)&&h.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:l,insert:ut.of([r.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let f=this.to-this.from+(h.to-h.from+h.insert.length);Wb(e,h,he.single(this.toEditorPos(r.selectionStart,f),this.toEditorPos(r.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(l<u){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(st.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:G2.of(st.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=fa(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let c=u.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ie{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||$U(e.parent)||document,this.viewState=new ZE(e.state||ot.create(e)),e.scrollTo&&e.scrollTo.is(Bc)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Oo).map(i=>new Gp(i));for(let i of this.plugins)i.update(this);this.observer=new hj(this),this.inputState=new O7(this),this.inputState.ensureHandlers(this.plugins),this.docView=new HE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let n=e.length==1&&e[0]instanceof jt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(cR))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=hR(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ot.phrases)!=this.state.facet(ot.phrases))return this.setState(s);i=_f.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new Ko(d.empty?d:he.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(Bc)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Sf.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(fl)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet($c)!=i.state.facet($c)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(o0))try{f(i)}catch(d){Qn(this.state,d,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!rR(this,c)&&u.force&&Go(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new ZE(e),this.plugins=e.facet(Oo).map(r=>new Gp(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new HE(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Oo),r=e.state.facet(Oo);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Gp(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Qn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(I2(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(_){return Qn(this.state,_),iS}}),h=_f.create(this,this.state,[]),f=!1;h.flags|=l,n?n.flags|=l:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=iS)try{let _=u[d];_.write&&_.write(c[d],this)}catch(_){Qn(this.state,_)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let _=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(_>1||_<-1){i=i+_,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(o0))a(n)}get themeClasses(){return f0+" "+(this.state.facet(h0)?mR:pR)+" "+this.state.facet($c)}updateAttrs(){let e=sS(this,K2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(gi)?"true":"false",class:"cm-content",style:`${Ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),sS(this,Dd,n);let r=this.observer.ignore(()=>{let i=PE(this.contentDOM,this.contentAttrs,n),s=PE(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Ie.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(fl);let e=this.state.facet(Ie.cspNonce);ns.mount(this.root,this.styleModules.concat(uj).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Qp(this,e,UE(this,e,n,r))}moveByGroup(e,n){return Qp(this,e,UE(this,e,n,r=>C7(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return he.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return x7(this,e,n,r)}moveVertically(e,n,r){return Qp(this,e,T7(this,e,n,r))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let r=u0(this,e,n);return r&&r.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),u0(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Ei.find(s,e-i.from,-1,n)];return gf(r,o.dir==St.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(z2)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>pj)return N2(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||M2(s.isolates,r=NE(this,e))))return s.order;r||(r=NE(this,e));let i=QU(e.text,n,r);return this.bidiCache.push(new Sf(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{R2(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Bc.of(new Ko(typeof e=="number"?he.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Bc.of(new Ko(he.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return un.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return un.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=ns.newName(),i=[$c.of(r),fl.of(d0(`.${r}`,e))];return n&&n.dark&&i.push(h0.of(!0)),i}static baseTheme(e){return ps.lowest(fl.of(d0("."+f0,e,gR)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&zt.get(r)||zt.get(e);return((n=i?.root)===null||n===void 0?void 0:n.view)||null}}Ie.styleModule=fl;Ie.inputHandler=V2;Ie.clipboardInputFilter=jb;Ie.clipboardOutputFilter=Vb;Ie.scrollHandler=q2;Ie.focusChangeEffect=$2;Ie.perLineTextDirection=z2;Ie.exceptionSink=j2;Ie.updateListener=o0;Ie.editable=gi;Ie.mouseSelectionStyle=U2;Ie.dragMovesSelection=H2;Ie.clickAddsSelectionRange=F2;Ie.decorations=Ld;Ie.blockWrappers=Y2;Ie.outerDecorations=$b;Ie.atomicRanges=Yu;Ie.bidiIsolatedRanges=X2;Ie.scrollMargins=Q2;Ie.darkTheme=h0;Ie.cspNonce=Re.define({combine:t=>t.length?t[0]:""});Ie.contentAttributes=Dd;Ie.editorAttributes=K2;Ie.lineWrapping=Ie.contentAttributes.of({class:"cm-lineWrapping"});Ie.announce=Ge.define();const pj=4096,iS={};class Sf{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:St.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new Sf(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function sS(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&Fb(o,n)}return n}const mj=Ae.mac?"mac":Ae.windows?"win":Ae.linux?"linux":"key";function gj(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function zc(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const _j=ps.default(Ie.domEventHandlers({keydown(t,e){return bR(_R(e.state),t,e,"editor")}})),Nd=Re.define({enables:_j}),oS=new WeakMap;function _R(t){let e=t.facet(Nd),n=oS.get(e);return n||oS.set(e,n=vj(e.reduce((r,i)=>r.concat(i),[]))),n}function bj(t,e,n){return bR(_R(t.state),e,t,n)}let Wi=null;const yj=4e3;function vj(t,e=mj){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var h,f;let d=n[o]||(n[o]=Object.create(null)),_=a.split(/ (?!$)/).map(m=>gj(m,e));for(let m=1;m<_.length;m++){let g=_.slice(0,m).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[y=>{let v=Wi={view:y,prefix:g,scope:o};return setTimeout(()=>{Wi==v&&(Wi=null)},yj),!0}]})}let b=_.join(" ");i(b,!1);let p=d[b]||(d[b]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});l&&p.run.push(l),u&&(p.preventDefault=!0),c&&(p.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let f in c)c[f].run.push(d=>h(d,p0))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let p0=null;function bR(t,e,n,r){p0=e;let i=OU(e),s=_r(i,0),o=mi(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;Wi&&Wi.view==n&&Wi.scope==r&&(a=Wi.prefix+" ",oR.indexOf(e.keyCode)<0&&(u=!0,Wi=null));let h=new Set,f=p=>{if(p){for(let m of p.run)if(!h.has(m)&&(h.add(m),m(n)))return p.stopPropagation&&(c=!0),!0;p.preventDefault&&(p.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],_,b;return d&&(f(d[a+zc(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ae.windows&&e.ctrlKey&&e.altKey)&&!(Ae.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(_=rs[e.keyCode])&&_!=i?(f(d[a+zc(_,e,!0)])||e.shiftKey&&(b=tu[e.keyCode])!=i&&b!=_&&f(d[a+zc(b,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(d[a+zc(i,e,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),p0=null,l}class Xu{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=yR(e);return[new Xu(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Ej(e,n,r)}}function yR(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==St.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function aS(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function Ej(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==St.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=yR(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=a.right-(c?parseInt(c.paddingRight):0),d=l0(t,r,1),_=l0(t,i,-1),b=d.type==an.Text?d:null,p=_.type==an.Text?_:null;if(b&&(t.lineWrapping||d.widgetLineBreaks)&&(b=aS(t,r,1,b)),p&&(t.lineWrapping||_.widgetLineBreaks)&&(p=aS(t,i,-1,p)),b&&p&&b.from==p.from&&b.to==p.to)return g(y(n.from,n.to,b));{let S=b?y(n.from,null,b):v(d,!1),E=p?y(null,n.to,p):v(_,!0),C=[];return(b||d).to<(p||_).from-(b&&p?1:0)||d.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<E.top?C.push(m(h,S.bottom,f,E.top)):S.bottom<E.top&&t.elementAtHeight((S.bottom+E.top)/2).type==an.Text&&(S.bottom=E.top=(S.bottom+E.top)/2),g(S).concat(C).concat(g(E))}function m(S,E,C,x){return new Xu(e,S-l.left,E-l.top,Math.max(0,C-S),x-E)}function g({top:S,bottom:E,horizontal:C}){let x=[];for(let A=0;A<C.length;A+=2)x.push(m(C[A],S,C[A+1],E));return x}function y(S,E,C){let x=1e9,A=-1e9,D=[];function M($,G,Z,ee,X){let P=t.coordsAtPos($,$==C.to?-2:2),I=t.coordsAtPos(Z,Z==C.from?2:-2);!P||!I||(x=Math.min(P.top,I.top,x),A=Math.max(P.bottom,I.bottom,A),X==St.LTR?D.push(s&&G?h:P.left,s&&ee?f:I.right):D.push(!s&&ee?h:I.left,!s&&G?f:P.right))}let H=S??C.from,B=E??C.to;for(let $ of t.visibleRanges)if($.to>H&&$.from<B)for(let G=Math.max($.from,H),Z=Math.min($.to,B);;){let ee=t.state.doc.lineAt(G);for(let X of t.bidiSpans(ee)){let P=X.from+ee.from,I=X.to+ee.from;if(P>=Z)break;I>G&&M(Math.max(P,G),S==null&&P<=H,Math.min(I,Z),E==null&&I>=B,X.dir)}if(G=ee.to+1,G>=Z)break}return D.length==0&&M(H,S==null,B,E==null,t.textDirection),{top:x,bottom:A,horizontal:D}}function v(S,E){let C=a.top+(E?S.top:S.bottom);return{top:C,bottom:C,horizontal:[]}}}function Sj(t,e){return t.constructor==e.constructor&&t.eq(e)}class wj{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Oh)!=e.state.facet(Oh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(Oh);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!Sj(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,Ae.safari&&Ae.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Oh=Re.define();function vR(t){return[un.define(e=>new wj(e,t)),Oh.of(t)]}const iu=Re.define({combine(t){return so(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function xj(t={}){return[iu.of(t),Cj,Tj,Aj,W2.of(!0)]}function ER(t){return t.startState.facet(iu)!=t.state.facet(iu)}const Cj=vR({above:!0,markers(t){let{state:e}=t,n=e.facet(iu),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:he.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Xu.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=ER(t);return n&&lS(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){lS(e.state,t)},class:"cm-cursorLayer"});function lS(t,e){e.style.animationDuration=t.facet(iu).cursorBlinkRate+"ms"}const Tj=vR({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Xu.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||ER(t)},class:"cm-selectionLayer"}),Aj=ps.highest(Ie.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),SR=Ge.define({map(t,e){return t==null?null:e.mapPos(t)}}),ml=nn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(SR)?r.value:n,t)}}),kj=un.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(ml);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(ml)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(ml),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(ml)!=t&&this.view.dispatch({effects:SR.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Rj(){return[ml,kj]}const uS=un.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function Ij(){return[uS,Dd.of(t=>{var e;return((e=t.plugin(uS))===null||e===void 0?void 0:e.attrs)||null})]}function Dj(){return Pj}const Lj=st.line({class:"cm-activeLine"}),Pj=un.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(Lj.range(i.from)),e=i.from)}return st.set(n)}},{decorations:t=>t.decorations}),Wc="-10000px";class Oj{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==u.create&&(c=h)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let h=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function Mj(t={}){return Mh.of(t)}function Nj(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Mh=Re.define({combine:t=>{var e,n,r;return{position:Ae.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Nj}}}),cS=new WeakMap,wR=un.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Mh);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Oj(t,Kb,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Mh);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=Wc,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ae.safari){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else n=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=zb(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Mh).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,h=t.pos[a],f=t.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1)){c.style.top=Wc;continue}let d=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,_=d?7:0,b=f.right-f.left,p=(e=cS.get(u))!==null&&e!==void 0?e:f.bottom-f.top,m=u.offset||Fj,g=this.view.textDirection==St.LTR,y=f.width>r.right-r.left?g?r.left:r.right-f.width:g?Math.max(r.left,Math.min(h.left-(d?14:0)+m.x,r.right-b)):Math.min(Math.max(r.left,h.left-b+(d?14:0)-m.x),r.right-b),v=this.above[a];!l.strictSide&&(v?h.top-p-_-m.y<r.top:h.bottom+p+_+m.y>r.bottom)&&v==r.bottom-h.bottom>h.top-r.top&&(v=this.above[a]=!v);let S=(v?h.top-r.top:r.bottom-h.bottom)-_;if(S<p&&u.resize!==!1){if(S<this.view.defaultLineHeight){c.style.top=Wc;continue}cS.set(u,p),c.style.height=(p=S)/s+"px"}else c.style.height&&(c.style.height="");let E=v?h.top-p-_-m.y:h.bottom+_+m.y,C=y+b;if(u.overlap!==!0)for(let x of o)x.left<C&&x.right>y&&x.top<E+p&&x.bottom>E&&(E=v?x.top-p-2-_:x.bottom+_+2);if(this.position=="absolute"?(c.style.top=(E-t.parent.top)/s+"px",hS(c,(y-t.parent.left)/i)):(c.style.top=E/s+"px",hS(c,y/i)),d){let x=h.left+(g?m.x:-m.x)-(y+14-7);d.style.left=x/i+"px"}u.overlap!==!0&&o.push({left:y,top:E,right:C,bottom:E+p}),c.classList.toggle("cm-tooltip-above",v),c.classList.toggle("cm-tooltip-below",!v),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Wc}},{eventObservers:{scroll(){this.maybeMeasure()}}});function hS(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Bj=Ie.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Fj={x:0,y:0},Kb=Re.define({enables:[wR,Bj]});function xR(t,e){let n=t.plugin(wR);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const fS=Re.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function CR(t,e){let n=t.plugin(TR),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const TR=un.fromClass(class{constructor(t){this.input=t.state.facet(wf),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(fS);this.top=new qc(t,!0,e.topContainer),this.bottom=new qc(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(fS);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new qc(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new qc(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(wf);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Ie.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});let qc=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=dS(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=dS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function dS(t){let e=t.nextSibling;return t.remove(),e}const wf=Re.define({enables:TR});function Hj(t,e){let n,r=new Promise(o=>n=o),i=o=>Uj(o,e,n);t.state.field(em,!1)?t.dispatch({effects:AR.of(i)}):t.dispatch({effects:Ge.appendConfig.of(em.init(()=>[i]))});let s=kR.of(i);return{close:s,result:r.then(o=>((t.win.queueMicrotask||(l=>t.win.setTimeout(l,10)))(()=>{t.state.field(em).indexOf(i)>-1&&t.dispatch({effects:s})}),o))}}const em=nn.define({create(){return[]},update(t,e){for(let n of e.effects)n.is(AR)?t=[n.value].concat(t):n.is(kR)&&(t=t.filter(r=>r!=n.value));return t},provide:t=>wf.computeN([t],e=>e.field(t))}),AR=Ge.define(),kR=Ge.define();function Uj(t,e,n){let r=e.content?e.content(t,()=>o(null)):null;if(!r){if(r=Qt("form"),e.input){let a=Qt("input",e.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),r.appendChild(Qt("label",(e.label||"")+": ",a))}else r.appendChild(document.createTextNode(e.label||""));r.appendChild(document.createTextNode(" ")),r.appendChild(Qt("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let i=r.nodeName=="FORM"?[r]:r.querySelectorAll("form");for(let a=0;a<i.length;a++){let l=i[a];l.addEventListener("keydown",u=>{u.keyCode==27?(u.preventDefault(),o(null)):u.keyCode==13&&(u.preventDefault(),o(l))}),l.addEventListener("submit",u=>{u.preventDefault(),o(l)})}let s=Qt("div",r,Qt("button",{onclick:()=>o(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(s.className=e.class),s.classList.add("cm-dialog");function o(a){s.contains(s.ownerDocument.activeElement)&&t.focus(),n(a)}return{dom:s,top:e.top,mount:()=>{if(e.focus){let a;typeof e.focus=="string"?a=r.querySelector(e.focus):a=r.querySelector("input")||r.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class Ii extends ts{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ii.prototype.elementClass="";Ii.prototype.toDOM=void 0;Ii.prototype.mapMode=_n.TrackBefore;Ii.prototype.startSide=Ii.prototype.endSide=-1;Ii.prototype.point=!0;const Nh=Re.define(),jj=Re.define(),Vj={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>et.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Pl=Re.define();function $j(t){return[RR(),Pl.of({...Vj,...t})]}const pS=Re.define({combine:t=>t.some(e=>e)});function RR(t){return[zj]}const zj=un.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Pl).map(e=>new gS(t,e)),this.fixed=!t.state.facet(pS);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(pS)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=et.iter(this.view.state.facet(Nh),this.view.viewport.from),r=[],i=this.gutters.map(s=>new Wj(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==an.Text&&o){m0(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==an.Text){m0(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Pl),n=t.state.facet(Pl),r=t.docChanged||t.heightChanged||t.viewportChanged||!et.eq(t.startState.facet(Nh),t.state.facet(Nh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new gS(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Ie.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==St.LTR?{left:r,right:i}:{right:r,left:i}})});function mS(t){return Array.isArray(t)?t:[t]}function m0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Wj{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=et.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new IR(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];m0(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(jj)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class gS{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=mS(n.markers(e)),n.initialSpacer&&(this.spacer=new IR(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=mS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!et.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class IR{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),qj(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function qj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const Gj=Re.define(),Kj=Re.define(),Mo=Re.define({combine(t){return so(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class tm extends Ii{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function nm(t,e){return t.state.facet(Mo).formatNumber(e,t.state)}const Yj=Pl.compute([Mo],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Gj)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new tm(nm(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(Kj)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Mo)!=e.state.facet(Mo),initialSpacer(e){return new tm(nm(e,_S(e.state.doc.lines)))},updateSpacer(e,n){let r=nm(n.view,_S(n.view.state.doc.lines));return r==e.number?e:new tm(r)},domEventHandlers:t.facet(Mo).domEventHandlers,side:"before"}));function Xj(t={}){return[Mo.of(t),RR(),Yj]}function _S(t){let e=9;for(;e<t;)e=e*10+9;return e}const Qj=new class extends Ii{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Jj=Nh.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(Qj.range(i)))}return et.of(e)});function Zj(){return Jj}const eV=1024;let tV=0;class ur{constructor(e,n){this.from=e,this.to=n}}class tt{constructor(e={}){this.id=tV++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=On.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}tt.closedBy=new tt({deserialize:t=>t.split(" ")});tt.openedBy=new tt({deserialize:t=>t.split(" ")});tt.group=new tt({deserialize:t=>t.split(" ")});tt.isolate=new tt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});tt.contextHash=new tt({perNode:!0});tt.lookAhead=new tt({perNode:!0});tt.mounted=new tt({perNode:!0});class Yo{constructor(e,n,r,i=!1){this.tree=e,this.overlay=n,this.parser=r,this.bracketed=i}static get(e){return e&&e.props&&e.props[tt.mounted.id]}}const nV=Object.create(null);class On{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):nV,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new On(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(tt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(tt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}On.none=new On("",Object.create(null),0,8);class DR{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);if(o){i||(i=Object.assign({},r.props));let a=o[1],l=o[0];l.combine&&l.id in i&&(a=l.combine(i[l.id],a)),i[l.id]=a}}n.push(i?new On(r.name,i,r.id,r.flags):r)}return new DR(n)}}const Gc=new WeakMap,bS=new WeakMap;var pt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(pt||(pt={}));class $t{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Yo.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new xf(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Gc.get(this)||this.topNode,s=new xf(i);return s.moveTo(e,n),Gc.set(this,s._tree),s}get topNode(){return new bn(this,0,0,null)}resolve(e,n=0){let r=su(Gc.get(this)||this.topNode,e,n,!1);return Gc.set(this,r),r}resolveInner(e,n=0){let r=su(bS.get(this)||this.topNode,e,n,!0);return bS.set(this,r),r}resolveStack(e,n=0){return sV(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&pt.IncludeAnonymous)>0;for(let l=this.cursor(o|pt.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Qb(On.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new $t(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new $t(On.none,n,r,i)))}static build(e){return oV(e)}}$t.empty=new $t(On.none,[],[],0);class Yb{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Yb(this.buffer,this.index)}}class ss{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return On.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(LR(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new ss(s,o,this.set)}}function LR(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function su(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof bn&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:pt.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof bn&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class PR{cursor(e=0){return new xf(this,e)}getChild(e,n=null,r=null){let i=yS(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return yS(this,e,n,r)}resolve(e,n=0){return su(this,e,n,!1)}resolveInner(e,n=0){return su(this,e,n,!0)}matchContext(e){return g0(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class bn extends PR{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],h=l[e]+o.from,f;if(!(!(s&pt.EnterBracketed&&c instanceof $t&&(f=Yo.get(c))&&!f.overlay&&f.bracketed&&r>=h&&r<=h+c.length)&&!LR(i,r,h,h+c.length))){if(c instanceof ss){if(s&pt.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,n,r-h,i);if(d>-1)return new Jr(new rV(o,c,e,h),null,d)}else if(s&pt.IncludeAnonymous||!c.type.isAnonymous||Xb(c)){let d;if(!(s&pt.IgnoreMounts)&&(d=Yo.get(c))&&!d.overlay)return new bn(d.tree,h,e,o);let _=new bn(c,h,e,o);return s&pt.IncludeAnonymous||!_.type.isAnonymous?_:_.nextChild(n<0?c.children.length-1:0,n,r,i,s)}}}if(s&pt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,r=0){let i;if(!(r&pt.IgnoreOverlays)&&(i=Yo.get(this._tree))&&i.overlay){let s=e-this.from,o=r&pt.EnterBracketed&&i.bracketed;for(let{from:a,to:l}of i.overlay)if((n>0||o?a<=s:a<s)&&(n<0||o?l>=s:l>s))return new bn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function yS(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function g0(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class rV{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Jr extends PR{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Jr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,r=0){if(r&pt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Jr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Jr(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Jr(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new $t(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function OR(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof bn&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new iV(i,n)}class iV{constructor(e,n){this.heads=e,this.node=n}get next(){return OR(this.heads)}}function sV(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof bn?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Yo.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new bn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(su(a,e,n,!1))}}return i?OR(i):r}class xf{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~pt.EnterBracketed,e instanceof bn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof bn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&pt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&pt.IncludeAnonymous||a instanceof ss||!a.type.isAnonymous||Xb(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Jr(this.buffer,n,this.stack[i]);return this.bufferNode=new Jr(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return g0(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return g0(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Xb(t){return t.children.some(e=>e instanceof ss||!e.type.isAnonymous||Xb(e))}function oV(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=eV,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new Yb(n,n.length):n,l=r.types,u=0,c=0;function h(S,E,C,x,A,D){let{id:M,start:H,end:B,size:$}=a,G=c,Z=u;if($<0)if(a.next(),$==-1){let z=s[M];C.push(z),x.push(H-S);return}else if($==-3){u=M;return}else if($==-4){c=M;return}else throw new RangeError(`Unrecognized record size: ${$}`);let ee=l[M],X,P,I=H-S;if(B-H<=i&&(P=p(a.pos-E,A))){let z=new Uint16Array(P.size-P.skip),K=a.pos-P.size,O=z.length;for(;a.pos>K;)O=m(P.start,z,O);X=new ss(z,B-P.start,r),I=P.start-S}else{let z=a.pos-$;a.next();let K=[],O=[],J=M>=o?M:-1,re=0,oe=B;for(;a.pos>z;)J>=0&&a.id==J&&a.size>=0?(a.end<=oe-i&&(_(K,O,H,re,a.end,oe,J,G,Z),re=K.length,oe=a.end),a.next()):D>2500?f(H,z,K,O):h(H,z,K,O,J,D+1);if(J>=0&&re>0&&re<K.length&&_(K,O,H,re,H,oe,J,G,Z),K.reverse(),O.reverse(),J>-1&&re>0){let q=d(ee,Z);X=Qb(ee,K,O,0,K.length,0,B-H,q,q)}else X=b(ee,K,O,B-H,G-B,Z)}C.push(X),x.push(I)}function f(S,E,C,x){let A=[],D=0,M=-1;for(;a.pos>E;){let{id:H,start:B,end:$,size:G}=a;if(G>4)a.next();else{if(M>-1&&B<M)break;M<0&&(M=$-i),A.push(H,B,$),D++,a.next()}}if(D){let H=new Uint16Array(D*4),B=A[A.length-2];for(let $=A.length-3,G=0;$>=0;$-=3)H[G++]=A[$],H[G++]=A[$+1]-B,H[G++]=A[$+2]-B,H[G++]=G;C.push(new ss(H,A[2]-B,r)),x.push(B-S)}}function d(S,E){return(C,x,A)=>{let D=0,M=C.length-1,H,B;if(M>=0&&(H=C[M])instanceof $t){if(!M&&H.type==S&&H.length==A)return H;(B=H.prop(tt.lookAhead))&&(D=x[M]+H.length+B)}return b(S,C,x,A,D,E)}}function _(S,E,C,x,A,D,M,H,B){let $=[],G=[];for(;S.length>x;)$.push(S.pop()),G.push(E.pop()+C-A);S.push(b(r.types[M],$,G,D-A,H-D,B)),E.push(A-C)}function b(S,E,C,x,A,D,M){if(D){let H=[tt.contextHash,D];M=M?[H].concat(M):[H]}if(A>25){let H=[tt.lookAhead,A];M=M?[H].concat(M):[H]}return new $t(S,E,C,x,M)}function p(S,E){let C=a.fork(),x=0,A=0,D=0,M=C.end-i,H={size:0,start:0,skip:0};e:for(let B=C.pos-S;C.pos>B;){let $=C.size;if(C.id==E&&$>=0){H.size=x,H.start=A,H.skip=D,D+=4,x+=4,C.next();continue}let G=C.pos-$;if($<0||G<B||C.start<M)break;let Z=C.id>=o?4:0,ee=C.start;for(C.next();C.pos>G;){if(C.size<0)if(C.size==-3||C.size==-4)Z+=4;else break e;else C.id>=o&&(Z+=4);C.next()}A=ee,x+=$,D+=Z}return(E<0||x==S)&&(H.size=x,H.start=A,H.skip=D),H.size>4?H:void 0}function m(S,E,C){let{id:x,start:A,end:D,size:M}=a;if(a.next(),M>=0&&x<o){let H=C;if(M>4){let B=a.pos-(M-4);for(;a.pos>B;)C=m(S,E,C)}E[--C]=H,E[--C]=D-S,E[--C]=A-S,E[--C]=x}else M==-3?u=x:M==-4&&(c=x);return C}let g=[],y=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,g,y,-1,0);let v=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new $t(l[t.topID],g.reverse(),y.reverse(),v)}const vS=new WeakMap;function Bh(t,e){if(!t.isAnonymous||e instanceof ss||e.type!=t)return 1;let n=vS.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof $t)){n=1;break}n+=Bh(t,r)}vS.set(e,n)}return n}function Qb(t,e,n,r,i,s,o,a,l){let u=0;for(let _=r;_<i;_++)u+=Bh(t,e[_]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(_,b,p,m,g){for(let y=p;y<m;){let v=y,S=b[y],E=Bh(t,_[y]);for(y++;y<m;y++){let C=Bh(t,_[y]);if(E+C>=c)break;E+=C}if(y==v+1){if(E>c){let C=_[v];d(C.children,C.positions,0,C.children.length,b[v]+g);continue}h.push(_[v])}else{let C=b[y-1]+_[y-1].length-S;h.push(Qb(t,_,b,v,y,S,C,null,l))}f.push(S+g-s)}}return d(e,n,r,i,0),(a||l)(h,f,o)}class spe{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Jr?this.setBuffer(e.context.buffer,e.index,n):e instanceof bn&&this.map.set(e.tree,n)}get(e){return e instanceof Jr?this.getBuffer(e.context.buffer,e.index):e instanceof bn?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class xi{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new xi(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,h=c?c.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let f=o;if(l>=f.from||h<=f.to||u){let d=Math.max(f.from,l)-u,_=Math.min(f.to,h)-u;f=d>=_?null:new xi(d,_,f.tree,f.offset+u,a>0,!!c)}if(f&&i.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let aV=class{startParse(e,n,r){return typeof e=="string"&&(e=new lV(e)),r=r?r.length?r.map(i=>new ur(i.from,i.to)):[new ur(0,0)]:[new ur(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class lV{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function ape(t){return(e,n,r,i)=>new cV(e,t,n,r,i)}class ES{constructor(e,n,r,i,s,o){this.parser=e,this.parse=n,this.overlay=r,this.bracketed=i,this.target=s,this.from=o}}function SS(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class uV{constructor(e,n,r,i,s,o,a,l){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.bracketed=o,this.target=a,this.prev=l,this.depth=0,this.ranges=[]}}const _0=new tt({perNode:!0});class cV{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new $t(r.type,r.children,r.positions,r.length,r.propValues.concat([[_0,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[tt.mounted.id]=new Yo(n,e.overlay,e.parser,e.bracketed),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new dV(this.fragments),n=null,r=null,i=new xf(new bn(this.baseTree,this.ranges[0].from,0,null),pt.IncludeAnonymous|pt.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(n){let u=n.mounts.find(c=>c.frag.from<=i.from&&c.frag.to>=i.to&&c.mount.overlay);if(u)for(let c of u.mount.overlay){let h=c.from+u.pos,f=c.to+u.pos;h>=i.from&&f<=i.to&&!n.ranges.some(d=>d.from<f&&d.to>h)&&n.ranges.push({from:h,to:f})}}a=!1}else if(r&&(o=hV(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||(fV(i),n&&n.depth++,r&&r.depth++);let u=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")n=new uV(s.parser,s.overlay,u,this.inner.length,i.from,!!s.bracketed,i.tree,n);else{let c=CS(this.ranges,s.overlay||(i.from<i.to?[new ur(i.from,i.to)]:[]));c.length&&SS(c),(c.length||!s.overlay)&&this.inner.push(new ES(s.parser,c.length?s.parser.startParse(this.input,TS(u,c),c):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new ur(h.from-i.from,h.to-i.from)):null,!!s.bracketed,i.tree,c.length?c[0].from:i.from)),s.overlay?c.length&&(r={ranges:c,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(i))&&(l===!0&&(l=new ur(i.from,i.to)),l.from<l.to)){let u=n.ranges.length-1;u>=0&&n.ranges[u].to==l.from?n.ranges[u]={from:n.ranges[u].from,to:l.to}:n.ranges.push(l)}if(a&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let u=CS(this.ranges,n.ranges);u.length&&(SS(u),this.inner.splice(n.index,0,new ES(n.parser,n.parser.startParse(this.input,TS(n.mounts,u),u),n.ranges.map(c=>new ur(c.from-n.start,c.to-n.start)),n.bracketed,n.target,u[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function hV(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function wS(t,e,n,r,i,s){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),i.push(o-s)}}function fV(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function u(c,h,f,d,_,b){let p=n[b],m=[],g=[];wS(o,c,p,m,g,d);let y=a[p+1],v=a[p+2];l.push(m.length);let S=b?u(p+4,a[p+3],o.set.types[a[p]],y,v-y,b-1):e.toTree();return m.push(S),g.push(y-d),wS(o,a[p+3],h,m,g,d),new $t(f,m,g,_)}i.children[s]=u(0,a.length,On.none,0,o.length,n.length-1);for(let c of l){let h=t.tree.children[c],f=t.tree.positions[c];t.yield(new bn(h,f+t.from,c,t._tree))}}class xS{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(pt.IncludeAnonymous|pt.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,pt.IgnoreOverlays|pt.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof $t)n=n.children[0];else break}return!1}}class dV{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(_0))!==null&&n!==void 0?n:r.to,this.inner=new xS(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(_0))!==null&&e!==void 0?e:n.to,this.inner=new xS(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(tt.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function CS(t,e){let n=null,r=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[s]=new ur(l.from,o),l.to>a&&n.splice(s+1,0,new ur(a,l.to))):l.to>a?n[s--]=new ur(a,l.to):n.splice(s--,1))}}return r}function pV(t,e,n,r){let i=0,s=0,o=!1,a=!1,l=-1e9,u=[];for(;;){let c=i==t.length?1e9:o?t[i].to:t[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,n),d=Math.min(c,h,r);f<d&&u.push(new ur(f,d))}if(l=Math.min(c,h),l==1e9)break;c==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return u}function TS(t,e){let n=[];for(let{pos:r,mount:i,frag:s}of t){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),u=Math.min(s.to,a);if(i.overlay){let c=i.overlay.map(f=>new ur(f.from+r,f.to+r)),h=pV(e,c,l,u);for(let f=0,d=l;;f++){let _=f==h.length,b=_?u:h[f].from;if(b>d&&n.push(new xi(d,b,i.tree,-o,s.from>=d||s.openStart,s.to<=b||s.openEnd)),_)break;d=h[f].to}}else n.push(new xi(l,u,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return n}let mV=0;class sr{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=mV++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof sr&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new sr(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Cf(e);return r=>r.modified.indexOf(n)>-1?r:Cf.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let gV=0;class Cf{constructor(e){this.name=e,this.instances=[],this.id=gV++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&_V(n,a.modified));if(r)return r;let i=[],s=new sr(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=bV(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Cf.get(a,l));return s}}function _V(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function bV(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function yV(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new ou(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return MR.add(e)}const MR=new tt({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let s=new ou(i.tags,i.mode,i.context);n?n.next=s:r=s,n=s}return r}});let ou=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};ou.empty=new ou([],2,null);function NR(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function vV(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function EV(t,e,n,r=0,i=t.length){let s=new SV(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class SV{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=i,c=wV(e)||ou.empty,h=vV(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,a),u),c.opaque)return;let f=e.tree&&e.tree.prop(tt.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+a,1),_=this.highlighters.filter(p=>!p.scope||p.scope(f.tree.type)),b=e.firstChild();for(let p=0,m=a;;p++){let g=p<f.overlay.length?f.overlay[p]:null,y=g?g.from+a:l,v=Math.max(n,m),S=Math.min(r,y);if(v<S&&b)for(;e.from<S&&(this.highlightRange(e,v,S,i,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=y||!e.nextSibling())););if(!g||y>r)break;m=g.to+a,m>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+a),Math.min(r,m),"",_),this.startSpan(Math.min(r,m),u))}b&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function wV(t){let e=t.type.prop(MR);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const xe=sr.define,Kc=xe(),Vi=xe(),AS=xe(Vi),kS=xe(Vi),$i=xe(),Yc=xe($i),rm=xe($i),Nr=xe(),bs=xe(Nr),Or=xe(),Mr=xe(),b0=xe(),Qa=xe(b0),Xc=xe(),ne={comment:Kc,lineComment:xe(Kc),blockComment:xe(Kc),docComment:xe(Kc),name:Vi,variableName:xe(Vi),typeName:AS,tagName:xe(AS),propertyName:kS,attributeName:xe(kS),className:xe(Vi),labelName:xe(Vi),namespace:xe(Vi),macroName:xe(Vi),literal:$i,string:Yc,docString:xe(Yc),character:xe(Yc),attributeValue:xe(Yc),number:rm,integer:xe(rm),float:xe(rm),bool:xe($i),regexp:xe($i),escape:xe($i),color:xe($i),url:xe($i),keyword:Or,self:xe(Or),null:xe(Or),atom:xe(Or),unit:xe(Or),modifier:xe(Or),operatorKeyword:xe(Or),controlKeyword:xe(Or),definitionKeyword:xe(Or),moduleKeyword:xe(Or),operator:Mr,derefOperator:xe(Mr),arithmeticOperator:xe(Mr),logicOperator:xe(Mr),bitwiseOperator:xe(Mr),compareOperator:xe(Mr),updateOperator:xe(Mr),definitionOperator:xe(Mr),typeOperator:xe(Mr),controlOperator:xe(Mr),punctuation:b0,separator:xe(b0),bracket:Qa,angleBracket:xe(Qa),squareBracket:xe(Qa),paren:xe(Qa),brace:xe(Qa),content:Nr,heading:bs,heading1:xe(bs),heading2:xe(bs),heading3:xe(bs),heading4:xe(bs),heading5:xe(bs),heading6:xe(bs),contentSeparator:xe(Nr),list:xe(Nr),quote:xe(Nr),emphasis:xe(Nr),strong:xe(Nr),link:xe(Nr),monospace:xe(Nr),strikethrough:xe(Nr),inserted:xe(),deleted:xe(),changed:xe(),invalid:xe(),meta:Xc,documentMeta:xe(Xc),annotation:xe(Xc),processingInstruction:xe(Xc),definition:sr.defineModifier("definition"),constant:sr.defineModifier("constant"),function:sr.defineModifier("function"),standard:sr.defineModifier("standard"),local:sr.defineModifier("local"),special:sr.defineModifier("special")};for(let t in ne){let e=ne[t];e instanceof sr&&(e.name=t)}NR([{tag:ne.link,class:"tok-link"},{tag:ne.heading,class:"tok-heading"},{tag:ne.emphasis,class:"tok-emphasis"},{tag:ne.strong,class:"tok-strong"},{tag:ne.keyword,class:"tok-keyword"},{tag:ne.atom,class:"tok-atom"},{tag:ne.bool,class:"tok-bool"},{tag:ne.url,class:"tok-url"},{tag:ne.labelName,class:"tok-labelName"},{tag:ne.inserted,class:"tok-inserted"},{tag:ne.deleted,class:"tok-deleted"},{tag:ne.literal,class:"tok-literal"},{tag:ne.string,class:"tok-string"},{tag:ne.number,class:"tok-number"},{tag:[ne.regexp,ne.escape,ne.special(ne.string)],class:"tok-string2"},{tag:ne.variableName,class:"tok-variableName"},{tag:ne.local(ne.variableName),class:"tok-variableName tok-local"},{tag:ne.definition(ne.variableName),class:"tok-variableName tok-definition"},{tag:ne.special(ne.variableName),class:"tok-variableName2"},{tag:ne.definition(ne.propertyName),class:"tok-propertyName tok-definition"},{tag:ne.typeName,class:"tok-typeName"},{tag:ne.namespace,class:"tok-namespace"},{tag:ne.className,class:"tok-className"},{tag:ne.macroName,class:"tok-macroName"},{tag:ne.propertyName,class:"tok-propertyName"},{tag:ne.operator,class:"tok-operator"},{tag:ne.comment,class:"tok-comment"},{tag:ne.meta,class:"tok-meta"},{tag:ne.invalid,class:"tok-invalid"},{tag:ne.punctuation,class:"tok-punctuation"}]);var im;const No=new tt;function xV(t){return Re.define({combine:t?e=>e.concat(t):void 0})}const CV=new tt;class Er{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ot.prototype.hasOwnProperty("tree")||Object.defineProperty(ot.prototype,"tree",{get(){return cn(this)}}),this.parser=n,this.extension=[os.of(this),ot.languageData.of((s,o,a)=>{let l=RS(s,o,a),u=l.type.prop(No);if(!u)return[];let c=s.facet(u),h=l.type.prop(CV);if(h){let f=l.resolve(o-l.from,a);for(let d of h)if(d.test(f,s)){let _=s.facet(d.facet);return d.type=="replace"?_:_.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return RS(e,n,r).type.prop(No)==this.data}findRegions(e){let n=e.facet(os);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(No)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(tt.mounted);if(a){if(a.tree.prop(No)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof $t&&i(u,s.positions[l]+o)}};return i(cn(e),0),r}get allowsNesting(){return!0}}Er.setState=Ge.define();function RS(t,e,n){let r=t.facet(os),i=cn(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,pt.ExcludeBuffers|pt.EnterBracketed))s.type.isTop&&(i=s);return i}class y0 extends Er{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=xV(e.languageData);return new y0(n,e.parser.configure({props:[No.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new y0(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function cn(t){let e=t.field(Er.state,!1);return e?e.tree:$t.empty}class TV{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ja=null;class Tf{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Tf(e,n,[],$t.empty,0,r,[],null)}startParse(){return this.parser.startParse(new TV(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=$t.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(xi.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(xi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ja;Ja=this;try{return e()}finally{Ja=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=IS(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,h,f)=>l.push({fromA:u,toA:c,fromB:h,toB:f})),r=xi.applyChanges(r,l),i=$t.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&a.push({from:c,to:h})}}}return new Tf(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=IS(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends aV{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Ja;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new $t(On.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ja}}function IS(t,e,n){return xi.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ga{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new ga(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Tf.create(e.facet(os).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new ga(r)}}Er.state=nn.define({create:ga.init,update(t,e){for(let n of e.effects)if(n.is(Er.setState))return n.value;return e.startState.facet(os)!=e.state.facet(os)?ga.init(e.state):t.apply(e)}});let BR=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(BR=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const sm=typeof navigator<"u"&&(!((im=navigator.scheduling)===null||im===void 0)&&im.isInputPending)?()=>navigator.scheduling.isInputPending():null,AV=un.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Er.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Er.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=BR(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Er.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!sm?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>sm&&sm()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Er.setState.of(new ga(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Qn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),os=Re.define({combine(t){return t.length?t[0]:null},enables:t=>[Er.state,AV,Ie.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class cpe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class dn{constructor(e,n,r,i,s,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new dn(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(s=>s==n))return i;if(r)for(let i of e)for(let s of i.alias){let o=n.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+s.length])))return i}return null}}const kV=Re.define(),Aa=Re.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Af(t){let e=t.facet(Aa);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function au(t,e){let n="",r=t.tabSize,i=t.facet(Aa)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Jb(t,e){t instanceof ot&&(t=new Bd(t));for(let r of t.state.facet(kV)){let i=r(t,e);if(i!==void 0)return i}let n=cn(t.state);return n.length>=e?IV(t,n,e):null}class Bd{constructor(e,n={}){this.state=e,this.options=n,this.unit=Af(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Rd(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const RV=new tt;function IV(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return FR(r,t,n)}function FR(t,e,n){for(let r=t;r;r=r.next){let i=LV(r.node);if(i)return i(Zb.create(e,n,r))}return 0}function DV(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function LV(t){let e=t.type.prop(RV);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(tt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>HR(o,!0,1,void 0,s&&!DV(o)?i.from:void 0)}return t.parent==null?PV:null}function PV(){return 0}class Zb extends Bd{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Zb(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(OV(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return FR(this.context.next,this.base,this.pos)}}function OV(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function MV(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function hpe({closing:t,align:e=!0,units:n=1}){return r=>HR(r,e,n,t)}function HR(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?MV(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const fpe=t=>t.baseIndent;function dpe({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const NV=200;function BV(){return ot.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+NV)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let h=Jb(o,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=au(o,h);f!=d&&l.push({from:c.from,to:c.from+f.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const FV=Re.define(),HV=new tt;function ppe(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function UV(t,e,n){let r=cn(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(HV);if(l&&(a.to<r.length-50||r.length==t.doc.length||!jV(a))){let u=l(a,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function jV(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function DS(t,e,n){for(let r of t.facet(FV)){let i=r(t,e,n);if(i)return i}return UV(t,e,n)}function UR(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const jR=Ge.define({map:UR}),ey=Ge.define({map:UR}),kf=nn.define({create(){return st.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=LS(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(jR)&&!VV(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(VR),i=r?st.replace({widget:new WV(r(e.state,n.value))}):PS;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(ey)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=LS(t,e.selection.main.head)),t},provide:t=>Ie.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(PS.range(r,i))}return st.set(e,!0)}});function LS(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function v0(t,e,n){var r;let i=null;return(r=t.field(kf,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function VV(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const $V={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},VR=Re.define({combine(t){return so(t,$V)}});function zV(t){return[kf,KV]}function $R(t,e){let{state:n}=t,r=n.facet(VR),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=v0(t.state,a.from,a.to);l&&t.dispatch({effects:ey.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const PS=st.replace({widget:new class extends oo{toDOM(t){return $R(t,null)}}});class WV extends oo{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return $R(e,this.value)}}const qV={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class om extends Ii{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function GV(t={}){let e={...qV,...t},n=new om(e,!0),r=new om(e,!1),i=un.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(os)!=o.state.facet(os)||o.startState.field(kf,!1)!=o.state.field(kf,!1)||cn(o.startState)!=cn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Xs;for(let l of o.viewportLineBlocks){let u=v0(o.state,l.from,l.to)?r:DS(o.state,l.from,l.to)?n:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:s}=e;return[i,$j({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||et.empty},initialSpacer(){return new om(e,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let u=v0(o.state,a.from,a.to);if(u)return o.dispatch({effects:ey.of(u)}),!0;let c=DS(o.state,a.from,a.to);return c?(o.dispatch({effects:jR.of(c)}),!0):!1}}}),zV()]}const KV=Ie.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Fd{constructor(e,n){this.specs=e;let r;function i(a){let l=ns.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Er?a=>a.prop(No)==o.data:o?a=>a==o:void 0,this.style=NR(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new ns(r):null,this.themeType=n.themeType}static define(e,n){return new Fd(e,n||{})}}const E0=Re.define(),YV=Re.define({combine(t){return t.length?[t[0]]:null}});function am(t){let e=t.facet(E0);return e.length?e:t.facet(YV)}function XV(t,e){let n=[JV],r;return t instanceof Fd&&(t.module&&n.push(Ie.styleModule.of(t.module)),r=t.themeType),r?n.push(E0.computeN([Ie.darkTheme],i=>i.facet(Ie.darkTheme)==(r=="dark")?[t]:[])):n.push(E0.of(t)),n}class QV{constructor(e){this.markCache=Object.create(null),this.tree=cn(e.state),this.decorations=this.buildDeco(e,am(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=cn(e.state),r=am(e.state),i=r!=am(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return st.none;let r=new Xs;for(let{from:i,to:s}of e.visibleRanges)EV(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=st.mark({class:l})))},i,s);return r.finish()}}const JV=ps.high(un.fromClass(QV,{decorations:t=>t.decorations})),ZV=Ie.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),zR=1e4,WR="()[]{}",qR=Re.define({combine(t){return so(t,{afterCursor:!0,brackets:WR,maxScanDistance:zR,renderMatch:n$})}}),e$=st.mark({class:"cm-matchingBracket"}),t$=st.mark({class:"cm-nonmatchingBracket"});function n$(t){let e=[],n=t.matched?e$:t$;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const r$=nn.define({create(){return st.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(qR);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Zr(e.state,i.head,-1,r)||i.head>0&&Zr(e.state,i.head-1,1,r)||r.afterCursor&&(Zr(e.state,i.head,1,r)||i.head<e.state.doc.length&&Zr(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return st.set(n,!0)},provide:t=>Ie.decorations.from(t)}),i$=[r$,ZV];function s$(t={}){return[qR.of(t),i$]}const o$=new tt;function S0(t,e,n){let r=t.prop(e<0?tt.openedBy:tt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function w0(t){let e=t.type.prop(o$);return e?e(t.node):t}function Zr(t,e,n,r={}){let i=r.maxScanDistance||zR,s=r.brackets||WR,o=cn(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=S0(l.type,n,s);if(u&&l.from<l.to){let c=w0(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return a$(t,e,n,l,c,u,s)}}return l$(t,e,n,o,a.type,i,s)}function a$(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a?.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=w0(c);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(S0(c.type,n,o))u++;else if(S0(c.type,-n,o)){if(u==0){let h=w0(c);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function l$(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let _=e+f*n;for(let b=n>0?0:d.length-1,p=n>0?d.length:-1;b!=p;b+=n){let m=o.indexOf(d[b]);if(!(m<0||r.resolveInner(_+b,1).type!=i))if(m%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:_+b,to:_+b+1},matched:m>>1==l>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}const u$=Object.create(null),OS=[On.none],MS=[],NS=Object.create(null),c$=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])c$[t]=h$(u$,e);function lm(t,e){MS.indexOf(t)>-1||(MS.push(t),console.warn(e))}function h$(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||ne[u];c?typeof c=="function"?l.length?l=l.map(c):lm(u,`Modifier ${u} used at start of tag`):l.length?lm(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:lm(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=NS[i];if(s)return s.id;let o=NS[i]=On.define({id:OS.length,name:r,props:[yV({[r]:n})]});return OS.push(o),o.id}St.RTL,St.LTR;class GR{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=cn(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(KR(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function BS(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function f$(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=BS(e)+BS(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function d$(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:f$(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function mpe(t,e){return n=>{for(let r=cn(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class FS{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function zs(t){return t.selection.main.from}function KR(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const ty=Oi.define();function p$(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:he.cursor(a.from+s+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const HS=new WeakMap;function m$(t){if(!Array.isArray(t))return t;let e=HS.get(t);return e||HS.set(t,e=d$(t)),e}const Rf=Ge.define(),lu=Ge.define();class g${constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=_r(e,n),i=mi(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(_r(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let g=_r(e,0),y=mi(g),v=y==e.length?0:-100;if(g!=n[0])if(g==r[0])v+=-200;else return null;return this.ret(v,[0,y])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let g=0,y=Math.min(e.length,200);g<y&&u<l;){let v=_r(e,g);(v==n[u]||v==r[u])&&(i[u++]=g),g+=mi(v)}if(u<l)return null}let c=0,h=0,f=!1,d=0,_=-1,b=-1,p=/[a-z]/.test(e),m=!0;for(let g=0,y=Math.min(e.length,200),v=0;g<y&&h<l;){let S=_r(e,g);a<0&&(c<l&&S==n[c]&&(s[c++]=g),d<l&&(S==n[d]||S==r[d]?(d==0&&(_=g),b=g+1,d++):d=0));let E,C=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(E=Pb(S))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!g||C==1&&p||v==0&&C!=0)&&(n[h]==S||r[h]==S&&(f=!0)?o[h++]=g:o.length&&(m=!1)),v=C,g+=mi(S)}return h==l&&o[0]==0&&m?this.result(-100+(f?-200:0),o,e):d==l&&_==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[_,b]):h==l?this.result(-100+(f?-200:0)+-700+(m?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?mi(_r(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class _${constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Zt=Re.define({combine(t){return so(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:b$,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>US(e(r),n(r)),optionClass:(e,n)=>r=>US(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function US(t,e){return t?e?t+" "+e:t:e}function b$(t,e,n,r,i,s){let o=t.textDirection==St.RTL,a=o,l=!1,u="top",c,h,f=e.left-i.left,d=i.right-e.right,_=r.right-r.left,b=r.bottom-r.top;if(a&&f<Math.min(_,d)?a=!1:!a&&d<Math.min(_,f)&&(a=!0),_<=(a?f:d))c=Math.max(i.top,Math.min(n.top,i.bottom-b))-e.top,h=Math.min(400,a?f:d);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let g=i.bottom-e.bottom;g>=b||g>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let p=(e.bottom-e.top)/s.offsetHeight,m=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/p}px; max-width: ${h/m}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function y$(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],h=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(c,h))),f.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function um(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class v${constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Zt);this.optionContent=y$(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=um(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Zt).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:lu.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=um(s.length,o,e.state.facet(Zt).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=um(n.options.length,n.selected,this.view.state.facet(Zt).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Qn(this.view.state,a,"completion info")):(this.addInfoPane(o,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&S$(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Zt).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let f=typeof u=="string"?u:u.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=f}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let h=this.optionClass(a);h&&(c.className=h);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function E$(t,e){return n=>new v$(n,t,e)}function S$(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function jS(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function w$(t,e){let n=[],r=null,i=null,s=c=>{n.push(c);let{section:h}=c.completion;if(h){r||(r=[]);let f=typeof h=="string"?h:h.name;r.some(d=>d.name==f)||r.push(typeof h=="string"?{name:f}:h)}},o=e.facet(Zt);for(let c of t)if(c.hasResult()){let h=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)s(new FS(f,c.source,h?h(f):[],1e9-n.length));else{let f=e.sliceDoc(c.from,c.to),d,_=o.filterStrict?new _$(f):new g$(f);for(let b of c.result.options)if(d=_.match(b.label)){let p=b.displayLabel?h?h(b,d.matched):[]:d.matched,m=d.score+(b.boost||0);if(s(new FS(b,c.source,p,m)),typeof b.section=="object"&&b.section.rank==="dynamic"){let{name:g}=b.section;i||(i=Object.create(null)),i[g]=Math.max(m,i[g]||-1e9)}}}}if(r){let c=Object.create(null),h=0,f=(d,_)=>(d.rank==="dynamic"&&_.rank==="dynamic"?i[_.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof _.rank=="number"?_.rank:1e9)||(d.name<_.name?-1:1);for(let d of r.sort(f))h-=1e5,c[d.name]=h;for(let d of n){let{section:_}=d.completion;_&&(d.score+=c[typeof _=="string"?_:_.name])}}let a=[],l=null,u=o.compareCompletions;for(let c of n.sort((h,f)=>f.score-h.score||u(h.completion,f.completion))){let h=c.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?a.push(c):jS(c.completion)>jS(l)&&(a[a.length-1]=c),l=c.completion}return a}class Bo{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Bo(this.options,VS(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let a=w$(e,n);if(!a.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=n.facet(Zt).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Bo(a,VS(r,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:R$,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Bo(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Bo(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class If{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new If(A$,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Zt),s=(r.override||n.languageDataAt("autocomplete",zs(n)).map(m$)).map(l=>(this.active.find(c=>c.source==l)||new cr(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(ny));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!x$(s,this.active)||a?o=Bo.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new cr(l.source,0):l));for(let l of e.effects)l.is(XR)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new If(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?C$:T$}}function x$(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const C$={"aria-autocomplete":"list"},T$={};function VS(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const A$=[];function YR(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(ty);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class cr{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=YR(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new cr(i.source,0)),r&4&&i.state==0&&(i=new cr(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(Rf))i=new cr(i.source,1,s.value);else if(s.is(lu))i=new cr(i.source,0);else if(s.is(ny))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(zs(e.state))}}class Xo extends cr{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=zs(e.state);if(a>o||!i||n&2&&(zs(e.startState)==this.from||a<this.limit))return new cr(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return k$(i.validFor,e.state,s,o)?new Xo(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new GR(e.state,a,!1)))?new Xo(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:zs(e.state)):new cr(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Xo(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new cr(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function k$(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):KR(t,!0).test(i)}const ny=Ge.define({map(t,e){return t.map(n=>n.map(e))}}),XR=Ge.define(),In=nn.define({create(){return If.start()},update(t,e){return t.update(e)},provide:t=>[Kb.from(t,e=>e.tooltip),Ie.contentAttributes.from(t,e=>e.attrs)]});function ry(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(In).active.find(i=>i.source==e.source);return r instanceof Xo?(typeof n=="string"?t.dispatch({...p$(t.state,n,r.from,r.to),annotations:ty.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const R$=E$(In,ry);function Qc(t,e="option"){return n=>{let r=n.state.field(In,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Zt).interactionDelay)return!1;let i=1,s;e=="page"&&(s=xR(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:XR.of(a)}),!0}}const QR=t=>{let e=t.state.field(In,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Zt).interactionDelay?!1:ry(t,e.open.options[e.open.selected])},cm=t=>t.state.field(In,!1)?(t.dispatch({effects:Rf.of(!0)}),!0):!1,I$=t=>{let e=t.state.field(In,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:lu.of(null)}),!0)};class D${constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const L$=50,P$=1e3,O$=un.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(In).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(In),n=t.state.facet(Zt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(In)==e)return;let r=t.transactions.some(s=>{let o=YR(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>L$&&Date.now()-o.time>P$){for(let a of o.context.abortListeners)try{a()}catch(l){Qn(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(Rf)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(In);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=zs(e),r=new GR(e,n,t.explicit,this.view),i=new D$(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:lu.of(null)}),Qn(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Zt),r=this.view.state.field(In);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=zs(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),u=new Xo(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let c of s.updates)u=u.update(c,n);if(u.hasResult()){e.push(u);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new cr(s.active.source,0);for(let l of s.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:ny.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(In,!1);if(e&&e.tooltip&&this.view.state.facet(Zt).closeOnBlur){let n=e.open&&xR(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:lu.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Rf.of(!1)}),20),this.composing=0}}}),M$=typeof navigator=="object"&&/Win/.test(navigator.platform),N$=ps.highest(Ie.domEventHandlers({keydown(t,e){let n=e.state.field(In,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(M$&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&ry(e,r),!1}})),JR=Ie.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class B${constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class iy{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,_n.TrackDel),r=e.mapPos(this.to,1,_n.TrackDel);return n==null||r==null?null:new iy(this.field,n,r)}}class sy{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let u=o,c=/^\t*/.exec(l)[0].length;for(let h=0;h<c;h++)u+=e.facet(Aa);i.push(n+u.length-c),l=u+l.slice(c)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new iy(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",u=-1,c=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(a!=null?n[h].seq==a:c&&n[h].name==c)&&(u=h);if(u<0){let h=0;for(;h<n.length&&(a==null||n[h].seq!=null&&n[h].seq<a);)h++;n.splice(h,0,{seq:a,name:c}),u=h;for(let f of i)f.field>=u&&f.field++}for(let h of i)if(h.line==r.length&&h.from>s.index){let f=s[2]?3+(s[1]||"").length:2;h.from-=f,h.to-=f}i.push(new B$(u,r.length,s.index,s.index+c.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,u)=>{for(let c of i)c.line==r.length&&c.from>u&&(c.from--,c.to--);return l}),r.push(o)}return new sy(r,i)}}let F$=st.widget({widget:new class extends oo{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),H$=st.mark({class:"cm-snippetField"});class ka{constructor(e,n){this.ranges=e,this.active=n,this.deco=st.set(e.map(r=>(r.from==r.to?F$:H$).range(r.from,r.to)),!0)}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new ka(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const Qu=Ge.define({map(t,e){return t&&t.map(e)}}),U$=Ge.define(),uu=nn.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(Qu))return n.value;if(n.is(U$)&&t)return new ka(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Ie.decorations.from(t,e=>e?e.deco:st.none)});function oy(t,e){return he.create(t.filter(n=>n.field==e).map(n=>he.range(n.from,n.to)))}function j$(t){let e=sy.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),{main:l}=n.state.selection,u={changes:{from:i,to:s==l.from?l.to:s,insert:ut.of(o)},scrollIntoView:!0,annotations:r?[ty.of(r),jt.userEvent.of("input.complete")]:void 0};if(a.length&&(u.selection=oy(a,0)),a.some(c=>c.field>0)){let c=new ka(a,0),h=u.effects=[Qu.of(c)];n.state.field(uu,!1)===void 0&&h.push(Ge.appendConfig.of([uu,q$,G$,JR]))}n.dispatch(n.state.update(u))}}function ZR(t){return({state:e,dispatch:n})=>{let r=e.field(uu,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:oy(r.ranges,i),effects:Qu.of(s?null:new ka(r.ranges,i)),scrollIntoView:!0})),!0}}const V$=({state:t,dispatch:e})=>t.field(uu,!1)?(e(t.update({effects:Qu.of(null)})),!0):!1,$$=ZR(1),z$=ZR(-1),W$=[{key:"Tab",run:$$,shift:z$},{key:"Escape",run:V$}],$S=Re.define({combine(t){return t.length?t[0]:W$}}),q$=ps.highest(Nd.compute([$S],t=>t.facet($S)));function gpe(t,e){return{...e,apply:j$(t)}}const G$=Ie.domEventHandlers({mousedown(t,e){let n=e.state.field(uu,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:oy(n.ranges,i.field),effects:Qu.of(n.ranges.some(s=>s.field>i.field)?new ka(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),Df={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Bs=Ge.define({map(t,e){let n=e.mapPos(t,-1,_n.TrackAfter);return n??void 0}}),ay=new class extends ts{};ay.startSide=1;ay.endSide=-1;const eI=nn.define({create(){return et.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Bs)&&(t=t.update({add:[ay.range(n.value,n.value+1)]}));return t}});function K$(){return[J$,eI]}const hm="()[]{}<>";function Y$(t){for(let e=0;e<hm.length;e+=2)if(hm.charCodeAt(e)==t)return hm.charAt(e+1);return Pb(t<128?t:t+1)}function X$(t,e){return t.languageDataAt("closeBrackets",e)[0]||Df}const Q$=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),J$=Ie.inputHandler.of((t,e,n,r)=>{if((Q$?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&mi(_r(r,0))==1||e!=i.from||n!=i.to)return!1;let s=Z$(t.state,r);return s?(t.dispatch(s),!0):!1});function Z$(t,e){let n=X$(t,t.selection.main.head),r=n.brackets||Df.brackets;for(let i of r){let s=Y$(_r(i,0));if(e==i)return s==i?nz(t,i,r.indexOf(i+i+i)>-1,n):ez(t,i,s,n.before||Df.before);if(e==s&&tI(t,t.selection.main.from))return tz(t,i,s)}return null}function tI(t,e){let n=!1;return t.field(eI).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function ly(t,e){let n=t.sliceString(e,e+2);return n.slice(0,mi(_r(n,0)))}function ez(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Bs.of(o.to+e.length),range:he.range(o.anchor+e.length,o.head+e.length)};let a=ly(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Bs.of(o.head+e.length),range:he.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function tz(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&ly(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:he.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function nz(t,e,n,r){let i=r.stringPrefixes||Df.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Bs.of(a.to+e.length),range:he.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=ly(t.doc,l),c;if(u==e){if(zS(t,l))return{changes:{insert:e+e,from:l},effects:Bs.of(l+e.length),range:he.cursor(l+e.length)};if(tI(t,l)){let f=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:he.cursor(l+f.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(c=WS(t,l-2*e.length,i))>-1&&zS(t,c))return{changes:{insert:e+e+e+e,from:l},effects:Bs.of(l+e.length),range:he.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=Vt.Word&&WS(t,l,i)>-1&&!rz(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Bs.of(l+e.length),range:he.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function zS(t,e){let n=cn(t).resolveInner(e+1);return n.parent&&n.from==e}function rz(t,e,n,r){let i=cn(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>n.length+l;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function WS(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Vt.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=Vt.Word)return s}return-1}function iz(t={}){return[N$,In,Zt.of(t),O$,oz,JR]}const sz=[{key:"Ctrl-Space",run:cm},{mac:"Alt-`",run:cm},{mac:"Alt-i",run:cm},{key:"Escape",run:I$},{key:"ArrowDown",run:Qc(!0)},{key:"ArrowUp",run:Qc(!1)},{key:"PageDown",run:Qc(!0,"page")},{key:"PageUp",run:Qc(!1,"page")},{key:"Enter",run:QR}],oz=ps.highest(Nd.computeN([Zt],t=>t.facet(Zt).defaultKeymap?[sz]:[])),az=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=cy(t.state,n.from);return r.line?lz(t):r.block?cz(t):!1};function uy(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const lz=uy(dz,0),uz=uy(nI,0),cz=uy((t,e)=>nI(t,e,fz(e)),0);function cy(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Za=50;function hz(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Za,r),o=t.sliceDoc(i,i+Za),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,h;i-r<=2*Za?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Za),h=t.sliceDoc(i-Za,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,_=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(_,_+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(_-1))?1:0}}:null}function fz(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function nI(t,e,n=e.selection.ranges){let r=n.map(s=>cy(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>hz(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function dz(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,u=cy(e,s).line;if(u){for(let c=s;c<=o;){let h=e.doc.lineAt(c);if(h.from>i&&(s==o||o>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,_=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<l&&(l=f),r.push({line:h,comment:_,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const x0=Oi.define(),pz=Oi.define(),mz=Re.define(),rI=Re.define({combine(t){return so(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),iI=nn.define({create(){return ei.empty},update(t,e){let n=e.state.facet(rI),r=e.annotation(x0);if(r){let l=Ln.fromTransaction(e,r.selection),u=r.side,c=u==0?t.undone:t.done;return l?c=Lf(c,c.length,n.minDepth,l):c=aI(c,e.startState.selection),new ei(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(pz);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(jt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ln.fromTransaction(e),o=e.annotation(jt.time),a=e.annotation(jt.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ei(t.done.map(Ln.fromJSON),t.undone.map(Ln.fromJSON))}});function gz(t={}){return[iI,rI.of(t),Ie.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?sI:e.inputType=="historyRedo"?C0:null;return r?(e.preventDefault(),r(n)):!1}})]}function Hd(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(iI,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const sI=Hd(0,!1),C0=Hd(1,!1),_z=Hd(0,!0),bz=Hd(1,!0);class Ln{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Ln(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ln(e.changes&&Gt.fromJSON(e.changes),[],e.mapped&&ai.fromJSON(e.mapped),e.startSelection&&he.fromJSON(e.startSelection),e.selectionsAfter.map(he.fromJSON))}static fromTransaction(e,n){let r=hr;for(let i of e.startState.facet(mz)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Ln(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,hr)}static selection(e){return new Ln(void 0,hr,void 0,void 0,e)}}function Lf(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function yz(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(r=!0)}}),r}function vz(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function oI(t,e){return t.length?e.length?t.concat(e):t:e}const hr=[],Ez=200;function aI(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Ez));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Lf(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Ln.selection([e])]}function Sz(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function fm(t,e){if(!t.length)return t;let n=t.length,r=hr;for(;n;){let i=wz(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Ln.selection(r)]:hr}function wz(t,e,n){let r=oI(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):hr,n);if(!t.changes)return Ln.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Ln(i,Ge.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const xz=/^(input\.type|delete)($|\.)/;class ei{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new ei(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||xz.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,yz(a.changes,e.changes))||r=="input.type.compose")?o=Lf(o,o.length-1,i.minDepth,new Ln(e.changes.compose(a.changes),oI(Ge.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,hr)):o=Lf(o,o.length,i.minDepth,e),new ei(o,hr,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:hr;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&vz(s[s.length-1],e)?this:new ei(aI(this.done,e),this.undone,n,r)}addMapping(e){return new ei(fm(this.done,e),fm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:x0.of({side:e,rest:Sz(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?hr:i.slice(0,i.length-1);return s.mapped&&(a=fm(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:x0.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ei.empty=new ei(hr,hr);const Cz=[{key:"Mod-z",run:sI,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:C0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:C0,preventDefault:!0},{key:"Mod-u",run:_z,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:bz,preventDefault:!0}];function Ra(t,e){return he.create(t.ranges.map(e),t.mainIndex)}function Rr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ir({state:t,dispatch:e},n){let r=Ra(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Rr(t,r)),!0)}function Ud(t,e){return he.cursor(e?t.to:t.from)}function lI(t,e){return Ir(t,n=>n.empty?t.moveByChar(n,e):Ud(n,e))}function vn(t){return t.textDirectionAt(t.state.selection.main.head)==St.LTR}const uI=t=>lI(t,!vn(t)),cI=t=>lI(t,vn(t));function hI(t,e){return Ir(t,n=>n.empty?t.moveByGroup(n,e):Ud(n,e))}const Tz=t=>hI(t,!vn(t)),Az=t=>hI(t,vn(t));function kz(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function jd(t,e,n){let r=cn(t).resolveInner(e.head),i=n?tt.closedBy:tt.openedBy;for(let l=e.head;;){let u=n?r.childAfter(l):r.childBefore(l);if(!u)break;kz(t,u,i)?r=u:l=n?u.to:u.from}let s=r.type.prop(i),o,a;return s&&(o=n?Zr(t,r.from,1):Zr(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,he.cursor(a,n?-1:1)}const Rz=t=>Ir(t,e=>jd(t.state,e,!vn(t))),Iz=t=>Ir(t,e=>jd(t.state,e,vn(t)));function fI(t,e){return Ir(t,n=>{if(!n.empty)return Ud(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const dI=t=>fI(t,!1),pI=t=>fI(t,!0);function mI(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Ie.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function gI(t,e){let n=mI(t),{state:r}=t,i=Ra(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):Ud(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Ie.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Rr(r,i),{effects:s}),!0}const qS=t=>gI(t,!1),T0=t=>gI(t,!0);function ms(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=he.cursor(r.from+s))}return i}const Dz=t=>Ir(t,e=>ms(t,e,!0)),Lz=t=>Ir(t,e=>ms(t,e,!1)),Pz=t=>Ir(t,e=>ms(t,e,!vn(t))),Oz=t=>Ir(t,e=>ms(t,e,vn(t))),Mz=t=>Ir(t,e=>he.cursor(t.lineBlockAt(e.head).from,1)),Nz=t=>Ir(t,e=>he.cursor(t.lineBlockAt(e.head).to,-1));function Bz(t,e,n){let r=!1,i=Ra(t.selection,s=>{let o=Zr(t,s.head,-1)||Zr(t,s.head,1)||s.head>0&&Zr(t,s.head-1,1)||s.head<t.doc.length&&Zr(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return he.cursor(a)});return r?(e(Rr(t,i)),!0):!1}const Fz=({state:t,dispatch:e})=>Bz(t,e);function mr(t,e){let n=Ra(t.state.selection,r=>{let i=e(r);return he.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Rr(t.state,n)),!0)}function _I(t,e){return mr(t,n=>t.moveByChar(n,e))}const bI=t=>_I(t,!vn(t)),yI=t=>_I(t,vn(t));function vI(t,e){return mr(t,n=>t.moveByGroup(n,e))}const Hz=t=>vI(t,!vn(t)),Uz=t=>vI(t,vn(t)),jz=t=>mr(t,e=>jd(t.state,e,!vn(t))),Vz=t=>mr(t,e=>jd(t.state,e,vn(t)));function EI(t,e){return mr(t,n=>t.moveVertically(n,e))}const SI=t=>EI(t,!1),wI=t=>EI(t,!0);function xI(t,e){return mr(t,n=>t.moveVertically(n,e,mI(t).height))}const GS=t=>xI(t,!1),KS=t=>xI(t,!0),$z=t=>mr(t,e=>ms(t,e,!0)),zz=t=>mr(t,e=>ms(t,e,!1)),Wz=t=>mr(t,e=>ms(t,e,!vn(t))),qz=t=>mr(t,e=>ms(t,e,vn(t))),Gz=t=>mr(t,e=>he.cursor(t.lineBlockAt(e.head).from)),Kz=t=>mr(t,e=>he.cursor(t.lineBlockAt(e.head).to)),YS=({state:t,dispatch:e})=>(e(Rr(t,{anchor:0})),!0),XS=({state:t,dispatch:e})=>(e(Rr(t,{anchor:t.doc.length})),!0),QS=({state:t,dispatch:e})=>(e(Rr(t,{anchor:t.selection.main.anchor,head:0})),!0),JS=({state:t,dispatch:e})=>(e(Rr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Yz=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Xz=({state:t,dispatch:e})=>{let n=Vd(t).map(({from:r,to:i})=>he.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:he.create(n),userEvent:"select"})),!0},Qz=({state:t,dispatch:e})=>{let n=Ra(t.selection,r=>{let i=cn(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return he.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(Rr(t,n)),!0)};function CI(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let o=n.doc.lineAt(s.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=s;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){i.some(u=>u.head==l.head)||i.push(l);break}else{if(l.head==a.head)break;a=l}}}return i.length==r.ranges.length?!1:(t.dispatch(Rr(n,he.create(i,i.length-1))),!0)}const Jz=t=>CI(t,!1),Zz=t=>CI(t,!0),eW=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=he.create([n.main]):n.main.empty||(r=he.create([he.cursor(n.main.head)])),r?(e(Rr(t,r)),!0):!1};function Ju(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Jc(t,l,!1)):l>o&&(n="delete.forward",l=Jc(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Jc(t,o,!1),a=Jc(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:he.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Ie.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Jc(t,e,n){if(t instanceof Ie)for(let r of t.state.facet(Ie.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const TI=(t,e,n)=>Ju(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let u=Rd(a,s.tabSize),c=u%Af(s)||Af(s);for(let h=0;h<c&&a[a.length-1-h]==" ";h++)i--;l=i}else l=Kt(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Kt(o.text,l-o.from,!1,!1)+o.from);return l}),A0=t=>TI(t,!1,!0),AI=t=>TI(t,!0,!1),kI=(t,e)=>Ju(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Kt(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=n.head)&&(a=c),r=l}return r}),RI=t=>kI(t,!1),tW=t=>kI(t,!0),nW=t=>Ju(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),rW=t=>Ju(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),iW=t=>Ju(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),sW=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ut.of(["",""])},range:he.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},oW=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Kt(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Kt(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:he.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Vd(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function II(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Vd(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(he.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(he.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:he.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const aW=({state:t,dispatch:e})=>II(t,e,!1),lW=({state:t,dispatch:e})=>II(t,e,!0);function DI(t,e,n){if(t.readOnly)return!1;let r=[];for(let s of Vd(t))n?r.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):r.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});let i=t.changes(r);return e(t.update({changes:i,selection:t.selection.map(i,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const uW=({state:t,dispatch:e})=>DI(t,e,!1),cW=({state:t,dispatch:e})=>DI(t,e,!0),hW=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Vd(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ra(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function fW(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=cn(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(tt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const ZS=LI(!1),dW=LI(!0);function LI(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&fW(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new Bd(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=Jb(u,s);for(c==null&&(c=Rd(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",au(e,c)];return l&&h.push(au(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ut.of(h)},range:he.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function hy(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:he.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const pW=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Bd(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=hy(t,(s,o,a)=>{let l=Jb(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],c=au(t,l);(u!=c||a.from<s.from+u.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},mW=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hy(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Aa)})}),{userEvent:"input.indent"})),!0),PI=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hy(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Rd(i,t.tabSize),o=0,a=au(t,Math.max(0,s-Af(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),gW=t=>(t.setTabFocusMode(),!0),_W=[{key:"Ctrl-b",run:uI,shift:bI,preventDefault:!0},{key:"Ctrl-f",run:cI,shift:yI},{key:"Ctrl-p",run:dI,shift:SI},{key:"Ctrl-n",run:pI,shift:wI},{key:"Ctrl-a",run:Mz,shift:Gz},{key:"Ctrl-e",run:Nz,shift:Kz},{key:"Ctrl-d",run:AI},{key:"Ctrl-h",run:A0},{key:"Ctrl-k",run:nW},{key:"Ctrl-Alt-h",run:RI},{key:"Ctrl-o",run:sW},{key:"Ctrl-t",run:oW},{key:"Ctrl-v",run:T0}],bW=[{key:"ArrowLeft",run:uI,shift:bI,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Tz,shift:Hz,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Pz,shift:Wz,preventDefault:!0},{key:"ArrowRight",run:cI,shift:yI,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Az,shift:Uz,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Oz,shift:qz,preventDefault:!0},{key:"ArrowUp",run:dI,shift:SI,preventDefault:!0},{mac:"Cmd-ArrowUp",run:YS,shift:QS},{mac:"Ctrl-ArrowUp",run:qS,shift:GS},{key:"ArrowDown",run:pI,shift:wI,preventDefault:!0},{mac:"Cmd-ArrowDown",run:XS,shift:JS},{mac:"Ctrl-ArrowDown",run:T0,shift:KS},{key:"PageUp",run:qS,shift:GS},{key:"PageDown",run:T0,shift:KS},{key:"Home",run:Lz,shift:zz,preventDefault:!0},{key:"Mod-Home",run:YS,shift:QS},{key:"End",run:Dz,shift:$z,preventDefault:!0},{key:"Mod-End",run:XS,shift:JS},{key:"Enter",run:ZS,shift:ZS},{key:"Mod-a",run:Yz},{key:"Backspace",run:A0,shift:A0,preventDefault:!0},{key:"Delete",run:AI,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:RI,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:tW,preventDefault:!0},{mac:"Mod-Backspace",run:rW,preventDefault:!0},{mac:"Mod-Delete",run:iW,preventDefault:!0}].concat(_W.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),yW=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Rz,shift:jz},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Iz,shift:Vz},{key:"Alt-ArrowUp",run:aW},{key:"Shift-Alt-ArrowUp",run:uW},{key:"Alt-ArrowDown",run:lW},{key:"Shift-Alt-ArrowDown",run:cW},{key:"Mod-Alt-ArrowUp",run:Jz},{key:"Mod-Alt-ArrowDown",run:Zz},{key:"Escape",run:eW},{key:"Mod-Enter",run:dW},{key:"Alt-l",mac:"Ctrl-l",run:Xz},{key:"Mod-i",run:Qz,preventDefault:!0},{key:"Mod-[",run:PI},{key:"Mod-]",run:mW},{key:"Mod-Alt-\\",run:pW},{key:"Shift-Mod-k",run:hW},{key:"Shift-Mod-\\",run:Fz},{key:"Mod-/",run:az},{key:"Alt-A",run:uz},{key:"Ctrl-m",mac:"Shift-Alt-m",run:gW}].concat(bW),ew=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class cu{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(ew(a)):ew,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return _r(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Pb(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=mi(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(cu.prototype[Symbol.iterator]=function(){return this});const OI={from:-1,to:-1,match:/.*/.exec("")},fy="gm"+(/x/.unicode==null?"":"u");class MI{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=OI,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new NI(e,n,r,i,s);this.re=new RegExp(n,fy+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Pf(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Pf(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const dm=new WeakMap;class Qo{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=dm.get(e);if(!i||i.from>=r||i.to<=n){let a=new Qo(n,e.sliceString(n,r));return dm.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),dm.set(e,new Qo(o,s)),new Qo(n,s.slice(n-o,r-o))}}class NI{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=OI,this.matchPos=Pf(e,i),this.re=new RegExp(n,fy+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Qo.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Pf(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Qo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(MI.prototype[Symbol.iterator]=NI.prototype[Symbol.iterator]=function(){return this});function vW(t){try{return new RegExp(t,fy),!0}catch{return!1}}function Pf(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}const EW=t=>{let{state:e}=t,n=String(e.doc.lineAt(t.state.selection.main.head).number),{close:r,result:i}=Hj(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:n},focus:!0,submitLabel:e.phrase("go")});return i.then(s=>{let o=s&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.elements.line.value);if(!o){t.dispatch({effects:r});return}let a=e.doc.lineAt(e.selection.main.head),[,l,u,c,h]=o,f=c?+c.slice(1):0,d=u?+u:a.number;if(u&&h){let p=d/100;l&&(p=p*(l=="-"?-1:1)+a.number/e.doc.lines),d=Math.round(e.doc.lines*p)}else u&&l&&(d=d*(l=="-"?-1:1)+a.number);let _=e.doc.line(Math.max(1,Math.min(e.doc.lines,d))),b=he.cursor(_.from+Math.max(0,Math.min(f,_.length)));t.dispatch({effects:[r,Ie.scrollIntoView(b.from,{y:"center"})],selection:b})}),!0},SW=({state:t,dispatch:e})=>{let{selection:n}=t,r=he.create(n.ranges.map(i=>t.wordAt(i.head)||he.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function wW(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new cu(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new cu(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const xW=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return SW({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=wW(t,r);return i?(e(t.update({selection:t.selection.addRange(he.range(i.from,i.to),!1),effects:Ie.scrollIntoView(i.to)})),!0):!1},Ia=Re.define({combine(t){return so(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new FW(e),scrollToMatch:e=>Ie.scrollIntoView(e)})}});class BI{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||vW(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new IW(this):new AW(this)}getCursor(e,n=0,r){let i=e.doc?e:ot.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?To(this,i,n,r):Co(this,i,n,r)}}class FI{constructor(e){this.spec=e}}function CW(t,e,n){return(r,i,s,o)=>{if(n&&!n(r,i,s,o))return!1;let a=r>=o&&i<=o+s.length?s.slice(r-o,i-o):e.doc.sliceString(r,i);return t(a,e,r,i)}}function Co(t,e,n,r){let i;return t.wholeWord&&(i=TW(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(i=CW(t.test,e,i)),new cu(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:s=>s.toLowerCase(),i)}function TW(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Of(i,n-s))!=Vt.Word||e(Mf(i,n-s))!=Vt.Word)&&(e(Mf(i,r-s))!=Vt.Word||e(Of(i,r-s))!=Vt.Word))}class AW extends FI{constructor(e){super(e)}nextMatch(e,n,r){let i=Co(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Co(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Co(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Co(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Co(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function kW(t,e,n){return(r,i,s)=>(!n||n(r,i,s))&&t(s[0],e,r,i)}function To(t,e,n,r){let i;return t.wholeWord&&(i=RW(e.charCategorizer(e.selection.main.head))),t.test&&(i=kW(t.test,e,i)),new MI(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:i},n,r)}function Of(t,e){return t.slice(Kt(t,e,!1),e)}function Mf(t,e){return t.slice(e,Kt(t,e))}function RW(t){return(e,n,r)=>!r[0].length||(t(Of(r.input,r.index))!=Vt.Word||t(Mf(r.input,r.index))!=Vt.Word)&&(t(Mf(r.input,r.index+r[0].length))!=Vt.Word||t(Of(r.input,r.index+r[0].length))!=Vt.Word)}class IW extends FI{nextMatch(e,n,r){let i=To(this.spec,e,r,e.doc.length).next();return i.done&&(i=To(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=To(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=To(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=To(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const hu=Ge.define(),dy=Ge.define(),Qi=nn.define({create(t){return new pm(k0(t).create(),null)},update(t,e){for(let n of e.effects)n.is(hu)?t=new pm(n.value.create(),t.panel):n.is(dy)&&(t=new pm(t.query,n.value?py:null));return t},provide:t=>wf.from(t,e=>e.panel)});class pm{constructor(e,n){this.query=e,this.panel=n}}const DW=st.mark({class:"cm-searchMatch"}),LW=st.mark({class:"cm-searchMatch cm-searchMatch-selected"}),PW=un.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Qi))}update(t){let e=t.state.field(Qi);(e!=t.startState.field(Qi)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return st.none;let{view:n}=this,r=new Xs;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?LW:DW)})}return r.finish()}},{decorations:t=>t.decorations});function Zu(t){return e=>{let n=e.state.field(Qi,!1);return n&&n.query.spec.valid?t(e,n):jI(e)}}const Nf=Zu((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=he.single(r.from,r.to),s=t.state.facet(Ia);return t.dispatch({selection:i,effects:[my(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),UI(t),!0}),Bf=Zu((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=he.single(i.from,i.to),o=t.state.facet(Ia);return t.dispatch({selection:s,effects:[my(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),UI(t),!0}),OW=Zu((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:he.create(n.map(r=>he.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),MW=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new cu(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(he.range(a.value.from,a.value.to))}return e(t.update({selection:he.create(s,o),userEvent:"select.search.matches"})),!0},tw=Zu((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,u,c=[];o.from==r&&o.to==i&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Ie.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(a);return o&&(l=he.single(o.from,o.to).map(h),c.push(my(t,o)),c.push(n.facet(Ia).scrollToMatch(l.main,t))),t.dispatch({changes:h,selection:l,effects:c,userEvent:"input.replace"}),!0}),NW=Zu((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Ie.announce.of(r),userEvent:"input.replace.all"}),!0});function py(t){return t.state.facet(Ia).createPanel(t)}function k0(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Ia);return new BI({search:((n=e?.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function HI(t){let e=CR(t,py);return e&&e.dom.querySelector("[main-field]")}function UI(t){let e=HI(t);e&&e==t.root.activeElement&&e.select()}const jI=t=>{let e=t.state.field(Qi,!1);if(e&&e.panel){let n=HI(t);if(n&&n!=t.root.activeElement){let r=k0(t.state,e.query.spec);r.valid&&t.dispatch({effects:hu.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[dy.of(!0),e?hu.of(k0(t.state,e.query.spec)):Ge.appendConfig.of(UW)]});return!0},VI=t=>{let e=t.state.field(Qi,!1);if(!e||!e.panel)return!1;let n=CR(t,py);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:dy.of(!1)}),!0},BW=[{key:"Mod-f",run:jI,scope:"editor search-panel"},{key:"F3",run:Nf,shift:Bf,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Nf,shift:Bf,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:VI,scope:"editor search-panel"},{key:"Mod-Shift-l",run:MW},{key:"Mod-Alt-g",run:EW},{key:"Mod-d",run:xW,preventDefault:!0}];class FW{constructor(e){this.view=e;let n=this.query=e.state.field(Qi).query.spec;this.commit=this.commit.bind(this),this.searchField=Qt("input",{value:n.search,placeholder:jn(e,"Find"),"aria-label":jn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Qt("input",{value:n.replace,placeholder:jn(e,"Replace"),"aria-label":jn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Qt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Qt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Qt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Qt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Qt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Nf(e),[jn(e,"next")]),r("prev",()=>Bf(e),[jn(e,"previous")]),r("select",()=>OW(e),[jn(e,"all")]),Qt("label",null,[this.caseField,jn(e,"match case")]),Qt("label",null,[this.reField,jn(e,"regexp")]),Qt("label",null,[this.wordField,jn(e,"by word")]),...e.state.readOnly?[]:[Qt("br"),this.replaceField,r("replace",()=>tw(e),[jn(e,"replace")]),r("replaceAll",()=>NW(e),[jn(e,"replace all")])],Qt("button",{name:"close",onclick:()=>VI(e),"aria-label":jn(e,"close"),type:"button"},[""])])}commit(){let e=new BI({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:hu.of(e)}))}keydown(e){bj(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Bf:Nf)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),tw(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(hu)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ia).top}}function jn(t,e){return t.state.phrase(e)}const Zc=30,eh=/[\s\.,:;?!]/;function my(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Zc),o=Math.min(i,n+Zc),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Zc;l++)if(!eh.test(a[l+1])&&eh.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Zc;l--)if(!eh.test(a[l-1])&&eh.test(a[l])){a=a.slice(0,l);break}}return Ie.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const HW=Ie.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),UW=[Qi,ps.low(PW),HW];function $I(t,e=100){if(e===0)return t;let n;return function(...r){const i=this;clearTimeout(n),n=window.setTimeout(()=>{t.apply(i,r)},e)}}function jW(){return L.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-tk-elements-app-backgroundColor text-tk-elements-app-textColor",children:"File format cannot be displayed."})}function Ff(){return Ff=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ff.apply(null,arguments)}var zI=t=>{var{theme:e,settings:n={},styles:r=[]}=t,i={".cm-gutters":{}},s={};n.background&&(s.backgroundColor=n.background),n.backgroundImage&&(s.backgroundImage=n.backgroundImage),n.foreground&&(s.color=n.foreground),n.fontSize&&(s.fontSize=n.fontSize),(n.background||n.foreground)&&(i["&"]=s),n.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(i[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(i[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(i[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(i[".cm-content"]={caretColor:n.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),i[".cm-activeLineGutter"]=o,n.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var a=Ie.theme(i,{dark:e==="dark"}),l=Fd.define(r),u=[a,XV(l)];return u},VW={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},$W=[{tag:[ne.keyword,ne.operatorKeyword,ne.modifier,ne.color,ne.constant(ne.name),ne.standard(ne.name),ne.standard(ne.tagName),ne.special(ne.brace),ne.atom,ne.bool,ne.special(ne.variableName)],color:"#0000ff"},{tag:[ne.moduleKeyword,ne.controlKeyword],color:"#af00db"},{tag:[ne.name,ne.deleted,ne.character,ne.macroName,ne.propertyName,ne.variableName,ne.labelName,ne.definition(ne.name)],color:"#0070c1"},{tag:ne.heading,fontWeight:"bold",color:"#0070c1"},{tag:[ne.typeName,ne.className,ne.tagName,ne.number,ne.changed,ne.annotation,ne.self,ne.namespace],color:"#267f99"},{tag:[ne.function(ne.variableName),ne.function(ne.propertyName)],color:"#795e26"},{tag:[ne.number],color:"#098658"},{tag:[ne.operator,ne.punctuation,ne.separator,ne.url,ne.escape,ne.regexp],color:"#383a42"},{tag:[ne.regexp],color:"#af00db"},{tag:[ne.special(ne.string),ne.processingInstruction,ne.string,ne.inserted],color:"#a31515"},{tag:[ne.angleBracket],color:"#383a42"},{tag:ne.strong,fontWeight:"bold"},{tag:ne.emphasis,fontStyle:"italic"},{tag:ne.strikethrough,textDecoration:"line-through"},{tag:[ne.meta,ne.comment],color:"#008000"},{tag:ne.link,color:"#4078f2",textDecoration:"underline"},{tag:ne.invalid,color:"#e45649"}];function zW(t){var{theme:e="light",settings:n={},styles:r=[]}={};return zI({theme:e,settings:Ff({},VW,n),styles:[...$W,...r]})}var WW=zW(),qW={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},GW=[{tag:[ne.keyword,ne.operatorKeyword,ne.modifier,ne.color,ne.constant(ne.name),ne.standard(ne.name),ne.standard(ne.tagName),ne.special(ne.brace),ne.atom,ne.bool,ne.special(ne.variableName)],color:"#569cd6"},{tag:[ne.controlKeyword,ne.moduleKeyword],color:"#c586c0"},{tag:[ne.name,ne.deleted,ne.character,ne.macroName,ne.propertyName,ne.variableName,ne.labelName,ne.definition(ne.name)],color:"#9cdcfe"},{tag:ne.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[ne.typeName,ne.className,ne.tagName,ne.number,ne.changed,ne.annotation,ne.self,ne.namespace],color:"#4ec9b0"},{tag:[ne.function(ne.variableName),ne.function(ne.propertyName)],color:"#dcdcaa"},{tag:[ne.number],color:"#b5cea8"},{tag:[ne.operator,ne.punctuation,ne.separator,ne.url,ne.escape,ne.regexp],color:"#d4d4d4"},{tag:[ne.regexp],color:"#d16969"},{tag:[ne.special(ne.string),ne.processingInstruction,ne.string,ne.inserted],color:"#ce9178"},{tag:[ne.angleBracket],color:"#808080"},{tag:ne.strong,fontWeight:"bold"},{tag:ne.emphasis,fontStyle:"italic"},{tag:ne.strikethrough,textDecoration:"line-through"},{tag:[ne.meta,ne.comment],color:"#6a9955"},{tag:ne.link,color:"#6a9955",textDecoration:"underline"},{tag:ne.invalid,color:"#ff0000"}];function KW(t){var{theme:e="dark",settings:n={},styles:r=[]}={};return zI({theme:e,settings:Ff({},qW,n),styles:[...GW,...r]})}var YW=KW();Ie.theme({},{dark:!0});const R0=new Ta;function XW(t,e={}){return[QW(e),t==="dark"?R0.of([GI()]):R0.of([qI()])]}function WI(t){return R0.reconfigure(t==="dark"?GI():qI())}function QW(t){return Ie.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor)",color:"var(--cm-textColor)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5","&:focus-visible":{outline:"none"}},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor)",borderRight:0,color:"var(--cm-gutter-textColor)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function qI(){return WW}function GI(){return YW}const JW={key:"Tab",run:ZW,shift:PI};function ZW({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(eq(t,(n,r,i)=>{i.push({from:n,to:r,insert:t.facet(Aa)})}),{userEvent:"input.indent"})),!0)}function eq(t,e){return t.changeByRange(n=>{const r=[],i=t.doc.lineAt(n.from);if(n.from===n.to)e(n.from,void 0,r,i);else if(n.from<n.to&&n.to<=i.to)e(n.from,n.to,r,i);else{let o=-1;for(let a=n.from;a<=n.to;){const l=t.doc.lineAt(a);l.number>o&&(n.empty||n.to>l.from)&&(e(l.from,void 0,r,l),o=l.number),a=l.to+1}}const s=t.changes(r);return{changes:r,range:he.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const tq="modulepreload",nq=function(t){return"/"+t},nw={},j=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(l=>{if(l=nq(l),l in nw)return;nw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":tq,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},rq=[dn.of({name:"TS",extensions:["ts"],async load(){return j(()=>import("./index-kFVzMmTw.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript({typescript:!0}))}}),dn.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return j(()=>import("./index-kFVzMmTw.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript())}}),dn.of({name:"TSX",extensions:["tsx"],async load(){return j(()=>import("./index-kFVzMmTw.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),dn.of({name:"JSX",extensions:["jsx"],async load(){return j(()=>import("./index-kFVzMmTw.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript({jsx:!0}))}}),dn.of({name:"HTML",extensions:["html"],async load(){return j(()=>import("./index-DvHkd5jU.js"),__vite__mapDeps([4,1,5,2,3,0])).then(t=>t.html())}}),dn.of({name:"CSS",extensions:["css"],async load(){return j(()=>import("./index-BkoNQ2qa.js"),__vite__mapDeps([5,1,2,3])).then(t=>t.css())}}),dn.of({name:"SASS",extensions:["sass"],async load(){return j(()=>import("./index-DbWhsDkn.js"),__vite__mapDeps([6,1,5,2,3])).then(t=>t.sass({indented:!0}))}}),dn.of({name:"SCSS",extensions:["scss"],async load(){return j(()=>import("./index-DbWhsDkn.js"),__vite__mapDeps([6,1,5,2,3])).then(t=>t.sass({indented:!1}))}}),dn.of({name:"JSON",extensions:["json"],async load(){return j(()=>import("./index-D_O1Fmz7.js"),__vite__mapDeps([7,1,2,3])).then(t=>t.json())}}),dn.of({name:"Markdown",extensions:["md"],async load(){return j(()=>import("./index-V57EQhqn.js"),__vite__mapDeps([8,4,1,5,2,3,0])).then(t=>t.markdown())}}),dn.of({name:"Wasm",extensions:["wat"],async load(){return j(()=>import("./index-DRlC8gDY.js"),__vite__mapDeps([9,1,2,3])).then(t=>t.wast())}}),dn.of({name:"Python",extensions:["py"],async load(){return j(()=>import("./index-DcFcEvWa.js"),__vite__mapDeps([10,1,2,3])).then(t=>t.python())}}),dn.of({name:"C++",extensions:["cpp"],async load(){return j(()=>import("./index-Dk0UaRgw.js"),__vite__mapDeps([11,1,2,3])).then(t=>t.cpp())}})];async function iq(t){const e=dn.matchFilename(rq,t);if(e)return await e.load()}const sq=Mn("CodeMirrorEditor"),KI=Ge.define(),oq=nn.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const n of e.effects)if(n.is(KI)&&n.value)return uq(e.state);return[]},provide:t=>Kb.computeN([t],e=>e.field(t))}),YI=Ge.define(),rw=nn.define({create(){return!0},update(t,e){for(const n of e.effects)if(n.is(YI))return n.value;return t}}),XI=R.memo(({id:t,doc:e,debounceScroll:n=100,debounceChange:r=150,autoFocusOnDocumentChange:i=!1,editable:s=!0,onScroll:o,onChange:a,onSave:l,theme:u,settings:c,className:h=""})=>{Ca.trace("CodeMirrorEditor");const[f]=R.useState(new Ta),d=R.useRef(null),_=R.useRef(),b=R.useRef(),p=R.useRef(),m=R.useRef(),g=R.useRef(o),y=R.useRef(a),v=R.useRef(l);return R.useEffect(()=>{g.current=o,y.current=a,v.current=l,p.current=e,b.current=u}),R.useEffect(()=>{const S=$I(C=>{y.current?.(C)},r),E=new Ie({parent:d.current,dispatchTransactions(C){const x=E.state.selection;E.update(C);const A=E.state.selection,D=A!==x&&(A===void 0||x===void 0||!A.eq(x));p.current&&(C.some(M=>M.docChanged)||D)&&(S({selection:E.state.selection,content:E.state.doc.toString()}),m.current.set(p.current.filePath,E.state))}});return _.current=E,()=>{_.current?.destroy(),_.current=void 0}},[]),R.useEffect(()=>{_.current&&_.current.dispatch({effects:[WI(u)]})},[u]),R.useEffect(()=>{m.current=new Map},[t]),R.useEffect(()=>{const S=m.current,E=_.current,C=b.current;if(!e){const A=iw("",C,c,g,n,v,[f.of([])]);E.setState(A),aq(E);return}if(e.isBinary)return;e.filePath===""&&sq.warn("File path should not be empty");let x=S.get(e.filePath);x||(x=iw(e.value,C,c,g,n,v,[f.of([])]),S.set(e.filePath,x)),E.setState(x),lq(E,C,s,f,i,e)},[e?.value,s,e?.filePath,i]),L.jsxs("div",{className:Xe("relative h-full",h),children:[e?.isBinary&&L.jsx(jW,{}),L.jsx("div",{className:"h-full overflow-hidden",ref:d})]})});XI.displayName="CodeMirrorEditor";function iw(t,e,n,r,i,s,o){return ot.create({doc:t,extensions:[Ie.domEventHandlers({scroll:$I((a,l)=>{a.target===l.scrollDOM&&r.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},i),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[KI.of(a.key!=="Escape")]}),!0):!1}),XW(e,n),gz(),Nd.of([...yW,...Cz,...BW,{key:"Tab",run:QR},{key:"Mod-s",preventDefault:!0,run:()=>(s.current?.(),!0)},JW]),Aa.of("	"),iz({closeOnBlur:!1}),Mj({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),K$(),Xj(),Ij(),Rj(),xj(),s$(),ot.tabSize.of(n?.tabSize??2),BV(),oq,rw,ot.readOnly.from(rw,a=>!a),Zj(),Dj(),GV({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function aq(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function lq(t,e,n,r,i,s){s.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:s.value}}),t.dispatch({effects:[YI.of(n&&!s.isBinary)]}),iq(s.filePath).then(o=>{o&&(t.dispatch({effects:[r.reconfigure([o]),WI(e)]}),requestAnimationFrame(()=>{const a=t.scrollDOM.scrollLeft,l=t.scrollDOM.scrollTop,u=s.scroll?.left??0,c=s.scroll?.top??0;i&&n&&(a!==u||l!==c?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(u,c)}))})}function uq(t){return t.readOnly?t.selection.ranges.filter(e=>e.empty).map(e=>({pos:e.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const n=document.createElement("div");return n.className="cm-readonly-tooltip",n.textContent="Cannot edit file while AI response is being generated",{dom:n}}})):[]}const I0=R.memo(({className:t,disabledClassName:e,disabled:n=!1,children:r,onClick:i})=>L.jsx("button",{className:Xe("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Xe("opacity-30",e)]:n},t),disabled:n,onClick:s=>{n||i?.(s)},children:r})),cq=R.memo,hq=cq(({selected:t,options:e,setSelected:n})=>{const r=t===e.left.value;return L.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor overflow-hidden rounded-md p-1",children:[L.jsx(sw,{selected:r,setSelected:()=>n?.(e.left.value),children:e.left.text}),L.jsx(sw,{selected:!r,setSelected:()=>n?.(e.right.value),children:e.right.text})]})}),sw=R.memo(({selected:t,children:e,setSelected:n})=>L.jsxs("button",{onClick:n,className:Xe("bg-transparent text-sm px-3 py-1.5 rounded-md relative transition-colors",t?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive"),children:[L.jsx("span",{className:"relative z-10 font-medium",children:e}),t&&L.jsx(xr.span,{layoutId:"pill-tab",transition:{duration:.2,ease:ui},className:"absolute inset-0 z-0 bg-bolt-elements-item-backgroundAccent rounded-md"})]})),$d=R.createContext(null);$d.displayName="PanelGroupContext";const Dt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},gy=10,Ws=R.useLayoutEffect,ow=O_.useId,fq=typeof ow=="function"?ow:()=>null;let dq=0;function _y(t=null){const e=fq(),n=R.useRef(t||e||null);return n.current===null&&(n.current=""+dq++),t??n.current}function QI({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:u,onExpand:c,onResize:h,order:f,style:d,tagName:_="div",...b}){const p=R.useContext($d);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:g,getPanelSize:y,getPanelStyle:v,groupId:S,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:x,resizePanel:A,unregisterPanel:D}=p,M=_y(o),H=R.useRef({callbacks:{onCollapse:u,onExpand:c,onResize:h},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:M,idIsFromProps:o!==void 0,order:f});R.useRef({didLogMissingDefaultSizeWarning:!1}),Ws(()=>{const{callbacks:$,constraints:G}=H.current,Z={...G};H.current.id=M,H.current.idIsFromProps=o!==void 0,H.current.order=f,$.onCollapse=u,$.onExpand=c,$.onResize=h,G.collapsedSize=n,G.collapsible=r,G.defaultSize=i,G.maxSize=a,G.minSize=l,(Z.collapsedSize!==G.collapsedSize||Z.collapsible!==G.collapsible||Z.maxSize!==G.maxSize||Z.minSize!==G.minSize)&&C(H.current,Z)}),Ws(()=>{const $=H.current;return x($),()=>{D($)}},[f,M,x,D]),R.useImperativeHandle(s,()=>({collapse:()=>{m(H.current)},expand:$=>{g(H.current,$)},getId(){return M},getSize(){return y(H.current)},isCollapsed(){return E(H.current)},isExpanded(){return!E(H.current)},resize:$=>{A(H.current,$)}}),[m,g,y,E,M,A]);const B=v(H.current,i);return R.createElement(_,{...b,children:t,className:e,id:M,style:{...B,...d},[Dt.groupId]:S,[Dt.panel]:"",[Dt.panelCollapsible]:r||void 0,[Dt.panelId]:M,[Dt.panelSize]:parseFloat(""+B.flexGrow).toFixed(1)})}const gl=R.forwardRef((t,e)=>R.createElement(QI,{...t,forwardedRef:e}));QI.displayName="Panel";gl.displayName="forwardRef(Panel)";let D0=null,Fh=-1,qi=null;function pq(t,e){if(e){const n=(e&nD)!==0,r=(e&rD)!==0,i=(e&iD)!==0,s=(e&sD)!==0;if(n)return i?"se-resize":s?"ne-resize":"e-resize";if(r)return i?"sw-resize":s?"nw-resize":"w-resize";if(i)return"s-resize";if(s)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function mq(){qi!==null&&(document.head.removeChild(qi),D0=null,qi=null,Fh=-1)}function mm(t,e){var n,r;const i=pq(t,e);if(D0!==i){if(D0=i,qi===null&&(qi=document.createElement("style"),document.head.appendChild(qi)),Fh>=0){var s;(s=qi.sheet)===null||s===void 0||s.removeRule(Fh)}Fh=(n=(r=qi.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${i} !important;}`))!==null&&n!==void 0?n:-1}}function JI(t){return t.type==="keydown"}function ZI(t){return t.type.startsWith("pointer")}function eD(t){return t.type.startsWith("mouse")}function zd(t){if(ZI(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(eD(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function gq(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function _q(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function bq(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:uw(t),b:uw(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;qe(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:lw(aw(n.a)),b:lw(aw(n.b))};if(i.a===i.b){const s=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(i.a-i.b)}const yq=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function vq(t){var e;const n=getComputedStyle((e=tD(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function Eq(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||vq(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||yq.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function aw(t){let e=t.length;for(;e--;){const n=t[e];if(qe(n,"Missing node"),Eq(n))return n}return null}function lw(t){return t&&Number(getComputedStyle(t).zIndex)||0}function uw(t){const e=[];for(;t;)e.push(t),t=tD(t);return e}function tD(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const nD=1,rD=2,iD=4,sD=8,Sq=gq()==="coarse";let wr=[],Jo=!1,Rs=new Map,Wd=new Map;const fu=new Set;function wq(t,e,n,r,i){var s;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},l=(s=Rs.get(o))!==null&&s!==void 0?s:0;return Rs.set(o,l+1),fu.add(a),Hf(),function(){var c;Wd.delete(t),fu.delete(a);const h=(c=Rs.get(o))!==null&&c!==void 0?c:1;if(Rs.set(o,h-1),Hf(),h===1&&Rs.delete(o),wr.includes(a)){const f=wr.indexOf(a);f>=0&&wr.splice(f,1),yy(),i("up",!0,null)}}}function xq(t){const{target:e}=t,{x:n,y:r}=zd(t);Jo=!0,by({target:e,x:n,y:r}),Hf(),wr.length>0&&(Uf("down",t),t.preventDefault(),oD(e)||t.stopImmediatePropagation())}function gm(t){const{x:e,y:n}=zd(t);if(Jo&&t.buttons===0&&(Jo=!1,Uf("up",t)),!Jo){const{target:r}=t;by({target:r,x:e,y:n})}Uf("move",t),yy(),wr.length>0&&t.preventDefault()}function _m(t){const{target:e}=t,{x:n,y:r}=zd(t);Wd.clear(),Jo=!1,wr.length>0&&(t.preventDefault(),oD(e)||t.stopImmediatePropagation()),Uf("up",t),by({target:e,x:n,y:r}),yy(),Hf()}function oD(t){let e=t;for(;e;){if(e.hasAttribute(Dt.resizeHandle))return!0;e=e.parentElement}return!1}function by({target:t,x:e,y:n}){wr.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),fu.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:l,left:u,right:c,top:h}=a,f=Sq?o.coarse:o.fine;if(e>=u-f&&e<=c+f&&n>=h-f&&n<=l+f){if(r!==null&&document.contains(r)&&s!==r&&!s.contains(r)&&!r.contains(s)&&bq(r,s)>0){let _=r,b=!1;for(;_&&!_.contains(s);){if(_q(_.getBoundingClientRect(),a)){b=!0;break}_=_.parentElement}if(b)return}wr.push(i)}})}function bm(t,e){Wd.set(t,e)}function yy(){let t=!1,e=!1;wr.forEach(r=>{const{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;Wd.forEach(r=>{n|=r}),t&&e?mm("intersection",n):t?mm("horizontal",n):e?mm("vertical",n):mq()}let ym=new AbortController;function Hf(){ym.abort(),ym=new AbortController;const t={capture:!0,signal:ym.signal};fu.size&&(Jo?(wr.length>0&&Rs.forEach((e,n)=>{const{body:r}=n;e>0&&(r.addEventListener("contextmenu",_m,t),r.addEventListener("pointerleave",gm,t),r.addEventListener("pointermove",gm,t))}),window.addEventListener("pointerup",_m,t),window.addEventListener("pointercancel",_m,t)):Rs.forEach((e,n)=>{const{body:r}=n;e>0&&(r.addEventListener("pointerdown",xq,t),r.addEventListener("pointermove",gm,t))}))}function Uf(t,e){fu.forEach(n=>{const{setResizeHandlerState:r}=n,i=wr.includes(n);r(t,i,e)})}function Cq(){const[t,e]=R.useState(0);return R.useCallback(()=>e(n=>n+1),[])}function qe(t,e){if(!t)throw console.error(e),Error(e)}function eo(t,e,n=gy){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function _i(t,e,n=gy){return eo(t,e,n)===0}function Kn(t,e,n){return eo(t,e,n)===0}function Tq(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!Kn(i,s,n))return!1}return!0}function Fo({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];qe(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(eo(n,a)<0)if(s){const l=(i+a)/2;eo(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(gy)),n}function _l({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(Kn(t,0))return e;const o=[...e],[a,l]=r;qe(a!=null,"Invalid first pivot index"),qe(l!=null,"Invalid second pivot index");let u=0;if(s==="keyboard"){{const h=t<0?l:a,f=n[h];qe(f,`Panel constraints not found for index ${h}`);const{collapsedSize:d=0,collapsible:_,minSize:b=0}=f;if(_){const p=e[h];if(qe(p!=null,`Previous layout not found for panel index ${h}`),Kn(p,d)){const m=b-p;eo(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}{const h=t<0?a:l,f=n[h];qe(f,`No panel constraints found for index ${h}`);const{collapsedSize:d=0,collapsible:_,minSize:b=0}=f;if(_){const p=e[h];if(qe(p!=null,`Previous layout not found for panel index ${h}`),Kn(p,b)){const m=p-d;eo(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}}{const h=t<0?1:-1;let f=t<0?l:a,d=0;for(;;){const b=e[f];qe(b!=null,`Previous layout not found for panel index ${f}`);const m=Fo({panelConstraints:n,panelIndex:f,size:100})-b;if(d+=m,f+=h,f<0||f>=n.length)break}const _=Math.min(Math.abs(t),Math.abs(d));t=t<0?0-_:_}{let f=t<0?a:l;for(;f>=0&&f<n.length;){const d=Math.abs(t)-Math.abs(u),_=e[f];qe(_!=null,`Previous layout not found for panel index ${f}`);const b=_-d,p=Fo({panelConstraints:n,panelIndex:f,size:b});if(!Kn(_,p)&&(u+=_-p,o[f]=p,u.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?f--:f++}}if(Tq(i,o))return i;{const h=t<0?l:a,f=e[h];qe(f!=null,`Previous layout not found for panel index ${h}`);const d=f+u,_=Fo({panelConstraints:n,panelIndex:h,size:d});if(o[h]=_,!Kn(_,d)){let b=d-_,m=t<0?l:a;for(;m>=0&&m<n.length;){const g=o[m];qe(g!=null,`Previous layout not found for panel index ${m}`);const y=g+b,v=Fo({panelConstraints:n,panelIndex:m,size:y});if(Kn(g,v)||(b-=v-g,o[m]=v),Kn(b,0))break;t>0?m--:m++}}}const c=o.reduce((h,f)=>f+h,0);return Kn(c,100)?o:i}function Aq({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];qe(a!=null,"No pivot index found"),e.forEach((h,f)=>{const{constraints:d}=h,{maxSize:_=100,minSize:b=0}=d;f===a?(r=b,i=_):(s+=b,o+=_)});const l=Math.min(i,100-s),u=Math.max(r,100-o),c=t[a];return{valueMax:l,valueMin:u,valueNow:c}}function du(t,e=document){return Array.from(e.querySelectorAll(`[${Dt.resizeHandleId}][data-panel-group-id="${t}"]`))}function aD(t,e,n=document){const i=du(t,n).findIndex(s=>s.getAttribute(Dt.resizeHandleId)===e);return i??null}function lD(t,e,n){const r=aD(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function uD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function qd(t,e=document){const n=e.querySelector(`[${Dt.resizeHandleId}="${t}"]`);return n||null}function kq(t,e,n,r=document){var i,s,o,a;const l=qd(e,r),u=du(t,r),c=l?u.indexOf(l):-1,h=(i=(s=n[c])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=n[c+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[h,f]}function Rq({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){R.useRef({didWarnAboutMissingResizeHandle:!1}),Ws(()=>{if(!s)return;const a=du(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:u,valueMin:c,valueNow:h}=Aq({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const d=i[l];qe(d,`No panel data found for index "${l}"`),f.setAttribute("aria-controls",d.id),f.setAttribute("aria-valuemax",""+Math.round(u)),f.setAttribute("aria-valuemin",""+Math.round(c)),f.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),R.useEffect(()=>{if(!s)return;const a=e.current;qe(a,"Eager values not found");const{panelDataArray:l}=a,u=uD(n,s);qe(u!=null,`No group found for id "${n}"`);const c=du(n,s);qe(c,`No resize handles found for group id "${n}"`);const h=c.map(f=>{const d=f.getAttribute(Dt.resizeHandleId);qe(d,"Resize handle element has no handle id attribute");const[_,b]=kq(n,d,l,s);if(_==null||b==null)return()=>{};const p=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const g=l.findIndex(y=>y.id===_);if(g>=0){const y=l[g];qe(y,`No panel data found for index ${g}`);const v=r[g],{collapsedSize:S=0,collapsible:E,minSize:C=0}=y.constraints;if(v!=null&&E){const x=_l({delta:Kn(v,S)?C-S:S-v,initialLayout:r,panelConstraints:l.map(A=>A.constraints),pivotIndices:lD(n,d,s),prevLayout:r,trigger:"keyboard"});r!==x&&o(x)}}break}}};return f.addEventListener("keydown",p),()=>{f.removeEventListener("keydown",p)}});return()=>{h.forEach(f=>f())}},[s,t,e,n,r,i,o])}function cw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function cD(t,e){const n=t==="horizontal",{x:r,y:i}=zd(e);return n?r:i}function Iq(t,e,n,r,i){const s=n==="horizontal",o=qd(e,i);qe(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute(Dt.groupId);qe(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const u=cD(n,t),c=uD(a,i);qe(c,`No group element found for id "${a}"`);const h=c.getBoundingClientRect(),f=s?h.width:h.height;return(u-l)/f*100}function Dq(t,e,n,r,i,s){if(JI(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:Iq(t,e,n,r,s)}function Lq({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];qe(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];qe(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,u=i/l;r++,e[s]=u,i-=u}return e}function wo(t,e,n){e.forEach((r,i)=>{const s=t[i];qe(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:u=0,collapsible:c}=a,h=n[l];if(h==null||r!==h){n[l]=r;const{onCollapse:f,onExpand:d,onResize:_}=o;_&&_(r,h),c&&(f||d)&&(d&&(h==null||_i(h,u))&&!_i(r,u)&&d(),f&&(h==null||!_i(h,u))&&_i(r,u)&&f())}})}function th(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function Pq({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t!=null?t.toPrecision(s):"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Oq(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function hw(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function hD(t){return`react-resizable-panels:${t}`}function fD(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function dD(t,e){try{const n=hD(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Mq(t,e,n){var r,i;const s=(r=dD(t,n))!==null&&r!==void 0?r:{},o=fD(e);return(i=s[o])!==null&&i!==void 0?i:null}function Nq(t,e,n,r,i){var s;const o=hD(t),a=fD(e),l=(s=dD(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(u){console.error(u)}}function fw({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Kn(r,100)&&n.length>0)for(let s=0;s<e.length;s++){const o=n[s];qe(o!=null,`No layout data found for index ${s}`);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];qe(o!=null,`No layout data found for index ${s}`);const a=Fo({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Kn(i,0))for(let s=0;s<e.length;s++){const o=n[s];qe(o!=null,`No layout data found for index ${s}`);const a=o+i,l=Fo({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Kn(i,0)))break}return n}const Bq=100,bl={getItem:t=>(hw(bl),bl.getItem(t)),setItem:(t,e)=>{hw(bl),bl.setItem(t,e)}},dw={};function pD({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=bl,style:u,tagName:c="div",...h}){const f=_y(s),d=R.useRef(null),[_,b]=R.useState(null),[p,m]=R.useState([]),g=Cq(),y=R.useRef({}),v=R.useRef(new Map),S=R.useRef(0),E=R.useRef({autoSaveId:t,direction:r,dragState:_,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),C=R.useRef({layout:p,panelDataArray:[],panelDataArrayChanged:!1});R.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),R.useImperativeHandle(i,()=>({getId:()=>E.current.id,getLayout:()=>{const{layout:O}=C.current;return O},setLayout:O=>{const{onLayout:J}=E.current,{layout:re,panelDataArray:oe}=C.current,q=fw({layout:O,panelConstraints:oe.map(F=>F.constraints)});cw(re,q)||(m(q),C.current.layout=q,J&&J(q),wo(oe,q,y.current))}}),[]),Ws(()=>{E.current.autoSaveId=t,E.current.direction=r,E.current.dragState=_,E.current.id=f,E.current.onLayout=o,E.current.storage=l}),Rq({committedValuesRef:E,eagerValuesRef:C,groupId:f,layout:p,panelDataArray:C.current.panelDataArray,setLayout:m,panelGroupElement:d.current}),R.useEffect(()=>{const{panelDataArray:O}=C.current;if(t){if(p.length===0||p.length!==O.length)return;let J=dw[t];J==null&&(J=Oq(Nq,Bq),dw[t]=J);const re=[...O],oe=new Map(v.current);J(t,re,oe,p,l)}},[t,p,l]),R.useEffect(()=>{});const x=R.useCallback(O=>{const{onLayout:J}=E.current,{layout:re,panelDataArray:oe}=C.current;if(O.constraints.collapsible){const q=oe.map(fe=>fe.constraints),{collapsedSize:F=0,panelSize:ie,pivotIndices:ue}=ys(oe,O,re);if(qe(ie!=null,`Panel size not found for panel "${O.id}"`),!_i(ie,F)){v.current.set(O.id,ie);const me=Ao(oe,O)===oe.length-1?ie-F:F-ie,Te=_l({delta:me,initialLayout:re,panelConstraints:q,pivotIndices:ue,prevLayout:re,trigger:"imperative-api"});th(re,Te)||(m(Te),C.current.layout=Te,J&&J(Te),wo(oe,Te,y.current))}}},[]),A=R.useCallback((O,J)=>{const{onLayout:re}=E.current,{layout:oe,panelDataArray:q}=C.current;if(O.constraints.collapsible){const F=q.map(Fe=>Fe.constraints),{collapsedSize:ie=0,panelSize:ue=0,minSize:fe=0,pivotIndices:me}=ys(q,O,oe),Te=J??fe;if(_i(ue,ie)){const Fe=v.current.get(O.id),Je=Fe!=null&&Fe>=Te?Fe:Te,de=Ao(q,O)===q.length-1?ue-Je:Je-ue,ke=_l({delta:de,initialLayout:oe,panelConstraints:F,pivotIndices:me,prevLayout:oe,trigger:"imperative-api"});th(oe,ke)||(m(ke),C.current.layout=ke,re&&re(ke),wo(q,ke,y.current))}}},[]),D=R.useCallback(O=>{const{layout:J,panelDataArray:re}=C.current,{panelSize:oe}=ys(re,O,J);return qe(oe!=null,`Panel size not found for panel "${O.id}"`),oe},[]),M=R.useCallback((O,J)=>{const{panelDataArray:re}=C.current,oe=Ao(re,O);return Pq({defaultSize:J,dragState:_,layout:p,panelData:re,panelIndex:oe})},[_,p]),H=R.useCallback(O=>{const{layout:J,panelDataArray:re}=C.current,{collapsedSize:oe=0,collapsible:q,panelSize:F}=ys(re,O,J);return qe(F!=null,`Panel size not found for panel "${O.id}"`),q===!0&&_i(F,oe)},[]),B=R.useCallback(O=>{const{layout:J,panelDataArray:re}=C.current,{collapsedSize:oe=0,collapsible:q,panelSize:F}=ys(re,O,J);return qe(F!=null,`Panel size not found for panel "${O.id}"`),!q||eo(F,oe)>0},[]),$=R.useCallback(O=>{const{panelDataArray:J}=C.current;J.push(O),J.sort((re,oe)=>{const q=re.order,F=oe.order;return q==null&&F==null?0:q==null?-1:F==null?1:q-F}),C.current.panelDataArrayChanged=!0,g()},[g]);Ws(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;const{autoSaveId:O,onLayout:J,storage:re}=E.current,{layout:oe,panelDataArray:q}=C.current;let F=null;if(O){const ue=Mq(O,q,re);ue&&(v.current=new Map(Object.entries(ue.expandToSizes)),F=ue.layout)}F==null&&(F=Lq({panelDataArray:q}));const ie=fw({layout:F,panelConstraints:q.map(ue=>ue.constraints)});cw(oe,ie)||(m(ie),C.current.layout=ie,J&&J(ie),wo(q,ie,y.current))}}),Ws(()=>{const O=C.current;return()=>{O.layout=[]}},[]);const G=R.useCallback(O=>{let J=!1;const re=d.current;return re&&window.getComputedStyle(re,null).getPropertyValue("direction")==="rtl"&&(J=!0),function(q){q.preventDefault();const F=d.current;if(!F)return()=>null;const{direction:ie,dragState:ue,id:fe,keyboardResizeBy:me,onLayout:Te}=E.current,{layout:Fe,panelDataArray:Je}=C.current,{initialLayout:we}=ue??{},de=lD(fe,O,F);let ke=Dq(q,O,ie,ue,me,F);const Pe=ie==="horizontal";Pe&&J&&(ke=-ke);const Oe=Je.map(Ne=>Ne.constraints),Ke=_l({delta:ke,initialLayout:we??Fe,panelConstraints:Oe,pivotIndices:de,prevLayout:Fe,trigger:JI(q)?"keyboard":"mouse-or-touch"}),Ue=!th(Fe,Ke);(ZI(q)||eD(q))&&S.current!=ke&&(S.current=ke,!Ue&&ke!==0?Pe?bm(O,ke<0?nD:rD):bm(O,ke<0?iD:sD):bm(O,0)),Ue&&(m(Ke),C.current.layout=Ke,Te&&Te(Ke),wo(Je,Ke,y.current))}},[]),Z=R.useCallback((O,J)=>{const{onLayout:re}=E.current,{layout:oe,panelDataArray:q}=C.current,F=q.map(Fe=>Fe.constraints),{panelSize:ie,pivotIndices:ue}=ys(q,O,oe);qe(ie!=null,`Panel size not found for panel "${O.id}"`);const me=Ao(q,O)===q.length-1?ie-J:J-ie,Te=_l({delta:me,initialLayout:oe,panelConstraints:F,pivotIndices:ue,prevLayout:oe,trigger:"imperative-api"});th(oe,Te)||(m(Te),C.current.layout=Te,re&&re(Te),wo(q,Te,y.current))},[]),ee=R.useCallback((O,J)=>{const{layout:re,panelDataArray:oe}=C.current,{collapsedSize:q=0,collapsible:F}=J,{collapsedSize:ie=0,collapsible:ue,maxSize:fe=100,minSize:me=0}=O.constraints,{panelSize:Te}=ys(oe,O,re);Te!=null&&(F&&ue&&_i(Te,q)?_i(q,ie)||Z(O,ie):Te<me?Z(O,me):Te>fe&&Z(O,fe))},[Z]),X=R.useCallback((O,J)=>{const{direction:re}=E.current,{layout:oe}=C.current;if(!d.current)return;const q=qd(O,d.current);qe(q,`Drag handle element not found for id "${O}"`);const F=cD(re,J);b({dragHandleId:O,dragHandleRect:q.getBoundingClientRect(),initialCursorPosition:F,initialLayout:oe})},[]),P=R.useCallback(()=>{b(null)},[]),I=R.useCallback(O=>{const{panelDataArray:J}=C.current,re=Ao(J,O);re>=0&&(J.splice(re,1),delete y.current[O.id],C.current.panelDataArrayChanged=!0,g())},[g]),z=R.useMemo(()=>({collapsePanel:x,direction:r,dragState:_,expandPanel:A,getPanelSize:D,getPanelStyle:M,groupId:f,isPanelCollapsed:H,isPanelExpanded:B,reevaluatePanelConstraints:ee,registerPanel:$,registerResizeHandle:G,resizePanel:Z,startDragging:X,stopDragging:P,unregisterPanel:I,panelGroupElement:d.current}),[x,_,r,A,D,M,f,H,B,ee,$,G,Z,X,P,I]),K={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return R.createElement($d.Provider,{value:z},R.createElement(c,{...h,children:e,className:n,id:s,ref:d,style:{...K,...u},[Dt.group]:"",[Dt.groupDirection]:r,[Dt.groupId]:f}))}const L0=R.forwardRef((t,e)=>R.createElement(pD,{...t,forwardedRef:e}));pD.displayName="PanelGroup";L0.displayName="forwardRef(PanelGroup)";function Ao(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ys(t,e,n){const r=Ao(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function Fq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){R.useEffect(()=>{if(t||n==null||r==null)return;const i=qd(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute(Dt.groupId);qe(a,`No group element found for id "${a}"`);const l=du(a,r),u=aD(a,e,r);qe(u!==null,`No resize element found for id "${e}"`);const c=o.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[c].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function P0({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:s,onClick:o,onDragging:a,onFocus:l,onPointerDown:u,onPointerUp:c,style:h={},tabIndex:f=0,tagName:d="div",..._}){var b,p;const m=R.useRef(null),g=R.useRef({onClick:o,onDragging:a,onPointerDown:u,onPointerUp:c});R.useEffect(()=>{g.current.onClick=o,g.current.onDragging=a,g.current.onPointerDown=u,g.current.onPointerUp=c});const y=R.useContext($d);if(y===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:v,groupId:S,registerResizeHandle:E,startDragging:C,stopDragging:x,panelGroupElement:A}=y,D=_y(i),[M,H]=R.useState("inactive"),[B,$]=R.useState(!1),[G,Z]=R.useState(null),ee=R.useRef({state:M});Ws(()=>{ee.current.state=M}),R.useEffect(()=>{if(n)Z(null);else{const z=E(D);Z(()=>z)}},[n,D,E]);const X=(b=r?.coarse)!==null&&b!==void 0?b:15,P=(p=r?.fine)!==null&&p!==void 0?p:5;R.useEffect(()=>{if(n||G==null)return;const z=m.current;qe(z,"Element ref not attached");let K=!1;return wq(D,z,v,{coarse:X,fine:P},(J,re,oe)=>{if(!re){H("inactive");return}switch(J){case"down":{H("drag"),K=!1,qe(oe,'Expected event to be defined for "down" action'),C(D,oe);const{onDragging:q,onPointerDown:F}=g.current;q?.(!0),F?.();break}case"move":{const{state:q}=ee.current;K=!0,q!=="drag"&&H("hover"),qe(oe,'Expected event to be defined for "move" action'),G(oe);break}case"up":{H("hover"),x();const{onClick:q,onDragging:F,onPointerUp:ie}=g.current;F?.(!1),ie?.(),K||q?.();break}}})},[X,v,n,P,E,D,G,C,x]),Fq({disabled:n,handleId:D,resizeHandler:G,panelGroupElement:A});const I={touchAction:"none",userSelect:"none"};return R.createElement(d,{..._,children:t,className:e,id:i,onBlur:()=>{$(!1),s?.()},onFocus:()=>{$(!0),l?.()},ref:m,role:"separator",style:{...I,...h},tabIndex:f,[Dt.groupDirection]:v,[Dt.groupId]:S,[Dt.resizeHandle]:"",[Dt.resizeHandleActive]:M==="drag"?"pointer":B?"keyboard":void 0,[Dt.resizeHandleEnabled]:!n,[Dt.resizeHandleId]:D,[Dt.resizeHandleState]:M})}P0.displayName="PanelResizeHandle";const pw=R.memo(({className:t,children:e})=>L.jsx("div",{className:Xe("flex items-center gap-2 bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),children:e})),nh="<boltArtifact",mw="</boltArtifact>",Hq="<boltAction",gw="</boltAction>",rh=Mn("MessageParser");class Uq{constructor(e={}){this._options=e}#e=new Map;parse(e,n){let r=this.#e.get(e);r||(r={position:0,insideAction:!1,insideArtifact:!1,currentAction:{content:""},actionId:0},this.#e.set(e,r));let i="",s=r.position,o=!1;for(;s<n.length;){if(r.insideArtifact){const a=r.currentArtifact;if(a===void 0&&$s("Artifact not initialized"),r.insideAction){const l=n.indexOf(gw,s),u=r.currentAction;if(l!==-1){u.content+=n.slice(s,l);let c=u.content.trim();"type"in u&&u.type==="file"&&(c+=`
`),u.content=c,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:u}),r.insideAction=!1,r.currentAction={content:""},s=l+gw.length}else break}else{const l=n.indexOf(Hq,s),u=n.indexOf(mw,s);if(l!==-1&&(u===-1||l<u)){const c=n.indexOf(">",l);if(c!==-1)r.insideAction=!0,r.currentAction=this.#t(n,l,c),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(r.actionId++),action:r.currentAction}),s=c+1;else break}else if(u!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,...a}),r.insideArtifact=!1,r.currentArtifact=void 0,s=u+mw.length;else break}}else if(n[s]==="<"&&n[s+1]!=="/"){let a=s,l="";for(;a<n.length&&l.length<nh.length;){if(l+=n[a],l===nh){const u=n[a+1];if(u&&u!==">"&&u!==" "){i+=n.slice(s,a+1),s=a+1;break}const c=n.indexOf(">",a);if(c!==-1){const h=n.slice(s,c+1),f=this.#n(h,"title"),d=this.#n(h,"id");f||rh.warn("Artifact title missing"),d||rh.warn("Artifact id missing"),r.insideArtifact=!0;const _={id:d,title:f};r.currentArtifact=_,this._options.callbacks?.onArtifactOpen?.({messageId:e,..._});const b=this._options.artifactElement??jq;i+=b({messageId:e}),s=c+1}else o=!0;break}else if(!nh.startsWith(l)){i+=n.slice(s,a+1),s=a+1;break}a++}if(a===n.length&&nh.startsWith(l))break}else i+=n[s],s++;if(o)break}return r.position=s,i}reset(){this.#e.clear()}#t(e,n,r){const i=e.slice(n,r+1),s=this.#n(i,"type"),o={type:s,content:""};if(s==="file"){const a=this.#n(i,"filePath");a||rh.debug("File path not specified"),o.filePath=a}else s!=="shell"&&rh.warn(`Unknown action type '${s}'`);return o}#n(e,n){const r=e.match(new RegExp(`${n}="([^"]*)"`,"i"));return r?r[1]:void 0}}const jq=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([n,r])=>`data-${Vq(n)}=${JSON.stringify(r)}`)].join(" ")}></div>`;function Vq(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const ih=Mn("useMessageParser"),$q=new Uq({callbacks:{onArtifactOpen:t=>{ih.trace("onArtifactOpen",t),He.showWorkbench.set(!0),He.addArtifact(t)},onArtifactClose:t=>{ih.trace("onArtifactClose"),He.updateArtifact(t,{closed:!0})},onActionOpen:t=>{ih.trace("onActionOpen",t.action),t.action.type!=="shell"&&He.addAction(t)},onActionClose:t=>{ih.trace("onActionClose",t.action),t.action.type==="shell"&&He.addAction(t),He.runAction(t)}}});function zq(){const[t,e]=R.useState({}),n=R.useCallback((r,i)=>{for(const[s,o]of r.entries())if(o.role==="assistant"){const a=$q.parse(o.id,o.content);e(l=>({...l,[s]:(l[s]||"")+a}))}},[]);return{parsedMessages:t,parseMessages:n}}const _w=Mn("usePromptEnhancement");function Wq(){const[t,e]=R.useState(!1),[n,r]=R.useState(!1);return{enhancingPrompt:t,promptEnhanced:n,enhancePrompt:async(o,a)=>{e(!0),r(!1);const u=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify({message:o})})).body?.getReader(),c=o;if(u){const h=new TextDecoder;let f="",d;try{for(a("");;){const{value:_,done:b}=await u.read();if(b)break;f+=h.decode(_),_w.trace("Set input",f),a(f)}}catch(_){d=_,a(c)}finally{d&&_w.error(d),e(!1),r(!0),setTimeout(()=>{a(f)})}}},resetEnhancer:()=>{e(!1),r(!1)}}}const vy=cs({toggleTerminal:{key:"j",ctrlOrMetaKey:!0,action:()=>He.toggleTerminal()}}),bw=cs({shortcuts:vy.get()});vy.subscribe(t=>{bw.set({...bw.get(),shortcuts:t})});class qq{#e=new EventTarget;dispatch(e){this.#e.dispatchEvent(new Event(e))}on(e,n){return this.#e.addEventListener(e,n),()=>{this.#e.removeEventListener(e,n)}}}const mD=new qq;function Gq(){const t=Pt(vy);R.useEffect(()=>{const e=n=>{const{key:r,ctrlKey:i,shiftKey:s,altKey:o,metaKey:a}=n;for(const l in t){const u=t[l];if(u.key.toLowerCase()===r.toLowerCase()&&(u.ctrlOrMetaKey?i||a:(u.ctrlKey===void 0||u.ctrlKey===i)&&(u.metaKey===void 0||u.metaKey===a))&&(u.shiftKey===void 0||u.shiftKey===s)&&(u.altKey===void 0||u.altKey===o)){mD.dispatch(l),n.preventDefault(),n.stopPropagation(),u.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}function Kq(){const t=R.useRef(!0),e=R.useRef(),n=R.useRef(),r=R.useRef(),i=R.useCallback(o=>{o?new ResizeObserver(()=>{if(t.current&&e.current){const{scrollHeight:l,clientHeight:u}=e.current,c=l-u;e.current.scrollTo({top:c})}}).observe(o):(r.current?.disconnect(),r.current=void 0)},[]),s=R.useCallback(o=>{o?(n.current=()=>{const{scrollTop:a,scrollHeight:l,clientHeight:u}=o,c=l-u;t.current=Math.abs(a-c)<=10},o.addEventListener("scroll",n.current),e.current=o):(n.current&&e.current?.removeEventListener("scroll",n.current),e.current=void 0,n.current=void 0)},[]);return[i,s]}function Yq(){return globalThis.innerWidth<640}function gD(t){const e=t+"CollectionProvider",[n,r]=xa(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:p,children:m}=b,g=Ye.useRef(null),y=Ye.useRef(new Map).current;return L.jsx(i,{scope:p,itemMap:y,collectionRef:g,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=Ql(a),u=Ye.forwardRef((b,p)=>{const{scope:m,children:g}=b,y=s(a,m),v=ln(p,y.collectionRef);return L.jsx(l,{ref:v,children:g})});u.displayName=a;const c=t+"CollectionItemSlot",h="data-radix-collection-item",f=Ql(c),d=Ye.forwardRef((b,p)=>{const{scope:m,children:g,...y}=b,v=Ye.useRef(null),S=ln(p,v),E=s(c,m);return Ye.useEffect(()=>(E.itemMap.set(v,{ref:v,...y}),()=>void E.itemMap.delete(v))),L.jsx(f,{[h]:"",ref:S,children:g})});d.displayName=c;function _(b){const p=s(t+"CollectionConsumer",b);return Ye.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((E,C)=>y.indexOf(E.ref.current)-y.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:u,ItemSlot:d},_,r]}var Xq=R.createContext(void 0);function _D(t){const e=R.useContext(Xq);return t||e||"ltr"}const Qq=["top","right","bottom","left"],as=Math.min,Yn=Math.max,jf=Math.round,sh=Math.floor,li=t=>({x:t,y:t}),Jq={left:"right",right:"left",bottom:"top",top:"bottom"},Zq={start:"end",end:"start"};function O0(t,e,n){return Yn(t,as(e,n))}function Di(t,e){return typeof t=="function"?t(e):t}function Li(t){return t.split("-")[0]}function Da(t){return t.split("-")[1]}function Ey(t){return t==="x"?"y":"x"}function Sy(t){return t==="y"?"height":"width"}const eG=new Set(["top","bottom"]);function ti(t){return eG.has(Li(t))?"y":"x"}function wy(t){return Ey(ti(t))}function tG(t,e,n){n===void 0&&(n=!1);const r=Da(t),i=wy(t),s=Sy(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Vf(o)),[o,Vf(o)]}function nG(t){const e=Vf(t);return[M0(t),e,M0(e)]}function M0(t){return t.replace(/start|end/g,e=>Zq[e])}const yw=["left","right"],vw=["right","left"],rG=["top","bottom"],iG=["bottom","top"];function sG(t,e,n){switch(t){case"top":case"bottom":return n?e?vw:yw:e?yw:vw;case"left":case"right":return e?rG:iG;default:return[]}}function oG(t,e,n,r){const i=Da(t);let s=sG(Li(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(M0)))),s}function Vf(t){return t.replace(/left|right|bottom|top/g,e=>Jq[e])}function aG(t){return{top:0,right:0,bottom:0,left:0,...t}}function bD(t){return typeof t!="number"?aG(t):{top:t,right:t,bottom:t,left:t}}function $f(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Ew(t,e,n){let{reference:r,floating:i}=t;const s=ti(e),o=wy(e),a=Sy(o),l=Li(e),u=s==="y",c=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let d;switch(l){case"top":d={x:c,y:r.y-i.height};break;case"bottom":d={x:c,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:h};break;case"left":d={x:r.x-i.width,y:h};break;default:d={x:r.x,y:r.y}}switch(Da(e)){case"start":d[o]-=f*(n&&u?-1:1);break;case"end":d[o]+=f*(n&&u?-1:1);break}return d}async function lG(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=Di(e,t),_=bD(d),p=a[f?h==="floating"?"reference":"floating":h],m=$f(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(p)))==null||n?p:p.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),g=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},S=$f(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:y,strategy:l}):g);return{top:(m.top-S.top+_.top)/v.y,bottom:(S.bottom-m.bottom+_.bottom)/v.y,left:(m.left-S.left+_.left)/v.x,right:(S.right-m.right+_.right)/v.x}}const uG=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:h}=Ew(u,r,l),f=r,d={},_=0;for(let p=0;p<a.length;p++){var b;const{name:m,fn:g}=a[p],{x:y,y:v,data:S,reset:E}=await g({x:c,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:d,rects:u,platform:{...o,detectOverflow:(b=o.detectOverflow)!=null?b:lG},elements:{reference:t,floating:e}});c=y??c,h=v??h,d={...d,[m]:{...d[m],...S}},E&&_<=50&&(_++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:c,y:h}=Ew(u,f,l)),p=-1)}return{x:c,y:h,placement:f,strategy:i,middlewareData:d}},cG=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Di(t,e)||{};if(u==null)return{};const h=bD(c),f={x:n,y:r},d=wy(i),_=Sy(d),b=await o.getDimensions(u),p=d==="y",m=p?"top":"left",g=p?"bottom":"right",y=p?"clientHeight":"clientWidth",v=s.reference[_]+s.reference[d]-f[d]-s.floating[_],S=f[d]-s.reference[d],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=E?E[y]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[y]||s.floating[_]);const x=v/2-S/2,A=C/2-b[_]/2-1,D=as(h[m],A),M=as(h[g],A),H=D,B=C-b[_]-M,$=C/2-b[_]/2+x,G=O0(H,$,B),Z=!l.arrow&&Da(i)!=null&&$!==G&&s.reference[_]/2-($<H?D:M)-b[_]/2<0,ee=Z?$<H?$-H:$-B:0;return{[d]:f[d]+ee,data:{[d]:G,centerOffset:$-G-ee,...Z&&{alignmentOffset:ee}},reset:Z}}}),hG=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:b=!0,...p}=Di(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const m=Li(i),g=ti(a),y=Li(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=f||(y||!b?[Vf(a)]:nG(a)),E=_!=="none";!f&&E&&S.push(...oG(a,b,_,v));const C=[a,...S],x=await l.detectOverflow(e,p),A=[];let D=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(x[m]),h){const $=tG(i,o,v);A.push(x[$[0]],x[$[1]])}if(D=[...D,{placement:i,overflows:A}],!A.every($=>$<=0)){var M,H;const $=(((M=s.flip)==null?void 0:M.index)||0)+1,G=C[$];if(G&&(!(h==="alignment"?g!==ti(G):!1)||D.every(X=>ti(X.placement)===g?X.overflows[0]>0:!0)))return{data:{index:$,overflows:D},reset:{placement:G}};let Z=(H=D.filter(ee=>ee.overflows[0]<=0).sort((ee,X)=>ee.overflows[1]-X.overflows[1])[0])==null?void 0:H.placement;if(!Z)switch(d){case"bestFit":{var B;const ee=(B=D.filter(X=>{if(E){const P=ti(X.placement);return P===g||P==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(P=>P>0).reduce((P,I)=>P+I,0)]).sort((X,P)=>X[1]-P[1])[0])==null?void 0:B[0];ee&&(Z=ee);break}case"initialPlacement":Z=a;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function Sw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ww(t){return Qq.some(e=>t[e]>=0)}const fG=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:i="referenceHidden",...s}=Di(t,e);switch(i){case"referenceHidden":{const o=await r.detectOverflow(e,{...s,elementContext:"reference"}),a=Sw(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:ww(a)}}}case"escaped":{const o=await r.detectOverflow(e,{...s,altBoundary:!0}),a=Sw(o,n.floating);return{data:{escapedOffsets:a,escaped:ww(a)}}}default:return{}}}}},yD=new Set(["left","top"]);async function dG(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Li(n),a=Da(n),l=ti(n)==="y",u=yD.has(o)?-1:1,c=s&&l?-1:1,h=Di(e,t);let{mainAxis:f,crossAxis:d,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(d=a==="end"?_*-1:_),l?{x:d*c,y:f*u}:{x:f*u,y:d*c}}const pG=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await dG(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},mG=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i,platform:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:m=>{let{x:g,y}=m;return{x:g,y}}},...u}=Di(t,e),c={x:n,y:r},h=await s.detectOverflow(e,u),f=ti(Li(i)),d=Ey(f);let _=c[d],b=c[f];if(o){const m=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=_+h[m],v=_-h[g];_=O0(y,_,v)}if(a){const m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=b+h[m],v=b-h[g];b=O0(y,b,v)}const p=l.fn({...e,[d]:_,[f]:b});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[d]:o,[f]:a}}}}}},gG=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Di(t,e),c={x:n,y:r},h=ti(i),f=Ey(h);let d=c[f],_=c[h];const b=Di(a,e),p=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const y=f==="y"?"height":"width",v=s.reference[f]-s.floating[y]+p.mainAxis,S=s.reference[f]+s.reference[y]-p.mainAxis;d<v?d=v:d>S&&(d=S)}if(u){var m,g;const y=f==="y"?"width":"height",v=yD.has(Li(i)),S=s.reference[h]-s.floating[y]+(v&&((m=o.offset)==null?void 0:m[h])||0)+(v?0:p.crossAxis),E=s.reference[h]+s.reference[y]+(v?0:((g=o.offset)==null?void 0:g[h])||0)-(v?p.crossAxis:0);_<S?_=S:_>E&&(_=E)}return{[f]:d,[h]:_}}}},_G=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Di(t,e),c=await o.detectOverflow(e,u),h=Li(i),f=Da(i),d=ti(i)==="y",{width:_,height:b}=s.floating;let p,m;h==="top"||h==="bottom"?(p=h,m=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=h,p=f==="end"?"top":"bottom");const g=b-c.top-c.bottom,y=_-c.left-c.right,v=as(b-c[p],g),S=as(_-c[m],y),E=!e.middlewareData.shift;let C=v,x=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(x=y),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=g),E&&!f){const D=Yn(c.left,0),M=Yn(c.right,0),H=Yn(c.top,0),B=Yn(c.bottom,0);d?x=_-2*(D!==0||M!==0?D+M:Yn(c.left,c.right)):C=b-2*(H!==0||B!==0?H+B:Yn(c.top,c.bottom))}await l({...e,availableWidth:x,availableHeight:C});const A=await o.getDimensions(a.floating);return _!==A.width||b!==A.height?{reset:{rects:!0}}:{}}}};function Gd(){return typeof window<"u"}function La(t){return vD(t)?(t.nodeName||"").toLowerCase():"#document"}function Zn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function di(t){var e;return(e=(vD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vD(t){return Gd()?t instanceof Node||t instanceof Zn(t).Node:!1}function Tr(t){return Gd()?t instanceof Element||t instanceof Zn(t).Element:!1}function hi(t){return Gd()?t instanceof HTMLElement||t instanceof Zn(t).HTMLElement:!1}function xw(t){return!Gd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Zn(t).ShadowRoot}const bG=new Set(["inline","contents"]);function ec(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!bG.has(i)}const yG=new Set(["table","td","th"]);function vG(t){return yG.has(La(t))}const EG=[":popover-open",":modal"];function Kd(t){return EG.some(e=>{try{return t.matches(e)}catch{return!1}})}const SG=["transform","translate","scale","rotate","perspective"],wG=["transform","translate","scale","rotate","perspective","filter"],xG=["paint","layout","strict","content"];function xy(t){const e=Cy(),n=Tr(t)?Ar(t):t;return SG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||wG.some(r=>(n.willChange||"").includes(r))||xG.some(r=>(n.contain||"").includes(r))}function CG(t){let e=ls(t);for(;hi(e)&&!_a(e);){if(xy(e))return e;if(Kd(e))return null;e=ls(e)}return null}function Cy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TG=new Set(["html","body","#document"]);function _a(t){return TG.has(La(t))}function Ar(t){return Zn(t).getComputedStyle(t)}function Yd(t){return Tr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ls(t){if(La(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xw(t)&&t.host||di(t);return xw(e)?e.host:e}function ED(t){const e=ls(t);return _a(e)?t.ownerDocument?t.ownerDocument.body:t.body:hi(e)&&ec(e)?e:ED(e)}function pu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=ED(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Zn(i);if(s){const a=N0(o);return e.concat(o,o.visualViewport||[],ec(i)?i:[],a&&n?pu(a):[])}return e.concat(i,pu(i,[],n))}function N0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SD(t){const e=Ar(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=hi(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=jf(n)!==s||jf(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Ty(t){return Tr(t)?t:t.contextElement}function Zo(t){const e=Ty(t);if(!hi(e))return li(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=SD(e);let o=(s?jf(n.width):n.width)/r,a=(s?jf(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const AG=li(0);function wD(t){const e=Zn(t);return!Cy()||!e.visualViewport?AG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kG(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Zn(t)?!1:e}function to(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Ty(t);let o=li(1);e&&(r?Tr(r)&&(o=Zo(r)):o=Zo(t));const a=kG(s,n,r)?wD(s):li(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(s){const f=Zn(s),d=r&&Tr(r)?Zn(r):r;let _=f,b=N0(_);for(;b&&r&&d!==_;){const p=Zo(b),m=b.getBoundingClientRect(),g=Ar(b),y=m.left+(b.clientLeft+parseFloat(g.paddingLeft))*p.x,v=m.top+(b.clientTop+parseFloat(g.paddingTop))*p.y;l*=p.x,u*=p.y,c*=p.x,h*=p.y,l+=y,u+=v,_=Zn(b),b=N0(_)}}return $f({width:c,height:h,x:l,y:u})}function Xd(t,e){const n=Yd(t).scrollLeft;return e?e.left+n:to(di(t)).left+n}function xD(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Xd(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function RG(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=di(r),a=e?Kd(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=li(1);const c=li(0),h=hi(r);if((h||!h&&!s)&&((La(r)!=="body"||ec(o))&&(l=Yd(r)),hi(r))){const d=to(r);u=Zo(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}const f=o&&!h&&!s?xD(o,l):li(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function IG(t){return Array.from(t.getClientRects())}function DG(t){const e=di(t),n=Yd(t),r=t.ownerDocument.body,i=Yn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Yn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Xd(t);const a=-n.scrollTop;return Ar(r).direction==="rtl"&&(o+=Yn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const Cw=25;function LG(t,e){const n=Zn(t),r=di(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Cy();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const u=Xd(r);if(u<=0){const c=r.ownerDocument,h=c.body,f=getComputedStyle(h),d=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,_=Math.abs(r.clientWidth-h.clientWidth-d);_<=Cw&&(s-=_)}else u<=Cw&&(s+=u);return{width:s,height:o,x:a,y:l}}const PG=new Set(["absolute","fixed"]);function OG(t,e){const n=to(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=hi(t)?Zo(t):li(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Tw(t,e,n){let r;if(e==="viewport")r=LG(t,n);else if(e==="document")r=DG(di(t));else if(Tr(e))r=OG(e,n);else{const i=wD(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return $f(r)}function CD(t,e){const n=ls(t);return n===e||!Tr(n)||_a(n)?!1:Ar(n).position==="fixed"||CD(n,e)}function MG(t,e){const n=e.get(t);if(n)return n;let r=pu(t,[],!1).filter(a=>Tr(a)&&La(a)!=="body"),i=null;const s=Ar(t).position==="fixed";let o=s?ls(t):t;for(;Tr(o)&&!_a(o);){const a=Ar(o),l=xy(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&PG.has(i.position)||ec(o)&&!l&&CD(t,o))?r=r.filter(c=>c!==o):i=a,o=ls(o)}return e.set(t,r),r}function NG(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Kd(e)?[]:MG(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const h=Tw(e,c,i);return u.top=Yn(h.top,u.top),u.right=as(h.right,u.right),u.bottom=as(h.bottom,u.bottom),u.left=Yn(h.left,u.left),u},Tw(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function BG(t){const{width:e,height:n}=SD(t);return{width:e,height:n}}function FG(t,e,n){const r=hi(e),i=di(e),s=n==="fixed",o=to(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=li(0);function u(){l.x=Xd(i)}if(r||!r&&!s)if((La(e)!=="body"||ec(i))&&(a=Yd(e)),r){const d=to(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&u();s&&!r&&i&&u();const c=i&&!r&&!s?xD(i,a):li(0),h=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:h,y:f,width:o.width,height:o.height}}function vm(t){return Ar(t).position==="static"}function Aw(t,e){if(!hi(t)||Ar(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return di(t)===n&&(n=n.ownerDocument.body),n}function TD(t,e){const n=Zn(t);if(Kd(t))return n;if(!hi(t)){let i=ls(t);for(;i&&!_a(i);){if(Tr(i)&&!vm(i))return i;i=ls(i)}return n}let r=Aw(t,e);for(;r&&vG(r)&&vm(r);)r=Aw(r,e);return r&&_a(r)&&vm(r)&&!xy(r)?n:r||CG(t)||n}const HG=async function(t){const e=this.getOffsetParent||TD,n=this.getDimensions,r=await n(t.floating);return{reference:FG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UG(t){return Ar(t).direction==="rtl"}const jG={convertOffsetParentRelativeRectToViewportRelativeRect:RG,getDocumentElement:di,getClippingRect:NG,getOffsetParent:TD,getElementRects:HG,getClientRects:IG,getDimensions:BG,getScale:Zo,isElement:Tr,isRTL:UG};function AD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function VG(t,e){let n=null,r;const i=di(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:c,top:h,width:f,height:d}=u;if(a||e(),!f||!d)return;const _=sh(h),b=sh(i.clientWidth-(c+f)),p=sh(i.clientHeight-(h+d)),m=sh(c),y={rootMargin:-_+"px "+-b+"px "+-p+"px "+-m+"px",threshold:Yn(0,as(1,l))||1};let v=!0;function S(E){const C=E[0].intersectionRatio;if(C!==l){if(!v)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!AD(u,t.getBoundingClientRect())&&o(),v=!1}try{n=new IntersectionObserver(S,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,y)}n.observe(t)}return o(!0),s}function $G(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Ty(t),c=i||s?[...u?pu(u):[],...pu(e)]:[];c.forEach(m=>{i&&m.addEventListener("scroll",n,{passive:!0}),s&&m.addEventListener("resize",n)});const h=u&&a?VG(u,n):null;let f=-1,d=null;o&&(d=new ResizeObserver(m=>{let[g]=m;g&&g.target===u&&d&&(d.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=d)==null||y.observe(e)})),n()}),u&&!l&&d.observe(u),d.observe(e));let _,b=l?to(t):null;l&&p();function p(){const m=to(t);b&&!AD(b,m)&&n(),b=m,_=requestAnimationFrame(p)}return n(),()=>{var m;c.forEach(g=>{i&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),h?.(),(m=d)==null||m.disconnect(),d=null,l&&cancelAnimationFrame(_)}}const zG=pG,WG=mG,qG=hG,GG=_G,KG=fG,kw=cG,YG=gG,XG=(t,e,n)=>{const r=new Map,i={platform:jG,...n},s={...i.platform,_c:r};return uG(t,e,{...i,platform:s})};var QG=typeof document<"u",JG=function(){},Hh=QG?R.useLayoutEffect:JG;function zf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!zf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function kD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Rw(t,e){const n=kD(t);return Math.round(e*n)/n}function Em(t){const e=R.useRef(t);return Hh(()=>{e.current=t}),e}function ZG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,h]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,d]=R.useState(r);zf(f,r)||d(r);const[_,b]=R.useState(null),[p,m]=R.useState(null),g=R.useCallback(X=>{X!==E.current&&(E.current=X,b(X))},[]),y=R.useCallback(X=>{X!==C.current&&(C.current=X,m(X))},[]),v=s||_,S=o||p,E=R.useRef(null),C=R.useRef(null),x=R.useRef(c),A=l!=null,D=Em(l),M=Em(i),H=Em(u),B=R.useCallback(()=>{if(!E.current||!C.current)return;const X={placement:e,strategy:n,middleware:f};M.current&&(X.platform=M.current),XG(E.current,C.current,X).then(P=>{const I={...P,isPositioned:H.current!==!1};$.current&&!zf(x.current,I)&&(x.current=I,eT.flushSync(()=>{h(I)}))})},[f,e,n,M,H]);Hh(()=>{u===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const $=R.useRef(!1);Hh(()=>($.current=!0,()=>{$.current=!1}),[]),Hh(()=>{if(v&&(E.current=v),S&&(C.current=S),v&&S){if(D.current)return D.current(v,S,B);B()}},[v,S,B,D,A]);const G=R.useMemo(()=>({reference:E,floating:C,setReference:g,setFloating:y}),[g,y]),Z=R.useMemo(()=>({reference:v,floating:S}),[v,S]),ee=R.useMemo(()=>{const X={position:n,left:0,top:0};if(!Z.floating)return X;const P=Rw(Z.floating,c.x),I=Rw(Z.floating,c.y);return a?{...X,transform:"translate("+P+"px, "+I+"px)",...kD(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:I}},[n,a,Z.floating,c.x,c.y]);return R.useMemo(()=>({...c,update:B,refs:G,elements:Z,floatingStyles:ee}),[c,B,G,Z,ee])}const eK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?kw({element:r.current,padding:i}).fn(n):{}:r?kw({element:r,padding:i}).fn(n):{}}}},tK=(t,e)=>({...zG(t),options:[t,e]}),nK=(t,e)=>({...WG(t),options:[t,e]}),rK=(t,e)=>({...YG(t),options:[t,e]}),iK=(t,e)=>({...qG(t),options:[t,e]}),sK=(t,e)=>({...GG(t),options:[t,e]}),oK=(t,e)=>({...KG(t),options:[t,e]}),aK=(t,e)=>({...eK(t),options:[t,e]});var lK="Arrow",RD=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return L.jsx(Wt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:L.jsx("polygon",{points:"0,0 30,0 15,10"})})});RD.displayName=lK;var uK=RD;function cK(t){const[e,n]=R.useState(void 0);return es(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Ay="Popper",[ID,DD]=xa(Ay),[hK,LD]=ID(Ay),PD=t=>{const{__scopePopper:e,children:n}=t,[r,i]=R.useState(null);return L.jsx(hK,{scope:e,anchor:r,onAnchorChange:i,children:n})};PD.displayName=Ay;var OD="PopperAnchor",MD=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=LD(OD,n),o=R.useRef(null),a=ln(e,o),l=R.useRef(null);return R.useEffect(()=>{const u=l.current;l.current=r?.current||o.current,u!==l.current&&s.onAnchorChange(l.current)}),r?null:L.jsx(Wt.div,{...i,ref:a})});MD.displayName=OD;var ky="PopperContent",[fK,dK]=ID(ky),ND=R.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:d="optimized",onPlaced:_,...b}=t,p=LD(ky,n),[m,g]=R.useState(null),y=ln(e,q=>g(q)),[v,S]=R.useState(null),E=cK(v),C=E?.width??0,x=E?.height??0,A=r+(s!=="center"?"-"+s:""),D=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},M=Array.isArray(u)?u:[u],H=M.length>0,B={padding:D,boundary:M.filter(mK),altBoundary:H},{refs:$,floatingStyles:G,placement:Z,isPositioned:ee,middlewareData:X}=ZG({strategy:"fixed",placement:A,whileElementsMounted:(...q)=>$G(...q,{animationFrame:d==="always"}),elements:{reference:p.anchor},middleware:[tK({mainAxis:i+x,alignmentAxis:o}),l&&nK({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?rK():void 0,...B}),l&&iK({...B}),sK({...B,apply:({elements:q,rects:F,availableWidth:ie,availableHeight:ue})=>{const{width:fe,height:me}=F.reference,Te=q.floating.style;Te.setProperty("--radix-popper-available-width",`${ie}px`),Te.setProperty("--radix-popper-available-height",`${ue}px`),Te.setProperty("--radix-popper-anchor-width",`${fe}px`),Te.setProperty("--radix-popper-anchor-height",`${me}px`)}}),v&&aK({element:v,padding:a}),gK({arrowWidth:C,arrowHeight:x}),f&&oK({strategy:"referenceHidden",...B})]}),[P,I]=HD(Z),z=Ai(_);es(()=>{ee&&z?.()},[ee,z]);const K=X.arrow?.x,O=X.arrow?.y,J=X.arrow?.centerOffset!==0,[re,oe]=R.useState();return es(()=>{m&&oe(window.getComputedStyle(m).zIndex)},[m]),L.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:ee?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[X.transformOrigin?.x,X.transformOrigin?.y].join(" "),...X.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:L.jsx(fK,{scope:n,placedSide:P,onArrowChange:S,arrowX:K,arrowY:O,shouldHideArrow:J,children:L.jsx(Wt.div,{"data-side":P,"data-align":I,...b,ref:y,style:{...b.style,animation:ee?void 0:"none"}})})})});ND.displayName=ky;var BD="PopperArrow",pK={top:"bottom",right:"left",bottom:"top",left:"right"},FD=R.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=dK(BD,r),o=pK[s.placedSide];return L.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:L.jsx(uK,{...i,ref:n,style:{...i.style,display:"block"}})})});FD.displayName=BD;function mK(t){return t!==null}var gK=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=HD(n),h={start:"0%",center:"50%",end:"100%"}[c],f=(i.arrow?.x??0)+a/2,d=(i.arrow?.y??0)+l/2;let _="",b="";return u==="bottom"?(_=o?h:`${f}px`,b=`${-l}px`):u==="top"?(_=o?h:`${f}px`,b=`${r.floating.height+l}px`):u==="right"?(_=`${-l}px`,b=o?h:`${d}px`):u==="left"&&(_=`${r.floating.width+l}px`,b=o?h:`${d}px`),{data:{x:_,y:b}}}});function HD(t){const[e,n="center"]=t.split("-");return[e,n]}var _K=PD,bK=MD,yK=ND,vK=FD,Sm="rovingFocusGroup.onEntryFocus",EK={bubbles:!1,cancelable:!0},tc="RovingFocusGroup",[B0,UD,SK]=gD(tc),[wK,jD]=xa(tc,[SK]),[xK,CK]=wK(tc),VD=R.forwardRef((t,e)=>L.jsx(B0.Provider,{scope:t.__scopeRovingFocusGroup,children:L.jsx(B0.Slot,{scope:t.__scopeRovingFocusGroup,children:L.jsx(TK,{...t,ref:e})})}));VD.displayName=tc;var TK=R.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...h}=t,f=R.useRef(null),d=ln(e,f),_=_D(s),[b,p]=_b({prop:o,defaultProp:a??null,onChange:l,caller:tc}),[m,g]=R.useState(!1),y=Ai(u),v=UD(n),S=R.useRef(!1),[E,C]=R.useState(0);return R.useEffect(()=>{const x=f.current;if(x)return x.addEventListener(Sm,y),()=>x.removeEventListener(Sm,y)},[y]),L.jsx(xK,{scope:n,orientation:r,dir:_,loop:i,currentTabStopId:b,onItemFocus:R.useCallback(x=>p(x),[p]),onItemShiftTab:R.useCallback(()=>g(!0),[]),onFocusableItemAdd:R.useCallback(()=>C(x=>x+1),[]),onFocusableItemRemove:R.useCallback(()=>C(x=>x-1),[]),children:L.jsx(Wt.div,{tabIndex:m||E===0?-1:0,"data-orientation":r,...h,ref:d,style:{outline:"none",...t.style},onMouseDown:Qe(t.onMouseDown,()=>{S.current=!0}),onFocus:Qe(t.onFocus,x=>{const A=!S.current;if(x.target===x.currentTarget&&A&&!m){const D=new CustomEvent(Sm,EK);if(x.currentTarget.dispatchEvent(D),!D.defaultPrevented){const M=v().filter(Z=>Z.focusable),H=M.find(Z=>Z.active),B=M.find(Z=>Z.id===b),G=[H,B,...M].filter(Boolean).map(Z=>Z.ref.current);WD(G,c)}}S.current=!1}),onBlur:Qe(t.onBlur,()=>g(!1))})})}),$D="RovingFocusGroupItem",zD=R.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Uo(),u=s||l,c=CK($D,n),h=c.currentTabStopId===u,f=UD(n),{onFocusableItemAdd:d,onFocusableItemRemove:_,currentTabStopId:b}=c;return R.useEffect(()=>{if(r)return d(),()=>_()},[r,d,_]),L.jsx(B0.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:L.jsx(Wt.span,{tabIndex:h?0:-1,"data-orientation":c.orientation,...a,ref:e,onMouseDown:Qe(t.onMouseDown,p=>{r?c.onItemFocus(u):p.preventDefault()}),onFocus:Qe(t.onFocus,()=>c.onItemFocus(u)),onKeyDown:Qe(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=RK(p,c.orientation,c.dir);if(m!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=f().filter(v=>v.focusable).map(v=>v.ref.current);if(m==="last")y.reverse();else if(m==="prev"||m==="next"){m==="prev"&&y.reverse();const v=y.indexOf(p.currentTarget);y=c.loop?IK(y,v+1):y.slice(v+1)}setTimeout(()=>WD(y))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});zD.displayName=$D;var AK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function RK(t,e,n){const r=kK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return AK[r]}function WD(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function IK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var DK=VD,LK=zD,F0=["Enter"," "],PK=["ArrowDown","PageUp","Home"],qD=["ArrowUp","PageDown","End"],OK=[...PK,...qD],MK={ltr:[...F0,"ArrowRight"],rtl:[...F0,"ArrowLeft"]},NK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},nc="Menu",[mu,BK,FK]=gD(nc),[ao,GD]=xa(nc,[FK,DD,jD]),Qd=DD(),KD=jD(),[HK,lo]=ao(nc),[UK,rc]=ao(nc),YD=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Qd(e),[l,u]=R.useState(null),c=R.useRef(!1),h=Ai(s),f=_D(i);return R.useEffect(()=>{const d=()=>{c.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>c.current=!1;return document.addEventListener("keydown",d,{capture:!0}),()=>{document.removeEventListener("keydown",d,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),L.jsx(_K,{...a,children:L.jsx(HK,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:u,children:L.jsx(UK,{scope:e,onClose:R.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:c,dir:f,modal:o,children:r})})})};YD.displayName=nc;var jK="MenuAnchor",Ry=R.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Qd(n);return L.jsx(bK,{...i,...r,ref:e})});Ry.displayName=jK;var Iy="MenuPortal",[VK,XD]=ao(Iy,{forceMount:void 0}),QD=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=lo(Iy,e);return L.jsx(VK,{scope:e,forceMount:n,children:L.jsx(fs,{present:n||s.open,children:L.jsx(vb,{asChild:!0,container:i,children:r})})})};QD.displayName=Iy;var dr="MenuContent",[$K,Dy]=ao(dr),JD=R.forwardRef((t,e)=>{const n=XD(dr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=lo(dr,t.__scopeMenu),o=rc(dr,t.__scopeMenu);return L.jsx(mu.Provider,{scope:t.__scopeMenu,children:L.jsx(fs,{present:r||s.open,children:L.jsx(mu.Slot,{scope:t.__scopeMenu,children:o.modal?L.jsx(zK,{...i,ref:e}):L.jsx(WK,{...i,ref:e})})})})}),zK=R.forwardRef((t,e)=>{const n=lo(dr,t.__scopeMenu),r=R.useRef(null),i=ln(e,r);return R.useEffect(()=>{const s=r.current;if(s)return sk(s)},[]),L.jsx(Ly,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Qe(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),WK=R.forwardRef((t,e)=>{const n=lo(dr,t.__scopeMenu);return L.jsx(Ly,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),qK=Ql("MenuContent.ScrollLock"),Ly=R.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:f,onDismiss:d,disableOutsideScroll:_,...b}=t,p=lo(dr,n),m=rc(dr,n),g=Qd(n),y=KD(n),v=BK(n),[S,E]=R.useState(null),C=R.useRef(null),x=ln(e,C,p.onContentChange),A=R.useRef(0),D=R.useRef(""),M=R.useRef(0),H=R.useRef(null),B=R.useRef("right"),$=R.useRef(0),G=_?Eb:R.Fragment,Z=_?{as:qK,allowPinchZoom:!0}:void 0,ee=P=>{const I=D.current+P,z=v().filter(q=>!q.disabled),K=document.activeElement,O=z.find(q=>q.ref.current===K)?.textValue,J=z.map(q=>q.textValue),re=iY(J,I,O),oe=z.find(q=>q.textValue===re)?.ref.current;(function q(F){D.current=F,window.clearTimeout(A.current),F!==""&&(A.current=window.setTimeout(()=>q(""),1e3))})(I),oe&&setTimeout(()=>oe.focus())};R.useEffect(()=>()=>window.clearTimeout(A.current),[]),XA();const X=R.useCallback(P=>B.current===H.current?.side&&oY(P,H.current?.area),[]);return L.jsx($K,{scope:n,searchRef:D,onItemEnter:R.useCallback(P=>{X(P)&&P.preventDefault()},[X]),onItemLeave:R.useCallback(P=>{X(P)||(C.current?.focus(),E(null))},[X]),onTriggerLeave:R.useCallback(P=>{X(P)&&P.preventDefault()},[X]),pointerGraceTimerRef:M,onPointerGraceIntentChange:R.useCallback(P=>{H.current=P},[]),children:L.jsx(G,{...Z,children:L.jsx(yb,{asChild:!0,trapped:i,onMountAutoFocus:Qe(s,P=>{P.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:L.jsx(bb,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:f,onDismiss:d,children:L.jsx(DK,{asChild:!0,...y,dir:m.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:E,onEntryFocus:Qe(l,P=>{m.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:L.jsx(yK,{role:"menu","aria-orientation":"vertical","data-state":pL(p.open),"data-radix-menu-content":"",dir:m.dir,...g,...b,ref:x,style:{outline:"none",...b.style},onKeyDown:Qe(b.onKeyDown,P=>{const z=P.target.closest("[data-radix-menu-content]")===P.currentTarget,K=P.ctrlKey||P.altKey||P.metaKey,O=P.key.length===1;z&&(P.key==="Tab"&&P.preventDefault(),!K&&O&&ee(P.key));const J=C.current;if(P.target!==J||!OK.includes(P.key))return;P.preventDefault();const oe=v().filter(q=>!q.disabled).map(q=>q.ref.current);qD.includes(P.key)&&oe.reverse(),nY(oe)}),onBlur:Qe(t.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(A.current),D.current="")}),onPointerMove:Qe(t.onPointerMove,gu(P=>{const I=P.target,z=$.current!==P.clientX;if(P.currentTarget.contains(I)&&z){const K=P.clientX>$.current?"right":"left";B.current=K,$.current=P.clientX}}))})})})})})})});JD.displayName=dr;var GK="MenuGroup",Py=R.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return L.jsx(Wt.div,{role:"group",...r,ref:e})});Py.displayName=GK;var KK="MenuLabel",ZD=R.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return L.jsx(Wt.div,{...r,ref:e})});ZD.displayName=KK;var Wf="MenuItem",Iw="menu.itemSelect",Jd=R.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=R.useRef(null),o=rc(Wf,t.__scopeMenu),a=Dy(Wf,t.__scopeMenu),l=ln(e,s),u=R.useRef(!1),c=()=>{const h=s.current;if(!n&&h){const f=new CustomEvent(Iw,{bubbles:!0,cancelable:!0});h.addEventListener(Iw,d=>r?.(d),{once:!0}),qA(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return L.jsx(eL,{...i,ref:l,disabled:n,onClick:Qe(t.onClick,c),onPointerDown:h=>{t.onPointerDown?.(h),u.current=!0},onPointerUp:Qe(t.onPointerUp,h=>{u.current||h.currentTarget?.click()}),onKeyDown:Qe(t.onKeyDown,h=>{const f=a.searchRef.current!=="";n||f&&h.key===" "||F0.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Jd.displayName=Wf;var eL=R.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=Dy(Wf,n),a=KD(n),l=R.useRef(null),u=ln(e,l),[c,h]=R.useState(!1),[f,d]=R.useState("");return R.useEffect(()=>{const _=l.current;_&&d((_.textContent??"").trim())},[s.children]),L.jsx(mu.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:L.jsx(LK,{asChild:!0,...a,focusable:!r,children:L.jsx(Wt.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Qe(t.onPointerMove,gu(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Qe(t.onPointerLeave,gu(_=>o.onItemLeave(_))),onFocus:Qe(t.onFocus,()=>h(!0)),onBlur:Qe(t.onBlur,()=>h(!1))})})})}),YK="MenuCheckboxItem",tL=R.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return L.jsx(oL,{scope:t.__scopeMenu,checked:n,children:L.jsx(Jd,{role:"menuitemcheckbox","aria-checked":qf(n)?"mixed":n,...i,ref:e,"data-state":My(n),onSelect:Qe(i.onSelect,()=>r?.(qf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});tL.displayName=YK;var nL="MenuRadioGroup",[XK,QK]=ao(nL,{value:void 0,onValueChange:()=>{}}),rL=R.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Ai(r);return L.jsx(XK,{scope:t.__scopeMenu,value:n,onValueChange:s,children:L.jsx(Py,{...i,ref:e})})});rL.displayName=nL;var iL="MenuRadioItem",sL=R.forwardRef((t,e)=>{const{value:n,...r}=t,i=QK(iL,t.__scopeMenu),s=n===i.value;return L.jsx(oL,{scope:t.__scopeMenu,checked:s,children:L.jsx(Jd,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":My(s),onSelect:Qe(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});sL.displayName=iL;var Oy="MenuItemIndicator",[oL,JK]=ao(Oy,{checked:!1}),aL=R.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=JK(Oy,n);return L.jsx(fs,{present:r||qf(s.checked)||s.checked===!0,children:L.jsx(Wt.span,{...i,ref:e,"data-state":My(s.checked)})})});aL.displayName=Oy;var ZK="MenuSeparator",lL=R.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return L.jsx(Wt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});lL.displayName=ZK;var eY="MenuArrow",uL=R.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Qd(n);return L.jsx(vK,{...i,...r,ref:e})});uL.displayName=eY;var tY="MenuSub",[_pe,cL]=ao(tY),yl="MenuSubTrigger",hL=R.forwardRef((t,e)=>{const n=lo(yl,t.__scopeMenu),r=rc(yl,t.__scopeMenu),i=cL(yl,t.__scopeMenu),s=Dy(yl,t.__scopeMenu),o=R.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=R.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return R.useEffect(()=>c,[c]),R.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),L.jsx(Ry,{asChild:!0,...u,children:L.jsx(eL,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":pL(n.open),...t,ref:wd(e,i.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Qe(t.onPointerMove,gu(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:Qe(t.onPointerLeave,gu(h=>{c();const f=n.content?.getBoundingClientRect();if(f){const d=n.content?.dataset.side,_=d==="right",b=_?-5:5,p=f[_?"left":"right"],m=f[_?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:p,y:f.top},{x:m,y:f.top},{x:m,y:f.bottom},{x:p,y:f.bottom}],side:d}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Qe(t.onKeyDown,h=>{const f=s.searchRef.current!=="";t.disabled||f&&h.key===" "||MK[r.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});hL.displayName=yl;var fL="MenuSubContent",dL=R.forwardRef((t,e)=>{const n=XD(dr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=lo(dr,t.__scopeMenu),o=rc(dr,t.__scopeMenu),a=cL(fL,t.__scopeMenu),l=R.useRef(null),u=ln(e,l);return L.jsx(mu.Provider,{scope:t.__scopeMenu,children:L.jsx(fs,{present:r||s.open,children:L.jsx(mu.Slot,{scope:t.__scopeMenu,children:L.jsx(Ly,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{o.isUsingKeyboardRef.current&&l.current?.focus(),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:Qe(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Qe(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:Qe(t.onKeyDown,c=>{const h=c.currentTarget.contains(c.target),f=NK[o.dir].includes(c.key);h&&f&&(s.onOpenChange(!1),a.trigger?.focus(),c.preventDefault())})})})})})});dL.displayName=fL;function pL(t){return t?"open":"closed"}function qf(t){return t==="indeterminate"}function My(t){return qf(t)?"indeterminate":t?"checked":"unchecked"}function nY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function rY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function iY(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=rY(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function sY(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],u=a.x,c=a.y,h=l.x,f=l.y;c>r!=f>r&&n<(h-u)*(r-c)/(f-c)+u&&(i=!i)}return i}function oY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return sY(n,e)}function gu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var aY=YD,lY=Ry,uY=QD,cY=JD,hY=Py,fY=ZD,dY=Jd,pY=tL,mY=rL,gY=sL,_Y=aL,bY=lL,yY=uL,vY=hL,EY=dL,Zd="DropdownMenu",[SY]=xa(Zd,[GD]),Tn=GD(),[wY,mL]=SY(Zd),gL=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Tn(e),u=R.useRef(null),[c,h]=_b({prop:i,defaultProp:s??!1,onChange:o,caller:Zd});return L.jsx(wY,{scope:e,triggerId:Uo(),triggerRef:u,contentId:Uo(),open:c,onOpenChange:h,onOpenToggle:R.useCallback(()=>h(f=>!f),[h]),modal:a,children:L.jsx(aY,{...l,open:c,onOpenChange:h,dir:r,modal:a,children:n})})};gL.displayName=Zd;var _L="DropdownMenuTrigger",bL=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=mL(_L,n),o=Tn(n);return L.jsx(lY,{asChild:!0,...o,children:L.jsx(Wt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:wd(e,s.triggerRef),onPointerDown:Qe(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Qe(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});bL.displayName=_L;var xY="DropdownMenuPortal",yL=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Tn(e);return L.jsx(uY,{...r,...n})};yL.displayName=xY;var vL="DropdownMenuContent",EL=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=mL(vL,n),s=Tn(n),o=R.useRef(!1);return L.jsx(cY,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Qe(t.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Qe(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!i.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});EL.displayName=vL;var CY="DropdownMenuGroup",TY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(hY,{...i,...r,ref:e})});TY.displayName=CY;var AY="DropdownMenuLabel",kY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(fY,{...i,...r,ref:e})});kY.displayName=AY;var RY="DropdownMenuItem",IY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(dY,{...i,...r,ref:e})});IY.displayName=RY;var DY="DropdownMenuCheckboxItem",LY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(pY,{...i,...r,ref:e})});LY.displayName=DY;var PY="DropdownMenuRadioGroup",OY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(mY,{...i,...r,ref:e})});OY.displayName=PY;var MY="DropdownMenuRadioItem",NY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(gY,{...i,...r,ref:e})});NY.displayName=MY;var BY="DropdownMenuItemIndicator",FY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(_Y,{...i,...r,ref:e})});FY.displayName=BY;var HY="DropdownMenuSeparator",UY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(bY,{...i,...r,ref:e})});UY.displayName=HY;var jY="DropdownMenuArrow",SL=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(yY,{...i,...r,ref:e})});SL.displayName=jY;var VY="DropdownMenuSubTrigger",$Y=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(vY,{...i,...r,ref:e})});$Y.displayName=VY;var zY="DropdownMenuSubContent",WY=R.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Tn(n);return L.jsx(EY,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WY.displayName=zY;var qY=gL,GY=bL,KY=yL,YY=EL,XY=SL;const QY=Mn("FileTree"),JY=8,ZY=[/\/node_modules\//,/\/\.next/,/\/\.astro/],wL=R.memo(({files:t={},onFileSelect:e,selectedFile:n,rootFolder:r,hideRoot:i=!1,collapsed:s=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:u})=>{Ca.trace("FileTree");const c=R.useMemo(()=>[...ZY,...a??[]],[a]),h=R.useMemo(()=>nX(t,r,i,c),[t,r,i,c]),[f,d]=R.useState(()=>s?new Set(h.filter(p=>p.kind==="folder").map(p=>p.fullPath)):new Set);R.useEffect(()=>{if(s){d(new Set(h.filter(p=>p.kind==="folder").map(p=>p.fullPath)));return}d(p=>{const m=new Set;for(const g of h)g.kind==="folder"&&p.has(g.fullPath)&&m.add(g.fullPath);return m})},[h,s]);const _=R.useMemo(()=>{const p=[];let m=Number.MAX_SAFE_INTEGER;for(const g of h){const y=g.depth;m===y&&(m=Number.MAX_SAFE_INTEGER),f.has(g.fullPath)&&(m=Math.min(m,y)),!(m<y)&&p.push(g)}return p},[h,f]),b=p=>{d(m=>{const g=new Set(m);return g.has(p)?g.delete(p):g.add(p),g})};return L.jsx("div",{className:Xe("text-sm",l),children:_.map(p=>{switch(p.kind){case"file":return L.jsx(tX,{selected:n===p.fullPath,file:p,unsavedChanges:u?.has(p.fullPath),onClick:()=>{e?.(p.fullPath)}},p.id);case"folder":return L.jsx(eX,{folder:p,selected:o&&n===p.fullPath,collapsed:f.has(p.fullPath),onClick:()=>{b(p.fullPath)}},p.id);default:return}})})});function eX({folder:{depth:t,name:e},collapsed:n,selected:r=!1,onClick:i}){return L.jsx(xL,{className:Xe("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!r,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":r}),depth:t,iconClasses:Xe({"i-ph:caret-right scale-98":n,"i-ph:caret-down scale-98":!n}),onClick:i,children:e})}function tX({file:{depth:t,name:e},onClick:n,selected:r,unsavedChanges:i=!1}){return L.jsx(xL,{className:Xe("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!r,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":r}),depth:t,iconClasses:Xe("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!r}),onClick:n,children:L.jsxs("div",{className:Xe("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!r}),children:[L.jsx("div",{className:"flex-1 truncate pr-2",children:e}),i&&L.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})})}function xL({depth:t,iconClasses:e,onClick:n,className:r,children:i}){return L.jsxs("button",{className:Xe("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",r),style:{paddingLeft:`${6+t*JY}px`},onClick:()=>n?.(),children:[L.jsx("div",{className:Xe("scale-120 shrink-0",e)}),L.jsx("div",{className:"truncate w-full text-left",children:i})]})}function nX(t,e="/",n,r){const i=new Set,s=[];let o=0;e==="/"&&!n&&(o=1,s.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const u=a.split("/").filter(_=>_),c=u.at(-1);if(!c||rX(a,c,r))continue;let h="",f=0,d=0;for(;f<u.length;){const _=u[f],b=h+=`/${_}`;if(!b.startsWith(e)||n&&b===e){f++;continue}f===u.length-1&&l?.type==="file"?s.push({kind:"file",id:s.length,name:_,fullPath:b,depth:d+o}):i.has(b)||(i.add(b),s.push({kind:"folder",id:s.length,name:_,fullPath:b,depth:d+o})),f++,d++}}return iX(e,s,n)}function rX(t,e,n){return n.some(r=>typeof r=="string"?e===r:r.test(t))}function iX(t,e,n){QY.trace("sortFileList");const r=new Map,i=new Map;e.sort((a,l)=>sX(a,l));for(const a of e){r.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(i.has(l)||i.set(l,[]),i.get(l)?.push(a))}const s=[],o=a=>{const l=r.get(a);l&&s.push(l);const u=i.get(a);if(u)for(const c of u)c.kind==="folder"?o(c.fullPath):s.push(c)};if(n){const a=i.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return s}function sX(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const oX=new RegExp(`^${Rb.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),aX={open:{y:0,opacity:1,transition:{duration:.15,ease:ui}},close:{y:6,opacity:0,transition:{duration:.15,ease:ui}}},lX=R.memo(({files:t,pathSegments:e=[],onFileSelect:n})=>{Ca.trace("FileBreadcrumb");const[r,i]=R.useState(null),s=R.useRef(null),o=R.useRef([]),a=l=>{i(u=>u===l?null:l)};return R.useEffect(()=>{const l=u=>{r!==null&&!s.current?.contains(u.target)&&!o.current.some(c=>c?.contains(u.target))&&i(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]),t===void 0||e.length===0?null:L.jsx("div",{className:"flex",children:e.map((l,u)=>{const c=u===e.length-1,h=e.slice(0,u).join("/");if(!oX.test(h))return null;const f=r===u;return L.jsx("div",{className:"relative flex items-center",children:L.jsxs(qY,{open:f,modal:!1,children:[L.jsx(GY,{asChild:!0,children:L.jsxs("span",{ref:d=>o.current[u]=d,className:Xe("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!f,"text-bolt-elements-textPrimary underline":f,"pr-4":c}),onClick:()=>a(u),children:[c&&L.jsx("div",{className:"i-ph:file-duotone"}),l]})}),u>0&&!c&&L.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),L.jsx(Kh,{children:f&&L.jsx(KY,{children:L.jsx(YY,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:L.jsxs(xr.div,{ref:s,initial:"close",animate:"open",exit:"close",variants:aX,children:[L.jsx("div",{className:"rounded-lg overflow-hidden",children:L.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:L.jsx(wL,{files:t,hideRoot:!0,rootFolder:h,collapsed:!0,allowFolderSelection:!0,selectedFile:`${h}/${l}`,onFileSelect:d=>{i(null),n?.(d)}})})}),L.jsx(XY,{className:"fill-bolt-elements-borderColor"})]})})})})]})},u)})})});var CL={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={};return(()=>{var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const s=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(s._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,s=i._renderService.dimensions;if(s.css.cell.width===0||s.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),u=Math.max(0,parseInt(a.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),h=l-(parseInt(c.getPropertyValue("padding-top"))+parseInt(c.getPropertyValue("padding-bottom"))),f=u-(parseInt(c.getPropertyValue("padding-right"))+parseInt(c.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(f/s.css.cell.width)),rows:Math.max(1,Math.floor(h/s.css.cell.height))}}}})(),n})())})(CL);var uX=CL.exports,TL={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={6:(o,a)=>{function l(c){try{const h=new URL(c),f=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return c.toLocaleLowerCase().startsWith(f.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(c,h,f,d={}){this._terminal=c,this._regex=h,this._handler=f,this._options=d}provideLinks(c,h){const f=u.computeLink(c,this._regex,this._terminal,this._handler);h(this._addCallbacks(f))}_addCallbacks(c){return c.map(h=>(h.leave=this._options.leave,h.hover=(f,d)=>{if(this._options.hover){const{range:_}=h;this._options.hover(f,d,_)}},h))}};class u{static computeLink(h,f,d,_){const b=new RegExp(f.source,(f.flags||"")+"g"),[p,m]=u._getWindowedLineStrings(h-1,d),g=p.join("");let y;const v=[];for(;y=b.exec(g);){const S=y[0];if(!l(S))continue;const[E,C]=u._mapStrIdx(d,m,0,y.index),[x,A]=u._mapStrIdx(d,E,C,S.length);if(E===-1||C===-1||x===-1||A===-1)continue;const D={start:{x:C+1,y:E+1},end:{x:A,y:x+1}};v.push({range:D,text:S,activate:_})}return v}static _getWindowedLineStrings(h,f){let d,_=h,b=h,p=0,m="";const g=[];if(d=f.buffer.active.getLine(h)){const y=d.translateToString(!0);if(d.isWrapped&&y[0]!==" "){for(p=0;(d=f.buffer.active.getLine(--_))&&p<2048&&(m=d.translateToString(!0),p+=m.length,g.push(m),d.isWrapped&&m.indexOf(" ")===-1););g.reverse()}for(g.push(y),p=0;(d=f.buffer.active.getLine(++b))&&d.isWrapped&&p<2048&&(m=d.translateToString(!0),p+=m.length,g.push(m),m.indexOf(" ")===-1););}return[g,_]}static _mapStrIdx(h,f,d,_){const b=h.buffer.active,p=b.getNullCell();let m=d;for(;_;){const g=b.getLine(f);if(!g)return[-1,-1];for(let y=m;y<g.length;++y){g.getCell(y,p);const v=p.getChars();if(p.getWidth()&&(_-=v.length||1,y===g.length-1&&v==="")){const S=b.getLine(f+1);S&&S.isWrapped&&(S.getCell(0,p),p.getWidth()===2&&(_+=1))}if(_<0)return[f,y]}f++,m=0}return[f,m]}}a.LinkComputer=u}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o](l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=i(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(c,h){const f=window.open();if(f){try{f.opener=null}catch{}f.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(c=u,h={}){this._handler=c,this._options=h}activate(c){this._terminal=c;const h=this._options,f=h.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,f,this._handler,h))}dispose(){this._linkProvider?.dispose()}}})(),s})())})(TL);var cX=TL.exports,AL={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(globalThis,()=>(()=>{var n={4567:function(o,a,l){var u=this&&this.__decorate||function(g,y,v,S){var E,C=arguments.length,x=C<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,y,v,S);else for(var A=g.length-1;A>=0;A--)(E=g[A])&&(x=(C<3?E(x):C>3?E(y,v,x):E(y,v))||x);return C>3&&x&&Object.defineProperty(y,v,x),x},c=this&&this.__param||function(g,y){return function(v,S){y(v,S,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const h=l(9042),f=l(9924),d=l(844),_=l(4725),b=l(2585),p=l(3656);let m=a.AccessibilityManager=class extends d.Disposable{constructor(g,y,v,S){super(),this._terminal=g,this._coreBrowserService=v,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let E=0;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);if(this._topBoundaryFocusListener=E=>this._handleBoundaryFocus(E,0),this._bottomBoundaryFocusListener=E=>this._handleBoundaryFocus(E,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(E=>this._handleResize(E.rows))),this.register(this._terminal.onRender(E=>this._refreshRows(E.start,E.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(E=>this._handleChar(E))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(E=>this._handleTab(E))),this.register(this._terminal.onKey(E=>this._handleKey(E.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,p.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,d.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(g){for(let y=0;y<g;y++)this._handleChar(" ")}_handleChar(g){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==g&&(this._charsToAnnounce+=g):this._charsToAnnounce+=g,g===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(g){this._clearLiveRegion(),/\p{Control}/u.test(g)||this._charsToConsume.push(g)}_refreshRows(g,y){this._liveRegionDebouncer.refresh(g,y,this._terminal.rows)}_renderRows(g,y){const v=this._terminal.buffer,S=v.lines.length.toString();for(let E=g;E<=y;E++){const C=v.lines.get(v.ydisp+E),x=[],A=C?.translateToString(!0,void 0,void 0,x)||"",D=(v.ydisp+E+1).toString(),M=this._rowElements[E];M&&(A.length===0?(M.innerText="",this._rowColumns.set(M,[0,1])):(M.textContent=A,this._rowColumns.set(M,x)),M.setAttribute("aria-posinset",D),M.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(g,y){const v=g.target,S=this._rowElements[y===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||g.relatedTarget!==S)return;let E,C;if(y===0?(E=v,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(E=this._rowElements.shift(),C=v,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){const x=this._createAccessibilityTreeNode();this._rowElements.unshift(x),this._rowContainer.insertAdjacentElement("afterbegin",x)}else{const x=this._createAccessibilityTreeNode();this._rowElements.push(x),this._rowContainer.appendChild(x)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),g.preventDefault(),g.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const g=document.getSelection();if(!g)return;if(g.isCollapsed)return void(this._rowContainer.contains(g.anchorNode)&&this._terminal.clearSelection());if(!g.anchorNode||!g.focusNode)return void console.error("anchorNode and/or focusNode are null");let y={node:g.anchorNode,offset:g.anchorOffset},v={node:g.focusNode,offset:g.focusOffset};if((y.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||y.node===v.node&&y.offset>v.offset)&&([y,v]=[v,y]),y.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(y={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(y.node))return;const S=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:S,offset:S.textContent?.length??0}),!this._rowContainer.contains(v.node))return;const E=({node:A,offset:D})=>{const M=A instanceof Text?A.parentNode:A;let H=parseInt(M?.getAttribute("aria-posinset"),10)-1;if(isNaN(H))return console.warn("row is invalid. Race condition?"),null;const B=this._rowColumns.get(M);if(!B)return console.warn("columns is null. Race condition?"),null;let $=D<B.length?B[D]:B.slice(-1)[0]+1;return $>=this._terminal.cols&&(++H,$=0),{row:H,column:$}},C=E(y),x=E(v);if(C&&x){if(C.row>x.row||C.row===x.row&&C.column>=x.column)throw new Error("invalid range");this._terminal.select(C.column,C.row,(x.row-C.row)*this._terminal.cols-C.column+x.column)}}_handleResize(g){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>g;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const g=this._coreBrowserService.mainDocument.createElement("div");return g.setAttribute("role","listitem"),g.tabIndex=-1,this._refreshRowDimensions(g),g}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let g=0;g<this._terminal.rows;g++)this._refreshRowDimensions(this._rowElements[g])}}_refreshRowDimensions(g){g.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=m=u([c(1,b.IInstantiationService),c(2,_.ICoreBrowserService),c(3,_.IRenderService)],m)},3614:(o,a)=>{function l(f){return f.replace(/\r?\n/g,"\r")}function u(f,d){return d?"\x1B[200~"+f+"\x1B[201~":f}function c(f,d,_,b){f=u(f=l(f),_.decPrivateModes.bracketedPasteMode&&b.rawOptions.ignoreBracketedPasteMode!==!0),_.triggerDataEvent(f,!0),d.value=""}function h(f,d,_){const b=_.getBoundingClientRect(),p=f.clientX-b.left-10,m=f.clientY-b.top-10;d.style.width="20px",d.style.height="20px",d.style.left=`${p}px`,d.style.top=`${m}px`,d.style.zIndex="1000",d.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=u,a.copyHandler=function(f,d){f.clipboardData&&f.clipboardData.setData("text/plain",d.selectionText),f.preventDefault()},a.handlePasteEvent=function(f,d,_,b){f.stopPropagation(),f.clipboardData&&c(f.clipboardData.getData("text/plain"),d,_,b)},a.paste=c,a.moveTextAreaUnderMouseCursor=h,a.rightClickHandler=function(f,d,_,b,p){h(f,d,_),p&&b.rightClickSelect(f),d.value=b.selectionText,d.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const u=l(1505);a.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(c,h,f){this._css.set(c,h,f)}getCss(c,h){return this._css.get(c,h)}setColor(c,h,f){this._color.set(c,h,f)}getColor(c,h){return this._color.get(c,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,u,c,h){l.addEventListener(u,c,h);let f=!1;return{dispose:()=>{f||(f=!0,l.removeEventListener(u,c,h))}}}},3551:function(o,a,l){var u=this&&this.__decorate||function(m,g,y,v){var S,E=arguments.length,C=E<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,g,y,v);else for(var x=m.length-1;x>=0;x--)(S=m[x])&&(C=(E<3?S(C):E>3?S(g,y,C):S(g,y))||C);return E>3&&C&&Object.defineProperty(g,y,C),C},c=this&&this.__param||function(m,g){return function(y,v){g(y,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const h=l(3656),f=l(8460),d=l(844),_=l(2585),b=l(4725);let p=a.Linkifier=class extends d.Disposable{get currentLink(){return this._currentLink}constructor(m,g,y,v,S){super(),this._element=m,this._mouseService=g,this._renderService=y,this._bufferService=v,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new f.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new f.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,d.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,d.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(m){this._lastMouseEvent=m;const g=this._positionFromMouseEvent(m,this._element,this._mouseService);if(!g)return;this._isMouseOut=!1;const y=m.composedPath();for(let v=0;v<y.length;v++){const S=y[v];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&g.x===this._lastBufferCell.x&&g.y===this._lastBufferCell.y||(this._handleHover(g),this._lastBufferCell=g)}_handleHover(m){if(this._activeLine!==m.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(m,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,m)||(this._clearCurrentLink(),this._askForLink(m,!0))}_askForLink(m,g){this._activeProviderReplies&&g||(this._activeProviderReplies?.forEach(v=>{v?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=m.y);let y=!1;for(const[v,S]of this._linkProviderService.linkProviders.entries())g?this._activeProviderReplies?.get(v)&&(y=this._checkLinkProviderResult(v,m,y)):S.provideLinks(m.y,E=>{if(this._isMouseOut)return;const C=E?.map(x=>({link:x}));this._activeProviderReplies?.set(v,C),y=this._checkLinkProviderResult(v,m,y),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(m.y,this._activeProviderReplies)})}_removeIntersectingLinks(m,g){const y=new Set;for(let v=0;v<g.size;v++){const S=g.get(v);if(S)for(let E=0;E<S.length;E++){const C=S[E],x=C.link.range.start.y<m?0:C.link.range.start.x,A=C.link.range.end.y>m?this._bufferService.cols:C.link.range.end.x;for(let D=x;D<=A;D++){if(y.has(D)){S.splice(E--,1);break}y.add(D)}}}}_checkLinkProviderResult(m,g,y){if(!this._activeProviderReplies)return y;const v=this._activeProviderReplies.get(m);let S=!1;for(let E=0;E<m;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(S=!0);if(!S&&v){const E=v.find(C=>this._linkAtPosition(C.link,g));E&&(y=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!y)for(let E=0;E<this._activeProviderReplies.size;E++){const C=this._activeProviderReplies.get(E)?.find(x=>this._linkAtPosition(x.link,g));if(C){y=!0,this._handleNewLink(C);break}}return y}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(m){if(!this._currentLink)return;const g=this._positionFromMouseEvent(m,this._element,this._mouseService);g&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,g)&&this._currentLink.link.activate(m,this._currentLink.link.text)}_clearCurrentLink(m,g){this._currentLink&&this._lastMouseEvent&&(!m||!g||this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=g)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,d.disposeArray)(this._linkCacheDisposables))}_handleNewLink(m){if(!this._lastMouseEvent)return;const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._linkAtPosition(m.link,g)&&(this._currentLink=m,this._currentLink.state={decorations:{underline:m.link.decorations===void 0||m.link.decorations.underline,pointerCursor:m.link.decorations===void 0||m.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,m.link,this._lastMouseEvent),m.link.decorations={},Object.defineProperties(m.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:y=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==y&&(this._currentLink.state.decorations.pointerCursor=y,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",y))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:y=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==y&&(this._currentLink.state.decorations.underline=y,this._currentLink.state.isHovered&&this._fireUnderlineEvent(m.link,y))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(y=>{if(!this._currentLink)return;const v=y.start===0?0:y.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+y.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(v,S),this._lastMouseEvent)){const E=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);E&&this._askForLink(E,!1)}})))}_linkHover(m,g,y){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!0),this._currentLink.state.decorations.pointerCursor&&m.classList.add("xterm-cursor-pointer")),g.hover&&g.hover(y,g.text)}_fireUnderlineEvent(m,g){const y=m.range,v=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(y.start.x-1,y.start.y-v-1,y.end.x,y.end.y-v-1,void 0);(g?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(m,g,y){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!1),this._currentLink.state.decorations.pointerCursor&&m.classList.remove("xterm-cursor-pointer")),g.leave&&g.leave(y,g.text)}_linkAtPosition(m,g){const y=m.range.start.y*this._bufferService.cols+m.range.start.x,v=m.range.end.y*this._bufferService.cols+m.range.end.x,S=g.y*this._bufferService.cols+g.x;return y<=S&&S<=v}_positionFromMouseEvent(m,g,y){const v=y.getCoords(m,g,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(m,g,y,v,S){return{x1:m,y1:g,x2:y,y2:v,cols:this._bufferService.cols,fg:S}}};a.Linkifier=p=u([c(1,b.IMouseService),c(2,b.IRenderService),c(3,_.IBufferService),c(4,b.ILinkProviderService)],p)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var u=this&&this.__decorate||function(b,p,m,g){var y,v=arguments.length,S=v<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,p,m,g);else for(var E=b.length-1;E>=0;E--)(y=b[E])&&(S=(v<3?y(S):v>3?y(p,m,S):y(p,m))||S);return v>3&&S&&Object.defineProperty(p,m,S),S},c=this&&this.__param||function(b,p){return function(m,g){p(m,g,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const h=l(511),f=l(2585);let d=a.OscLinkProvider=class{constructor(b,p,m){this._bufferService=b,this._optionsService=p,this._oscLinkService=m}provideLinks(b,p){const m=this._bufferService.buffer.lines.get(b-1);if(!m)return void p(void 0);const g=[],y=this._optionsService.rawOptions.linkHandler,v=new h.CellData,S=m.getTrimmedLength();let E=-1,C=-1,x=!1;for(let A=0;A<S;A++)if(C!==-1||m.hasContent(A)){if(m.loadCell(A,v),v.hasExtendedAttrs()&&v.extended.urlId){if(C===-1){C=A,E=v.extended.urlId;continue}x=v.extended.urlId!==E}else C!==-1&&(x=!0);if(x||C!==-1&&A===S-1){const D=this._oscLinkService.getLinkData(E)?.uri;if(D){const M={start:{x:C+1,y:b},end:{x:A+(x||A!==S-1?0:1),y:b}};let H=!1;if(!y?.allowNonHttpProtocols)try{const B=new URL(D);["http:","https:"].includes(B.protocol)||(H=!0)}catch{H=!0}H||g.push({text:D,range:M,activate:(B,$)=>y?y.activate(B,$,M):_(0,$),hover:(B,$)=>y?.hover?.(B,$,M),leave:(B,$)=>y?.leave?.(B,$,M)})}x=!1,v.hasExtendedAttrs()&&v.extended.urlId?(C=A,E=v.extended.urlId):(C=-1,E=-1)}}p(g)}};function _(b,p){if(confirm(`Do you want to navigate to ${p}?

WARNING: This link could potentially be dangerous`)){const m=window.open();if(m){try{m.opener=null}catch{}m.location.href=p}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=d=u([c(0,f.IBufferService),c(1,f.IOptionsService),c(2,f.IOscLinkService)],d)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,u){this._renderCallback=l,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,u,c){this._rowCount=c,l=l!==void 0?l:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const u=l(3614),c=l(3656),h=l(3551),f=l(9042),d=l(3730),_=l(1680),b=l(3107),p=l(5744),m=l(2950),g=l(1296),y=l(428),v=l(4269),S=l(5114),E=l(8934),C=l(3230),x=l(9312),A=l(4725),D=l(6731),M=l(8055),H=l(8969),B=l(8460),$=l(844),G=l(6114),Z=l(8437),ee=l(2584),X=l(7399),P=l(5941),I=l(9074),z=l(2585),K=l(5435),O=l(4567),J=l(779);class re extends H.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(q={}){super(q),this.browser=G,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new $.MutableDisposable),this._onCursorMove=this.register(new B.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new B.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new B.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new B.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new B.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new B.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new B.EventEmitter),this._onBlur=this.register(new B.EventEmitter),this._onA11yCharEmitter=this.register(new B.EventEmitter),this._onA11yTabEmitter=this.register(new B.EventEmitter),this._onWillOpen=this.register(new B.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(z.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(J.LinkProviderService),this._instantiationService.setService(A.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(d.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((F,ie)=>this.refresh(F,ie))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(F=>this._reportWindowsOptions(F))),this.register(this._inputHandler.onColor(F=>this._handleColorEvent(F))),this.register((0,B.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,B.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(F=>this._afterResize(F.cols,F.rows))),this.register((0,$.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(q){if(this._themeService)for(const F of q){let ie,ue="";switch(F.index){case 256:ie="foreground",ue="10";break;case 257:ie="background",ue="11";break;case 258:ie="cursor",ue="12";break;default:ie="ansi",ue="4;"+F.index}switch(F.type){case 0:const fe=M.color.toColorRGB(ie==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[ie]);this.coreService.triggerDataEvent(`${ee.C0.ESC}]${ue};${(0,P.toRgbString)(fe)}${ee.C1_ESCAPED.ST}`);break;case 1:if(ie==="ansi")this._themeService.modifyColors(me=>me.ansi[F.index]=M.channels.toColor(...F.color));else{const me=ie;this._themeService.modifyColors(Te=>Te[me]=M.channels.toColor(...F.color))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(q){q?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(O.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(q){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ee.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ee.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const q=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(q);if(!F)return;const ie=Math.min(this.buffer.x,this.cols-1),ue=this._renderService.dimensions.css.cell.height,fe=F.getWidth(ie),me=this._renderService.dimensions.css.cell.width*fe,Te=this.buffer.y*this._renderService.dimensions.css.cell.height,Fe=ie*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Fe+"px",this.textarea.style.top=Te+"px",this.textarea.style.width=me+"px",this.textarea.style.height=ue+"px",this.textarea.style.lineHeight=ue+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,c.addDisposableDomListener)(this.element,"copy",F=>{this.hasSelection()&&(0,u.copyHandler)(F,this._selectionService)}));const q=F=>(0,u.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,c.addDisposableDomListener)(this.textarea,"paste",q)),this.register((0,c.addDisposableDomListener)(this.element,"paste",q)),G.isFirefox?this.register((0,c.addDisposableDomListener)(this.element,"mousedown",F=>{F.button===2&&(0,u.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,c.addDisposableDomListener)(this.element,"contextmenu",F=>{(0,u.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),G.isLinux&&this.register((0,c.addDisposableDomListener)(this.element,"auxclick",F=>{F.button===1&&(0,u.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,c.addDisposableDomListener)(this.textarea,"keyup",q=>this._keyUp(q),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keydown",q=>this._keyDown(q),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keypress",q=>this._keyPress(q),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionupdate",q=>this._compositionHelper.compositionupdate(q))),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,c.addDisposableDomListener)(this.textarea,"input",q=>this._inputEvent(q),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(q){if(!q)throw new Error("Terminal requires a parent element.");if(q.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=q.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),q.appendChild(this.element);const F=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,c.addDisposableDomListener)(this.screenElement,"mousemove",ie=>this.updateCursorStyle(ie))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",f.promptLabel),G.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,q.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(A.ICoreBrowserService,this._coreBrowserService),this.register((0,c.addDisposableDomListener)(this.textarea,"focus",ie=>this._handleTextAreaFocus(ie))),this.register((0,c.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(A.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(A.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(A.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(A.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ie=>this._onRender.fire(ie))),this.onResize(ie=>this._renderService.resize(ie.cols,ie.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(m.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(A.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(F);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(_.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ie=>this.scrollLines(ie.amount,ie.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(A.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ie=>this.scrollLines(ie.amount,ie.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ie=>this._renderService.handleSelectionChanged(ie.start,ie.end,ie.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ie=>{this.textarea.value=ie,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ie=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(b.BufferDecorationRenderer,this.screenElement)),this.register((0,c.addDisposableDomListener)(this.element,"mousedown",ie=>this._selectionService.handleMouseDown(ie))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(O.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ie=>this._handleScreenReaderModeOptionChange(ie))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(p.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ie=>{!this._overviewRulerRenderer&&ie&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(p.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(g.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const q=this,F=this.element;function ie(me){const Te=q._mouseService.getMouseReportCoords(me,q.screenElement);if(!Te)return!1;let Fe,Je;switch(me.overrideType||me.type){case"mousemove":Je=32,me.buttons===void 0?(Fe=3,me.button!==void 0&&(Fe=me.button<3?me.button:3)):Fe=1&me.buttons?0:4&me.buttons?1:2&me.buttons?2:3;break;case"mouseup":Je=0,Fe=me.button<3?me.button:3;break;case"mousedown":Je=1,Fe=me.button<3?me.button:3;break;case"wheel":if(q._customWheelEventHandler&&q._customWheelEventHandler(me)===!1||q.viewport.getLinesScrolled(me)===0)return!1;Je=me.deltaY<0?0:1,Fe=4;break;default:return!1}return!(Je===void 0||Fe===void 0||Fe>4)&&q.coreMouseService.triggerMouseEvent({col:Te.col,row:Te.row,x:Te.x,y:Te.y,button:Fe,action:Je,ctrl:me.ctrlKey,alt:me.altKey,shift:me.shiftKey})}const ue={mouseup:null,wheel:null,mousedrag:null,mousemove:null},fe={mouseup:me=>(ie(me),me.buttons||(this._document.removeEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.removeEventListener("mousemove",ue.mousedrag)),this.cancel(me)),wheel:me=>(ie(me),this.cancel(me,!0)),mousedrag:me=>{me.buttons&&ie(me)},mousemove:me=>{me.buttons||ie(me)}};this.register(this.coreMouseService.onProtocolChange(me=>{me?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(me)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&me?ue.mousemove||(F.addEventListener("mousemove",fe.mousemove),ue.mousemove=fe.mousemove):(F.removeEventListener("mousemove",ue.mousemove),ue.mousemove=null),16&me?ue.wheel||(F.addEventListener("wheel",fe.wheel,{passive:!1}),ue.wheel=fe.wheel):(F.removeEventListener("wheel",ue.wheel),ue.wheel=null),2&me?ue.mouseup||(ue.mouseup=fe.mouseup):(this._document.removeEventListener("mouseup",ue.mouseup),ue.mouseup=null),4&me?ue.mousedrag||(ue.mousedrag=fe.mousedrag):(this._document.removeEventListener("mousemove",ue.mousedrag),ue.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,c.addDisposableDomListener)(F,"mousedown",me=>{if(me.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(me))return ie(me),ue.mouseup&&this._document.addEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.addEventListener("mousemove",ue.mousedrag),this.cancel(me)})),this.register((0,c.addDisposableDomListener)(F,"wheel",me=>{if(!ue.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(me)===!1)return!1;if(!this.buffer.hasScrollback){const Te=this.viewport.getLinesScrolled(me);if(Te===0)return;const Fe=ee.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(me.deltaY<0?"A":"B");let Je="";for(let we=0;we<Math.abs(Te);we++)Je+=Fe;return this.coreService.triggerDataEvent(Je,!0),this.cancel(me,!0)}return this.viewport.handleWheel(me)?this.cancel(me):void 0}},{passive:!1})),this.register((0,c.addDisposableDomListener)(F,"touchstart",me=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(me),this.cancel(me)},{passive:!0})),this.register((0,c.addDisposableDomListener)(F,"touchmove",me=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(me)?void 0:this.cancel(me)},{passive:!1}))}refresh(q,F){this._renderService?.refreshRows(q,F)}updateCursorStyle(q){this._selectionService?.shouldColumnSelect(q)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(q,F,ie=0){ie===1?(super.scrollLines(q,F,ie),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(q)}paste(q){(0,u.paste)(q,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(q){this._customKeyEventHandler=q}attachCustomWheelEventHandler(q){this._customWheelEventHandler=q}registerLinkProvider(q){return this._linkProviderService.registerLinkProvider(q)}registerCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(q);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(q)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(q){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+q)}registerDecoration(q){return this._decorationService.registerDecoration(q)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(q,F,ie){this._selectionService.setSelection(q,F,ie)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(q,F){this._selectionService?.selectLines(q,F)}_keyDown(q){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&q.altKey;if(!F&&!this._compositionHelper.keydown(q))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||q.key!=="Dead"&&q.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ie=(0,X.evaluateKeyboardEvent)(q,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(q),ie.type===3||ie.type===2){const ue=this.rows-1;return this.scrollLines(ie.type===2?-ue:ue),this.cancel(q,!0)}return ie.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,q)||(ie.cancel&&this.cancel(q,!0),!ie.key||!!(q.key&&!q.ctrlKey&&!q.altKey&&!q.metaKey&&q.key.length===1&&q.key.charCodeAt(0)>=65&&q.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ie.key!==ee.C0.ETX&&ie.key!==ee.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ie.key,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(ie.key,!0),!this.optionsService.rawOptions.screenReaderMode||q.altKey||q.ctrlKey?this.cancel(q,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(q,F){const ie=q.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||q.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||q.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?ie:ie&&(!F.keyCode||F.keyCode>47)}_keyUp(q){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1||(function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18}(q)||this.focus(),this.updateCursorStyle(q),this._keyPressHandled=!1)}_keyPress(q){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;if(this.cancel(q),q.charCode)F=q.charCode;else if(q.which===null||q.which===void 0)F=q.keyCode;else{if(q.which===0||q.charCode===0)return!1;F=q.which}return!(!F||(q.altKey||q.ctrlKey||q.metaKey)&&!this._isThirdLevelShift(this.browser,q)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(q){if(q.data&&q.inputType==="insertText"&&(!q.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=q.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(q),!0}return!1}resize(q,F){q!==this.cols||F!==this.rows?super.resize(q,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(q,F){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let q=1;q<this.rows;q++)this.buffer.lines.push(this.buffer.getBlankLine(Z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const q=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ee.C0.ESC+"[I"):this.coreService.triggerDataEvent(ee.C0.ESC+"[O")}_reportWindowsOptions(q){if(this._renderService)switch(q){case K.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),ie=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ee.C0.ESC}[4;${ie};${F}t`);break;case K.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ue=this._renderService.dimensions.css.cell.width.toFixed(0),fe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ee.C0.ESC}[6;${fe};${ue}t`)}}cancel(q,F){if(this.options.cancelEvents||F)return q.preventDefault(),q.stopPropagation(),!1}}a.Terminal=re},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,u=1e3){this._renderCallback=l,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,u,c){this._rowCount=c,l=l!==void 0?l:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const f=h-this._lastRefreshMs,d=this._debounceThresholdMS-f;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},d)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,u)}}},1680:function(o,a,l){var u=this&&this.__decorate||function(m,g,y,v){var S,E=arguments.length,C=E<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,g,y,v);else for(var x=m.length-1;x>=0;x--)(S=m[x])&&(C=(E<3?S(C):E>3?S(g,y,C):S(g,y))||C);return E>3&&C&&Object.defineProperty(g,y,C),C},c=this&&this.__param||function(m,g){return function(y,v){g(y,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const h=l(3656),f=l(4725),d=l(8460),_=l(844),b=l(2585);let p=a.Viewport=class extends _.Disposable{constructor(m,g,y,v,S,E,C,x){super(),this._viewportElement=m,this._scrollArea=g,this._bufferService=y,this._optionsService=v,this._charSizeService=S,this._renderService=E,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(A=>this._activeBuffer=A.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(A=>this._renderDimensions=A)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(A=>this._handleThemeChange(A))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(m){this._viewportElement.style.backgroundColor=m.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(m){if(m)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const g=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==g&&(this._lastRecordedBufferHeight=g,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const m=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==m&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=m),this._refreshAnimationFrame=null}syncScrollArea(m=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(m);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(m)}_handleScroll(m){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const g=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:g,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const m=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(m*(this._smoothScrollState.target-this._smoothScrollState.origin)),m<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(m,g){const y=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(g<0&&this._viewportElement.scrollTop!==0||g>0&&y<this._lastRecordedBufferHeight)||(m.cancelable&&m.preventDefault(),!1)}handleWheel(m){const g=this._getPixelsScrolled(m);return g!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+g:this._smoothScrollState.target+=g,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=g,this._bubbleScroll(m,g))}scrollLines(m){if(m!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const g=m*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+g,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!1})}_getPixelsScrolled(m){if(m.deltaY===0||m.shiftKey)return 0;let g=this._applyScrollModifier(m.deltaY,m);return m.deltaMode===WheelEvent.DOM_DELTA_LINE?g*=this._currentRowHeight:m.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(g*=this._currentRowHeight*this._bufferService.rows),g}getBufferElements(m,g){let y,v="";const S=[],E=g??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let x=m;x<E;x++){const A=C.get(x);if(!A)continue;const D=C.get(x+1)?.isWrapped;if(v+=A.translateToString(!D),!D||x===C.length-1){const M=document.createElement("div");M.textContent=v,S.push(M),v.length>0&&(y=M),v=""}}return{bufferElements:S,cursorElement:y}}getLinesScrolled(m){if(m.deltaY===0||m.shiftKey)return 0;let g=this._applyScrollModifier(m.deltaY,m);return m.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(g/=this._currentRowHeight+0,this._wheelPartialScroll+=g,g=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):m.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(g*=this._bufferService.rows),g}_applyScrollModifier(m,g){const y=this._optionsService.rawOptions.fastScrollModifier;return y==="alt"&&g.altKey||y==="ctrl"&&g.ctrlKey||y==="shift"&&g.shiftKey?m*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:m*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(m){this._lastTouchY=m.touches[0].pageY}handleTouchMove(m){const g=this._lastTouchY-m.touches[0].pageY;return this._lastTouchY=m.touches[0].pageY,g!==0&&(this._viewportElement.scrollTop+=g,this._bubbleScroll(m,g))}};a.Viewport=p=u([c(2,b.IBufferService),c(3,b.IOptionsService),c(4,f.ICharSizeService),c(5,f.IRenderService),c(6,f.ICoreBrowserService),c(7,f.IThemeService)],p)},3107:function(o,a,l){var u=this&&this.__decorate||function(b,p,m,g){var y,v=arguments.length,S=v<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,p,m,g);else for(var E=b.length-1;E>=0;E--)(y=b[E])&&(S=(v<3?y(S):v>3?y(p,m,S):y(p,m))||S);return v>3&&S&&Object.defineProperty(p,m,S),S},c=this&&this.__param||function(b,p){return function(m,g){p(m,g,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const h=l(4725),f=l(844),d=l(2585);let _=a.BufferDecorationRenderer=class extends f.Disposable{constructor(b,p,m,g,y){super(),this._screenElement=b,this._bufferService=p,this._coreBrowserService=m,this._decorationService=g,this._renderService=y,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const b of this._decorationService.decorations)this._renderDecoration(b);this._dimensionsChanged=!1}_renderDecoration(b){this._refreshStyle(b),this._dimensionsChanged&&this._refreshXPosition(b)}_createElement(b){const p=this._coreBrowserService.mainDocument.createElement("div");p.classList.add("xterm-decoration"),p.classList.toggle("xterm-decoration-top-layer",b?.options?.layer==="top"),p.style.width=`${Math.round((b.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,p.style.height=(b.options.height||1)*this._renderService.dimensions.css.cell.height+"px",p.style.top=(b.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",p.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const m=b.options.x??0;return m&&m>this._bufferService.cols&&(p.style.display="none"),this._refreshXPosition(b,p),p}_refreshStyle(b){const p=b.marker.line-this._bufferService.buffers.active.ydisp;if(p<0||p>=this._bufferService.rows)b.element&&(b.element.style.display="none",b.onRenderEmitter.fire(b.element));else{let m=this._decorationElements.get(b);m||(m=this._createElement(b),b.element=m,this._decorationElements.set(b,m),this._container.appendChild(m),b.onDispose(()=>{this._decorationElements.delete(b),m.remove()})),m.style.top=p*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",b.onRenderEmitter.fire(m)}}_refreshXPosition(b,p=b.element){if(!p)return;const m=b.options.x??0;(b.options.anchor||"left")==="right"?p.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":p.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(b){this._decorationElements.get(b)?.remove(),this._decorationElements.delete(b),b.dispose()}};a.BufferDecorationRenderer=_=u([c(1,d.IBufferService),c(2,h.ICoreBrowserService),c(3,d.IDecorationService),c(4,h.IRenderService)],_)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const u of this._zones)if(u.color===l.options.overviewRulerOptions.color&&u.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,l.marker.line))return;if(this._lineAdjacentToZone(u,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(u,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,u){return u>=l.startBufferLine&&u<=l.endBufferLine}_lineAdjacentToZone(l,u,c){return u>=l.startBufferLine-this._linePadding[c||"full"]&&u<=l.endBufferLine+this._linePadding[c||"full"]}_addLineToZone(l,u){l.startBufferLine=Math.min(l.startBufferLine,u),l.endBufferLine=Math.max(l.endBufferLine,u)}}},5744:function(o,a,l){var u=this&&this.__decorate||function(y,v,S,E){var C,x=arguments.length,A=x<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(y,v,S,E);else for(var D=y.length-1;D>=0;D--)(C=y[D])&&(A=(x<3?C(A):x>3?C(v,S,A):C(v,S))||A);return x>3&&A&&Object.defineProperty(v,S,A),A},c=this&&this.__param||function(y,v){return function(S,E){v(S,E,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const h=l(5871),f=l(4725),d=l(844),_=l(2585),b={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0};let g=a.OverviewRulerRenderer=class extends d.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,v,S,E,C,x,A){super(),this._viewportElement=y,this._screenElement=v,this._bufferService=S,this._decorationService=E,this._renderService=C,this._optionsService=x,this._coreBrowserService=A,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,d.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const y=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);p.full=this._canvas.width,p.left=y,p.center=v,p.right=y,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=p.left,m.right=p.left+p.center}_refreshDrawHeightConstants(){b.full=Math.round(2*this._coreBrowserService.dpr);const y=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowserService.dpr);b.left=v,b.center=v,b.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*b.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*b.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*b.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*b.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const y=this._colorZoneStore.zones;for(const v of y)v.position!=="full"&&this._renderColorZone(v);for(const v of y)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(m[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-b[y.position||"full"]/2),p[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+b[y.position||"full"]))}_queueRefresh(y,v){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=g=u([c(2,_.IBufferService),c(3,_.IDecorationService),c(4,f.IRenderService),c(5,_.IOptionsService),c(6,f.ICoreBrowserService)],g)},2950:function(o,a,l){var u=this&&this.__decorate||function(b,p,m,g){var y,v=arguments.length,S=v<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,p,m,g);else for(var E=b.length-1;E>=0;E--)(y=b[E])&&(S=(v<3?y(S):v>3?y(p,m,S):y(p,m))||S);return v>3&&S&&Object.defineProperty(p,m,S),S},c=this&&this.__param||function(b,p){return function(m,g){p(m,g,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const h=l(4725),f=l(2585),d=l(2584);let _=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(b,p,m,g,y,v){this._textarea=b,this._compositionView=p,this._bufferService=m,this._optionsService=g,this._coreService=y,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(b){this._compositionView.textContent=b.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(b){if(this._isComposing||this._isSendingComposition){if(b.keyCode===229||b.keyCode===16||b.keyCode===17||b.keyCode===18)return!1;this._finalizeComposition(!1)}return b.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(b){if(this._compositionView.classList.remove("active"),this._isComposing=!1,b){const p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let m;this._isSendingComposition=!1,p.start+=this._dataAlreadySent.length,m=this._isComposing?this._textarea.value.substring(p.start,p.end):this._textarea.value.substring(p.start),m.length>0&&this._coreService.triggerDataEvent(m,!0)}},0)}else{this._isSendingComposition=!1;const p=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(p,!0)}}_handleAnyTextareaChanges(){const b=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const p=this._textarea.value,m=p.replace(b,"");this._dataAlreadySent=m,p.length>b.length?this._coreService.triggerDataEvent(m,!0):p.length<b.length?this._coreService.triggerDataEvent(`${d.C0.DEL}`,!0):p.length===b.length&&p!==b&&this._coreService.triggerDataEvent(p,!0)}},0)}updateCompositionElements(b){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),m=this._renderService.dimensions.css.cell.height,g=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,y=p*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=y+"px",this._compositionView.style.top=g+"px",this._compositionView.style.height=m+"px",this._compositionView.style.lineHeight=m+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=y+"px",this._textarea.style.top=g+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}b||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=_=u([c(2,f.IBufferService),c(3,f.IOptionsService),c(4,f.ICoreService),c(5,h.IRenderService)],_)},9806:(o,a)=>{function l(u,c,h){const f=h.getBoundingClientRect(),d=u.getComputedStyle(h),_=parseInt(d.getPropertyValue("padding-left")),b=parseInt(d.getPropertyValue("padding-top"));return[c.clientX-f.left-_,c.clientY-f.top-b]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(u,c,h,f,d,_,b,p,m){if(!_)return;const g=l(u,c,h);return g?(g[0]=Math.ceil((g[0]+(m?b/2:0))/b),g[1]=Math.ceil(g[1]/p),g[0]=Math.min(Math.max(g[0],1),f+(m?1:0)),g[1]=Math.min(Math.max(g[1],1),d),g):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const u=l(2584);function c(p,m,g,y){const v=p-h(p,g),S=m-h(m,g),E=Math.abs(v-S)-function(C,x,A){let D=0;const M=C-h(C,A),H=x-h(x,A);for(let B=0;B<Math.abs(M-H);B++){const $=f(C,x)==="A"?-1:1;A.buffer.lines.get(M+$*B)?.isWrapped&&D++}return D}(p,m,g);return b(E,_(f(p,m),y))}function h(p,m){let g=0,y=m.buffer.lines.get(p),v=y?.isWrapped;for(;v&&p>=0&&p<m.rows;)g++,y=m.buffer.lines.get(--p),v=y?.isWrapped;return g}function f(p,m){return p>m?"A":"B"}function d(p,m,g,y,v,S){let E=p,C=m,x="";for(;E!==g||C!==y;)E+=v?1:-1,v&&E>S.cols-1?(x+=S.buffer.translateBufferLineToString(C,!1,p,E),E=0,p=0,C++):!v&&E<0&&(x+=S.buffer.translateBufferLineToString(C,!1,0,p+1),E=S.cols-1,p=E,C--);return x+S.buffer.translateBufferLineToString(C,!1,p,E)}function _(p,m){const g=m?"O":"[";return u.C0.ESC+g+p}function b(p,m){p=Math.floor(p);let g="";for(let y=0;y<p;y++)g+=m;return g}a.moveToCellSequence=function(p,m,g,y){const v=g.buffer.x,S=g.buffer.y;if(!g.buffer.hasScrollback)return function(x,A,D,M,H,B){return c(A,M,H,B).length===0?"":b(d(x,A,x,A-h(A,H),!1,H).length,_("D",B))}(v,S,0,m,g,y)+c(S,m,g,y)+function(x,A,D,M,H,B){let $;$=c(A,M,H,B).length>0?M-h(M,H):A;const G=M,Z=function(ee,X,P,I,z,K){let O;return O=c(P,I,z,K).length>0?I-h(I,z):X,ee<P&&O<=I||ee>=P&&O<I?"C":"D"}(x,A,D,M,H,B);return b(d(x,$,D,G,Z==="C",H).length,_(Z,B))}(v,S,p,m,g,y);let E;if(S===m)return E=v>p?"D":"C",b(Math.abs(v-p),_(E,y));E=S>m?"D":"C";const C=Math.abs(S-m);return b(function(x,A){return A.cols-x}(S>m?p:v,g)+(C-1)*g.cols+1+((S>m?v:p)-1),_(E,y))}},1296:function(o,a,l){var u=this&&this.__decorate||function(B,$,G,Z){var ee,X=arguments.length,P=X<3?$:Z===null?Z=Object.getOwnPropertyDescriptor($,G):Z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(B,$,G,Z);else for(var I=B.length-1;I>=0;I--)(ee=B[I])&&(P=(X<3?ee(P):X>3?ee($,G,P):ee($,G))||P);return X>3&&P&&Object.defineProperty($,G,P),P},c=this&&this.__param||function(B,$){return function(G,Z){$(G,Z,B)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const h=l(3787),f=l(2550),d=l(2223),_=l(6171),b=l(6052),p=l(4725),m=l(8055),g=l(8460),y=l(844),v=l(2585),S="xterm-dom-renderer-owner-",E="xterm-rows",C="xterm-fg-",x="xterm-bg-",A="xterm-focus",D="xterm-selection";let M=1,H=a.DomRenderer=class extends y.Disposable{constructor(B,$,G,Z,ee,X,P,I,z,K,O,J,re){super(),this._terminal=B,this._document=$,this._element=G,this._screenElement=Z,this._viewportElement=ee,this._helperContainer=X,this._linkifier2=P,this._charSizeService=z,this._optionsService=K,this._bufferService=O,this._coreBrowserService=J,this._themeService=re,this._terminalClass=M++,this._rowElements=[],this._selectionRenderModel=(0,b.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new g.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(E),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(D),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,_.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(oe=>this._injectCss(oe))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(oe=>this._handleLinkHover(oe))),this.register(this._linkifier2.onHideLinkUnderline(oe=>this._handleLinkLeave(oe))),this.register((0,y.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new f.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const B=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*B,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*B),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/B),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/B),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const G of this._rowElements)G.style.width=`${this.dimensions.css.canvas.width}px`,G.style.height=`${this.dimensions.css.cell.height}px`,G.style.lineHeight=`${this.dimensions.css.cell.height}px`,G.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const $=`${this._terminalSelector} .${E} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(B){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let $=`${this._terminalSelector} .${E} { color: ${B.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;$+=`${this._terminalSelector} .${E} .xterm-dim { color: ${m.color.multiplyOpacity(B.foreground,.5).css};}`,$+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const G=`blink_underline_${this._terminalClass}`,Z=`blink_bar_${this._terminalClass}`,ee=`blink_block_${this._terminalClass}`;$+=`@keyframes ${G} { 50% {  border-bottom-style: hidden; }}`,$+=`@keyframes ${Z} { 50% {  box-shadow: none; }}`,$+=`@keyframes ${ee} { 0% {  background-color: ${B.cursor.css};  color: ${B.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${B.cursor.css}; }}`,$+=`${this._terminalSelector} .${E}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${G} 1s step-end infinite;}${this._terminalSelector} .${E}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Z} 1s step-end infinite;}${this._terminalSelector} .${E}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${ee} 1s step-end infinite;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block { background-color: ${B.cursor.css}; color: ${B.cursorAccent.css};}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${B.cursor.css} !important; color: ${B.cursorAccent.css} !important;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${B.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${B.cursor.css} inset;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${B.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,$+=`${this._terminalSelector} .${D} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${D} div { position: absolute; background-color: ${B.selectionBackgroundOpaque.css};}${this._terminalSelector} .${D} div { position: absolute; background-color: ${B.selectionInactiveBackgroundOpaque.css};}`;for(const[X,P]of B.ansi.entries())$+=`${this._terminalSelector} .${C}${X} { color: ${P.css}; }${this._terminalSelector} .${C}${X}.xterm-dim { color: ${m.color.multiplyOpacity(P,.5).css}; }${this._terminalSelector} .${x}${X} { background-color: ${P.css}; }`;$+=`${this._terminalSelector} .${C}${d.INVERTED_DEFAULT_COLOR} { color: ${m.color.opaque(B.background).css}; }${this._terminalSelector} .${C}${d.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${m.color.multiplyOpacity(m.color.opaque(B.background),.5).css}; }${this._terminalSelector} .${x}${d.INVERTED_DEFAULT_COLOR} { background-color: ${B.foreground.css}; }`,this._themeStyleElement.textContent=$}_setDefaultSpacing(){const B=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${B}px`,this._rowFactory.defaultSpacing=B}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(B,$){for(let G=this._rowElements.length;G<=$;G++){const Z=this._document.createElement("div");this._rowContainer.appendChild(Z),this._rowElements.push(Z)}for(;this._rowElements.length>$;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(B,$){this._refreshRowElements(B,$),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(A),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(A),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(B,$,G){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(B,$,G),this.renderRows(0,this._bufferService.rows-1),!B||!$)return;this._selectionRenderModel.update(this._terminal,B,$,G);const Z=this._selectionRenderModel.viewportStartRow,ee=this._selectionRenderModel.viewportEndRow,X=this._selectionRenderModel.viewportCappedStartRow,P=this._selectionRenderModel.viewportCappedEndRow;if(X>=this._bufferService.rows||P<0)return;const I=this._document.createDocumentFragment();if(G){const z=B[0]>$[0];I.appendChild(this._createSelectionElement(X,z?$[0]:B[0],z?B[0]:$[0],P-X+1))}else{const z=Z===X?B[0]:0,K=X===ee?$[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(X,z,K));const O=P-X-1;if(I.appendChild(this._createSelectionElement(X+1,0,this._bufferService.cols,O)),X!==P){const J=ee===P?$[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(P,0,J))}}this._selectionContainer.appendChild(I)}_createSelectionElement(B,$,G,Z=1){const ee=this._document.createElement("div"),X=$*this.dimensions.css.cell.width;let P=this.dimensions.css.cell.width*(G-$);return X+P>this.dimensions.css.canvas.width&&(P=this.dimensions.css.canvas.width-X),ee.style.height=Z*this.dimensions.css.cell.height+"px",ee.style.top=B*this.dimensions.css.cell.height+"px",ee.style.left=`${X}px`,ee.style.width=`${P}px`,ee}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const B of this._rowElements)B.replaceChildren()}renderRows(B,$){const G=this._bufferService.buffer,Z=G.ybase+G.y,ee=Math.min(G.x,this._bufferService.cols-1),X=this._optionsService.rawOptions.cursorBlink,P=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let z=B;z<=$;z++){const K=z+G.ydisp,O=this._rowElements[z],J=G.lines.get(K);if(!O||!J)break;O.replaceChildren(...this._rowFactory.createRow(J,K,K===Z,P,I,ee,X,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!0)}_handleLinkLeave(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!1)}_setCellUnderline(B,$,G,Z,ee,X){G<0&&(B=0),Z<0&&($=0);const P=this._bufferService.rows-1;G=Math.max(Math.min(G,P),0),Z=Math.max(Math.min(Z,P),0),ee=Math.min(ee,this._bufferService.cols);const I=this._bufferService.buffer,z=I.ybase+I.y,K=Math.min(I.x,ee-1),O=this._optionsService.rawOptions.cursorBlink,J=this._optionsService.rawOptions.cursorStyle,re=this._optionsService.rawOptions.cursorInactiveStyle;for(let oe=G;oe<=Z;++oe){const q=oe+I.ydisp,F=this._rowElements[oe],ie=I.lines.get(q);if(!F||!ie)break;F.replaceChildren(...this._rowFactory.createRow(ie,q,q===z,J,re,K,O,this.dimensions.css.cell.width,this._widthCache,X?oe===G?B:0:-1,X?(oe===Z?$:ee)-1:-1))}}};a.DomRenderer=H=u([c(7,v.IInstantiationService),c(8,p.ICharSizeService),c(9,v.IOptionsService),c(10,v.IBufferService),c(11,p.ICoreBrowserService),c(12,p.IThemeService)],H)},3787:function(o,a,l){var u=this&&this.__decorate||function(E,C,x,A){var D,M=arguments.length,H=M<3?C:A===null?A=Object.getOwnPropertyDescriptor(C,x):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(E,C,x,A);else for(var B=E.length-1;B>=0;B--)(D=E[B])&&(H=(M<3?D(H):M>3?D(C,x,H):D(C,x))||H);return M>3&&H&&Object.defineProperty(C,x,H),H},c=this&&this.__param||function(E,C){return function(x,A){C(x,A,E)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const h=l(2223),f=l(643),d=l(511),_=l(2585),b=l(8055),p=l(4725),m=l(4269),g=l(6171),y=l(3734);let v=a.DomRendererRowFactory=class{constructor(E,C,x,A,D,M,H){this._document=E,this._characterJoinerService=C,this._optionsService=x,this._coreBrowserService=A,this._coreService=D,this._decorationService=M,this._themeService=H,this._workCell=new d.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,C,x){this._selectionStart=E,this._selectionEnd=C,this._columnSelectMode=x}createRow(E,C,x,A,D,M,H,B,$,G,Z){const ee=[],X=this._characterJoinerService.getJoinedCharacters(C),P=this._themeService.colors;let I,z=E.getNoBgTrimmedLength();x&&z<M+1&&(z=M+1);let K=0,O="",J=0,re=0,oe=0,q=!1,F=0,ie=!1,ue=0;const fe=[],me=G!==-1&&Z!==-1;for(let Te=0;Te<z;Te++){E.loadCell(Te,this._workCell);let Fe=this._workCell.getWidth();if(Fe===0)continue;let Je=!1,we=Te,de=this._workCell;if(X.length>0&&Te===X[0][0]){Je=!0;const k=X.shift();de=new m.JoinedCellData(this._workCell,E.translateToString(!0,k[0],k[1]),k[1]-k[0]),we=k[1]-1,Fe=de.getWidth()}const ke=this._isCellInSelection(Te,C),Pe=x&&Te===M,Oe=me&&Te>=G&&Te<=Z;let Ke=!1;this._decorationService.forEachDecorationAtCell(Te,C,void 0,k=>{Ke=!0});let Ue=de.getChars()||f.WHITESPACE_CELL_CHAR;if(Ue===" "&&(de.isUnderline()||de.isOverline())&&(Ue=""),ue=Fe*B-$.get(Ue,de.isBold(),de.isItalic()),I){if(K&&(ke&&ie||!ke&&!ie&&de.bg===J)&&(ke&&ie&&P.selectionForeground||de.fg===re)&&de.extended.ext===oe&&Oe===q&&ue===F&&!Pe&&!Je&&!Ke){de.isInvisible()?O+=f.WHITESPACE_CELL_CHAR:O+=Ue,K++;continue}K&&(I.textContent=O),I=this._document.createElement("span"),K=0,O=""}else I=this._document.createElement("span");if(J=de.bg,re=de.fg,oe=de.extended.ext,q=Oe,F=ue,ie=ke,Je&&M>=Te&&M<=we&&(M=Te),!this._coreService.isCursorHidden&&Pe&&this._coreService.isCursorInitialized){if(fe.push("xterm-cursor"),this._coreBrowserService.isFocused)H&&fe.push("xterm-cursor-blink"),fe.push(A==="bar"?"xterm-cursor-bar":A==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":fe.push("xterm-cursor-outline");break;case"block":fe.push("xterm-cursor-block");break;case"bar":fe.push("xterm-cursor-bar");break;case"underline":fe.push("xterm-cursor-underline")}}if(de.isBold()&&fe.push("xterm-bold"),de.isItalic()&&fe.push("xterm-italic"),de.isDim()&&fe.push("xterm-dim"),O=de.isInvisible()?f.WHITESPACE_CELL_CHAR:de.getChars()||f.WHITESPACE_CELL_CHAR,de.isUnderline()&&(fe.push(`xterm-underline-${de.extended.underlineStyle}`),O===" "&&(O=""),!de.isUnderlineColorDefault()))if(de.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${y.AttributeData.toColorRGB(de.getUnderlineColor()).join(",")})`;else{let k=de.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&de.isBold()&&k<8&&(k+=8),I.style.textDecorationColor=P.ansi[k].css}de.isOverline()&&(fe.push("xterm-overline"),O===" "&&(O="")),de.isStrikethrough()&&fe.push("xterm-strikethrough"),Oe&&(I.style.textDecoration="underline");let Ne=de.getFgColor(),at=de.getFgColorMode(),nt=de.getBgColor(),ae=de.getBgColorMode();const _e=!!de.isInverse();if(_e){const k=Ne;Ne=nt,nt=k;const V=at;at=ae,ae=V}let Ce,De,N,T=!1;switch(this._decorationService.forEachDecorationAtCell(Te,C,void 0,k=>{k.options.layer!=="top"&&T||(k.backgroundColorRGB&&(ae=50331648,nt=k.backgroundColorRGB.rgba>>8&16777215,Ce=k.backgroundColorRGB),k.foregroundColorRGB&&(at=50331648,Ne=k.foregroundColorRGB.rgba>>8&16777215,De=k.foregroundColorRGB),T=k.options.layer==="top")}),!T&&ke&&(Ce=this._coreBrowserService.isFocused?P.selectionBackgroundOpaque:P.selectionInactiveBackgroundOpaque,nt=Ce.rgba>>8&16777215,ae=50331648,T=!0,P.selectionForeground&&(at=50331648,Ne=P.selectionForeground.rgba>>8&16777215,De=P.selectionForeground)),T&&fe.push("xterm-decoration-top"),ae){case 16777216:case 33554432:N=P.ansi[nt],fe.push(`xterm-bg-${nt}`);break;case 50331648:N=b.channels.toColor(nt>>16,nt>>8&255,255&nt),this._addStyle(I,`background-color:#${S((nt>>>0).toString(16),"0",6)}`);break;default:_e?(N=P.foreground,fe.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):N=P.background}switch(Ce||de.isDim()&&(Ce=b.color.multiplyOpacity(N,.5)),at){case 16777216:case 33554432:de.isBold()&&Ne<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ne+=8),this._applyMinimumContrast(I,N,P.ansi[Ne],de,Ce,void 0)||fe.push(`xterm-fg-${Ne}`);break;case 50331648:const k=b.channels.toColor(Ne>>16&255,Ne>>8&255,255&Ne);this._applyMinimumContrast(I,N,k,de,Ce,De)||this._addStyle(I,`color:#${S(Ne.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,N,P.foreground,de,Ce,De)||_e&&fe.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}fe.length&&(I.className=fe.join(" "),fe.length=0),Pe||Je||Ke?I.textContent=O:K++,ue!==this.defaultSpacing&&(I.style.letterSpacing=`${ue}px`),ee.push(I),Te=we}return I&&K&&(I.textContent=O),ee}_applyMinimumContrast(E,C,x,A,D,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,g.treatGlyphAsBackgroundColor)(A.getCode()))return!1;const H=this._getContrastCache(A);let B;if(D||M||(B=H.getColor(C.rgba,x.rgba)),B===void 0){const $=this._optionsService.rawOptions.minimumContrastRatio/(A.isDim()?2:1);B=b.color.ensureContrastRatio(D||C,M||x,$),H.setColor((D||C).rgba,(M||x).rgba,B??null)}return!!B&&(this._addStyle(E,`color:${B.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,C){E.setAttribute("style",`${E.getAttribute("style")||""}${C};`)}_isCellInSelection(E,C){const x=this._selectionStart,A=this._selectionEnd;return!(!x||!A)&&(this._columnSelectMode?x[0]<=A[0]?E>=x[0]&&C>=x[1]&&E<A[0]&&C<=A[1]:E<x[0]&&C>=x[1]&&E>=A[0]&&C<=A[1]:C>x[1]&&C<A[1]||x[1]===A[1]&&C===x[1]&&E>=x[0]&&E<A[0]||x[1]<A[1]&&C===A[1]&&E<A[0]||x[1]<A[1]&&C===x[1]&&E>=x[0])}};function S(E,C,x){for(;E.length<x;)E=C+E;return E}a.DomRendererRowFactory=v=u([c(1,p.ICharacterJoinerService),c(2,_.IOptionsService),c(3,p.ICoreBrowserService),c(4,_.ICoreService),c(5,_.IDecorationService),c(6,p.IThemeService)],v)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const c=l.createElement("span");c.classList.add("xterm-char-measure-element");const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontStyle="italic";const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold",d.style.fontStyle="italic",this._measureElements=[c,h,f,d],this._container.appendChild(c),this._container.appendChild(h),this._container.appendChild(f),this._container.appendChild(d),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,u,c,h){l===this._font&&u===this._fontSize&&c===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=u,this._weight=c,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${c}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${c}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,u,c){let h=0;if(!u&&!c&&l.length===1&&(h=l.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const _=this._measure(l,0);return _>0&&(this._flat[h]=_),_}let f=l;u&&(f+="B"),c&&(f+="I");let d=this._holey.get(f);if(d===void 0){let _=0;u&&(_|=1),c&&(_|=2),d=this._measure(l,_),d>0&&this._holey.set(f,d)}return d}_measure(l,u){const c=this._measureElements[u];return c.textContent=l.repeat(32),c.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const u=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(c){return 57508<=c&&c<=57558}function u(c){return c>=128512&&c<=128591||c>=127744&&c<=128511||c>=128640&&c<=128767||c>=9728&&c<=9983||c>=9984&&c<=10175||c>=65024&&c<=65039||c>=129280&&c<=129535||c>=127462&&c<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},a.isEmoji=u,a.allowRescaling=function(c,h,f,d){return h===1&&f>Math.ceil(1.5*d)&&c!==void 0&&c>255&&!u(c)&&!l(c)&&!function(_){return 57344<=_&&_<=63743}(c)},a.treatGlyphAsBackgroundColor=function(c){return l(c)||function(h){return 9472<=h&&h<=9631}(c)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(c,h,f=0){return(c-(2*Math.round(h)-f))%(2*Math.round(h))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(c,h,f,d=!1){if(this.selectionStart=h,this.selectionEnd=f,!h||!f||h[0]===f[0]&&h[1]===f[1])return void this.clear();const _=c.buffers.active.ydisp,b=h[1]-_,p=f[1]-_,m=Math.max(b,0),g=Math.min(p,c.rows-1);m>=c.rows||g<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=d,this.viewportStartRow=b,this.viewportEndRow=p,this.viewportCappedStartRow=m,this.viewportCappedEndRow=g,this.startCol=h[0],this.endCol=f[0])}isCellSelected(c,h,f){return!!this.hasSelection&&(f-=c.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&f>=this.viewportCappedStartRow&&h<this.endCol&&f<=this.viewportCappedEndRow:h<this.startCol&&f>=this.viewportCappedStartRow&&h>=this.endCol&&f<=this.viewportCappedEndRow:f>this.viewportStartRow&&f<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&f===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportStartRow&&h>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,u=this.selectionEnd;return!(!l||!u)&&(l[1]>u[1]||l[1]===u[1]&&l[0]>u[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var u=this&&this.__decorate||function(g,y,v,S){var E,C=arguments.length,x=C<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,y,v,S);else for(var A=g.length-1;A>=0;A--)(E=g[A])&&(x=(C<3?E(x):C>3?E(y,v,x):E(y,v))||x);return C>3&&x&&Object.defineProperty(y,v,x),x},c=this&&this.__param||function(g,y){return function(v,S){y(v,S,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const h=l(2585),f=l(8460),d=l(844);let _=a.CharSizeService=class extends d.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(g,y,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new f.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new m(this._optionsService))}catch{this._measureStrategy=this.register(new p(g,y,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const g=this._measureStrategy.measure();g.width===this.width&&g.height===this.height||(this.width=g.width,this.height=g.height,this._onCharSizeChange.fire())}};a.CharSizeService=_=u([c(2,h.IOptionsService)],_);class b extends d.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(y,v){y!==void 0&&y>0&&v!==void 0&&v>0&&(this._result.width=y,this._result.height=v)}}class p extends b{constructor(y,v,S){super(),this._document=y,this._parentElement=v,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class m extends b{constructor(y){super(),this._optionsService=y,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const y=this._ctx.measureText("W");return this._validateAndSet(y.width,y.fontBoundingBoxAscent+y.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var u=this&&this.__decorate||function(m,g,y,v){var S,E=arguments.length,C=E<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,g,y,v);else for(var x=m.length-1;x>=0;x--)(S=m[x])&&(C=(E<3?S(C):E>3?S(g,y,C):S(g,y))||C);return E>3&&C&&Object.defineProperty(g,y,C),C},c=this&&this.__param||function(m,g){return function(y,v){g(y,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const h=l(3734),f=l(643),d=l(511),_=l(2585);class b extends h.AttributeData{constructor(g,y,v){super(),this.content=0,this.combinedData="",this.fg=g.fg,this.bg=g.bg,this.combinedData=y,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(g){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=b;let p=a.CharacterJoinerService=class kL{constructor(g){this._bufferService=g,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new d.CellData}register(g){const y={id:this._nextCharacterJoinerId++,handler:g};return this._characterJoiners.push(y),y.id}deregister(g){for(let y=0;y<this._characterJoiners.length;y++)if(this._characterJoiners[y].id===g)return this._characterJoiners.splice(y,1),!0;return!1}getJoinedCharacters(g){if(this._characterJoiners.length===0)return[];const y=this._bufferService.buffer.lines.get(g);if(!y||y.length===0)return[];const v=[],S=y.translateToString(!0);let E=0,C=0,x=0,A=y.getFg(0),D=y.getBg(0);for(let M=0;M<y.getTrimmedLength();M++)if(y.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==A||this._workCell.bg!==D){if(M-E>1){const H=this._getJoinedRanges(S,x,C,y,E);for(let B=0;B<H.length;B++)v.push(H[B])}E=M,x=C,A=this._workCell.fg,D=this._workCell.bg}C+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const M=this._getJoinedRanges(S,x,C,y,E);for(let H=0;H<M.length;H++)v.push(M[H])}return v}_getJoinedRanges(g,y,v,S,E){const C=g.substring(y,v);let x=[];try{x=this._characterJoiners[0].handler(C)}catch(A){console.error(A)}for(let A=1;A<this._characterJoiners.length;A++)try{const D=this._characterJoiners[A].handler(C);for(let M=0;M<D.length;M++)kL._mergeRanges(x,D[M])}catch(D){console.error(D)}return this._stringRangesToCellRanges(x,S,E),x}_stringRangesToCellRanges(g,y,v){let S=0,E=!1,C=0,x=g[S];if(x){for(let A=v;A<this._bufferService.cols;A++){const D=y.getWidth(A),M=y.getString(A).length||f.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!E&&x[0]<=C&&(x[0]=A,E=!0),x[1]<=C){if(x[1]=A,x=g[++S],!x)break;x[0]<=C?(x[0]=A,E=!0):E=!1}C+=M}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(g,y){let v=!1;for(let S=0;S<g.length;S++){const E=g[S];if(v){if(y[1]<=E[0])return g[S-1][1]=y[1],g;if(y[1]<=E[1])return g[S-1][1]=Math.max(y[1],E[1]),g.splice(S,1),g;g.splice(S,1),S--}else{if(y[1]<=E[0])return g.splice(S,0,y),g;if(y[1]<=E[1])return E[0]=Math.min(y[0],E[0]),g;y[0]<E[1]&&(E[0]=Math.min(y[0],E[0]),v=!0)}}return v?g[g.length-1][1]=y[1]:g.push(y),g}};a.CharacterJoinerService=p=u([c(0,_.IBufferService)],p)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const u=l(844),c=l(8460),h=l(3656);class f extends u.Disposable{constructor(b,p,m){super(),this._textarea=b,this._window=p,this.mainDocument=m,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new d(this._window),this._onDprChange=this.register(new c.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new c.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(g=>this._screenDprMonitor.setWindow(g))),this.register((0,c.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(b){this._window!==b&&(this._window=b,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=f;class d extends u.Disposable{constructor(b){super(),this._parentWindow=b,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new c.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(b){this._parentWindow=b,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const u=l(844);class c extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(f){return this.linkProviders.push(f),{dispose:()=>{const d=this.linkProviders.indexOf(f);d!==-1&&this.linkProviders.splice(d,1)}}}}a.LinkProviderService=c},8934:function(o,a,l){var u=this&&this.__decorate||function(_,b,p,m){var g,y=arguments.length,v=y<3?b:m===null?m=Object.getOwnPropertyDescriptor(b,p):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(_,b,p,m);else for(var S=_.length-1;S>=0;S--)(g=_[S])&&(v=(y<3?g(v):y>3?g(b,p,v):g(b,p))||v);return y>3&&v&&Object.defineProperty(b,p,v),v},c=this&&this.__param||function(_,b){return function(p,m){b(p,m,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const h=l(4725),f=l(9806);let d=a.MouseService=class{constructor(_,b){this._renderService=_,this._charSizeService=b}getCoords(_,b,p,m,g){return(0,f.getCoords)(window,_,b,p,m,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,g)}getMouseReportCoords(_,b){const p=(0,f.getCoordsRelativeToElement)(window,_,b);if(this._charSizeService.hasValidSize)return p[0]=Math.min(Math.max(p[0],0),this._renderService.dimensions.css.canvas.width-1),p[1]=Math.min(Math.max(p[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(p[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(p[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(p[0]),y:Math.floor(p[1])}}};a.MouseService=d=u([c(0,h.IRenderService),c(1,h.ICharSizeService)],d)},3230:function(o,a,l){var u=this&&this.__decorate||function(g,y,v,S){var E,C=arguments.length,x=C<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,y,v,S);else for(var A=g.length-1;A>=0;A--)(E=g[A])&&(x=(C<3?E(x):C>3?E(y,v,x):E(y,v))||x);return C>3&&x&&Object.defineProperty(y,v,x),x},c=this&&this.__param||function(g,y){return function(v,S){y(v,S,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const h=l(6193),f=l(4725),d=l(8460),_=l(844),b=l(7226),p=l(2585);let m=a.RenderService=class extends _.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,y,v,S,E,C,x,A){super(),this._rowCount=g,this._charSizeService=S,this._renderer=this.register(new _.MutableDisposable),this._pausedResizeTask=new b.DebouncedIdleTask,this._observerDisposable=this.register(new _.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((D,M)=>this._renderRows(D,M),x),this.register(this._renderDebouncer),this.register(x.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(E.onDecorationRegistered(()=>this._fullRefresh())),this.register(E.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register(A.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(x.window,y),this.register(x.onWindowChange(D=>this._registerIntersectionObserver(D,y)))}_registerIntersectionObserver(g,y){if("IntersectionObserver"in g){const v=new g.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});v.observe(y),this._observerDisposable.value=(0,_.toDisposable)(()=>v.disconnect())}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,y,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,y,this._rowCount))}_renderRows(g,y){this._renderer.value&&(g=Math.min(g,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(g,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:y}),this._onRender.fire({start:g,end:y}),this._isNextRenderRedrawOnly=!0)}resize(g,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value&&(this._renderer.value.onRequestRedraw(y=>this.refreshRows(y.start,y.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(g,y)):this._renderer.value.handleResize(g,y),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(g,y,v){this._selectionState.start=g,this._selectionState.end=y,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(g,y,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=m=u([c(2,p.IOptionsService),c(3,f.ICharSizeService),c(4,p.IDecorationService),c(5,p.IBufferService),c(6,f.ICoreBrowserService),c(7,f.IThemeService)],m)},9312:function(o,a,l){var u=this&&this.__decorate||function(x,A,D,M){var H,B=arguments.length,$=B<3?A:M===null?M=Object.getOwnPropertyDescriptor(A,D):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(x,A,D,M);else for(var G=x.length-1;G>=0;G--)(H=x[G])&&($=(B<3?H($):B>3?H(A,D,$):H(A,D))||$);return B>3&&$&&Object.defineProperty(A,D,$),$},c=this&&this.__param||function(x,A){return function(D,M){A(D,M,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const h=l(9806),f=l(9504),d=l(456),_=l(4725),b=l(8460),p=l(844),m=l(6114),g=l(4841),y=l(511),v=l(2585),S="",E=new RegExp(S,"g");let C=a.SelectionService=class extends p.Disposable{constructor(x,A,D,M,H,B,$,G,Z){super(),this._element=x,this._screenElement=A,this._linkifier=D,this._bufferService=M,this._coreService=H,this._mouseService=B,this._optionsService=$,this._renderService=G,this._coreBrowserService=Z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new y.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new b.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new b.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new b.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ee=>this._handleMouseMove(ee),this._mouseUpListener=ee=>this._handleMouseUp(ee),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(ee=>this._handleTrim(ee)),this.register(this._bufferService.buffers.onBufferActivate(ee=>this._handleBufferActivate(ee))),this.enable(),this._model=new d.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,p.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!x||!A||x[0]===A[0]&&x[1]===A[1])}get selectionText(){const x=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;if(!x||!A)return"";const D=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(x[0]===A[0])return"";const H=x[0]<A[0]?x[0]:A[0],B=x[0]<A[0]?A[0]:x[0];for(let $=x[1];$<=A[1];$++){const G=D.translateBufferLineToString($,!0,H,B);M.push(G)}}else{const H=x[1]===A[1]?A[0]:void 0;M.push(D.translateBufferLineToString(x[1],!0,x[0],H));for(let B=x[1]+1;B<=A[1]-1;B++){const $=D.lines.get(B),G=D.translateBufferLineToString(B,!0);$?.isWrapped?M[M.length-1]+=G:M.push(G)}if(x[1]!==A[1]){const B=D.lines.get(A[1]),$=D.translateBufferLineToString(A[1],!0,0,A[0]);B&&B.isWrapped?M[M.length-1]+=$:M.push($)}}return M.map(H=>H.replace(E," ")).join(m.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),m.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(x){const A=this._getMouseBufferCoords(x),D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(D&&M&&A)&&this._areCoordsInSelection(A,D,M)}isCellInSelection(x,A){const D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!D||!M)&&this._areCoordsInSelection([x,A],D,M)}_areCoordsInSelection(x,A,D){return x[1]>A[1]&&x[1]<D[1]||A[1]===D[1]&&x[1]===A[1]&&x[0]>=A[0]&&x[0]<D[0]||A[1]<D[1]&&x[1]===D[1]&&x[0]<D[0]||A[1]<D[1]&&x[1]===A[1]&&x[0]>=A[0]}_selectWordAtCursor(x,A){const D=this._linkifier.currentLink?.link?.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,g.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(x);return!!M&&(this._selectWordAt(M,A),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,A){this._model.clearSelection(),x=Math.max(x,0),A=Math.min(A,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,A],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const A=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(A)return A[0]--,A[1]--,A[1]+=this._bufferService.buffer.ydisp,A}_getMouseEventScrollAmount(x){let A=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return A>=0&&A<=D?0:(A>D&&(A-=D),A=Math.min(Math.max(A,-50),50),A/=50,A/Math.abs(A)+Math.round(14*A))}shouldForceSelection(x){return m.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(x.button!==2||!this.hasSelection)&&x.button===0){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):x.detail===1?this._handleSingleClick(x):x.detail===2?this._handleDoubleClick(x):x.detail===3&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const A=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);A&&A.length!==this._model.selectionStart[0]&&A.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const A=this._getMouseBufferCoords(x);A&&(this._activeSelectionMode=2,this._selectLineAt(A[1]))}shouldColumnSelect(x){return x.altKey&&!(m.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const A=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const M=D.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}A&&A[0]===this._model.selectionEnd[0]&&A[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const A=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&A<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const M=(0,f.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,A=this._model.finalSelectionEnd,D=!(!x||!A||x[0]===A[0]&&x[1]===A[1]);D?x&&A&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&A[0]===this._oldSelectionEnd[0]&&A[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,A,D)):this._oldHasSelection&&this._fireOnSelectionChange(x,A,D)}_fireOnSelectionChange(x,A,D){this._oldSelectionStart=x,this._oldSelectionEnd=A,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(A=>this._handleTrim(A))}_convertViewportColToCharacterIndex(x,A){let D=A;for(let M=0;A>=M;M++){const H=x.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:H>1&&A!==M&&(D+=H-1)}return D}setSelection(x,A,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,A],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,A,D=!0,M=!0){if(x[0]>=this._bufferService.cols)return;const H=this._bufferService.buffer,B=H.lines.get(x[1]);if(!B)return;const $=H.translateBufferLineToString(x[1],!1);let G=this._convertViewportColToCharacterIndex(B,x[0]),Z=G;const ee=x[0]-G;let X=0,P=0,I=0,z=0;if($.charAt(G)===" "){for(;G>0&&$.charAt(G-1)===" ";)G--;for(;Z<$.length&&$.charAt(Z+1)===" ";)Z++}else{let J=x[0],re=x[0];B.getWidth(J)===0&&(X++,J--),B.getWidth(re)===2&&(P++,re++);const oe=B.getString(re).length;for(oe>1&&(z+=oe-1,Z+=oe-1);J>0&&G>0&&!this._isCharWordSeparator(B.loadCell(J-1,this._workCell));){B.loadCell(J-1,this._workCell);const q=this._workCell.getChars().length;this._workCell.getWidth()===0?(X++,J--):q>1&&(I+=q-1,G-=q-1),G--,J--}for(;re<B.length&&Z+1<$.length&&!this._isCharWordSeparator(B.loadCell(re+1,this._workCell));){B.loadCell(re+1,this._workCell);const q=this._workCell.getChars().length;this._workCell.getWidth()===2?(P++,re++):q>1&&(z+=q-1,Z+=q-1),Z++,re++}}Z++;let K=G+ee-X+I,O=Math.min(this._bufferService.cols,Z-G+X+P-I-z);if(A||$.slice(G,Z).trim()!==""){if(D&&K===0&&B.getCodePoint(0)!==32){const J=H.lines.get(x[1]-1);if(J&&B.isWrapped&&J.getCodePoint(this._bufferService.cols-1)!==32){const re=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(re){const oe=this._bufferService.cols-re.start;K-=oe,O+=oe}}}if(M&&K+O===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const J=H.lines.get(x[1]+1);if(J?.isWrapped&&J.getCodePoint(0)!==32){const re=this._getWordAt([0,x[1]+1],!1,!1,!0);re&&(O+=re.length)}}return{start:K,length:O}}}_selectWordAt(x,A){const D=this._getWordAt(x,A);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[D.start,x[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(x){const A=this._getWordAt(x,!0);if(A){let D=x[1];for(;A.start<0;)A.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;A.start+A.length>this._bufferService.cols;)A.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?A.start:A.start+A.length,D]}}_isCharWordSeparator(x){return x.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const A=this._bufferService.buffer.getWrappedRangeForLine(x),D={start:{x:0,y:A.first},end:{x:this._bufferService.cols-1,y:A.last}};this._model.selectionStart=[0,A.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,g.getRangeLength)(D,this._bufferService.cols)}};a.SelectionService=C=u([c(3,v.IBufferService),c(4,v.ICoreService),c(5,_.IMouseService),c(6,v.IOptionsService),c(7,_.IRenderService),c(8,_.ICoreBrowserService)],C)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const u=l(8343);a.ICharSizeService=(0,u.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),a.IMouseService=(0,u.createDecorator)("MouseService"),a.IRenderService=(0,u.createDecorator)("RenderService"),a.ISelectionService=(0,u.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,u.createDecorator)("ThemeService"),a.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(o,a,l){var u=this&&this.__decorate||function(C,x,A,D){var M,H=arguments.length,B=H<3?x:D===null?D=Object.getOwnPropertyDescriptor(x,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(C,x,A,D);else for(var $=C.length-1;$>=0;$--)(M=C[$])&&(B=(H<3?M(B):H>3?M(x,A,B):M(x,A))||B);return H>3&&B&&Object.defineProperty(x,A,B),B},c=this&&this.__param||function(C,x){return function(A,D){x(A,D,C)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),f=l(8055),d=l(8460),_=l(844),b=l(2585),p=f.css.toColor("#ffffff"),m=f.css.toColor("#000000"),g=f.css.toColor("#ffffff"),y=f.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let A=0;A<216;A++){const D=x[A/36%6|0],M=x[A/6%6|0],H=x[A%6];C.push({css:f.channels.toCss(D,M,H),rgba:f.channels.toRgba(D,M,H)})}for(let A=0;A<24;A++){const D=8+10*A;C.push({css:f.channels.toCss(D,D,D),rgba:f.channels.toRgba(D,D,D)})}return C})());let S=a.ThemeService=class extends _.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new d.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:p,background:m,cursor:g,cursorAccent:y,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:f.color.blend(m,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:f.color.blend(m,v),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const x=this._colors;if(x.foreground=E(C.foreground,p),x.background=E(C.background,m),x.cursor=E(C.cursor,g),x.cursorAccent=E(C.cursorAccent,y),x.selectionBackgroundTransparent=E(C.selectionBackground,v),x.selectionBackgroundOpaque=f.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=E(C.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=f.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=C.selectionForeground?E(C.selectionForeground,f.NULL_COLOR):void 0,x.selectionForeground===f.NULL_COLOR&&(x.selectionForeground=void 0),f.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=f.color.opacity(x.selectionBackgroundTransparent,.3)),f.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=f.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=a.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=E(C.black,a.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=E(C.red,a.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=E(C.green,a.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=E(C.yellow,a.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=E(C.blue,a.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=E(C.magenta,a.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=E(C.cyan,a.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=E(C.white,a.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=E(C.brightBlack,a.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=E(C.brightRed,a.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=E(C.brightGreen,a.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=E(C.brightYellow,a.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=E(C.brightBlue,a.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=E(C.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=E(C.brightCyan,a.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=E(C.brightWhite,a.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const A=Math.min(x.ansi.length-16,C.extendedAnsi.length);for(let D=0;D<A;D++)x.ansi[D+16]=E(C.extendedAnsi[D],a.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(C,x){if(C!==void 0)try{return f.css.toColor(C)}catch{}return x}a.ThemeService=S=u([c(0,b.IOptionsService)],S)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const u=l(8460),c=l(844);class h extends c.Disposable{constructor(d){super(),this._maxLength=d,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(d){if(this._maxLength===d)return;const _=new Array(d);for(let b=0;b<Math.min(d,this.length);b++)_[b]=this._array[this._getCyclicIndex(b)];this._array=_,this._maxLength=d,this._startIndex=0}get length(){return this._length}set length(d){if(d>this._length)for(let _=this._length;_<d;_++)this._array[_]=void 0;this._length=d}get(d){return this._array[this._getCyclicIndex(d)]}set(d,_){this._array[this._getCyclicIndex(d)]=_}push(d){this._array[this._getCyclicIndex(this._length)]=d,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(d,_,...b){if(_){for(let p=d;p<this._length-_;p++)this._array[this._getCyclicIndex(p)]=this._array[this._getCyclicIndex(p+_)];this._length-=_,this.onDeleteEmitter.fire({index:d,amount:_})}for(let p=this._length-1;p>=d;p--)this._array[this._getCyclicIndex(p+b.length)]=this._array[this._getCyclicIndex(p)];for(let p=0;p<b.length;p++)this._array[this._getCyclicIndex(d+p)]=b[p];if(b.length&&this.onInsertEmitter.fire({index:d,amount:b.length}),this._length+b.length>this._maxLength){const p=this._length+b.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=b.length}trimStart(d){d>this._length&&(d=this._length),this._startIndex+=d,this._length-=d,this.onTrimEmitter.fire(d)}shiftElements(d,_,b){if(!(_<=0)){if(d<0||d>=this._length)throw new Error("start argument out of range");if(d+b<0)throw new Error("Cannot shift elements in list beyond index 0");if(b>0){for(let m=_-1;m>=0;m--)this.set(d+m+b,this.get(d+m));const p=d+_+b-this._length;if(p>0)for(this._length+=p;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let p=0;p<_;p++)this.set(d+p+b,this.get(d+p))}}_getCyclicIndex(d){return(this._startIndex+d)%this._maxLength}}a.CircularList=h},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(u,c=5){if(typeof u!="object")return u;const h=Array.isArray(u)?[]:{};for(const f in u)h[f]=c<=1?u[f]:u[f]&&l(u[f],c-1);return h}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,u=0,c=0,h=0;var f,d,_,b,p;function m(y){const v=y.toString(16);return v.length<2?"0"+v:v}function g(y,v){return y<v?(v+.05)/(y+.05):(y+.05)/(v+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(y){y.toCss=function(v,S,E,C){return C!==void 0?`#${m(v)}${m(S)}${m(E)}${m(C)}`:`#${m(v)}${m(S)}${m(E)}`},y.toRgba=function(v,S,E,C=255){return(v<<24|S<<16|E<<8|C)>>>0},y.toColor=function(v,S,E,C){return{css:y.toCss(v,S,E,C),rgba:y.toRgba(v,S,E,C)}}}(f||(a.channels=f={})),function(y){function v(S,E){return h=Math.round(255*E),[l,u,c]=p.toChannels(S.rgba),{css:f.toCss(l,u,c,h),rgba:f.toRgba(l,u,c,h)}}y.blend=function(S,E){if(h=(255&E.rgba)/255,h===1)return{css:E.css,rgba:E.rgba};const C=E.rgba>>24&255,x=E.rgba>>16&255,A=E.rgba>>8&255,D=S.rgba>>24&255,M=S.rgba>>16&255,H=S.rgba>>8&255;return l=D+Math.round((C-D)*h),u=M+Math.round((x-M)*h),c=H+Math.round((A-H)*h),{css:f.toCss(l,u,c),rgba:f.toRgba(l,u,c)}},y.isOpaque=function(S){return(255&S.rgba)==255},y.ensureContrastRatio=function(S,E,C){const x=p.ensureContrastRatio(S.rgba,E.rgba,C);if(x)return f.toColor(x>>24&255,x>>16&255,x>>8&255)},y.opaque=function(S){const E=(255|S.rgba)>>>0;return[l,u,c]=p.toChannels(E),{css:f.toCss(l,u,c),rgba:E}},y.opacity=v,y.multiplyOpacity=function(S,E){return h=255&S.rgba,v(S,h*E/255)},y.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(d||(a.color=d={})),function(y){let v,S;try{const E=document.createElement("canvas");E.width=1,E.height=1;const C=E.getContext("2d",{willReadFrequently:!0});C&&(v=C,v.globalCompositeOperation="copy",S=v.createLinearGradient(0,0,1,1))}catch{}y.toColor=function(E){if(E.match(/#[\da-f]{3,8}/i))switch(E.length){case 4:return l=parseInt(E.slice(1,2).repeat(2),16),u=parseInt(E.slice(2,3).repeat(2),16),c=parseInt(E.slice(3,4).repeat(2),16),f.toColor(l,u,c);case 5:return l=parseInt(E.slice(1,2).repeat(2),16),u=parseInt(E.slice(2,3).repeat(2),16),c=parseInt(E.slice(3,4).repeat(2),16),h=parseInt(E.slice(4,5).repeat(2),16),f.toColor(l,u,c,h);case 7:return{css:E,rgba:(parseInt(E.slice(1),16)<<8|255)>>>0};case 9:return{css:E,rgba:parseInt(E.slice(1),16)>>>0}}const C=E.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return l=parseInt(C[1]),u=parseInt(C[2]),c=parseInt(C[3]),h=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),f.toColor(l,u,c,h);if(!v||!S)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=S,v.fillStyle=E,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[l,u,c,h]=v.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(l,u,c,h),css:E}}}(_||(a.css=_={})),function(y){function v(S,E,C){const x=S/255,A=E/255,D=C/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}y.relativeLuminance=function(S){return v(S>>16&255,S>>8&255,255&S)},y.relativeLuminance2=v}(b||(a.rgb=b={})),function(y){function v(E,C,x){const A=E>>24&255,D=E>>16&255,M=E>>8&255;let H=C>>24&255,B=C>>16&255,$=C>>8&255,G=g(b.relativeLuminance2(H,B,$),b.relativeLuminance2(A,D,M));for(;G<x&&(H>0||B>0||$>0);)H-=Math.max(0,Math.ceil(.1*H)),B-=Math.max(0,Math.ceil(.1*B)),$-=Math.max(0,Math.ceil(.1*$)),G=g(b.relativeLuminance2(H,B,$),b.relativeLuminance2(A,D,M));return(H<<24|B<<16|$<<8|255)>>>0}function S(E,C,x){const A=E>>24&255,D=E>>16&255,M=E>>8&255;let H=C>>24&255,B=C>>16&255,$=C>>8&255,G=g(b.relativeLuminance2(H,B,$),b.relativeLuminance2(A,D,M));for(;G<x&&(H<255||B<255||$<255);)H=Math.min(255,H+Math.ceil(.1*(255-H))),B=Math.min(255,B+Math.ceil(.1*(255-B))),$=Math.min(255,$+Math.ceil(.1*(255-$))),G=g(b.relativeLuminance2(H,B,$),b.relativeLuminance2(A,D,M));return(H<<24|B<<16|$<<8|255)>>>0}y.blend=function(E,C){if(h=(255&C)/255,h===1)return C;const x=C>>24&255,A=C>>16&255,D=C>>8&255,M=E>>24&255,H=E>>16&255,B=E>>8&255;return l=M+Math.round((x-M)*h),u=H+Math.round((A-H)*h),c=B+Math.round((D-B)*h),f.toRgba(l,u,c)},y.ensureContrastRatio=function(E,C,x){const A=b.relativeLuminance(E>>8),D=b.relativeLuminance(C>>8);if(g(A,D)<x){if(D<A){const B=v(E,C,x),$=g(A,b.relativeLuminance(B>>8));if($<x){const G=S(E,C,x);return $>g(A,b.relativeLuminance(G>>8))?B:G}return B}const M=S(E,C,x),H=g(A,b.relativeLuminance(M>>8));if(H<x){const B=v(E,C,x);return H>g(A,b.relativeLuminance(B>>8))?M:B}return M}},y.reduceLuminance=v,y.increaseLuminance=S,y.toChannels=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]}}(p||(a.rgba=p={})),a.toPaddedHex=m,a.contrastRatio=g},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const u=l(844),c=l(2585),h=l(4348),f=l(7866),d=l(744),_=l(7302),b=l(6975),p=l(8460),m=l(1753),g=l(1480),y=l(7994),v=l(9282),S=l(5435),E=l(5981),C=l(2660);let x=!1;class A extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new p.EventEmitter),this._onScroll.event(M=>{this._onScrollApi?.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const H in M)this.optionsService.options[H]=M[H]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new p.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new _.OptionsService(M)),this._instantiationService.setService(c.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(d.BufferService)),this._instantiationService.setService(c.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(f.LogService)),this._instantiationService.setService(c.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(b.CoreService)),this._instantiationService.setService(c.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(m.CoreMouseService)),this._instantiationService.setService(c.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(g.UnicodeService)),this._instantiationService.setService(c.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(y.CharsetService),this._instantiationService.setService(c.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(c.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,p.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,p.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,p.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,p.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(H=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(H=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((H,B)=>this._inputHandler.parse(H,B))),this.register((0,p.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,H){this._writeBuffer.write(M,H)}writeSync(M,H){this._logService.logLevel<=c.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync(M,H)}input(M,H=!0){this.coreService.triggerDataEvent(M,H)}resize(M,H){isNaN(M)||isNaN(H)||(M=Math.max(M,d.MINIMUM_COLS),H=Math.max(H,d.MINIMUM_ROWS),this._bufferService.resize(M,H))}scroll(M,H=!1){this._bufferService.scroll(M,H)}scrollLines(M,H,B){this._bufferService.scrollLines(M,H,B)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const H=M-this._bufferService.buffer.ydisp;H!==0&&this.scrollLines(H)}registerEscHandler(M,H){return this._inputHandler.registerEscHandler(M,H)}registerDcsHandler(M,H){return this._inputHandler.registerDcsHandler(M,H)}registerCsiHandler(M,H){return this._inputHandler.registerCsiHandler(M,H)}registerOscHandler(M,H){return this._inputHandler.registerOscHandler(M,H)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const H=this.optionsService.rawOptions.windowsPty;H&&H.buildNumber!==void 0&&H.buildNumber!==void 0?M=H.backend==="conpty"&&H.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const H of M)H.dispose()})}}}a.CoreTerminal=A},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===l)return void this._listeners.splice(u,1)}}})),this._event}fire(l,u){const c=[];for(let h=0;h<this._listeners.length;h++)c.push(this._listeners[h]);for(let h=0;h<c.length;h++)c[h].call(void 0,l,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,u){return l(c=>u.fire(c))},a.runAndSubscribe=function(l,u){return u(void 0),l(c=>u(c))}},5435:function(o,a,l){var u=this&&this.__decorate||function(X,P,I,z){var K,O=arguments.length,J=O<3?P:z===null?z=Object.getOwnPropertyDescriptor(P,I):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(X,P,I,z);else for(var re=X.length-1;re>=0;re--)(K=X[re])&&(J=(O<3?K(J):O>3?K(P,I,J):K(P,I))||J);return O>3&&J&&Object.defineProperty(P,I,J),J},c=this&&this.__param||function(X,P){return function(I,z){P(I,z,X)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const h=l(2584),f=l(7116),d=l(2015),_=l(844),b=l(482),p=l(8437),m=l(8460),g=l(643),y=l(511),v=l(3734),S=l(2585),E=l(1480),C=l(6242),x=l(6351),A=l(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function H(X,P){if(X>24)return P.setWinLines||!1;switch(X){case 1:return!!P.restoreWin;case 2:return!!P.minimizeWin;case 3:return!!P.setWinPosition;case 4:return!!P.setWinSizePixels;case 5:return!!P.raiseWin;case 6:return!!P.lowerWin;case 7:return!!P.refreshWin;case 8:return!!P.setWinSizeChars;case 9:return!!P.maximizeWin;case 10:return!!P.fullscreenWin;case 11:return!!P.getWinState;case 13:return!!P.getWinPosition;case 14:return!!P.getWinSizePixels;case 15:return!!P.getScreenSizePixels;case 16:return!!P.getCellSizePixels;case 18:return!!P.getWinSizeChars;case 19:return!!P.getScreenSizeChars;case 20:return!!P.getIconTitle;case 21:return!!P.getWinTitle;case 22:return!!P.pushTitle;case 23:return!!P.popTitle;case 24:return!!P.setWinLines}return!1}var B;(function(X){X[X.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",X[X.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(B||(a.WindowsOptionsReportType=B={}));let $=0;class G extends _.Disposable{getAttrData(){return this._curAttrData}constructor(P,I,z,K,O,J,re,oe,q=new d.EscapeSequenceParser){super(),this._bufferService=P,this._charsetService=I,this._coreService=z,this._logService=K,this._optionsService=O,this._oscLinkService=J,this._coreMouseService=re,this._unicodeService=oe,this._parser=q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new b.StringToUtf32,this._utf8Decoder=new b.Utf8ToUtf32,this._workCell=new y.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=p.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new m.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new m.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new m.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new m.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new m.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new m.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new m.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new m.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new m.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new m.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new m.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Z(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(F=>this._activeBuffer=F.activeBuffer)),this._parser.setCsiHandlerFallback((F,ie)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:ie.toArray()})}),this._parser.setEscHandlerFallback(F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})}),this._parser.setExecuteHandlerFallback(F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})}),this._parser.setOscHandlerFallback((F,ie,ue)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:ie,data:ue})}),this._parser.setDcsHandlerFallback((F,ie,ue)=>{ie==="HOOK"&&(ue=ue.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:ie,payload:ue})}),this._parser.setPrintHandler((F,ie,ue)=>this.print(F,ie,ue)),this._parser.registerCsiHandler({final:"@"},F=>this.insertChars(F)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},F=>this.scrollLeft(F)),this._parser.registerCsiHandler({final:"A"},F=>this.cursorUp(F)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},F=>this.scrollRight(F)),this._parser.registerCsiHandler({final:"B"},F=>this.cursorDown(F)),this._parser.registerCsiHandler({final:"C"},F=>this.cursorForward(F)),this._parser.registerCsiHandler({final:"D"},F=>this.cursorBackward(F)),this._parser.registerCsiHandler({final:"E"},F=>this.cursorNextLine(F)),this._parser.registerCsiHandler({final:"F"},F=>this.cursorPrecedingLine(F)),this._parser.registerCsiHandler({final:"G"},F=>this.cursorCharAbsolute(F)),this._parser.registerCsiHandler({final:"H"},F=>this.cursorPosition(F)),this._parser.registerCsiHandler({final:"I"},F=>this.cursorForwardTab(F)),this._parser.registerCsiHandler({final:"J"},F=>this.eraseInDisplay(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},F=>this.eraseInDisplay(F,!0)),this._parser.registerCsiHandler({final:"K"},F=>this.eraseInLine(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},F=>this.eraseInLine(F,!0)),this._parser.registerCsiHandler({final:"L"},F=>this.insertLines(F)),this._parser.registerCsiHandler({final:"M"},F=>this.deleteLines(F)),this._parser.registerCsiHandler({final:"P"},F=>this.deleteChars(F)),this._parser.registerCsiHandler({final:"S"},F=>this.scrollUp(F)),this._parser.registerCsiHandler({final:"T"},F=>this.scrollDown(F)),this._parser.registerCsiHandler({final:"X"},F=>this.eraseChars(F)),this._parser.registerCsiHandler({final:"Z"},F=>this.cursorBackwardTab(F)),this._parser.registerCsiHandler({final:"`"},F=>this.charPosAbsolute(F)),this._parser.registerCsiHandler({final:"a"},F=>this.hPositionRelative(F)),this._parser.registerCsiHandler({final:"b"},F=>this.repeatPrecedingCharacter(F)),this._parser.registerCsiHandler({final:"c"},F=>this.sendDeviceAttributesPrimary(F)),this._parser.registerCsiHandler({prefix:">",final:"c"},F=>this.sendDeviceAttributesSecondary(F)),this._parser.registerCsiHandler({final:"d"},F=>this.linePosAbsolute(F)),this._parser.registerCsiHandler({final:"e"},F=>this.vPositionRelative(F)),this._parser.registerCsiHandler({final:"f"},F=>this.hVPosition(F)),this._parser.registerCsiHandler({final:"g"},F=>this.tabClear(F)),this._parser.registerCsiHandler({final:"h"},F=>this.setMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"h"},F=>this.setModePrivate(F)),this._parser.registerCsiHandler({final:"l"},F=>this.resetMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"l"},F=>this.resetModePrivate(F)),this._parser.registerCsiHandler({final:"m"},F=>this.charAttributes(F)),this._parser.registerCsiHandler({final:"n"},F=>this.deviceStatus(F)),this._parser.registerCsiHandler({prefix:"?",final:"n"},F=>this.deviceStatusPrivate(F)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},F=>this.softReset(F)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},F=>this.setCursorStyle(F)),this._parser.registerCsiHandler({final:"r"},F=>this.setScrollRegion(F)),this._parser.registerCsiHandler({final:"s"},F=>this.saveCursor(F)),this._parser.registerCsiHandler({final:"t"},F=>this.windowOptions(F)),this._parser.registerCsiHandler({final:"u"},F=>this.restoreCursor(F)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},F=>this.insertColumns(F)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},F=>this.deleteColumns(F)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},F=>this.selectProtected(F)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},F=>this.requestMode(F,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},F=>this.requestMode(F,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new C.OscHandler(F=>(this.setTitle(F),this.setIconName(F),!0))),this._parser.registerOscHandler(1,new C.OscHandler(F=>this.setIconName(F))),this._parser.registerOscHandler(2,new C.OscHandler(F=>this.setTitle(F))),this._parser.registerOscHandler(4,new C.OscHandler(F=>this.setOrReportIndexedColor(F))),this._parser.registerOscHandler(8,new C.OscHandler(F=>this.setHyperlink(F))),this._parser.registerOscHandler(10,new C.OscHandler(F=>this.setOrReportFgColor(F))),this._parser.registerOscHandler(11,new C.OscHandler(F=>this.setOrReportBgColor(F))),this._parser.registerOscHandler(12,new C.OscHandler(F=>this.setOrReportCursorColor(F))),this._parser.registerOscHandler(104,new C.OscHandler(F=>this.restoreIndexedColor(F))),this._parser.registerOscHandler(110,new C.OscHandler(F=>this.restoreFgColor(F))),this._parser.registerOscHandler(111,new C.OscHandler(F=>this.restoreBgColor(F))),this._parser.registerOscHandler(112,new C.OscHandler(F=>this.restoreCursorColor(F))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const F in f.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},()=>this.selectCharset("("+F)),this._parser.registerEscHandler({intermediates:")",final:F},()=>this.selectCharset(")"+F)),this._parser.registerEscHandler({intermediates:"*",final:F},()=>this.selectCharset("*"+F)),this._parser.registerEscHandler({intermediates:"+",final:F},()=>this.selectCharset("+"+F)),this._parser.registerEscHandler({intermediates:"-",final:F},()=>this.selectCharset("-"+F)),this._parser.registerEscHandler({intermediates:".",final:F},()=>this.selectCharset("."+F)),this._parser.registerEscHandler({intermediates:"/",final:F},()=>this.selectCharset("/"+F));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(F=>(this._logService.error("Parsing error: ",F),F)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler((F,ie)=>this.requestStatusString(F,ie)))}_preserveStack(P,I,z,K){this._parseStack.paused=!0,this._parseStack.cursorStartX=P,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=z,this._parseStack.position=K}_logSlowResolvingAsync(P){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([P,new Promise((I,z)=>setTimeout(()=>z("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(P,I){let z,K=this._activeBuffer.x,O=this._activeBuffer.y,J=0;const re=this._parseStack.paused;if(re){if(z=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(z),z;K=this._parseStack.cursorStartX,O=this._parseStack.cursorStartY,this._parseStack.paused=!1,P.length>M&&(J=this._parseStack.position+M)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof P=="string"?` "${P}"`:` "${Array.prototype.map.call(P,F=>String.fromCharCode(F)).join("")}"`),typeof P=="string"?P.split("").map(F=>F.charCodeAt(0)):P),this._parseBuffer.length<P.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(P.length,M))),re||this._dirtyRowTracker.clearRange(),P.length>M)for(let F=J;F<P.length;F+=M){const ie=F+M<P.length?F+M:P.length,ue=typeof P=="string"?this._stringDecoder.decode(P.substring(F,ie),this._parseBuffer):this._utf8Decoder.decode(P.subarray(F,ie),this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,ue))return this._preserveStack(K,O,ue,F),this._logSlowResolvingAsync(z),z}else if(!re){const F=typeof P=="string"?this._stringDecoder.decode(P,this._parseBuffer):this._utf8Decoder.decode(P,this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,F))return this._preserveStack(K,O,F,0),this._logSlowResolvingAsync(z),z}this._activeBuffer.x===K&&this._activeBuffer.y===O||this._onCursorMove.fire();const oe=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),q=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);q<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(q,this._bufferService.rows-1),Math.min(oe,this._bufferService.rows-1))}print(P,I,z){let K,O;const J=this._charsetService.charset,re=this._optionsService.rawOptions.screenReaderMode,oe=this._bufferService.cols,q=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,ie=this._curAttrData;let ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&z-I>0&&ue.getWidth(this._activeBuffer.x-1)===2&&ue.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ie);let fe=this._parser.precedingJoinState;for(let me=I;me<z;++me){if(K=P[me],K<127&&J){const we=J[String.fromCharCode(K)];we&&(K=we.charCodeAt(0))}const Te=this._unicodeService.charProperties(K,fe);O=E.UnicodeService.extractWidth(Te);const Fe=E.UnicodeService.extractShouldJoin(Te),Je=Fe?E.UnicodeService.extractWidth(fe):0;if(fe=Te,re&&this._onA11yChar.fire((0,b.stringFromCodePoint)(K)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+O-Je>oe){if(q){const we=ue;let de=this._activeBuffer.x-Je;for(this._activeBuffer.x=Je,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ue=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Je>0&&ue instanceof p.BufferLine&&ue.copyCellsFrom(we,de,0,Je,!1);de<oe;)we.setCellFromCodepoint(de++,0,1,ie)}else if(this._activeBuffer.x=oe-1,O===2)continue}if(Fe&&this._activeBuffer.x){const we=ue.getWidth(this._activeBuffer.x-1)?1:2;ue.addCodepointToCell(this._activeBuffer.x-we,K,O);for(let de=O-Je;--de>=0;)ue.setCellFromCodepoint(this._activeBuffer.x++,0,0,ie)}else if(F&&(ue.insertCells(this._activeBuffer.x,O-Je,this._activeBuffer.getNullCell(ie)),ue.getWidth(oe-1)===2&&ue.setCellFromCodepoint(oe-1,g.NULL_CELL_CODE,g.NULL_CELL_WIDTH,ie)),ue.setCellFromCodepoint(this._activeBuffer.x++,K,O,ie),O>0)for(;--O;)ue.setCellFromCodepoint(this._activeBuffer.x++,0,0,ie)}this._parser.precedingJoinState=fe,this._activeBuffer.x<oe&&z-I>0&&ue.getWidth(this._activeBuffer.x)===0&&!ue.hasContent(this._activeBuffer.x)&&ue.setCellFromCodepoint(this._activeBuffer.x,0,1,ie),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(P,I){return P.final!=="t"||P.prefix||P.intermediates?this._parser.registerCsiHandler(P,I):this._parser.registerCsiHandler(P,z=>!H(z.params[0],this._optionsService.rawOptions.windowOptions)||I(z))}registerDcsHandler(P,I){return this._parser.registerDcsHandler(P,new x.DcsHandler(I))}registerEscHandler(P,I){return this._parser.registerEscHandler(P,I)}registerOscHandler(P,I){return this._parser.registerOscHandler(P,new C.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const P=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-P),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(P=this._bufferService.cols-1){this._activeBuffer.x=Math.min(P,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(P,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=P,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=P,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(P,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+P,this._activeBuffer.y+I)}cursorUp(P){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,P.params[0]||1)):this._moveCursor(0,-(P.params[0]||1)),!0}cursorDown(P){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,P.params[0]||1)):this._moveCursor(0,P.params[0]||1),!0}cursorForward(P){return this._moveCursor(P.params[0]||1,0),!0}cursorBackward(P){return this._moveCursor(-(P.params[0]||1),0),!0}cursorNextLine(P){return this.cursorDown(P),this._activeBuffer.x=0,!0}cursorPrecedingLine(P){return this.cursorUp(P),this._activeBuffer.x=0,!0}cursorCharAbsolute(P){return this._setCursor((P.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(P){return this._setCursor(P.length>=2?(P.params[1]||1)-1:0,(P.params[0]||1)-1),!0}charPosAbsolute(P){return this._setCursor((P.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(P){return this._moveCursor(P.params[0]||1,0),!0}linePosAbsolute(P){return this._setCursor(this._activeBuffer.x,(P.params[0]||1)-1),!0}vPositionRelative(P){return this._moveCursor(0,P.params[0]||1),!0}hVPosition(P){return this.cursorPosition(P),!0}tabClear(P){const I=P.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(P){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=P.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(P){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=P.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(P){const I=P.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(P,I,z,K=!1,O=!1){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);J.replaceCells(I,z,this._activeBuffer.getNullCell(this._eraseAttrData()),O),K&&(J.isWrapped=!1)}_resetBufferLine(P,I=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);z&&(z.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+P),z.isWrapped=!1)}eraseInDisplay(P,I=!1){let z;switch(this._restrictCursor(this._bufferService.cols),P.params[0]){case 0:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);z<this._bufferService.rows;z++)this._resetBufferLine(z,I);this._dirtyRowTracker.markDirty(z);break;case 1:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(z+1).isWrapped=!1);z--;)this._resetBufferLine(z,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(z=this._bufferService.rows,this._dirtyRowTracker.markDirty(z-1);z--;)this._resetBufferLine(z,I);this._dirtyRowTracker.markDirty(0);break;case 3:const K=this._activeBuffer.lines.length-this._bufferService.rows;K>0&&(this._activeBuffer.lines.trimStart(K),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-K,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-K,0),this._onScroll.fire(0))}return!0}eraseInLine(P,I=!1){switch(this._restrictCursor(this._bufferService.cols),P.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(P){this._restrictCursor();let I=P.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y,K=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-K+1;for(;I--;)this._activeBuffer.lines.splice(O-1,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(P){this._restrictCursor();let I=P.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y;let K;for(K=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-K;I--;)this._activeBuffer.lines.splice(z,1),this._activeBuffer.lines.splice(K,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(P){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,P.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(P){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,P.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(P){let I=P.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(P){let I=P.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(p.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=P.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);K.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=P.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);K.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=P.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);K.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(P){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=P.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);K.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(P){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(P.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(P){const I=this._parser.precedingJoinState;if(!I)return!0;const z=P.params[0]||1,K=E.UnicodeService.extractWidth(I),O=this._activeBuffer.x-K,J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(O),re=new Uint32Array(J.length*z);let oe=0;for(let F=0;F<J.length;){const ie=J.codePointAt(F)||0;re[oe++]=ie,F+=ie>65535?2:1}let q=oe;for(let F=1;F<z;++F)re.copyWithin(q,0,oe),q+=oe;return this.print(re,0,q),!0}sendDeviceAttributesPrimary(P){return P.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(P){return P.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(P.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(P){return(this._optionsService.rawOptions.termName+"").indexOf(P)===0}setMode(P){for(let I=0;I<P.length;I++)switch(P.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(P){for(let I=0;I<P.length;I++)switch(P.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(P){for(let I=0;I<P.length;I++)switch(P.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(P){for(let I=0;I<P.length;I++)switch(P.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),P.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(P,I){const z=this._coreService.decPrivateModes,{activeProtocol:K,activeEncoding:O}=this._coreMouseService,J=this._coreService,{buffers:re,cols:oe}=this._bufferService,{active:q,alt:F}=re,ie=this._optionsService.rawOptions,ue=Fe=>Fe?1:2,fe=P.params[0];return me=fe,Te=I?fe===2?4:fe===4?ue(J.modes.insertMode):fe===12?3:fe===20?ue(ie.convertEol):0:fe===1?ue(z.applicationCursorKeys):fe===3?ie.windowOptions.setWinLines?oe===80?2:oe===132?1:0:0:fe===6?ue(z.origin):fe===7?ue(z.wraparound):fe===8?3:fe===9?ue(K==="X10"):fe===12?ue(ie.cursorBlink):fe===25?ue(!J.isCursorHidden):fe===45?ue(z.reverseWraparound):fe===66?ue(z.applicationKeypad):fe===67?4:fe===1e3?ue(K==="VT200"):fe===1002?ue(K==="DRAG"):fe===1003?ue(K==="ANY"):fe===1004?ue(z.sendFocus):fe===1005?4:fe===1006?ue(O==="SGR"):fe===1015?4:fe===1016?ue(O==="SGR_PIXELS"):fe===1048?1:fe===47||fe===1047||fe===1049?ue(q===F):fe===2004?ue(z.bracketedPasteMode):0,J.triggerDataEvent(`${h.C0.ESC}[${I?"":"?"}${me};${Te}$y`),!0;var me,Te}_updateAttrColor(P,I,z,K,O){return I===2?(P|=50331648,P&=-16777216,P|=v.AttributeData.fromColorRGB([z,K,O])):I===5&&(P&=-50331904,P|=33554432|255&z),P}_extractColor(P,I,z){const K=[0,0,-1,0,0,0];let O=0,J=0;do{if(K[J+O]=P.params[I+J],P.hasSubParams(I+J)){const re=P.getSubParams(I+J);let oe=0;do K[1]===5&&(O=1),K[J+oe+1+O]=re[oe];while(++oe<re.length&&oe+J+1+O<K.length);break}if(K[1]===5&&J+O>=2||K[1]===2&&J+O>=5)break;K[1]&&(O=1)}while(++J+I<P.length&&J+O<K.length);for(let re=2;re<K.length;++re)K[re]===-1&&(K[re]=0);switch(K[0]){case 38:z.fg=this._updateAttrColor(z.fg,K[1],K[3],K[4],K[5]);break;case 48:z.bg=this._updateAttrColor(z.bg,K[1],K[3],K[4],K[5]);break;case 58:z.extended=z.extended.clone(),z.extended.underlineColor=this._updateAttrColor(z.extended.underlineColor,K[1],K[3],K[4],K[5])}return J}_processUnderline(P,I){I.extended=I.extended.clone(),(!~P||P>5)&&(P=1),I.extended.underlineStyle=P,I.fg|=268435456,P===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(P){P.fg=p.DEFAULT_ATTR_DATA.fg,P.bg=p.DEFAULT_ATTR_DATA.bg,P.extended=P.extended.clone(),P.extended.underlineStyle=0,P.extended.underlineColor&=-67108864,P.updateExtended()}charAttributes(P){if(P.length===1&&P.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=P.length;let z;const K=this._curAttrData;for(let O=0;O<I;O++)z=P.params[O],z>=30&&z<=37?(K.fg&=-50331904,K.fg|=16777216|z-30):z>=40&&z<=47?(K.bg&=-50331904,K.bg|=16777216|z-40):z>=90&&z<=97?(K.fg&=-50331904,K.fg|=16777224|z-90):z>=100&&z<=107?(K.bg&=-50331904,K.bg|=16777224|z-100):z===0?this._processSGR0(K):z===1?K.fg|=134217728:z===3?K.bg|=67108864:z===4?(K.fg|=268435456,this._processUnderline(P.hasSubParams(O)?P.getSubParams(O)[0]:1,K)):z===5?K.fg|=536870912:z===7?K.fg|=67108864:z===8?K.fg|=1073741824:z===9?K.fg|=2147483648:z===2?K.bg|=134217728:z===21?this._processUnderline(2,K):z===22?(K.fg&=-134217729,K.bg&=-134217729):z===23?K.bg&=-67108865:z===24?(K.fg&=-268435457,this._processUnderline(0,K)):z===25?K.fg&=-536870913:z===27?K.fg&=-67108865:z===28?K.fg&=-1073741825:z===29?K.fg&=2147483647:z===39?(K.fg&=-67108864,K.fg|=16777215&p.DEFAULT_ATTR_DATA.fg):z===49?(K.bg&=-67108864,K.bg|=16777215&p.DEFAULT_ATTR_DATA.bg):z===38||z===48||z===58?O+=this._extractColor(P,O,K):z===53?K.bg|=1073741824:z===55?K.bg&=-1073741825:z===59?(K.extended=K.extended.clone(),K.extended.underlineColor=-1,K.updateExtended()):z===100?(K.fg&=-67108864,K.fg|=16777215&p.DEFAULT_ATTR_DATA.fg,K.bg&=-67108864,K.bg|=16777215&p.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",z);return!0}deviceStatus(P){switch(P.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${I};${z}R`)}return!0}deviceStatusPrivate(P){if(P.params[0]===6){const I=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${I};${z}R`)}return!0}softReset(P){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(P){const I=P.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const z=I%2==1;return this._optionsService.options.cursorBlink=z,!0}setScrollRegion(P){const I=P.params[0]||1;let z;return(P.length<2||(z=P.params[1])>this._bufferService.rows||z===0)&&(z=this._bufferService.rows),z>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=z-1,this._setCursor(0,0)),!0}windowOptions(P){if(!H(P.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=P.length>1?P.params[1]:0;switch(P.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(B.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(B.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(P){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(P){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(P){return this._windowTitle=P,this._onTitleChange.fire(P),!0}setIconName(P){return this._iconName=P,!0}setOrReportIndexedColor(P){const I=[],z=P.split(";");for(;z.length>1;){const K=z.shift(),O=z.shift();if(/^\d+$/.exec(K)){const J=parseInt(K);if(ee(J))if(O==="?")I.push({type:0,index:J});else{const re=(0,A.parseColor)(O);re&&I.push({type:1,index:J,color:re})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(P){const I=P.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(P,I){this._getCurrentLinkId()&&this._finishHyperlink();const z=P.split(":");let K;const O=z.findIndex(J=>J.startsWith("id="));return O!==-1&&(K=z[O].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:K,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(P,I){const z=P.split(";");for(let K=0;K<z.length&&!(I>=this._specialColors.length);++K,++I)if(z[K]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const O=(0,A.parseColor)(z[K]);O&&this._onColor.fire([{type:1,index:this._specialColors[I],color:O}])}return!0}setOrReportFgColor(P){return this._setOrReportSpecialColor(P,0)}setOrReportBgColor(P){return this._setOrReportSpecialColor(P,1)}setOrReportCursorColor(P){return this._setOrReportSpecialColor(P,2)}restoreIndexedColor(P){if(!P)return this._onColor.fire([{type:2}]),!0;const I=[],z=P.split(";");for(let K=0;K<z.length;++K)if(/^\d+$/.exec(z[K])){const O=parseInt(z[K]);ee(O)&&I.push({type:2,index:O})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(P){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(P){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(P){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),!0}selectCharset(P){return P.length!==2?(this.selectDefaultCharset(),!0):(P[0]==="/"||this._charsetService.setgCharset(D[P[0]],f.CHARSETS[P[1]]||f.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const P=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,P,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=p.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(P){return this._charsetService.setgLevel(P),!0}screenAlignmentPattern(){const P=new y.CellData;P.content=4194373,P.fg=this._curAttrData.fg,P.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const z=this._activeBuffer.ybase+this._activeBuffer.y+I,K=this._activeBuffer.lines.get(z);K&&(K.fill(P),K.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(P,I){const z=this._bufferService.buffer,K=this._optionsService.rawOptions;return(O=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${O}${h.C0.ESC}\\`),!0))(P==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:P==='"p'?'P1$r61;1"p':P==="r"?`P1$r${z.scrollTop+1};${z.scrollBottom+1}r`:P==="m"?"P1$r0m":P===" q"?`P1$r${{block:2,underline:4,bar:6}[K.cursorStyle]-(K.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(P,I){this._dirtyRowTracker.markRangeDirty(P,I)}}a.InputHandler=G;let Z=class{constructor(X){this._bufferService=X,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(X){X<this.start?this.start=X:X>this.end&&(this.end=X)}markRangeDirty(X,P){X>P&&($=X,X=P,P=$),X<this.start&&(this.start=X),P>this.end&&(this.end=P)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function ee(X){return 0<=X&&X<256}Z=u([c(0,S.IBufferService)],Z)},844:(o,a)=>{function l(u){for(const c of u)c.dispose();u.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const c=this._disposables.indexOf(u);c!==-1&&this._disposables.splice(c,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){this._isDisposed||u===this._value||(this._value?.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(u){return{dispose:u}},a.disposeArray=l,a.getDisposeArrayDisposable=function(u){return{dispose:()=>l(u)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(c,h,f){this._data[c]||(this._data[c]={}),this._data[c][h]=f}get(c,h){return this._data[c]?this._data[c][h]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(u,c,h,f,d){this._data.get(u,c)||this._data.set(u,c,new l),this._data.get(u,c).set(h,f,d)}get(u,c,h,f){return this._data.get(u,c)?.get(h,f)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof Og<"u"&&"title"in Og;const l=a.isNode?"node":navigator.userAgent,u=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const c=l.match(/Version\/(\d+)/);return c===null||c.length<2?0:parseInt(c[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),a.isIpad=u==="iPad",a.isIphone=u==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),a.isLinux=u.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(l=this._search(this._getKey(u)),this._array.splice(l,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const c=this._getKey(u);if(c===void 0||(l=this._search(c),l===-1)||this._getKey(this._array[l])!==c)return!1;do if(this._array[l]===u)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===c);return!1}*getKeyIterator(u){if(this._array.length!==0&&(l=this._search(u),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===u))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===u)}forEachByKey(u,c){if(this._array.length!==0&&(l=this._search(u),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===u))do c(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===u)}values(){return[...this._array].values()}_search(u){let c=0,h=this._array.length-1;for(;h>=c;){let f=c+h>>1;const d=this._getKey(this._array[f]);if(d>u)h=f-1;else{if(!(d<u)){for(;f>0&&this._getKey(this._array[f-1])===u;)f--;return f}c=f+1}}return c}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const u=l(6114);class c{constructor(){this._tasks=[],this._i=0}enqueue(d){this._tasks.push(d),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(d){this._idleCallback=void 0;let _=0,b=0,p=d.timeRemaining(),m=0;for(;this._i<this._tasks.length;){if(_=Date.now(),this._tasks[this._i]()||this._i++,_=Math.max(1,Date.now()-_),b=Math.max(_,b),m=d.timeRemaining(),1.5*b>m)return p-_<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(p-_))}ms`),void this._start();p=m}this.clear()}}class h extends c{_requestCallback(d){return setTimeout(()=>d(this._createDeadline(16)))}_cancelCallback(d){clearTimeout(d)}_createDeadline(d){const _=Date.now()+d;return{timeRemaining:()=>Math.max(0,_-Date.now())}}}a.PriorityTaskQueue=h,a.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends c{_requestCallback(f){return requestIdleCallback(f)}_cancelCallback(f){cancelIdleCallback(f)}}:h,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(f){this._queue.clear(),this._queue.enqueue(f)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const u=l(643);a.updateWindowsModeWrappedState=function(c){const h=c.buffer.lines.get(c.buffer.ybase+c.buffer.y-1),f=h?.get(c.cols-1),d=c.buffer.lines.get(c.buffer.ybase+c.buffer.y);d&&f&&(d.isWrapped=f[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&f[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,f=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=f}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=u},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const u=l(6349),c=l(7226),h=l(3734),f=l(8437),d=l(4634),_=l(511),b=l(643),p=l(4863),m=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(g,y,v){this._hasScrollback=g,this._optionsService=y,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=m.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,b.NULL_CELL_CHAR,b.NULL_CELL_WIDTH,b.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,b.WHITESPACE_CELL_CHAR,b.WHITESPACE_CELL_WIDTH,b.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new c.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(g){return g?(this._nullCell.fg=g.fg,this._nullCell.bg=g.bg,this._nullCell.extended=g.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(g){return g?(this._whitespaceCell.fg=g.fg,this._whitespaceCell.bg=g.bg,this._whitespaceCell.extended=g.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(g,y){return new f.BufferLine(this._bufferService.cols,this.getNullCell(g),y)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const g=this.ybase+this.y-this.ydisp;return g>=0&&g<this._rows}_getCorrectBufferLength(g){if(!this._hasScrollback)return g;const y=g+this._optionsService.rawOptions.scrollback;return y>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:y}fillViewportRows(g){if(this.lines.length===0){g===void 0&&(g=f.DEFAULT_ATTR_DATA);let y=this._rows;for(;y--;)this.lines.push(this.getBlankLine(g))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(g,y){const v=this.getNullCell(f.DEFAULT_ATTR_DATA);let S=0;const E=this._getCorrectBufferLength(y);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<g)for(let x=0;x<this.lines.length;x++)S+=+this.lines.get(x).resize(g,v);let C=0;if(this._rows<y)for(let x=this._rows;x<y;x++)this.lines.length<y+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new f.BufferLine(g,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(g,v)));else for(let x=this._rows;x>y;x--)this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const x=this.lines.length-E;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=E}this.x=Math.min(this.x,g-1),this.y=Math.min(this.y,y-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,g-1),this.scrollTop=0}if(this.scrollBottom=y-1,this._isReflowEnabled&&(this._reflow(g,y),this._cols>g))for(let C=0;C<this.lines.length;C++)S+=+this.lines.get(C).resize(g,v);this._cols=g,this._rows=y,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let g=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,g=!1);let y=0;for(;this._memoryCleanupPosition<this.lines.length;)if(y+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),y>100)return!0;return g}get _isReflowEnabled(){const g=this._optionsService.rawOptions.windowsPty;return g&&g.buildNumber?this._hasScrollback&&g.backend==="conpty"&&g.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(g,y){this._cols!==g&&(g>this._cols?this._reflowLarger(g,y):this._reflowSmaller(g,y))}_reflowLarger(g,y){const v=(0,d.reflowLargerGetLinesToRemove)(this.lines,this._cols,g,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(v.length>0){const S=(0,d.reflowLargerCreateNewLayout)(this.lines,v);(0,d.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(g,y,S.countRemoved)}}_reflowLargerAdjustViewport(g,y,v){const S=this.getNullCell(f.DEFAULT_ATTR_DATA);let E=v;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<y&&this.lines.push(new f.BufferLine(g,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(g,y){const v=this.getNullCell(f.DEFAULT_ATTR_DATA),S=[];let E=0;for(let C=this.lines.length-1;C>=0;C--){let x=this.lines.get(C);if(!x||!x.isWrapped&&x.getTrimmedLength()<=g)continue;const A=[x];for(;x.isWrapped&&C>0;)x=this.lines.get(--C),A.unshift(x);const D=this.ybase+this.y;if(D>=C&&D<C+A.length)continue;const M=A[A.length-1].getTrimmedLength(),H=(0,d.reflowSmallerGetNewLineLengths)(A,this._cols,g),B=H.length-A.length;let $;$=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);const G=[];for(let z=0;z<B;z++){const K=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);G.push(K)}G.length>0&&(S.push({start:C+A.length+E,newLines:G}),E+=G.length),A.push(...G);let Z=H.length-1,ee=H[Z];ee===0&&(Z--,ee=H[Z]);let X=A.length-B-1,P=M;for(;X>=0;){const z=Math.min(P,ee);if(A[Z]===void 0)break;if(A[Z].copyCellsFrom(A[X],P-z,ee-z,z,!0),ee-=z,ee===0&&(Z--,ee=H[Z]),P-=z,P===0){X--;const K=Math.max(X,0);P=(0,d.getWrappedLineTrimmedLength)(A,K,this._cols)}}for(let z=0;z<A.length;z++)H[z]<g&&A[z].setCell(H[z],v);let I=B-$;for(;I-- >0;)this.ybase===0?this.y<y-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-y&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+y-1)}if(S.length>0){const C=[],x=[];for(let Z=0;Z<this.lines.length;Z++)x.push(this.lines.get(Z));const A=this.lines.length;let D=A-1,M=0,H=S[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let B=0;for(let Z=Math.min(this.lines.maxLength-1,A+E-1);Z>=0;Z--)if(H&&H.start>D+B){for(let ee=H.newLines.length-1;ee>=0;ee--)this.lines.set(Z--,H.newLines[ee]);Z++,C.push({index:D+1,amount:H.newLines.length}),B+=H.newLines.length,H=S[++M]}else this.lines.set(Z,x[D--]);let $=0;for(let Z=C.length-1;Z>=0;Z--)C[Z].index+=$,this.lines.onInsertEmitter.fire(C[Z]),$+=C[Z].amount;const G=Math.max(0,A+E-this.lines.maxLength);G>0&&this.lines.onTrimEmitter.fire(G)}}translateBufferLineToString(g,y,v=0,S){const E=this.lines.get(g);return E?E.translateToString(y,v,S):""}getWrappedRangeForLine(g){let y=g,v=g;for(;y>0&&this.lines.get(y).isWrapped;)y--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:y,last:v}}setupTabStops(g){for(g!=null?this.tabs[g]||(g=this.prevStop(g)):(this.tabs={},g=0);g<this._cols;g+=this._optionsService.rawOptions.tabStopWidth)this.tabs[g]=!0}prevStop(g){for(g==null&&(g=this.x);!this.tabs[--g]&&g>0;);return g>=this._cols?this._cols-1:g<0?0:g}nextStop(g){for(g==null&&(g=this.x);!this.tabs[++g]&&g<this._cols;);return g>=this._cols?this._cols-1:g<0?0:g}clearMarkers(g){this._isClearing=!0;for(let y=0;y<this.markers.length;y++)this.markers[y].line===g&&(this.markers[y].dispose(),this.markers.splice(y--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].dispose(),this.markers.splice(g--,1);this._isClearing=!1}addMarker(g){const y=new p.Marker(g);return this.markers.push(y),y.register(this.lines.onTrim(v=>{y.line-=v,y.line<0&&y.dispose()})),y.register(this.lines.onInsert(v=>{y.line>=v.index&&(y.line+=v.amount)})),y.register(this.lines.onDelete(v=>{y.line>=v.index&&y.line<v.index+v.amount&&y.dispose(),y.line>v.index&&(y.line-=v.amount)})),y.register(y.onDispose(()=>this._removeMarker(y))),y}_removeMarker(g){this._isClearing||this.markers.splice(this.markers.indexOf(g),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const u=l(3734),c=l(511),h=l(643),f=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let d=0;class _{constructor(p,m,g=!1){this.isWrapped=g,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*p);const y=m||c.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let v=0;v<p;++v)this.setCell(v,y);this.length=p}get(p){const m=this._data[3*p+0],g=2097151&m;return[this._data[3*p+1],2097152&m?this._combined[p]:g?(0,f.stringFromCodePoint)(g):"",m>>22,2097152&m?this._combined[p].charCodeAt(this._combined[p].length-1):g]}set(p,m){this._data[3*p+1]=m[h.CHAR_DATA_ATTR_INDEX],m[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[p]=m[1],this._data[3*p+0]=2097152|p|m[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*p+0]=m[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(p){return this._data[3*p+0]>>22}hasWidth(p){return 12582912&this._data[3*p+0]}getFg(p){return this._data[3*p+1]}getBg(p){return this._data[3*p+2]}hasContent(p){return 4194303&this._data[3*p+0]}getCodePoint(p){const m=this._data[3*p+0];return 2097152&m?this._combined[p].charCodeAt(this._combined[p].length-1):2097151&m}isCombined(p){return 2097152&this._data[3*p+0]}getString(p){const m=this._data[3*p+0];return 2097152&m?this._combined[p]:2097151&m?(0,f.stringFromCodePoint)(2097151&m):""}isProtected(p){return 536870912&this._data[3*p+2]}loadCell(p,m){return d=3*p,m.content=this._data[d+0],m.fg=this._data[d+1],m.bg=this._data[d+2],2097152&m.content&&(m.combinedData=this._combined[p]),268435456&m.bg&&(m.extended=this._extendedAttrs[p]),m}setCell(p,m){2097152&m.content&&(this._combined[p]=m.combinedData),268435456&m.bg&&(this._extendedAttrs[p]=m.extended),this._data[3*p+0]=m.content,this._data[3*p+1]=m.fg,this._data[3*p+2]=m.bg}setCellFromCodepoint(p,m,g,y){268435456&y.bg&&(this._extendedAttrs[p]=y.extended),this._data[3*p+0]=m|g<<22,this._data[3*p+1]=y.fg,this._data[3*p+2]=y.bg}addCodepointToCell(p,m,g){let y=this._data[3*p+0];2097152&y?this._combined[p]+=(0,f.stringFromCodePoint)(m):2097151&y?(this._combined[p]=(0,f.stringFromCodePoint)(2097151&y)+(0,f.stringFromCodePoint)(m),y&=-2097152,y|=2097152):y=m|4194304,g&&(y&=-12582913,y|=g<<22),this._data[3*p+0]=y}insertCells(p,m,g){if((p%=this.length)&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p-1,0,1,g),m<this.length-p){const y=new c.CellData;for(let v=this.length-p-m-1;v>=0;--v)this.setCell(p+m+v,this.loadCell(p+v,y));for(let v=0;v<m;++v)this.setCell(p+v,g)}else for(let y=p;y<this.length;++y)this.setCell(y,g);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,g)}deleteCells(p,m,g){if(p%=this.length,m<this.length-p){const y=new c.CellData;for(let v=0;v<this.length-p-m;++v)this.setCell(p+v,this.loadCell(p+m+v,y));for(let v=this.length-m;v<this.length;++v)this.setCell(v,g)}else for(let y=p;y<this.length;++y)this.setCell(y,g);p&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p-1,0,1,g),this.getWidth(p)!==0||this.hasContent(p)||this.setCellFromCodepoint(p,0,1,g)}replaceCells(p,m,g,y=!1){if(y)for(p&&this.getWidth(p-1)===2&&!this.isProtected(p-1)&&this.setCellFromCodepoint(p-1,0,1,g),m<this.length&&this.getWidth(m-1)===2&&!this.isProtected(m)&&this.setCellFromCodepoint(m,0,1,g);p<m&&p<this.length;)this.isProtected(p)||this.setCell(p,g),p++;else for(p&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p-1,0,1,g),m<this.length&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m,0,1,g);p<m&&p<this.length;)this.setCell(p++,g)}resize(p,m){if(p===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const g=3*p;if(p>this.length){if(this._data.buffer.byteLength>=4*g)this._data=new Uint32Array(this._data.buffer,0,g);else{const y=new Uint32Array(g);y.set(this._data),this._data=y}for(let y=this.length;y<p;++y)this.setCell(y,m)}else{this._data=this._data.subarray(0,g);const y=Object.keys(this._combined);for(let S=0;S<y.length;S++){const E=parseInt(y[S],10);E>=p&&delete this._combined[E]}const v=Object.keys(this._extendedAttrs);for(let S=0;S<v.length;S++){const E=parseInt(v[S],10);E>=p&&delete this._extendedAttrs[E]}}return this.length=p,4*g*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const p=new Uint32Array(this._data.length);return p.set(this._data),this._data=p,1}return 0}fill(p,m=!1){if(m)for(let g=0;g<this.length;++g)this.isProtected(g)||this.setCell(g,p);else{this._combined={},this._extendedAttrs={};for(let g=0;g<this.length;++g)this.setCell(g,p)}}copyFrom(p){this.length!==p.length?this._data=new Uint32Array(p._data):this._data.set(p._data),this.length=p.length,this._combined={};for(const m in p._combined)this._combined[m]=p._combined[m];this._extendedAttrs={};for(const m in p._extendedAttrs)this._extendedAttrs[m]=p._extendedAttrs[m];this.isWrapped=p.isWrapped}clone(){const p=new _(0);p._data=new Uint32Array(this._data),p.length=this.length;for(const m in this._combined)p._combined[m]=this._combined[m];for(const m in this._extendedAttrs)p._extendedAttrs[m]=this._extendedAttrs[m];return p.isWrapped=this.isWrapped,p}getTrimmedLength(){for(let p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0])return p+(this._data[3*p+0]>>22);return 0}getNoBgTrimmedLength(){for(let p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0]||50331648&this._data[3*p+2])return p+(this._data[3*p+0]>>22);return 0}copyCellsFrom(p,m,g,y,v){const S=p._data;if(v)for(let C=y-1;C>=0;C--){for(let x=0;x<3;x++)this._data[3*(g+C)+x]=S[3*(m+C)+x];268435456&S[3*(m+C)+2]&&(this._extendedAttrs[g+C]=p._extendedAttrs[m+C])}else for(let C=0;C<y;C++){for(let x=0;x<3;x++)this._data[3*(g+C)+x]=S[3*(m+C)+x];268435456&S[3*(m+C)+2]&&(this._extendedAttrs[g+C]=p._extendedAttrs[m+C])}const E=Object.keys(p._combined);for(let C=0;C<E.length;C++){const x=parseInt(E[C],10);x>=m&&(this._combined[x-m+g]=p._combined[x])}}translateToString(p,m,g,y){m=m??0,g=g??this.length,p&&(g=Math.min(g,this.getTrimmedLength())),y&&(y.length=0);let v="";for(;m<g;){const S=this._data[3*m+0],E=2097151&S,C=2097152&S?this._combined[m]:E?(0,f.stringFromCodePoint)(E):h.WHITESPACE_CELL_CHAR;if(v+=C,y)for(let x=0;x<C.length;++x)y.push(m);m+=S>>22||1}return y&&y.push(m),v}}a.BufferLine=_},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,u){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return u*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(u,c,h){if(c===u.length-1)return u[c].getTrimmedLength();const f=!u[c].hasContent(h-1)&&u[c].getWidth(h-1)===1,d=u[c+1].getWidth(0)===2;return f&&d?h-1:h}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(u,c,h,f,d){const _=[];for(let b=0;b<u.length-1;b++){let p=b,m=u.get(++p);if(!m.isWrapped)continue;const g=[u.get(b)];for(;p<u.length&&m.isWrapped;)g.push(m),m=u.get(++p);if(f>=b&&f<p){b+=g.length-1;continue}let y=0,v=l(g,y,c),S=1,E=0;for(;S<g.length;){const x=l(g,S,c),A=x-E,D=h-v,M=Math.min(A,D);g[y].copyCellsFrom(g[S],E,v,M,!1),v+=M,v===h&&(y++,v=0),E+=M,E===x&&(S++,E=0),v===0&&y!==0&&g[y-1].getWidth(h-1)===2&&(g[y].copyCellsFrom(g[y-1],h-1,v++,1,!1),g[y-1].setCell(h-1,d))}g[y].replaceCells(v,h,d);let C=0;for(let x=g.length-1;x>0&&(x>y||g[x].getTrimmedLength()===0);x--)C++;C>0&&(_.push(b+g.length-C),_.push(C)),b+=g.length-1}return _},a.reflowLargerCreateNewLayout=function(u,c){const h=[];let f=0,d=c[f],_=0;for(let b=0;b<u.length;b++)if(d===b){const p=c[++f];u.onDeleteEmitter.fire({index:b-_,amount:p}),b+=p-1,_+=p,d=c[++f]}else h.push(b);return{layout:h,countRemoved:_}},a.reflowLargerApplyNewLayout=function(u,c){const h=[];for(let f=0;f<c.length;f++)h.push(u.get(c[f]));for(let f=0;f<h.length;f++)u.set(f,h[f]);u.length=c.length},a.reflowSmallerGetNewLineLengths=function(u,c,h){const f=[],d=u.map((m,g)=>l(u,g,c)).reduce((m,g)=>m+g);let _=0,b=0,p=0;for(;p<d;){if(d-p<h){f.push(d-p);break}_+=h;const m=l(u,b,c);_>m&&(_-=m,b++);const g=u[b].getWidth(_-1)===2;g&&_--;const y=g?h-1:h;f.push(y),p+=y}return f},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const u=l(8460),c=l(844),h=l(9092);class f extends c.Disposable{constructor(_,b){super(),this._optionsService=_,this._bufferService=b,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(_){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(_),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(_,b){this._normal.resize(_,b),this._alt.resize(_,b),this.setupTabStops(_)}setupTabStops(_){this._normal.setupTabStops(_),this._alt.setupTabStops(_)}}a.BufferSet=f},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const u=l(482),c=l(643),h=l(3734);class f extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(_){const b=new f;return b.setFromCharData(_),b}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(_){this.fg=_[c.CHAR_DATA_ATTR_INDEX],this.bg=0;let b=!1;if(_[c.CHAR_DATA_CHAR_INDEX].length>2)b=!0;else if(_[c.CHAR_DATA_CHAR_INDEX].length===2){const p=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=p&&p<=56319){const m=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=m&&m<=57343?this.content=1024*(p-55296)+m-56320+65536|_[c.CHAR_DATA_WIDTH_INDEX]<<22:b=!0}else b=!0}else this.content=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[c.CHAR_DATA_WIDTH_INDEX]<<22;b&&(this.combinedData=_[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[c.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=f},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const u=l(8460),c=l(844);class h{get id(){return this._id}constructor(d){this.line=d,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,c.disposeArray)(this._disposables),this._disposables.length=0)}register(d){return this._disposables.push(d),d}}a.Marker=h,h._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,u,c;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(l||(a.C0=l={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(u||(a.C1=u={})),function(h){h.ST=`${l.ESC}\\`}(c||(a.C1_ESCAPED=c={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const u=l(2584),c={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(h,f,d,_){const b={type:0,cancel:!1,key:void 0},p=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?b.key=f?u.C0.ESC+"OA":u.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?b.key=f?u.C0.ESC+"OD":u.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?b.key=f?u.C0.ESC+"OC":u.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(b.key=f?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:b.key=h.ctrlKey?"\b":u.C0.DEL,h.altKey&&(b.key=u.C0.ESC+b.key);break;case 9:if(h.shiftKey){b.key=u.C0.ESC+"[Z";break}b.key=u.C0.HT,b.cancel=!0;break;case 13:b.key=h.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,b.cancel=!0;break;case 27:b.key=u.C0.ESC,h.altKey&&(b.key=u.C0.ESC+u.C0.ESC),b.cancel=!0;break;case 37:if(h.metaKey)break;p?(b.key=u.C0.ESC+"[1;"+(p+1)+"D",b.key===u.C0.ESC+"[1;3D"&&(b.key=u.C0.ESC+(d?"b":"[1;5D"))):b.key=f?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(h.metaKey)break;p?(b.key=u.C0.ESC+"[1;"+(p+1)+"C",b.key===u.C0.ESC+"[1;3C"&&(b.key=u.C0.ESC+(d?"f":"[1;5C"))):b.key=f?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(h.metaKey)break;p?(b.key=u.C0.ESC+"[1;"+(p+1)+"A",d||b.key!==u.C0.ESC+"[1;3A"||(b.key=u.C0.ESC+"[1;5A")):b.key=f?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(h.metaKey)break;p?(b.key=u.C0.ESC+"[1;"+(p+1)+"B",d||b.key!==u.C0.ESC+"[1;3B"||(b.key=u.C0.ESC+"[1;5B")):b.key=f?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(b.key=u.C0.ESC+"[2~");break;case 46:b.key=p?u.C0.ESC+"[3;"+(p+1)+"~":u.C0.ESC+"[3~";break;case 36:b.key=p?u.C0.ESC+"[1;"+(p+1)+"H":f?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:b.key=p?u.C0.ESC+"[1;"+(p+1)+"F":f?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:h.shiftKey?b.type=2:h.ctrlKey?b.key=u.C0.ESC+"[5;"+(p+1)+"~":b.key=u.C0.ESC+"[5~";break;case 34:h.shiftKey?b.type=3:h.ctrlKey?b.key=u.C0.ESC+"[6;"+(p+1)+"~":b.key=u.C0.ESC+"[6~";break;case 112:b.key=p?u.C0.ESC+"[1;"+(p+1)+"P":u.C0.ESC+"OP";break;case 113:b.key=p?u.C0.ESC+"[1;"+(p+1)+"Q":u.C0.ESC+"OQ";break;case 114:b.key=p?u.C0.ESC+"[1;"+(p+1)+"R":u.C0.ESC+"OR";break;case 115:b.key=p?u.C0.ESC+"[1;"+(p+1)+"S":u.C0.ESC+"OS";break;case 116:b.key=p?u.C0.ESC+"[15;"+(p+1)+"~":u.C0.ESC+"[15~";break;case 117:b.key=p?u.C0.ESC+"[17;"+(p+1)+"~":u.C0.ESC+"[17~";break;case 118:b.key=p?u.C0.ESC+"[18;"+(p+1)+"~":u.C0.ESC+"[18~";break;case 119:b.key=p?u.C0.ESC+"[19;"+(p+1)+"~":u.C0.ESC+"[19~";break;case 120:b.key=p?u.C0.ESC+"[20;"+(p+1)+"~":u.C0.ESC+"[20~";break;case 121:b.key=p?u.C0.ESC+"[21;"+(p+1)+"~":u.C0.ESC+"[21~";break;case 122:b.key=p?u.C0.ESC+"[23;"+(p+1)+"~":u.C0.ESC+"[23~";break;case 123:b.key=p?u.C0.ESC+"[24;"+(p+1)+"~":u.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(d&&!_||!h.altKey||h.metaKey)!d||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?b.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(b.key=u.C0.US),h.key==="@"&&(b.key=u.C0.NUL)):h.keyCode===65&&(b.type=1);else{const m=c[h.keyCode],g=m?.[h.shiftKey?1:0];if(g)b.key=u.C0.ESC+g;else if(h.keyCode>=65&&h.keyCode<=90){const y=h.ctrlKey?h.keyCode-64:h.keyCode+32;let v=String.fromCharCode(y);h.shiftKey&&(v=v.toUpperCase()),b.key=u.C0.ESC+v}else if(h.keyCode===32)b.key=u.C0.ESC+(h.ctrlKey?u.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let y=h.code.slice(3,4);h.shiftKey||(y=y.toLowerCase()),b.key=u.C0.ESC+y,b.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?b.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?b.key=u.C0.NUL:h.keyCode>=51&&h.keyCode<=55?b.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?b.key=u.C0.DEL:h.keyCode===219?b.key=u.C0.ESC:h.keyCode===220?b.key=u.C0.FS:h.keyCode===221&&(b.key=u.C0.GS)}return b}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,u=0,c=l.length){let h="";for(let f=u;f<c;++f){let d=l[f];d>65535?(d-=65536,h+=String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):h+=String.fromCharCode(d)}return h},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,u){const c=l.length;if(!c)return 0;let h=0,f=0;if(this._interim){const d=l.charCodeAt(f++);56320<=d&&d<=57343?u[h++]=1024*(this._interim-55296)+d-56320+65536:(u[h++]=this._interim,u[h++]=d),this._interim=0}for(let d=f;d<c;++d){const _=l.charCodeAt(d);if(55296<=_&&_<=56319){if(++d>=c)return this._interim=_,h;const b=l.charCodeAt(d);56320<=b&&b<=57343?u[h++]=1024*(_-55296)+b-56320+65536:(u[h++]=_,u[h++]=b)}else _!==65279&&(u[h++]=_)}return h}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,u){const c=l.length;if(!c)return 0;let h,f,d,_,b=0,p=0,m=0;if(this.interim[0]){let v=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let E,C=0;for(;(E=63&this.interim[++C])&&C<4;)S<<=6,S|=E;const x=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,A=x-C;for(;m<A;){if(m>=c)return 0;if(E=l[m++],(192&E)!=128){m--,v=!0;break}this.interim[C++]=E,S<<=6,S|=63&E}v||(x===2?S<128?m--:u[b++]=S:x===3?S<2048||S>=55296&&S<=57343||S===65279||(u[b++]=S):S<65536||S>1114111||(u[b++]=S)),this.interim.fill(0)}const g=c-4;let y=m;for(;y<c;){for(;!(!(y<g)||128&(h=l[y])||128&(f=l[y+1])||128&(d=l[y+2])||128&(_=l[y+3]));)u[b++]=h,u[b++]=f,u[b++]=d,u[b++]=_,y+=4;if(h=l[y++],h<128)u[b++]=h;else if((224&h)==192){if(y>=c)return this.interim[0]=h,b;if(f=l[y++],(192&f)!=128){y--;continue}if(p=(31&h)<<6|63&f,p<128){y--;continue}u[b++]=p}else if((240&h)==224){if(y>=c)return this.interim[0]=h,b;if(f=l[y++],(192&f)!=128){y--;continue}if(y>=c)return this.interim[0]=h,this.interim[1]=f,b;if(d=l[y++],(192&d)!=128){y--;continue}if(p=(15&h)<<12|(63&f)<<6|63&d,p<2048||p>=55296&&p<=57343||p===65279)continue;u[b++]=p}else if((248&h)==240){if(y>=c)return this.interim[0]=h,b;if(f=l[y++],(192&f)!=128){y--;continue}if(y>=c)return this.interim[0]=h,this.interim[1]=f,b;if(d=l[y++],(192&d)!=128){y--;continue}if(y>=c)return this.interim[0]=h,this.interim[1]=f,this.interim[2]=d,b;if(_=l[y++],(192&_)!=128){y--;continue}if(p=(7&h)<<18|(63&f)<<12|(63&d)<<6|63&_,p<65536||p>1114111)continue;u[b++]=p}}return b}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const u=l(1480),c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;a.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let d=0;d<c.length;++d)f.fill(0,c[d][0],c[d][1]+1)}}wcwidth(d){return d<32?0:d<127?1:d<65536?f[d]:function(_,b){let p,m=0,g=b.length-1;if(_<b[0][0]||_>b[g][1])return!1;for(;g>=m;)if(p=m+g>>1,_>b[p][1])m=p+1;else{if(!(_<b[p][0]))return!0;g=p-1}return!1}(d,h)?0:d>=131072&&d<=196605||d>=196608&&d<=262141?2:1}charProperties(d,_){let b=this.wcwidth(d),p=b===0&&_!==0;if(p){const m=u.UnicodeService.extractWidth(_);m===0?p=!1:m>b&&(b=m)}return u.UnicodeService.createPropertyValue(0,b,p)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const u=l(8460),c=l(844);class h extends c.Disposable{constructor(d){super(),this._action=d,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(d,_){if(_!==void 0&&this._syncCalls>_)return void(this._syncCalls=0);if(this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let b;for(this._isSyncWriting=!0;b=this._writeBuffer.shift();){this._action(b);const p=this._callbacks.shift();p&&p()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(d,_){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(_),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(_)}_innerWrite(d=0,_=!0){const b=d||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const p=this._writeBuffer[this._bufferOffset],m=this._action(p,_);if(m){const y=v=>Date.now()-b>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(b,v);return void m.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(y)}const g=this._callbacks[this._bufferOffset];if(g&&g(),this._bufferOffset++,this._pendingData-=p.length,Date.now()-b>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=h},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function c(h,f){const d=h.toString(16),_=d.length<2?"0"+d:d;switch(f){case 4:return d[0];case 8:return _;case 12:return(_+_).slice(0,3);default:return _+_}}a.parseColor=function(h){if(!h)return;let f=h.toLowerCase();if(f.indexOf("rgb:")===0){f=f.slice(4);const d=l.exec(f);if(d){const _=d[1]?15:d[4]?255:d[7]?4095:65535;return[Math.round(parseInt(d[1]||d[4]||d[7]||d[10],16)/_*255),Math.round(parseInt(d[2]||d[5]||d[8]||d[11],16)/_*255),Math.round(parseInt(d[3]||d[6]||d[9]||d[12],16)/_*255)]}}else if(f.indexOf("#")===0&&(f=f.slice(1),u.exec(f)&&[3,6,9,12].includes(f.length))){const d=f.length/3,_=[0,0,0];for(let b=0;b<3;++b){const p=parseInt(f.slice(d*b,d*b+d),16);_[b]=d===1?p<<4:d===2?p:d===3?p>>4:p>>8}return _}},a.toRgbString=function(h,f=16){const[d,_,b]=h;return`rgb:${c(d,f)}/${c(_,f)}/${c(b,f)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const u=l(482),c=l(8742),h=l(5770),f=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}registerHandler(_,b){this._handlers[_]===void 0&&(this._handlers[_]=[]);const p=this._handlers[_];return p.push(b),{dispose:()=>{const m=p.indexOf(b);m!==-1&&p.splice(m,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}reset(){if(this._active.length)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0}hook(_,b){if(this.reset(),this._ident=_,this._active=this._handlers[_]||f,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].hook(b);else this._handlerFb(this._ident,"HOOK",b)}put(_,b,p){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(_,b,p);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(_,b,p))}unhook(_,b=!0){if(this._active.length){let p=!1,m=this._active.length-1,g=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,p=b,g=this._stack.fallThrough,this._stack.paused=!1),!g&&p===!1){for(;m>=0&&(p=this._active[m].unhook(_),p!==!0);m--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,p;m--}for(;m>=0;m--)if(p=this._active[m].unhook(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,p}else this._handlerFb(this._ident,"UNHOOK",_);this._active=f,this._ident=0}};const d=new c.Params;d.addParam(0),a.DcsHandler=class{constructor(_){this._handler=_,this._data="",this._params=d,this._hitLimit=!1}hook(_){this._params=_.length>1||_.params[0]?_.clone():d,this._data="",this._hitLimit=!1}put(_,b,p){this._hitLimit||(this._data+=(0,u.utf32ToString)(_,b,p),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(_){let b=!1;if(this._hitLimit)b=!1;else if(_&&(b=this._handler(this._data,this._params),b instanceof Promise))return b.then(p=>(this._params=d,this._data="",this._hitLimit=!1,p));return this._params=d,this._data="",this._hitLimit=!1,b}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const u=l(844),c=l(8742),h=l(6242),f=l(6351);class d{constructor(m){this.table=new Uint8Array(m)}setDefault(m,g){this.table.fill(m<<4|g)}add(m,g,y,v){this.table[g<<8|m]=y<<4|v}addMany(m,g,y,v){for(let S=0;S<m.length;S++)this.table[g<<8|m[S]]=y<<4|v}}a.TransitionTable=d;const _=160;a.VT500_TRANSITION_TABLE=function(){const p=new d(4095),m=Array.apply(null,Array(256)).map((C,x)=>x),g=(C,x)=>m.slice(C,x),y=g(32,127),v=g(0,24);v.push(25),v.push.apply(v,g(28,32));const S=g(0,14);let E;for(E in p.setDefault(1,0),p.addMany(y,0,2,0),S)p.addMany([24,26,153,154],E,3,0),p.addMany(g(128,144),E,3,0),p.addMany(g(144,152),E,3,0),p.add(156,E,0,0),p.add(27,E,11,1),p.add(157,E,4,8),p.addMany([152,158,159],E,0,7),p.add(155,E,11,3),p.add(144,E,11,9);return p.addMany(v,0,3,0),p.addMany(v,1,3,1),p.add(127,1,0,1),p.addMany(v,8,0,8),p.addMany(v,3,3,3),p.add(127,3,0,3),p.addMany(v,4,3,4),p.add(127,4,0,4),p.addMany(v,6,3,6),p.addMany(v,5,3,5),p.add(127,5,0,5),p.addMany(v,2,3,2),p.add(127,2,0,2),p.add(93,1,4,8),p.addMany(y,8,5,8),p.add(127,8,5,8),p.addMany([156,27,24,26,7],8,6,0),p.addMany(g(28,32),8,0,8),p.addMany([88,94,95],1,0,7),p.addMany(y,7,0,7),p.addMany(v,7,0,7),p.add(156,7,0,0),p.add(127,7,0,7),p.add(91,1,11,3),p.addMany(g(64,127),3,7,0),p.addMany(g(48,60),3,8,4),p.addMany([60,61,62,63],3,9,4),p.addMany(g(48,60),4,8,4),p.addMany(g(64,127),4,7,0),p.addMany([60,61,62,63],4,0,6),p.addMany(g(32,64),6,0,6),p.add(127,6,0,6),p.addMany(g(64,127),6,0,0),p.addMany(g(32,48),3,9,5),p.addMany(g(32,48),5,9,5),p.addMany(g(48,64),5,0,6),p.addMany(g(64,127),5,7,0),p.addMany(g(32,48),4,9,5),p.addMany(g(32,48),1,9,2),p.addMany(g(32,48),2,9,2),p.addMany(g(48,127),2,10,0),p.addMany(g(48,80),1,10,0),p.addMany(g(81,88),1,10,0),p.addMany([89,90,92],1,10,0),p.addMany(g(96,127),1,10,0),p.add(80,1,11,9),p.addMany(v,9,0,9),p.add(127,9,0,9),p.addMany(g(28,32),9,0,9),p.addMany(g(32,48),9,9,12),p.addMany(g(48,60),9,8,10),p.addMany([60,61,62,63],9,9,10),p.addMany(v,11,0,11),p.addMany(g(32,128),11,0,11),p.addMany(g(28,32),11,0,11),p.addMany(v,10,0,10),p.add(127,10,0,10),p.addMany(g(28,32),10,0,10),p.addMany(g(48,60),10,8,10),p.addMany([60,61,62,63],10,0,11),p.addMany(g(32,48),10,9,12),p.addMany(v,12,0,12),p.add(127,12,0,12),p.addMany(g(28,32),12,0,12),p.addMany(g(32,48),12,9,12),p.addMany(g(48,64),12,0,11),p.addMany(g(64,127),12,12,13),p.addMany(g(64,127),10,12,13),p.addMany(g(64,127),9,12,13),p.addMany(v,13,13,13),p.addMany(y,13,13,13),p.add(127,13,0,13),p.addMany([27,156,24,26],13,14,0),p.add(_,0,2,0),p.add(_,8,5,8),p.add(_,6,0,6),p.add(_,11,0,11),p.add(_,13,13,13),p}();class b extends u.Disposable{constructor(m=a.VT500_TRANSITION_TABLE){super(),this._transitions=m,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new c.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(g,y,v)=>{},this._executeHandlerFb=g=>{},this._csiHandlerFb=(g,y)=>{},this._escHandlerFb=g=>{},this._errorHandlerFb=g=>g,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new f.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(m,g=[64,126]){let y=0;if(m.prefix){if(m.prefix.length>1)throw new Error("only one byte as prefix supported");if(y=m.prefix.charCodeAt(0),y&&60>y||y>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(m.intermediates){if(m.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<m.intermediates.length;++S){const E=m.intermediates.charCodeAt(S);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");y<<=8,y|=E}}if(m.final.length!==1)throw new Error("final must be a single byte");const v=m.final.charCodeAt(0);if(g[0]>v||v>g[1])throw new Error(`final must be in range ${g[0]} .. ${g[1]}`);return y<<=8,y|=v,y}identToString(m){const g=[];for(;m;)g.push(String.fromCharCode(255&m)),m>>=8;return g.reverse().join("")}setPrintHandler(m){this._printHandler=m}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(m,g){const y=this._identifier(m,[48,126]);this._escHandlers[y]===void 0&&(this._escHandlers[y]=[]);const v=this._escHandlers[y];return v.push(g),{dispose:()=>{const S=v.indexOf(g);S!==-1&&v.splice(S,1)}}}clearEscHandler(m){this._escHandlers[this._identifier(m,[48,126])]&&delete this._escHandlers[this._identifier(m,[48,126])]}setEscHandlerFallback(m){this._escHandlerFb=m}setExecuteHandler(m,g){this._executeHandlers[m.charCodeAt(0)]=g}clearExecuteHandler(m){this._executeHandlers[m.charCodeAt(0)]&&delete this._executeHandlers[m.charCodeAt(0)]}setExecuteHandlerFallback(m){this._executeHandlerFb=m}registerCsiHandler(m,g){const y=this._identifier(m);this._csiHandlers[y]===void 0&&(this._csiHandlers[y]=[]);const v=this._csiHandlers[y];return v.push(g),{dispose:()=>{const S=v.indexOf(g);S!==-1&&v.splice(S,1)}}}clearCsiHandler(m){this._csiHandlers[this._identifier(m)]&&delete this._csiHandlers[this._identifier(m)]}setCsiHandlerFallback(m){this._csiHandlerFb=m}registerDcsHandler(m,g){return this._dcsParser.registerHandler(this._identifier(m),g)}clearDcsHandler(m){this._dcsParser.clearHandler(this._identifier(m))}setDcsHandlerFallback(m){this._dcsParser.setHandlerFallback(m)}registerOscHandler(m,g){return this._oscParser.registerHandler(m,g)}clearOscHandler(m){this._oscParser.clearHandler(m)}setOscHandlerFallback(m){this._oscParser.setHandlerFallback(m)}setErrorHandler(m){this._errorHandler=m}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(m,g,y,v,S){this._parseStack.state=m,this._parseStack.handlers=g,this._parseStack.handlerPos=y,this._parseStack.transition=v,this._parseStack.chunkPos=S}parse(m,g,y){let v,S=0,E=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(y===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let A=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(y===!1&&A>-1){for(;A>=0&&(v=x[A](this._params),v!==!0);A--)if(v instanceof Promise)return this._parseStack.handlerPos=A,v}this._parseStack.handlers=[];break;case 4:if(y===!1&&A>-1){for(;A>=0&&(v=x[A](),v!==!0);A--)if(v instanceof Promise)return this._parseStack.handlerPos=A,v}this._parseStack.handlers=[];break;case 6:if(S=m[this._parseStack.chunkPos],v=this._dcsParser.unhook(S!==24&&S!==26,y),v)return v;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=m[this._parseStack.chunkPos],v=this._oscParser.end(S!==24&&S!==26,y),v)return v;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let x=C;x<g;++x){switch(S=m[x],E=this._transitions.table[this.currentState<<8|(S<160?S:_)],E>>4){case 2:for(let B=x+1;;++B){if(B>=g||(S=m[B])<32||S>126&&S<_){this._printHandler(m,x,B),x=B-1;break}if(++B>=g||(S=m[B])<32||S>126&&S<_){this._printHandler(m,x,B),x=B-1;break}if(++B>=g||(S=m[B])<32||S>126&&S<_){this._printHandler(m,x,B),x=B-1;break}if(++B>=g||(S=m[B])<32||S>126&&S<_){this._printHandler(m,x,B),x=B-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const A=this._csiHandlers[this._collect<<8|S];let D=A?A.length-1:-1;for(;D>=0&&(v=A[D](this._params),v!==!0);D--)if(v instanceof Promise)return this._preserveStack(3,A,D,E,x),v;D<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++x<g&&(S=m[x])>47&&S<60);x--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const M=this._escHandlers[this._collect<<8|S];let H=M?M.length-1:-1;for(;H>=0&&(v=M[H](),v!==!0);H--)if(v instanceof Promise)return this._preserveStack(4,M,H,E,x),v;H<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let B=x+1;;++B)if(B>=g||(S=m[B])===24||S===26||S===27||S>127&&S<_){this._dcsParser.put(m,x,B),x=B-1;break}break;case 14:if(v=this._dcsParser.unhook(S!==24&&S!==26),v)return this._preserveStack(6,[],0,E,x),v;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let B=x+1;;B++)if(B>=g||(S=m[B])<32||S>127&&S<_){this._oscParser.put(m,x,B),x=B-1;break}break;case 6:if(v=this._oscParser.end(S!==24&&S!==26),v)return this._preserveStack(5,[],0,E,x),v;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&E}}}a.EscapeSequenceParser=b},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const u=l(5770),c=l(482),h=[];a.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(f,d){this._handlers[f]===void 0&&(this._handlers[f]=[]);const _=this._handlers[f];return _.push(d),{dispose:()=>{const b=_.indexOf(d);b!==-1&&_.splice(b,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].start();else this._handlerFb(this._id,"START")}_put(f,d,_){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(f,d,_);else this._handlerFb(this._id,"PUT",(0,c.utf32ToString)(f,d,_))}start(){this.reset(),this._state=1}put(f,d,_){if(this._state!==3){if(this._state===1)for(;d<_;){const b=f[d++];if(b===59){this._state=2,this._start();break}if(b<48||57<b)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+b-48}this._state===2&&_-d>0&&this._put(f,d,_)}}end(f,d=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let _=!1,b=this._active.length-1,p=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,_=d,p=this._stack.fallThrough,this._stack.paused=!1),!p&&_===!1){for(;b>=0&&(_=this._active[b].end(f),_!==!0);b--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,_;b--}for(;b>=0;b--)if(_=this._active[b].end(!1),_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",f);this._active=h,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(f){this._handler=f,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(f,d,_){this._hitLimit||(this._data+=(0,c.utf32ToString)(f,d,_),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(f){let d=!1;if(this._hitLimit)d=!1;else if(f&&(d=this._handler(this._data),d instanceof Promise))return d.then(_=>(this._data="",this._hitLimit=!1,_));return this._data="",this._hitLimit=!1,d}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class u{static fromArray(h){const f=new u;if(!h.length)return f;for(let d=Array.isArray(h[0])?1:0;d<h.length;++d){const _=h[d];if(Array.isArray(_))for(let b=0;b<_.length;++b)f.addSubParam(_[b]);else f.addParam(_)}return f}constructor(h=32,f=32){if(this.maxLength=h,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new u(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let f=0;f<this.length;++f){h.push(this.params[f]);const d=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-d>0&&h.push(Array.prototype.slice.call(this._subParams,d,_))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const f=this._subParamsIdx[h]>>8,d=255&this._subParamsIdx[h];return d-f>0?this._subParams.subarray(f,d):null}getSubParamsAll(){const h={};for(let f=0;f<this.length;++f){const d=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-d>0&&(h[f]=this._subParams.slice(d,_))}return h}addDigit(h){let f;if(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const d=this._digitIsSub?this._subParams:this.params,_=d[f-1];d[f-1]=~_?Math.min(10*_+h,l):h}}a.Params=u},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,u){const c={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(c),u.dispose=()=>this._wrappedAddonDispose(c),u.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let u=-1;for(let c=0;c<this._addons.length;c++)if(this._addons[c]===l){u=c;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(u,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const u=l(3785),c=l(511);a.BufferApiView=class{constructor(h,f){this._buffer=h,this.type=f}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const f=this._buffer.lines.get(h);if(f)return new u.BufferLineApiView(f)}getNullCell(){return new c.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const u=l(511);a.BufferLineApiView=class{constructor(c){this._line=c}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(c,h){if(!(c<0||c>=this._line.length))return h?(this._line.loadCell(c,h),h):this._line.loadCell(c,new u.CellData)}translateToString(c,h,f){return this._line.translateToString(c,h,f)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const u=l(8771),c=l(8460),h=l(844);class f extends h.Disposable{constructor(_){super(),this._core=_,this._onBufferChange=this.register(new c.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=f},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,u){return this._core.registerCsiHandler(l,c=>u(c.toArray()))}addCsiHandler(l,u){return this.registerCsiHandler(l,u)}registerDcsHandler(l,u){return this._core.registerDcsHandler(l,(c,h)=>u(c,h.toArray()))}addDcsHandler(l,u){return this.registerDcsHandler(l,u)}registerEscHandler(l,u){return this._core.registerEscHandler(l,u)}addEscHandler(l,u){return this.registerEscHandler(l,u)}registerOscHandler(l,u){return this._core.registerOscHandler(l,u)}addOscHandler(l,u){return this.registerOscHandler(l,u)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var u=this&&this.__decorate||function(p,m,g,y){var v,S=arguments.length,E=S<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,g):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,m,g,y);else for(var C=p.length-1;C>=0;C--)(v=p[C])&&(E=(S<3?v(E):S>3?v(m,g,E):v(m,g))||E);return S>3&&E&&Object.defineProperty(m,g,E),E},c=this&&this.__param||function(p,m){return function(g,y){m(g,y,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const h=l(8460),f=l(844),d=l(5295),_=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let b=a.BufferService=class extends f.Disposable{get buffer(){return this.buffers.active}constructor(p){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(p.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(p.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new d.BufferSet(p,this))}resize(p,m){this.cols=p,this.rows=m,this.buffers.resize(p,m),this._onResize.fire({cols:p,rows:m})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(p,m=!1){const g=this.buffer;let y;y=this._cachedBlankLine,y&&y.length===this.cols&&y.getFg(0)===p.fg&&y.getBg(0)===p.bg||(y=g.getBlankLine(p,m),this._cachedBlankLine=y),y.isWrapped=m;const v=g.ybase+g.scrollTop,S=g.ybase+g.scrollBottom;if(g.scrollTop===0){const E=g.lines.isFull;S===g.lines.length-1?E?g.lines.recycle().copyFrom(y):g.lines.push(y.clone()):g.lines.splice(S+1,0,y.clone()),E?this.isUserScrolling&&(g.ydisp=Math.max(g.ydisp-1,0)):(g.ybase++,this.isUserScrolling||g.ydisp++)}else{const E=S-v+1;g.lines.shiftElements(v+1,E-1,-1),g.lines.set(S,y.clone())}this.isUserScrolling||(g.ydisp=g.ybase),this._onScroll.fire(g.ydisp)}scrollLines(p,m,g){const y=this.buffer;if(p<0){if(y.ydisp===0)return;this.isUserScrolling=!0}else p+y.ydisp>=y.ybase&&(this.isUserScrolling=!1);const v=y.ydisp;y.ydisp=Math.max(Math.min(y.ydisp+p,y.ybase),0),v!==y.ydisp&&(m||this._onScroll.fire(y.ydisp))}};a.BufferService=b=u([c(0,_.IOptionsService)],b)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,u){this._charsets[l]=u,this.glevel===l&&(this.charset=u)}}},1753:function(o,a,l){var u=this&&this.__decorate||function(y,v,S,E){var C,x=arguments.length,A=x<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(y,v,S,E);else for(var D=y.length-1;D>=0;D--)(C=y[D])&&(A=(x<3?C(A):x>3?C(v,S,A):C(v,S))||A);return x>3&&A&&Object.defineProperty(v,S,A),A},c=this&&this.__param||function(y,v){return function(S,E){v(S,E,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const h=l(2585),f=l(8460),d=l(844),_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:y=>y.button!==4&&y.action===1&&(y.ctrl=!1,y.alt=!1,y.shift=!1,!0)},VT200:{events:19,restrict:y=>y.action!==32},DRAG:{events:23,restrict:y=>y.action!==32||y.button!==3},ANY:{events:31,restrict:y=>!0}};function b(y,v){let S=(y.ctrl?16:0)|(y.shift?4:0)|(y.alt?8:0);return y.button===4?(S|=64,S|=y.action):(S|=3&y.button,4&y.button&&(S|=64),8&y.button&&(S|=128),y.action===32?S|=32:y.action!==0||v||(S|=3)),S}const p=String.fromCharCode,m={DEFAULT:y=>{const v=[b(y,!1)+32,y.col+32,y.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${p(v[0])}${p(v[1])}${p(v[2])}`},SGR:y=>{const v=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${b(y,!0)};${y.col};${y.row}${v}`},SGR_PIXELS:y=>{const v=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${b(y,!0)};${y.x};${y.y}${v}`}};let g=a.CoreMouseService=class extends d.Disposable{constructor(y,v){super(),this._bufferService=y,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new f.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(_))this.addProtocol(S,_[S]);for(const S of Object.keys(m))this.addEncoding(S,m[S]);this.reset()}addProtocol(y,v){this._protocols[y]=v}addEncoding(y,v){this._encodings[y]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(y){if(!this._protocols[y])throw new Error(`unknown protocol "${y}"`);this._activeProtocol=y,this._onProtocolChange.fire(this._protocols[y].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(y){if(!this._encodings[y])throw new Error(`unknown encoding "${y}"`);this._activeEncoding=y}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(y){if(y.col<0||y.col>=this._bufferService.cols||y.row<0||y.row>=this._bufferService.rows||y.button===4&&y.action===32||y.button===3&&y.action!==32||y.button!==4&&(y.action===2||y.action===3)||(y.col++,y.row++,y.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,y,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(y))return!1;const v=this._encodings[this._activeEncoding](y);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=y,!0}explainEvents(y){return{down:!!(1&y),up:!!(2&y),drag:!!(4&y),move:!!(8&y),wheel:!!(16&y)}}_equalEvents(y,v,S){if(S){if(y.x!==v.x||y.y!==v.y)return!1}else if(y.col!==v.col||y.row!==v.row)return!1;return y.button===v.button&&y.action===v.action&&y.ctrl===v.ctrl&&y.alt===v.alt&&y.shift===v.shift}};a.CoreMouseService=g=u([c(0,h.IBufferService),c(1,h.ICoreService)],g)},6975:function(o,a,l){var u=this&&this.__decorate||function(g,y,v,S){var E,C=arguments.length,x=C<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(g,y,v,S);else for(var A=g.length-1;A>=0;A--)(E=g[A])&&(x=(C<3?E(x):C>3?E(y,v,x):E(y,v))||x);return C>3&&x&&Object.defineProperty(y,v,x),x},c=this&&this.__param||function(g,y){return function(v,S){y(v,S,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const h=l(1439),f=l(8460),d=l(844),_=l(2585),b=Object.freeze({insertMode:!1}),p=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let m=a.CoreService=class extends d.Disposable{constructor(g,y,v){super(),this._bufferService=g,this._logService=y,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new f.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new f.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(b),this.decPrivateModes=(0,h.clone)(p)}reset(){this.modes=(0,h.clone)(b),this.decPrivateModes=(0,h.clone)(p)}triggerDataEvent(g,y=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;y&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),y&&this._onUserInput.fire(),this._logService.debug(`sending data "${g}"`,()=>g.split("").map(S=>S.charCodeAt(0))),this._onData.fire(g)}triggerBinaryEvent(g){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${g}"`,()=>g.split("").map(y=>y.charCodeAt(0))),this._onBinary.fire(g))}};a.CoreService=m=u([c(0,_.IBufferService),c(1,_.ILogService),c(2,_.IOptionsService)],m)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const u=l(8055),c=l(8460),h=l(844),f=l(6106);let d=0,_=0;class b extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new f.SortedList(g=>g?.marker.line),this._onDecorationRegistered=this.register(new c.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new c.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(g){if(g.marker.isDisposed)return;const y=new p(g);if(y){const v=y.marker.onDispose(()=>y.dispose());y.onDispose(()=>{y&&(this._decorations.delete(y)&&this._onDecorationRemoved.fire(y),v.dispose())}),this._decorations.insert(y),this._onDecorationRegistered.fire(y)}return y}reset(){for(const g of this._decorations.values())g.dispose();this._decorations.clear()}*getDecorationsAtCell(g,y,v){let S=0,E=0;for(const C of this._decorations.getKeyIterator(y))S=C.options.x??0,E=S+(C.options.width??1),g>=S&&g<E&&(!v||(C.options.layer??"bottom")===v)&&(yield C)}forEachDecorationAtCell(g,y,v,S){this._decorations.forEachByKey(y,E=>{d=E.options.x??0,_=d+(E.options.width??1),g>=d&&g<_&&(!v||(E.options.layer??"bottom")===v)&&S(E)})}}a.DecorationService=b;class p extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(g){super(),this.options=g,this.onRenderEmitter=this.register(new c.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=g.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const u=l(2585),c=l(8343);class h{constructor(...d){this._entries=new Map;for(const[_,b]of d)this.set(_,b)}set(d,_){const b=this._entries.get(d);return this._entries.set(d,_),b}forEach(d){for(const[_,b]of this._entries.entries())d(_,b)}has(d){return this._entries.has(d)}get(d){return this._entries.get(d)}}a.ServiceCollection=h,a.InstantiationService=class{constructor(){this._services=new h,this._services.set(u.IInstantiationService,this)}setService(f,d){this._services.set(f,d)}getService(f){return this._services.get(f)}createInstance(f,...d){const _=(0,c.getServiceDependencies)(f).sort((m,g)=>m.index-g.index),b=[];for(const m of _){const g=this._services.get(m.id);if(!g)throw new Error(`[createInstance] ${f.name} depends on UNKNOWN service ${m.id}.`);b.push(g)}const p=_.length>0?_[0].index:d.length;if(d.length!==p)throw new Error(`[createInstance] First service dependency of ${f.name} at position ${p+1} conflicts with ${d.length} static arguments`);return new f(...d,...b)}}},7866:function(o,a,l){var u=this&&this.__decorate||function(p,m,g,y){var v,S=arguments.length,E=S<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,g):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(p,m,g,y);else for(var C=p.length-1;C>=0;C--)(v=p[C])&&(E=(S<3?v(E):S>3?v(m,g,E):v(m,g))||E);return S>3&&E&&Object.defineProperty(m,g,E),E},c=this&&this.__param||function(p,m){return function(g,y){m(g,y,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const h=l(844),f=l(2585),d={trace:f.LogLevelEnum.TRACE,debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF};let _,b=a.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(p){super(),this._optionsService=p,this._logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),_=this}_updateLogLevel(){this._logLevel=d[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(p){for(let m=0;m<p.length;m++)typeof p[m]=="function"&&(p[m]=p[m]())}_log(p,m,g){this._evalLazyOptionalParams(g),p.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+m,...g)}trace(p,...m){this._logLevel<=f.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,p,m)}debug(p,...m){this._logLevel<=f.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,p,m)}info(p,...m){this._logLevel<=f.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,p,m)}warn(p,...m){this._logLevel<=f.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,p,m)}error(p,...m){this._logLevel<=f.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,p,m)}};a.LogService=b=u([c(0,f.IOptionsService)],b),a.setTraceLogger=function(p){_=p},a.traceCall=function(p,m,g){if(typeof g.value!="function")throw new Error("not supported");const y=g.value;g.value=function(...v){if(_.logLevel!==f.LogLevelEnum.TRACE)return y.apply(this,v);_.trace(`GlyphRenderer#${y.name}(${v.map(E=>JSON.stringify(E)).join(", ")})`);const S=y.apply(this,v);return _.trace(`GlyphRenderer#${y.name} return`,S),S}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const u=l(8460),c=l(844),h=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const f=["normal","bold","100","200","300","400","500","600","700","800","900"];class d extends c.Disposable{constructor(b){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const p={...a.DEFAULT_OPTIONS};for(const m in b)if(m in p)try{const g=b[m];p[m]=this._sanitizeAndValidateOption(m,g)}catch(g){console.error(g)}this.rawOptions=p,this.options={...p},this._setupOptions(),this.register((0,c.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(b,p){return this.onOptionChange(m=>{m===b&&p(this.rawOptions[b])})}onMultipleOptionChange(b,p){return this.onOptionChange(m=>{b.indexOf(m)!==-1&&p()})}_setupOptions(){const b=m=>{if(!(m in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${m}"`);return this.rawOptions[m]},p=(m,g)=>{if(!(m in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${m}"`);g=this._sanitizeAndValidateOption(m,g),this.rawOptions[m]!==g&&(this.rawOptions[m]=g,this._onOptionChange.fire(m))};for(const m in this.rawOptions){const g={get:b.bind(this,m),set:p.bind(this,m)};Object.defineProperty(this.options,m,g)}}_sanitizeAndValidateOption(b,p){switch(b){case"cursorStyle":if(p||(p=a.DEFAULT_OPTIONS[b]),!function(m){return m==="block"||m==="underline"||m==="bar"}(p))throw new Error(`"${p}" is not a valid value for ${b}`);break;case"wordSeparator":p||(p=a.DEFAULT_OPTIONS[b]);break;case"fontWeight":case"fontWeightBold":if(typeof p=="number"&&1<=p&&p<=1e3)break;p=f.includes(p)?p:a.DEFAULT_OPTIONS[b];break;case"cursorWidth":p=Math.floor(p);case"lineHeight":case"tabStopWidth":if(p<1)throw new Error(`${b} cannot be less than 1, value: ${p}`);break;case"minimumContrastRatio":p=Math.max(1,Math.min(21,Math.round(10*p)/10));break;case"scrollback":if((p=Math.min(p,4294967295))<0)throw new Error(`${b} cannot be less than 0, value: ${p}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(p<=0)throw new Error(`${b} cannot be less than or equal to 0, value: ${p}`);break;case"rows":case"cols":if(!p&&p!==0)throw new Error(`${b} must be numeric, value: ${p}`);break;case"windowsPty":p=p??{}}return p}}a.OptionsService=d},2660:function(o,a,l){var u=this&&this.__decorate||function(d,_,b,p){var m,g=arguments.length,y=g<3?_:p===null?p=Object.getOwnPropertyDescriptor(_,b):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(d,_,b,p);else for(var v=d.length-1;v>=0;v--)(m=d[v])&&(y=(g<3?m(y):g>3?m(_,b,y):m(_,b))||y);return g>3&&y&&Object.defineProperty(_,b,y),y},c=this&&this.__param||function(d,_){return function(b,p){_(b,p,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const h=l(2585);let f=a.OscLinkService=class{constructor(d){this._bufferService=d,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(d){const _=this._bufferService.buffer;if(d.id===void 0){const v=_.addMarker(_.ybase+_.y),S={data:d,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(S,v)),this._dataByLinkId.set(S.id,S),S.id}const b=d,p=this._getEntryIdKey(b),m=this._entriesWithId.get(p);if(m)return this.addLineToLink(m.id,_.ybase+_.y),m.id;const g=_.addMarker(_.ybase+_.y),y={id:this._nextId++,key:this._getEntryIdKey(b),data:b,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(y,g)),this._entriesWithId.set(y.key,y),this._dataByLinkId.set(y.id,y),y.id}addLineToLink(d,_){const b=this._dataByLinkId.get(d);if(b&&b.lines.every(p=>p.line!==_)){const p=this._bufferService.buffer.addMarker(_);b.lines.push(p),p.onDispose(()=>this._removeMarkerFromLink(b,p))}}getLinkData(d){return this._dataByLinkId.get(d)?.data}_getEntryIdKey(d){return`${d.id};;${d.uri}`}_removeMarkerFromLink(d,_){const b=d.lines.indexOf(_);b!==-1&&(d.lines.splice(b,1),d.lines.length===0&&(d.data.id!==void 0&&this._entriesWithId.delete(d.key),this._dataByLinkId.delete(d.id)))}};a.OscLinkService=f=u([c(0,h.IBufferService)],f)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",u="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(c){return c[u]||[]},a.createDecorator=function(c){if(a.serviceRegistry.has(c))return a.serviceRegistry.get(c);const h=function(f,d,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(b,p,m){p[l]===p?p[u].push({id:b,index:m}):(p[u]=[{id:b,index:m}],p[l]=p)})(h,f,_)};return h.toString=()=>c,a.serviceRegistry.set(c,h),h}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const u=l(8343);var c;a.IBufferService=(0,u.createDecorator)("BufferService"),a.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),a.ICoreService=(0,u.createDecorator)("CoreService"),a.ICharsetService=(0,u.createDecorator)("CharsetService"),a.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(c||(a.LogLevelEnum=c={})),a.ILogService=(0,u.createDecorator)("LogService"),a.IOptionsService=(0,u.createDecorator)("OptionsService"),a.IOscLinkService=(0,u.createDecorator)("OscLinkService"),a.IUnicodeService=(0,u.createDecorator)("UnicodeService"),a.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const u=l(8460),c=l(225);class h{static extractShouldJoin(d){return(1&d)!=0}static extractWidth(d){return d>>1&3}static extractCharKind(d){return d>>3}static createPropertyValue(d,_,b=!1){return(16777215&d)<<3|(3&_)<<1|(b?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const d=new c.UnicodeV6;this.register(d),this._active=d.version,this._activeProvider=d}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(d){if(!this._providers[d])throw new Error(`unknown Unicode version "${d}"`);this._active=d,this._activeProvider=this._providers[d],this._onChange.fire(d)}register(d){this._providers[d.version]=d}wcwidth(d){return this._activeProvider.wcwidth(d)}getStringCellWidth(d){let _=0,b=0;const p=d.length;for(let m=0;m<p;++m){let g=d.charCodeAt(m);if(55296<=g&&g<=56319){if(++m>=p)return _+this.wcwidth(g);const S=d.charCodeAt(m);56320<=S&&S<=57343?g=1024*(g-55296)+S-56320+65536:_+=this.wcwidth(S)}const y=this.charProperties(g,b);let v=h.extractWidth(y);h.extractShouldJoin(y)&&(v-=h.extractWidth(b)),_+=v,b=y}return _}charProperties(d,_){return this._activeProvider.charProperties(d,_)}}a.UnicodeService=h}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o].call(l.exports,l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=i(9042),l=i(3236),u=i(844),c=i(5741),h=i(8285),f=i(7975),d=i(7090),_=["cols","rows"];class b extends u.Disposable{constructor(m){super(),this._core=this.register(new l.Terminal(m)),this._addonManager=this.register(new c.AddonManager),this._publicOptions={...this._core.options};const g=v=>this._core.options[v],y=(v,S)=>{this._checkReadonlyOptions(v),this._core.options[v]=S};for(const v in this._core.options){const S={get:g.bind(this,v),set:y.bind(this,v)};Object.defineProperty(this._publicOptions,v,S)}}_checkReadonlyOptions(m){if(_.includes(m))throw new Error(`Option "${m}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new f.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new d.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const m=this._core.coreService.decPrivateModes;let g="none";switch(this._core.coreMouseService.activeProtocol){case"X10":g="x10";break;case"VT200":g="vt200";break;case"DRAG":g="drag";break;case"ANY":g="any"}return{applicationCursorKeysMode:m.applicationCursorKeys,applicationKeypadMode:m.applicationKeypad,bracketedPasteMode:m.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:g,originMode:m.origin,reverseWraparoundMode:m.reverseWraparound,sendFocusMode:m.sendFocus,wraparoundMode:m.wraparound}}get options(){return this._publicOptions}set options(m){for(const g in m)this._publicOptions[g]=m[g]}blur(){this._core.blur()}focus(){this._core.focus()}input(m,g=!0){this._core.input(m,g)}resize(m,g){this._verifyIntegers(m,g),this._core.resize(m,g)}open(m){this._core.open(m)}attachCustomKeyEventHandler(m){this._core.attachCustomKeyEventHandler(m)}attachCustomWheelEventHandler(m){this._core.attachCustomWheelEventHandler(m)}registerLinkProvider(m){return this._core.registerLinkProvider(m)}registerCharacterJoiner(m){return this._checkProposedApi(),this._core.registerCharacterJoiner(m)}deregisterCharacterJoiner(m){this._checkProposedApi(),this._core.deregisterCharacterJoiner(m)}registerMarker(m=0){return this._verifyIntegers(m),this._core.registerMarker(m)}registerDecoration(m){return this._checkProposedApi(),this._verifyPositiveIntegers(m.x??0,m.width??0,m.height??0),this._core.registerDecoration(m)}hasSelection(){return this._core.hasSelection()}select(m,g,y){this._verifyIntegers(m,g,y),this._core.select(m,g,y)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(m,g){this._verifyIntegers(m,g),this._core.selectLines(m,g)}dispose(){super.dispose()}scrollLines(m){this._verifyIntegers(m),this._core.scrollLines(m)}scrollPages(m){this._verifyIntegers(m),this._core.scrollPages(m)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(m){this._verifyIntegers(m),this._core.scrollToLine(m)}clear(){this._core.clear()}write(m,g){this._core.write(m,g)}writeln(m,g){this._core.write(m),this._core.write(`\r
`,g)}paste(m){this._core.paste(m)}refresh(m,g){this._verifyIntegers(m,g),this._core.refresh(m,g)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(m){this._addonManager.loadAddon(this,m)}static get strings(){return a}_verifyIntegers(...m){for(const g of m)if(g===1/0||isNaN(g)||g%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...m){for(const g of m)if(g&&(g===1/0||isNaN(g)||g%1!=0||g<0))throw new Error("This API only accepts positive integers")}}o.Terminal=b})(),s})())})(AL);var hX=AL.exports;const fX=getComputedStyle(document.documentElement),At=t=>fX.getPropertyValue(t)||void 0;function wm(t){return{cursor:At("--bolt-elements-terminal-cursorColor"),cursorAccent:At("--bolt-elements-terminal-cursorColorAccent"),foreground:At("--bolt-elements-terminal-textColor"),background:At("--bolt-elements-terminal-backgroundColor"),selectionBackground:At("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:At("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:At("--bolt-elements-terminal-selection-backgroundColorInactive"),black:At("--bolt-elements-terminal-color-black"),red:At("--bolt-elements-terminal-color-red"),green:At("--bolt-elements-terminal-color-green"),yellow:At("--bolt-elements-terminal-color-yellow"),blue:At("--bolt-elements-terminal-color-blue"),magenta:At("--bolt-elements-terminal-color-magenta"),cyan:At("--bolt-elements-terminal-color-cyan"),white:At("--bolt-elements-terminal-color-white"),brightBlack:At("--bolt-elements-terminal-color-brightBlack"),brightRed:At("--bolt-elements-terminal-color-brightRed"),brightGreen:At("--bolt-elements-terminal-color-brightGreen"),brightYellow:At("--bolt-elements-terminal-color-brightYellow"),brightBlue:At("--bolt-elements-terminal-color-brightBlue"),brightMagenta:At("--bolt-elements-terminal-color-brightMagenta"),brightCyan:At("--bolt-elements-terminal-color-brightCyan"),brightWhite:At("--bolt-elements-terminal-color-brightWhite"),...t}}const dX=Mn("Terminal"),pX=R.memo(R.forwardRef(({className:t,theme:e,readonly:n,onTerminalReady:r,onTerminalResize:i},s)=>{const o=R.useRef(null),a=R.useRef();return R.useEffect(()=>{const l=o.current,u=new uX.FitAddon,c=new cX.WebLinksAddon,h=new hX.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:n,theme:wm(n?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace"});a.current=h,h.loadAddon(u),h.loadAddon(c),h.open(l);const f=new ResizeObserver(()=>{u.fit(),i?.(h.cols,h.rows)});return f.observe(l),dX.info("Attach terminal"),r?.(h),()=>{f.disconnect(),h.dispose()}},[]),R.useEffect(()=>{const l=a.current;l.options.theme=wm(n?{cursor:"#00000000"}:{}),l.options.disableStdin=n},[e,n]),R.useImperativeHandle(s,()=>({reloadStyles:()=>{const l=a.current;l.options.theme=wm(n?{cursor:"#00000000"}:{})}}),[]),L.jsx("div",{className:t,ref:o})})),Dw=3,H0=25,mX=100-H0,gX={tabSize:2},_X=R.memo(({files:t,unsavedFiles:e,editorDocument:n,selectedFile:r,isStreaming:i,onFileSelect:s,onEditorChange:o,onEditorScroll:a,onFileSave:l,onFileReset:u})=>{Ca.trace("EditorPanel");const c=Pt(ug),h=Pt(He.showTerminal),f=R.useRef([]),d=R.useRef(null),_=R.useRef(!1),[b,p]=R.useState(0),[m,g]=R.useState(1),y=R.useMemo(()=>{if(n)return n.filePath.split("/")},[n]),v=R.useMemo(()=>n!==void 0&&e?.has(n.filePath),[n,e]);R.useEffect(()=>{const E=mD.on("toggleTerminal",()=>{_.current=!0}),C=ug.subscribe(()=>{for(const x of Object.values(f.current))x?.reloadStyles()});return()=>{E(),C()}},[]),R.useEffect(()=>{const{current:E}=d;if(!E)return;const C=E.isCollapsed();!h&&!C?E.collapse():h&&C&&E.resize(H0),_.current=!1},[h]);const S=()=>{m<Dw&&(g(m+1),p(m))};return L.jsxs(L0,{direction:"vertical",children:[L.jsx(gl,{defaultSize:h?mX:100,minSize:20,children:L.jsxs(L0,{direction:"horizontal",children:[L.jsx(gl,{defaultSize:20,minSize:10,collapsible:!0,children:L.jsxs("div",{className:"flex flex-col border-r border-bolt-elements-borderColor h-full",children:[L.jsxs(pw,{children:[L.jsx("div",{className:"i-ph:tree-structure-duotone shrink-0"}),"Files"]}),L.jsx(wL,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,rootFolder:Rb,selectedFile:r,onFileSelect:s})]})}),L.jsx(P0,{}),L.jsxs(gl,{className:"flex flex-col",defaultSize:80,minSize:20,children:[L.jsx(pw,{className:"overflow-x-auto",children:y?.length&&L.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[L.jsx(lX,{pathSegments:y,files:t,onFileSelect:s}),v&&L.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[L.jsxs(I0,{onClick:l,children:[L.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),L.jsxs(I0,{onClick:u,children:[L.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),L.jsx("div",{className:"h-full flex-1 overflow-hidden",children:L.jsx(XI,{theme:c,editable:!i&&n!==void 0,settings:gX,doc:n,autoFocusOnDocumentChange:!Yq(),onScroll:a,onChange:o,onSave:l})})]})]})}),L.jsx(P0,{}),L.jsx(gl,{ref:d,defaultSize:h?H0:0,minSize:10,collapsible:!0,onExpand:()=>{_.current||He.toggleTerminal(!0)},onCollapse:()=>{_.current||He.toggleTerminal(!1)},children:L.jsx("div",{className:"h-full",children:L.jsxs("div",{className:"bg-bolt-elements-terminals-background h-full flex flex-col",children:[L.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-2 border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2",children:[Array.from({length:m},(E,C)=>{const x=b===C;return L.jsxs("button",{className:Xe("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textPrimary":x,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!x}),onClick:()=>p(C),children:[L.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Terminal ",m>1&&C+1]},C)}),m<Dw&&L.jsx(ci,{icon:"i-ph:plus",size:"md",onClick:S}),L.jsx(ci,{className:"ml-auto",icon:"i-ph:caret-down",title:"Close",size:"md",onClick:()=>He.toggleTerminal(!1)})]}),Array.from({length:m},(E,C)=>{const x=b===C;return L.jsx(pX,{className:Xe("h-full overflow-hidden",{hidden:!x}),ref:A=>{f.current.push(A)},onTerminalReady:A=>He.attachTerminal(A),onTerminalResize:(A,D)=>He.onTerminalResize(A,D),theme:c},C)})]})})})]})}),bX=R.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:n,setIsDropdownOpen:r,setHasSelectedPreview:i,previews:s})=>{const o=R.useRef(null),a=s.map((l,u)=>({...l,index:u})).sort((l,u)=>l.port-u.port);return R.useEffect(()=>{const l=u=>{o.current&&!o.current.contains(u.target)&&r(!1)};return n?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[n]),L.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[L.jsx(ci,{icon:"i-ph:plug",onClick:()=>r(!n)}),n&&L.jsxs("div",{className:"absolute right-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[L.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>L.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),r(!1),i(!0)},children:L.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})}),yX=R.memo(()=>{const t=R.useRef(null),e=R.useRef(null),[n,r]=R.useState(0),[i,s]=R.useState(!1),o=R.useRef(!1),a=Pt(He.previews),l=a[n],[u,c]=R.useState(""),[h,f]=R.useState();R.useEffect(()=>{if(!l){c(""),f(void 0);return}const{baseUrl:p}=l;c(p),f(p)},[l,h]);const d=R.useCallback(p=>{if(!l)return!1;const{baseUrl:m}=l;return p===m?!0:p.startsWith(m)?["/","?","#"].includes(p.charAt(m.length)):!1},[l]),_=R.useCallback((p,m,g,y)=>m.port<y[p].port?g:p,[]);R.useEffect(()=>{if(a.length>1&&!o.current){const p=a.reduce(_,0);r(p)}},[a]);const b=()=>{t.current&&(t.current.src=t.current.src)};return L.jsxs("div",{className:"w-full h-full flex flex-col",children:[i&&L.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>s(!1)}),L.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-1.5",children:[L.jsx(ci,{icon:"i-ph:arrow-clockwise",onClick:b}),L.jsx("div",{className:`flex items-center gap-1 flex-grow bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive\r
        focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive`,children:L.jsx("input",{ref:e,className:"w-full bg-transparent outline-none",type:"text",value:u,onChange:p=>{c(p.target.value)},onKeyDown:p=>{p.key==="Enter"&&d(u)&&(f(u),e.current&&e.current.blur())}})}),a.length>1&&L.jsx(bX,{activePreviewIndex:n,setActivePreviewIndex:r,isDropdownOpen:i,setHasSelectedPreview:p=>o.current=p,setIsDropdownOpen:s,previews:a})]}),L.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor",children:l?L.jsx("iframe",{ref:t,className:"border-none w-full h-full bg-white",src:h}):L.jsx("div",{className:"flex w-full h-full justify-center items-center bg-white",children:"No preview available"})})]})}),vX={ease:ui},EX={left:{value:"code",text:"Code"},right:{value:"preview",text:"Preview"}},SX=R.memo(({chatStarted:t,isStreaming:e})=>{Ca.trace("Workbench");const n=Pt(M_(He.previews,b=>b.length>0)),r=Pt(He.showWorkbench);R.useEffect(()=>{t&&!r&&He.showWorkbench.set(!0)},[t,r]);const i=Pt(He.selectedFile),s=Pt(He.currentDocument),o=Pt(He.unsavedFiles),a=Pt(He.files),l=Pt(He.currentView),u=b=>{He.currentView.set(b)};R.useEffect(()=>{n&&(u("preview"),He.showWorkbench.set(!0))},[n]),R.useEffect(()=>{He.setDocuments(a)},[a]);const c=R.useCallback(b=>{He.setCurrentDocumentContent(b.content)},[]),h=R.useCallback(b=>{He.setCurrentDocumentScrollPosition(b)},[]),f=R.useCallback(b=>{He.setSelectedFile(b)},[]),d=R.useCallback(()=>{He.saveCurrentDocument().catch(()=>{it.error("Failed to update file content")})},[]),_=R.useCallback(()=>{He.resetCurrentDocument()},[]);return t&&L.jsx("div",{className:"relative flex-1 border-l border-bolt-elements-borderColor shadow-sm overflow-hidden bg-bolt-elements-background-depth-2",children:L.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[L.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-bolt-elements-borderColor",children:[L.jsx(hq,{selected:l,options:EX,setSelected:u}),L.jsx("div",{className:"ml-auto"}),l==="code"&&L.jsxs(I0,{className:"mr-1 text-sm",onClick:()=>{He.toggleTerminal(!He.showTerminal.get())},children:[L.jsx("div",{className:"i-ph:terminal"}),"Toggle Terminal"]})]}),L.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[L.jsx(Lw,{initial:{x:l==="code"?0:"-100%"},animate:{x:l==="code"?0:"-100%"},children:L.jsx(_X,{editorDocument:s,isStreaming:e,selectedFile:i,files:a,unsavedFiles:o,onFileSelect:f,onEditorScroll:h,onEditorChange:c,onFileSave:d,onFileReset:_})}),L.jsx(Lw,{initial:{x:l==="preview"?0:"100%"},animate:{x:l==="preview"?0:"100%"},children:L.jsx(yX,{})})]})]})})}),Lw=R.memo(({children:t,...e})=>L.jsx(xr.div,{className:"absolute inset-0",transition:vX,...e,children:t}));function Pw(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&e.push(o),i=r+1,r=n.indexOf(",",i)}return e}function Ny(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const wX=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xX=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,CX={};function Ow(t,e){return(CX.jsx?xX:wX).test(t)}const TX=/[ \t\n\f\r]/g;function AX(t){return typeof t=="object"?t.type==="text"?Mw(t.value):!1:Mw(t)}function Mw(t){return t.replace(TX,"")===""}let ic=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};ic.prototype.normal={};ic.prototype.property={};ic.prototype.space=void 0;function RL(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new ic(n,r,e)}function U0(t){return t.toLowerCase()}let Nn=class{constructor(e,n){this.attribute=n,this.property=e}};Nn.prototype.attribute="";Nn.prototype.booleanish=!1;Nn.prototype.boolean=!1;Nn.prototype.commaOrSpaceSeparated=!1;Nn.prototype.commaSeparated=!1;Nn.prototype.defined=!1;Nn.prototype.mustUseProperty=!1;Nn.prototype.number=!1;Nn.prototype.overloadedBoolean=!1;Nn.prototype.property="";Nn.prototype.spaceSeparated=!1;Nn.prototype.space=void 0;let kX=0;const je=uo(),Nt=uo(),j0=uo(),be=uo(),mt=uo(),ea=uo(),Vn=uo();function uo(){return 2**++kX}const V0=Object.freeze(Object.defineProperty({__proto__:null,boolean:je,booleanish:Nt,commaOrSpaceSeparated:Vn,commaSeparated:ea,number:be,overloadedBoolean:j0,spaceSeparated:mt},Symbol.toStringTag,{value:"Module"})),xm=Object.keys(V0);let By=class extends Nn{constructor(e,n,r,i){let s=-1;if(super(e,n),Nw(this,"space",i),typeof r=="number")for(;++s<xm.length;){const o=xm[s];Nw(this,xm[s],(r&V0[o])===V0[o])}}};By.prototype.defined=!0;function Nw(t,e,n){n&&(t[e]=n)}function Pa(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new By(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[U0(r)]=r,n[U0(s.attribute)]=r}return new ic(e,n,t.space)}const IL=Pa({properties:{ariaActiveDescendant:null,ariaAtomic:Nt,ariaAutoComplete:null,ariaBusy:Nt,ariaChecked:Nt,ariaColCount:be,ariaColIndex:be,ariaColSpan:be,ariaControls:mt,ariaCurrent:null,ariaDescribedBy:mt,ariaDetails:null,ariaDisabled:Nt,ariaDropEffect:mt,ariaErrorMessage:null,ariaExpanded:Nt,ariaFlowTo:mt,ariaGrabbed:Nt,ariaHasPopup:null,ariaHidden:Nt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mt,ariaLevel:be,ariaLive:null,ariaModal:Nt,ariaMultiLine:Nt,ariaMultiSelectable:Nt,ariaOrientation:null,ariaOwns:mt,ariaPlaceholder:null,ariaPosInSet:be,ariaPressed:Nt,ariaReadOnly:Nt,ariaRelevant:null,ariaRequired:Nt,ariaRoleDescription:mt,ariaRowCount:be,ariaRowIndex:be,ariaRowSpan:be,ariaSelected:Nt,ariaSetSize:be,ariaSort:null,ariaValueMax:be,ariaValueMin:be,ariaValueNow:be,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function DL(t,e){return e in t?t[e]:e}function LL(t,e){return DL(t,e.toLowerCase())}const RX=Pa({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ea,acceptCharset:mt,accessKey:mt,action:null,allow:null,allowFullScreen:je,allowPaymentRequest:je,allowUserMedia:je,alt:null,as:null,async:je,autoCapitalize:null,autoComplete:mt,autoFocus:je,autoPlay:je,blocking:mt,capture:null,charSet:null,checked:je,cite:null,className:mt,cols:be,colSpan:null,content:null,contentEditable:Nt,controls:je,controlsList:mt,coords:be|ea,crossOrigin:null,data:null,dateTime:null,decoding:null,default:je,defer:je,dir:null,dirName:null,disabled:je,download:j0,draggable:Nt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:je,formTarget:null,headers:mt,height:be,hidden:j0,high:be,href:null,hrefLang:null,htmlFor:mt,httpEquiv:mt,id:null,imageSizes:null,imageSrcSet:null,inert:je,inputMode:null,integrity:null,is:null,isMap:je,itemId:null,itemProp:mt,itemRef:mt,itemScope:je,itemType:mt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:je,low:be,manifest:null,max:null,maxLength:be,media:null,method:null,min:null,minLength:be,multiple:je,muted:je,name:null,nonce:null,noModule:je,noValidate:je,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:je,optimum:be,pattern:null,ping:mt,placeholder:null,playsInline:je,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:je,referrerPolicy:null,rel:mt,required:je,reversed:je,rows:be,rowSpan:be,sandbox:mt,scope:null,scoped:je,seamless:je,selected:je,shadowRootClonable:je,shadowRootDelegatesFocus:je,shadowRootMode:null,shape:null,size:be,sizes:null,slot:null,span:be,spellCheck:Nt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:be,step:null,style:null,tabIndex:be,target:null,title:null,translate:null,type:null,typeMustMatch:je,useMap:null,value:Nt,width:be,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mt,axis:null,background:null,bgColor:null,border:be,borderColor:null,bottomMargin:be,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:je,declare:je,event:null,face:null,frame:null,frameBorder:null,hSpace:be,leftMargin:be,link:null,longDesc:null,lowSrc:null,marginHeight:be,marginWidth:be,noResize:je,noHref:je,noShade:je,noWrap:je,object:null,profile:null,prompt:null,rev:null,rightMargin:be,rules:null,scheme:null,scrolling:Nt,standby:null,summary:null,text:null,topMargin:be,valueType:null,version:null,vAlign:null,vLink:null,vSpace:be,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:je,disableRemotePlayback:je,prefix:null,property:null,results:be,security:null,unselectable:null},space:"html",transform:LL}),IX=Pa({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Vn,accentHeight:be,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:be,amplitude:be,arabicForm:null,ascent:be,attributeName:null,attributeType:null,azimuth:be,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:be,by:null,calcMode:null,capHeight:be,className:mt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:be,diffuseConstant:be,direction:null,display:null,dur:null,divisor:be,dominantBaseline:null,download:je,dx:null,dy:null,edgeMode:null,editable:null,elevation:be,enableBackground:null,end:null,event:null,exponent:be,externalResourcesRequired:null,fill:null,fillOpacity:be,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ea,g2:ea,glyphName:ea,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:be,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:be,horizOriginX:be,horizOriginY:be,id:null,ideographic:be,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:be,k:be,k1:be,k2:be,k3:be,k4:be,kernelMatrix:Vn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:be,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:be,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:be,overlineThickness:be,paintOrder:null,panose1:null,path:null,pathLength:be,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:be,pointsAtY:be,pointsAtZ:be,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vn,rev:Vn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vn,requiredFeatures:Vn,requiredFonts:Vn,requiredFormats:Vn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:be,specularExponent:be,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:be,strikethroughThickness:be,string:null,stroke:null,strokeDashArray:Vn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:be,strokeOpacity:be,strokeWidth:null,style:null,surfaceScale:be,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vn,tabIndex:be,tableValues:null,target:null,targetX:be,targetY:be,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:be,underlineThickness:be,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:be,values:null,vAlphabetic:be,vMathematical:be,vectorEffect:null,vHanging:be,vIdeographic:be,version:null,vertAdvY:be,vertOriginX:be,vertOriginY:be,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:be,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:DL}),PL=Pa({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),OL=Pa({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:LL}),ML=Pa({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),DX={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LX=/[A-Z]/g,Bw=/-[a-z]/g,PX=/^data[-\w.:]+$/i;function OX(t,e){const n=U0(e);let r=e,i=Nn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&PX.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Bw,NX);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Bw.test(s)){let o=s.replace(LX,MX);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=By}return new i(r,e)}function MX(t){return"-"+t.toLowerCase()}function NX(t){return t.charAt(1).toUpperCase()}const BX=RL([IL,RX,PL,OL,ML],"html"),Fy=RL([IL,IX,PL,OL,ML],"svg");function Fw(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function Hy(t){return t.join(" ").trim()}var Uy={},Hw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,FX=/\n/g,HX=/^\s*/,UX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,jX=/^:\s*/,VX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$X=/^[;\s]*/,zX=/^\s+|\s+$/g,WX=`
`,Uw="/",jw="*",Is="",qX="comment",GX="declaration";function KX(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(_){var b=_.match(FX);b&&(n+=b.length);var p=_.lastIndexOf(WX);r=~p?_.length-p:r+_.length}function s(){var _={line:n,column:r};return function(b){return b.position=new o(_),u(),b}}function o(_){this.start=_,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(_){var b=new Error(e.source+":"+n+":"+r+": "+_);if(b.reason=_,b.filename=e.source,b.line=n,b.column=r,b.source=t,!e.silent)throw b}function l(_){var b=_.exec(t);if(b){var p=b[0];return i(p),t=t.slice(p.length),b}}function u(){l(HX)}function c(_){var b;for(_=_||[];b=h();)b!==!1&&_.push(b);return _}function h(){var _=s();if(!(Uw!=t.charAt(0)||jw!=t.charAt(1))){for(var b=2;Is!=t.charAt(b)&&(jw!=t.charAt(b)||Uw!=t.charAt(b+1));)++b;if(b+=2,Is===t.charAt(b-1))return a("End of comment missing");var p=t.slice(2,b-2);return r+=2,i(p),t=t.slice(b),r+=2,_({type:qX,comment:p})}}function f(){var _=s(),b=l(UX);if(b){if(h(),!l(jX))return a("property missing ':'");var p=l(VX),m=_({type:GX,property:Vw(b[0].replace(Hw,Is)),value:p?Vw(p[0].replace(Hw,Is)):Is});return l($X),m}}function d(){var _=[];c(_);for(var b;b=f();)b!==!1&&(_.push(b),c(_));return _}return u(),d()}function Vw(t){return t?t.replace(zX,Is):Is}var YX=KX,XX=Gh&&Gh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uy,"__esModule",{value:!0});Uy.default=JX;const QX=XX(YX);function JX(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,QX.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.camelCase=void 0;var ZX=/^--[a-zA-Z0-9_-]+$/,eQ=/-([a-z])/g,tQ=/^[^-]+$/,nQ=/^-(webkit|moz|ms|o|khtml)-/,rQ=/^-(ms)-/,iQ=function(t){return!t||tQ.test(t)||ZX.test(t)},sQ=function(t,e){return e.toUpperCase()},$w=function(t,e){return"".concat(e,"-")},oQ=function(t,e){return e===void 0&&(e={}),iQ(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(rQ,$w):t=t.replace(nQ,$w),t.replace(eQ,sQ))};ep.camelCase=oQ;var aQ=Gh&&Gh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},lQ=aQ(Uy),uQ=ep;function $0(t,e){var n={};return!t||typeof t!="string"||(0,lQ.default)(t,function(r,i){r&&i&&(n[(0,uQ.camelCase)(r,e)]=i)}),n}$0.default=$0;var cQ=$0;const hQ=dd(cQ),fQ=dQ("start");function dQ(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function pQ(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?zw(t.position):"start"in t||"end"in t?zw(t):"line"in t||"column"in t?z0(t):""}function z0(t){return Ww(t&&t.line)+":"+Ww(t&&t.column)}function zw(t){return z0(t&&t.start)+"-"+z0(t&&t.end)}function Ww(t){return t&&typeof t=="number"?t:1}class hn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=pQ(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}hn.prototype.file="";hn.prototype.name="";hn.prototype.reason="";hn.prototype.message="";hn.prototype.stack="";hn.prototype.column=void 0;hn.prototype.line=void 0;hn.prototype.ancestors=void 0;hn.prototype.cause=void 0;hn.prototype.fatal=void 0;hn.prototype.place=void 0;hn.prototype.ruleId=void 0;hn.prototype.source=void 0;const jy={}.hasOwnProperty,mQ=new Map,gQ=/[A-Z]/g,_Q=new Set(["table","tbody","thead","tfoot","tr"]),bQ=new Set(["td","th"]),NL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function yQ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=AQ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=TQ(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Fy:BX,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=BL(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function BL(t,e,n){if(e.type==="element")return vQ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return EQ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return wQ(t,e,n);if(e.type==="mdxjsEsm")return SQ(t,e);if(e.type==="root")return xQ(t,e,n);if(e.type==="text")return CQ(t,e)}function vQ(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Fy,t.schema=i),t.ancestors.push(e);const s=HL(t,e.tagName,!1),o=kQ(t,e);let a=$y(t,e);return _Q.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!AX(l):!0})),FL(t,o,s,e),Vy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function EQ(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}_u(t,e.position)}function SQ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);_u(t,e.position)}function wQ(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Fy,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:HL(t,e.name,!0),o=RQ(t,e),a=$y(t,e);return FL(t,o,s,e),Vy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function xQ(t,e,n){const r={};return Vy(r,$y(t,e)),t.create(e,t.Fragment,r,n)}function CQ(t,e){return e.value}function FL(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Vy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function TQ(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function AQ(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=fQ(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function kQ(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&jy.call(e.properties,i)){const s=IQ(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&bQ.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function RQ(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else _u(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else _u(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function $y(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:mQ;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=BL(t,s,o);a!==void 0&&n.push(a)}return n}function IQ(t,e,n){const r=OX(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Ny(n):Hy(n)),r.property==="style"){let i=typeof n=="object"?n:DQ(t,String(n));return t.stylePropertyNameCase==="css"&&(i=LQ(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?DX[r.property]||r.property:r.attribute,n]}}function DQ(t,e){try{return hQ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new hn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=NL+"#cannot-parse-style-attribute",i}}function HL(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Ow(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Ow(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return jy.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);_u(t)}function _u(t,e){const n=new hn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=NL+"#cannot-handle-mdx-estrees-without-createevaluater",n}function LQ(t){const e={};let n;for(n in t)jy.call(t,n)&&(e[PQ(n)]=t[n]);return e}function PQ(t){let e=t.replace(gQ,OQ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function OQ(t){return"-"+t.toLowerCase()}const Cm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},MQ={};function NQ(t,e){const n=MQ,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return UL(t,r,i)}function UL(t,e,n){if(BQ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return qw(t.children,e,n)}return Array.isArray(t)?qw(t,e,n):""}function qw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=UL(t[i],e,n);return r.join("")}function BQ(t){return!!(t&&typeof t=="object")}const Gw=document.createElement("i");function zy(t){const e="&"+t+";";Gw.innerHTML=e;const n=Gw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function fi(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function or(t,e){return t.length>0?(fi(t,t.length,0,e),t):e}const Kw={}.hasOwnProperty;function FQ(t){const e={};let n=-1;for(;++n<t.length;)HQ(e,t[n]);return e}function HQ(t,e){let n;for(n in e){const i=(Kw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Kw.call(i,o)||(i[o]=[]);const a=s[o];UQ(i[o],Array.isArray(a)?a:a?[a]:[])}}}function UQ(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);fi(t,0,0,r)}function jL(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ta(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xr=gs(/[A-Za-z]/),Sr=gs(/[\dA-Za-z]/),jQ=gs(/[#-'*+\--9=?A-Z^-~]/);function W0(t){return t!==null&&(t<32||t===127)}const q0=gs(/\d/),VQ=gs(/[\dA-Fa-f]/),$Q=gs(/[!-/:-@[-`{-~]/);function Me(t){return t!==null&&t<-2}function Pn(t){return t!==null&&(t<0||t===32)}function ct(t){return t===-2||t===-1||t===32}const zQ=gs(/\p{P}|\p{S}/u),WQ=gs(/\s/);function gs(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Et(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return ct(l)?(t.enter(n),a(l)):e(l)}function a(l){return ct(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const qQ={tokenize:GQ};function GQ(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Et(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Me(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const KQ={tokenize:YQ},Yw={tokenize:XQ};function YQ(t){const e=this,n=[];let r=0,i,s,o;return a;function a(y){if(r<n.length){const v=n[r];return e.containerState=v[1],t.attempt(v[0].continuation,l,u)(y)}return u(y)}function l(y){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&g();const v=e.events.length;let S=v,E;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){E=e.events[S][1].end;break}m(r);let C=v;for(;C<e.events.length;)e.events[C][1].end={...E},C++;return fi(e.events,S+1,0,e.events.slice(v)),e.events.length=C,u(y)}return a(y)}function u(y){if(r===n.length){if(!i)return f(y);if(i.currentConstruct&&i.currentConstruct.concrete)return _(y);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Yw,c,h)(y)}function c(y){return i&&g(),m(r),f(y)}function h(y){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,_(y)}function f(y){return e.containerState={},t.attempt(Yw,d,_)(y)}function d(y){return r++,n.push([e.currentConstruct,e.containerState]),f(y)}function _(y){if(y===null){i&&g(),m(0),t.consume(y);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(y)}function b(y){if(y===null){p(t.exit("chunkFlow"),!0),m(0),t.consume(y);return}return Me(y)?(t.consume(y),p(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(y),b)}function p(y,v){const S=e.sliceStream(y);if(v&&S.push(null),y.previous=s,s&&(s.next=y),s=y,i.defineSkip(y.start),i.write(S),e.parser.lazy[y.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<o&&(!i.events[E][1].end||i.events[E][1].end.offset>o))return;const C=e.events.length;let x=C,A,D;for(;x--;)if(e.events[x][0]==="exit"&&e.events[x][1].type==="chunkFlow"){if(A){D=e.events[x][1].end;break}A=!0}for(m(r),E=C;E<e.events.length;)e.events[E][1].end={...D},E++;fi(e.events,x+1,0,e.events.slice(C)),e.events.length=E}}function m(y){let v=n.length;for(;v-- >y;){const S=n[v];e.containerState=S[1],S[0].exit.call(e,t)}n.length=y}function g(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function XQ(t,e,n){return Et(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Xw(t){if(t===null||Pn(t)||WQ(t))return 1;if(zQ(t))return 2}function Wy(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const G0={name:"attention",resolveAll:QQ,tokenize:JQ};function QQ(t,e){let n=-1,r,i,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};Qw(h,-l),Qw(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=or(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=or(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=or(u,Wy(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=or(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=or(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,fi(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function JQ(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Xw(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=Xw(l),h=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?h:h&&(i||!f)),u._close=!!(s===42?f:f&&(c||!h)),e(l)}}function Qw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const ZQ={name:"autolink",tokenize:eJ};function eJ(t,e,n){let r=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return Xr(d)?(t.consume(d),o):d===64?n(d):u(d)}function o(d){return d===43||d===45||d===46||Sr(d)?(r=1,a(d)):u(d)}function a(d){return d===58?(t.consume(d),r=0,l):(d===43||d===45||d===46||Sr(d))&&r++<32?(t.consume(d),a):(r=0,u(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||W0(d)?n(d):(t.consume(d),l)}function u(d){return d===64?(t.consume(d),c):jQ(d)?(t.consume(d),u):n(d)}function c(d){return Sr(d)?h(d):n(d)}function h(d){return d===46?(t.consume(d),r=0,c):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):f(d)}function f(d){if((d===45||Sr(d))&&r++<63){const _=d===45?f:h;return t.consume(d),_}return n(d)}}const tp={partial:!0,tokenize:tJ};function tJ(t,e,n){return r;function r(s){return ct(s)?Et(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Me(s)?e(s):n(s)}}const VL={continuation:{tokenize:rJ},exit:iJ,name:"blockQuote",tokenize:nJ};function nJ(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return ct(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function rJ(t,e,n){const r=this;return i;function i(o){return ct(o)?Et(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(VL,e,n)(o)}}function iJ(t){t.exit("blockQuote")}const $L={name:"characterEscape",tokenize:sJ};function sJ(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return $Q(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const zL={name:"characterReference",tokenize:oJ};function oJ(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=Sr,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=VQ,c):(t.enter("characterReferenceValue"),s=7,o=q0,c(h))}function c(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===Sr&&!zy(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),c):n(h)}}const Jw={partial:!0,tokenize:lJ},Zw={concrete:!0,name:"codeFenced",tokenize:aJ};function aJ(t,e,n){const r=this,i={partial:!0,tokenize:S};let s=0,o=0,a;return l;function l(E){return u(E)}function u(E){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(E)}function c(E){return E===a?(o++,t.consume(E),c):o<3?n(E):(t.exit("codeFencedFenceSequence"),ct(E)?Et(t,h,"whitespace")(E):h(E))}function h(E){return E===null||Me(E)?(t.exit("codeFencedFence"),r.interrupt?e(E):t.check(Jw,b,v)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(E))}function f(E){return E===null||Me(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(E)):ct(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Et(t,d,"whitespace")(E)):E===96&&E===a?n(E):(t.consume(E),f)}function d(E){return E===null||Me(E)?h(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),_(E))}function _(E){return E===null||Me(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(E)):E===96&&E===a?n(E):(t.consume(E),_)}function b(E){return t.attempt(i,v,p)(E)}function p(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),m}function m(E){return s>0&&ct(E)?Et(t,g,"linePrefix",s+1)(E):g(E)}function g(E){return E===null||Me(E)?t.check(Jw,b,v)(E):(t.enter("codeFlowValue"),y(E))}function y(E){return E===null||Me(E)?(t.exit("codeFlowValue"),g(E)):(t.consume(E),y)}function v(E){return t.exit("codeFenced"),e(E)}function S(E,C,x){let A=0;return D;function D(G){return E.enter("lineEnding"),E.consume(G),E.exit("lineEnding"),M}function M(G){return E.enter("codeFencedFence"),ct(G)?Et(E,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):H(G)}function H(G){return G===a?(E.enter("codeFencedFenceSequence"),B(G)):x(G)}function B(G){return G===a?(A++,E.consume(G),B):A>=o?(E.exit("codeFencedFenceSequence"),ct(G)?Et(E,$,"whitespace")(G):$(G)):x(G)}function $(G){return G===null||Me(G)?(E.exit("codeFencedFence"),C(G)):x(G)}}}function lJ(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Tm={name:"codeIndented",tokenize:cJ},uJ={partial:!0,tokenize:hJ};function cJ(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),Et(t,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Me(u)?t.attempt(uJ,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||Me(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function hJ(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Me(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Et(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Me(o)?i(o):n(o)}}const fJ={name:"codeText",previous:pJ,resolve:dJ,tokenize:mJ};function dJ(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function pJ(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mJ(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,c(h)):Me(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Me(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),u)}function c(h){return h===96?(t.consume(h),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class gJ{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&el(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),el(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),el(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);el(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);el(this.left,n.reverse())}}}function el(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function WL(t){const e={};let n=-1,r,i,s,o,a,l,u;const c=new gJ(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,_J(c,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return fi(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function _J(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,h,f=-1,d=n,_=0,b=0;const p=[b];for(;d;){for(;t.get(++i)[1]!==d;);s.push(i),d._tokenizer||(c=r.sliceStream(d),d.next||c.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(b=f+1,p.push(b),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):p.pop(),f=p.length;f--;){const m=a.slice(p[f],p[f+1]),g=s.pop();l.push([g,g+m.length-1]),t.splice(g,2,m)}for(l.reverse(),f=-1;++f<l.length;)u[_+l[f][0]]=_+l[f][1],_+=l[f][1]-l[f][0]-1;return u}const bJ={resolve:vJ,tokenize:EJ},yJ={partial:!0,tokenize:SJ};function vJ(t){return WL(t),t}function EJ(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Me(a)?t.check(yJ,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function SJ(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Et(t,s,"linePrefix")}function s(o){if(o===null||Me(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function qL(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(m){return m===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(m),t.exit(s),f):m===null||m===32||m===41||W0(m)?n(m):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),b(m))}function f(m){return m===62?(t.enter(s),t.consume(m),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===62?(t.exit("chunkString"),t.exit(a),f(m)):m===null||m===60||Me(m)?n(m):(t.consume(m),m===92?_:d)}function _(m){return m===60||m===62||m===92?(t.consume(m),d):d(m)}function b(m){return!c&&(m===null||m===41||Pn(m))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(m)):c<u&&m===40?(t.consume(m),c++,b):m===41?(t.consume(m),c--,b):m===null||m===32||m===40||W0(m)?n(m):(t.consume(m),m===92?p:b)}function p(m){return m===40||m===41||m===92?(t.consume(m),b):b(m)}}function GL(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),t.enter(s),c}function c(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):Me(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||Me(d)||a++>999?(t.exit("chunkString"),c(d)):(t.consume(d),l||(l=!ct(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(t.consume(d),a++,h):h(d)}}function KL(t,e,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),u(f))}function u(f){return f===o?(t.exit(s),l(o)):f===null?n(f):Me(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Et(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||Me(f)?(t.exit("chunkString"),u(f)):(t.consume(f),f===92?h:c)}function h(f){return f===o||f===92?(t.consume(f),c):c(f)}}function Ol(t,e){let n;return r;function r(i){return Me(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):ct(i)?Et(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const wJ={name:"definition",tokenize:CJ},xJ={partial:!0,tokenize:TJ};function CJ(t,e,n){const r=this;let i;return s;function s(d){return t.enter("definition"),o(d)}function o(d){return GL.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=ta(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):n(d)}function l(d){return Pn(d)?Ol(t,u)(d):u(d)}function u(d){return qL(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function c(d){return t.attempt(xJ,h,h)(d)}function h(d){return ct(d)?Et(t,f,"whitespace")(d):f(d)}function f(d){return d===null||Me(d)?(t.exit("definition"),r.parser.defined.push(i),e(d)):n(d)}}function TJ(t,e,n){return r;function r(a){return Pn(a)?Ol(t,i)(a):n(a)}function i(a){return KL(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return ct(a)?Et(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Me(a)?e(a):n(a)}}const AJ={name:"hardBreakEscape",tokenize:kJ};function kJ(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Me(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const RJ={name:"headingAtx",resolve:IJ,tokenize:DJ};function IJ(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},fi(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function DJ(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(t.consume(c),o):c===null||Pn(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||Me(c)?(t.exit("atxHeading"),e(c)):ct(c)?Et(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Pn(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const LJ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ex=["pre","script","style","textarea"],PJ={concrete:!0,name:"htmlFlow",resolveTo:NJ,tokenize:BJ},OJ={partial:!0,tokenize:HJ},MJ={partial:!0,tokenize:FJ};function NJ(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function BJ(t,e,n){const r=this;let i,s,o,a,l;return u;function u(O){return c(O)}function c(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),h}function h(O){return O===33?(t.consume(O),f):O===47?(t.consume(O),s=!0,b):O===63?(t.consume(O),i=3,r.interrupt?e:I):Xr(O)?(t.consume(O),o=String.fromCharCode(O),p):n(O)}function f(O){return O===45?(t.consume(O),i=2,d):O===91?(t.consume(O),i=5,a=0,_):Xr(O)?(t.consume(O),i=4,r.interrupt?e:I):n(O)}function d(O){return O===45?(t.consume(O),r.interrupt?e:I):n(O)}function _(O){const J="CDATA[";return O===J.charCodeAt(a++)?(t.consume(O),a===J.length?r.interrupt?e:H:_):n(O)}function b(O){return Xr(O)?(t.consume(O),o=String.fromCharCode(O),p):n(O)}function p(O){if(O===null||O===47||O===62||Pn(O)){const J=O===47,re=o.toLowerCase();return!J&&!s&&ex.includes(re)?(i=1,r.interrupt?e(O):H(O)):LJ.includes(o.toLowerCase())?(i=6,J?(t.consume(O),m):r.interrupt?e(O):H(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):s?g(O):y(O))}return O===45||Sr(O)?(t.consume(O),o+=String.fromCharCode(O),p):n(O)}function m(O){return O===62?(t.consume(O),r.interrupt?e:H):n(O)}function g(O){return ct(O)?(t.consume(O),g):D(O)}function y(O){return O===47?(t.consume(O),D):O===58||O===95||Xr(O)?(t.consume(O),v):ct(O)?(t.consume(O),y):D(O)}function v(O){return O===45||O===46||O===58||O===95||Sr(O)?(t.consume(O),v):S(O)}function S(O){return O===61?(t.consume(O),E):ct(O)?(t.consume(O),S):y(O)}function E(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),l=O,C):ct(O)?(t.consume(O),E):x(O)}function C(O){return O===l?(t.consume(O),l=null,A):O===null||Me(O)?n(O):(t.consume(O),C)}function x(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||Pn(O)?S(O):(t.consume(O),x)}function A(O){return O===47||O===62||ct(O)?y(O):n(O)}function D(O){return O===62?(t.consume(O),M):n(O)}function M(O){return O===null||Me(O)?H(O):ct(O)?(t.consume(O),M):n(O)}function H(O){return O===45&&i===2?(t.consume(O),Z):O===60&&i===1?(t.consume(O),ee):O===62&&i===4?(t.consume(O),z):O===63&&i===3?(t.consume(O),I):O===93&&i===5?(t.consume(O),P):Me(O)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(OJ,K,B)(O)):O===null||Me(O)?(t.exit("htmlFlowData"),B(O)):(t.consume(O),H)}function B(O){return t.check(MJ,$,K)(O)}function $(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),G}function G(O){return O===null||Me(O)?B(O):(t.enter("htmlFlowData"),H(O))}function Z(O){return O===45?(t.consume(O),I):H(O)}function ee(O){return O===47?(t.consume(O),o="",X):H(O)}function X(O){if(O===62){const J=o.toLowerCase();return ex.includes(J)?(t.consume(O),z):H(O)}return Xr(O)&&o.length<8?(t.consume(O),o+=String.fromCharCode(O),X):H(O)}function P(O){return O===93?(t.consume(O),I):H(O)}function I(O){return O===62?(t.consume(O),z):O===45&&i===2?(t.consume(O),I):H(O)}function z(O){return O===null||Me(O)?(t.exit("htmlFlowData"),K(O)):(t.consume(O),z)}function K(O){return t.exit("htmlFlow"),e(O)}}function FJ(t,e,n){const r=this;return i;function i(o){return Me(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function HJ(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(tp,e,n)}}const UJ={name:"htmlText",tokenize:jJ};function jJ(t,e,n){const r=this;let i,s,o;return a;function a(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),l}function l(I){return I===33?(t.consume(I),u):I===47?(t.consume(I),S):I===63?(t.consume(I),y):Xr(I)?(t.consume(I),x):n(I)}function u(I){return I===45?(t.consume(I),c):I===91?(t.consume(I),s=0,_):Xr(I)?(t.consume(I),g):n(I)}function c(I){return I===45?(t.consume(I),d):n(I)}function h(I){return I===null?n(I):I===45?(t.consume(I),f):Me(I)?(o=h,ee(I)):(t.consume(I),h)}function f(I){return I===45?(t.consume(I),d):h(I)}function d(I){return I===62?Z(I):I===45?f(I):h(I)}function _(I){const z="CDATA[";return I===z.charCodeAt(s++)?(t.consume(I),s===z.length?b:_):n(I)}function b(I){return I===null?n(I):I===93?(t.consume(I),p):Me(I)?(o=b,ee(I)):(t.consume(I),b)}function p(I){return I===93?(t.consume(I),m):b(I)}function m(I){return I===62?Z(I):I===93?(t.consume(I),m):b(I)}function g(I){return I===null||I===62?Z(I):Me(I)?(o=g,ee(I)):(t.consume(I),g)}function y(I){return I===null?n(I):I===63?(t.consume(I),v):Me(I)?(o=y,ee(I)):(t.consume(I),y)}function v(I){return I===62?Z(I):y(I)}function S(I){return Xr(I)?(t.consume(I),E):n(I)}function E(I){return I===45||Sr(I)?(t.consume(I),E):C(I)}function C(I){return Me(I)?(o=C,ee(I)):ct(I)?(t.consume(I),C):Z(I)}function x(I){return I===45||Sr(I)?(t.consume(I),x):I===47||I===62||Pn(I)?A(I):n(I)}function A(I){return I===47?(t.consume(I),Z):I===58||I===95||Xr(I)?(t.consume(I),D):Me(I)?(o=A,ee(I)):ct(I)?(t.consume(I),A):Z(I)}function D(I){return I===45||I===46||I===58||I===95||Sr(I)?(t.consume(I),D):M(I)}function M(I){return I===61?(t.consume(I),H):Me(I)?(o=M,ee(I)):ct(I)?(t.consume(I),M):A(I)}function H(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),i=I,B):Me(I)?(o=H,ee(I)):ct(I)?(t.consume(I),H):(t.consume(I),$)}function B(I){return I===i?(t.consume(I),i=void 0,G):I===null?n(I):Me(I)?(o=B,ee(I)):(t.consume(I),B)}function $(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Pn(I)?A(I):(t.consume(I),$)}function G(I){return I===47||I===62||Pn(I)?A(I):n(I)}function Z(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function ee(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),X}function X(I){return ct(I)?Et(t,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):P(I)}function P(I){return t.enter("htmlTextData"),o(I)}}const qy={name:"labelEnd",resolveAll:WJ,resolveTo:qJ,tokenize:GJ},VJ={tokenize:KJ},$J={tokenize:YJ},zJ={tokenize:XJ};function WJ(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&fi(t,0,t.length,n),t}function qJ(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=or(a,t.slice(s+1,s+r+3)),a=or(a,[["enter",c,e]]),a=or(a,Wy(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=or(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=or(a,t.slice(o+1)),a=or(a,[["exit",l,e]]),fi(t,s,t.length,a),t}function GJ(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(ta(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(VJ,c,o?c:h)(f):f===91?t.attempt($J,c,o?u:h)(f):o?c(f):h(f)}function u(f){return t.attempt(zJ,c,h)(f)}function c(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function KJ(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Pn(h)?Ol(t,s)(h):s(h)}function s(h){return h===41?c(h):qL(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Pn(h)?Ol(t,l)(h):c(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?KL(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return Pn(h)?Ol(t,c)(h):c(h)}function c(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function YJ(t,e,n){const r=this;return i;function i(a){return GL.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ta(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function XJ(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const QJ={name:"labelStartImage",resolveAll:qy.resolveAll,tokenize:JJ};function JJ(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const ZJ={name:"labelStartLink",resolveAll:qy.resolveAll,tokenize:eZ};function eZ(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Am={name:"lineEnding",tokenize:tZ};function tZ(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Et(t,e,"linePrefix")}}const Uh={name:"thematicBreak",tokenize:nZ};function nZ(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Me(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),ct(u)?Et(t,a,"whitespace")(u):a(u))}}const kn={continuation:{tokenize:oZ},exit:lZ,name:"list",tokenize:sZ},rZ={partial:!0,tokenize:uZ},iZ={partial:!0,tokenize:aZ};function sZ(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const _=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:q0(d)){if(r.containerState.type||(r.containerState.type=_,t.enter(_,{_container:!0})),_==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(Uh,n,u)(d):u(d);if(!r.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return n(d)}function l(d){return q0(d)&&++o<10?(t.consume(d),l):(!r.interrupt||o<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),u(d)):n(d)}function u(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,t.check(tp,r.interrupt?n:c,t.attempt(rZ,f,h))}function c(d){return r.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return ct(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),f):n(d)}function f(d){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function oZ(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(tp,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Et(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!ct(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(iZ,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Et(t,t.attempt(kn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function aZ(t,e,n){const r=this;return Et(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function lZ(t){t.exit(this.containerState.type)}function uZ(t,e,n){const r=this;return Et(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!ct(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const tx={name:"setextUnderline",resolveTo:cZ,tokenize:hZ};function cZ(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function hZ(t,e,n){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),ct(u)?Et(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Me(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const fZ={tokenize:dZ};function dZ(t){const e=this,n=t.attempt(tp,r,t.attempt(this.parser.constructs.flowInitial,i,Et(t,t.attempt(this.parser.constructs.flow,i,t.attempt(bJ,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const pZ={resolveAll:XL()},mZ=YL("string"),gZ=YL("text");function YL(t){return{resolveAll:XL(t==="text"?_Z:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function XL(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function _Z(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const bZ={42:kn,43:kn,45:kn,48:kn,49:kn,50:kn,51:kn,52:kn,53:kn,54:kn,55:kn,56:kn,57:kn,62:VL},yZ={91:wJ},vZ={[-2]:Tm,[-1]:Tm,32:Tm},EZ={35:RJ,42:Uh,45:[tx,Uh],60:PJ,61:tx,95:Uh,96:Zw,126:Zw},SZ={38:zL,92:$L},wZ={[-5]:Am,[-4]:Am,[-3]:Am,33:QJ,38:zL,42:G0,60:[ZQ,UJ],91:ZJ,92:[AJ,$L],93:qy,95:G0,96:fJ},xZ={null:[G0,pZ]},CZ={null:[42,95]},TZ={null:[]},AZ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:CZ,contentInitial:yZ,disable:TZ,document:bZ,flow:EZ,flowInitial:vZ,insideSpan:xZ,string:SZ,text:wZ},Symbol.toStringTag,{value:"Module"}));function kZ(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:C(S),check:C(E),consume:g,enter:y,exit:v,interrupt:C(E,{interrupt:!0})},u={code:null,containerState:{},defineSkip:b,events:[],now:_,parser:t,previous:null,sliceSerialize:f,sliceStream:d,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(M){return o=or(o,M),p(),o[o.length-1]!==null?[]:(x(e,0),u.events=Wy(s,u.events,u),u.events)}function f(M,H){return IZ(d(M),H)}function d(M){return RZ(o,M)}function _(){const{_bufferIndex:M,_index:H,line:B,column:$,offset:G}=r;return{_bufferIndex:M,_index:H,line:B,column:$,offset:G}}function b(M){i[M.line]=M.column,D()}function p(){let M;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<H.length;)m(H.charCodeAt(r._bufferIndex));else m(H)}}function m(M){c=c(M)}function g(M){Me(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,D()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=M}function y(M,H){const B=H||{};return B.type=M,B.start=_(),u.events.push(["enter",B,u]),a.push(B),B}function v(M){const H=a.pop();return H.end=_(),u.events.push(["exit",H,u]),H}function S(M,H){x(M,H.from)}function E(M,H){H.restore()}function C(M,H){return B;function B($,G,Z){let ee,X,P,I;return Array.isArray($)?K($):"tokenize"in $?K([$]):z($);function z(oe){return q;function q(F){const ie=F!==null&&oe[F],ue=F!==null&&oe.null,fe=[...Array.isArray(ie)?ie:ie?[ie]:[],...Array.isArray(ue)?ue:ue?[ue]:[]];return K(fe)(F)}}function K(oe){return ee=oe,X=0,oe.length===0?Z:O(oe[X])}function O(oe){return q;function q(F){return I=A(),P=oe,oe.partial||(u.currentConstruct=oe),oe.name&&u.parser.constructs.disable.null.includes(oe.name)?re():oe.tokenize.call(H?Object.assign(Object.create(u),H):u,l,J,re)(F)}}function J(oe){return M(P,I),G}function re(oe){return I.restore(),++X<ee.length?O(ee[X]):Z}}}function x(M,H){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&fi(u.events,H,u.events.length-H,M.resolve(u.events.slice(H),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function A(){const M=_(),H=u.previous,B=u.currentConstruct,$=u.events.length,G=Array.from(a);return{from:$,restore:Z};function Z(){r=M,u.previous=H,u.currentConstruct=B,u.events.length=$,a=G,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function RZ(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function IZ(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function DZ(t){const r={constructs:FQ([AZ,...(t||{}).extensions||[]]),content:i(qQ),defined:[],document:i(KQ),flow:i(fZ),lazy:{},string:i(mZ),text:i(gZ)};return r;function i(s){return o;function o(a){return kZ(r,s,a)}}}function LZ(t){for(;!WL(t););return t}const nx=/[\0\t\n\r]/g;function PZ(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(nx.lastIndex=h,u=nx.exec(s),f=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(f),!u){e=s.slice(h);break}if(d===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),d){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const OZ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function MZ(t){return t.replace(OZ,NZ)}function NZ(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return jL(n.slice(s?2:1),s?16:10)}return zy(n)||t}function jh(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?rx(t.position):"start"in t||"end"in t?rx(t):"line"in t||"column"in t?K0(t):""}function K0(t){return ix(t&&t.line)+":"+ix(t&&t.column)}function rx(t){return K0(t&&t.start)+"-"+K0(t&&t.end)}function ix(t){return t&&typeof t=="number"?t:1}const QL={}.hasOwnProperty;function BZ(t,e,n){return typeof e!="string"&&(n=e,e=void 0),FZ(n)(LZ(DZ(n).document().write(PZ()(t,e,!0))))}function FZ(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Pe),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(Je),blockQuote:s(ue),characterEscape:A,characterReference:A,codeFenced:s(fe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(fe,o),codeText:s(me,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Te),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Fe),hardBreakEscape:s(we),hardBreakTrailing:s(we),htmlFlow:s(de,o),htmlFlowData:A,htmlText:s(de,o),htmlTextData:A,image:s(ke),label:o,link:s(Pe),listItem:s(Ke),listItemValue:f,listOrdered:s(Oe,h),listUnordered:s(Oe),paragraph:s(Ue),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Je),strong:s(Ne),thematicBreak:s(nt)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:ie,autolinkProtocol:F,blockQuote:l(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:re,characterReferenceMarkerNumeric:re,characterReferenceValue:oe,characterReference:q,codeFenced:l(p),codeFencedFence:b,codeFencedFenceInfo:d,codeFencedFenceMeta:_,codeFlowValue:D,codeIndented:l(m),codeText:l(G),codeTextData:D,data:D,definition:l(),definitionDestinationString:v,definitionLabelString:g,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(B),htmlFlowData:D,htmlText:l($),htmlTextData:D,image:l(ee),label:P,labelText:X,lineEnding:M,link:l(Z),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:J,resourceDestinationString:I,resourceTitleString:z,resource:K,setextHeading:l(x),setextHeadingLineSequence:C,setextHeadingText:E,strong:l(),thematicBreak:l()}};JL(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ae){let _e={type:"root",children:[]};const Ce={stack:[_e],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:n},De=[];let N=-1;for(;++N<ae.length;)if(ae[N][1].type==="listOrdered"||ae[N][1].type==="listUnordered")if(ae[N][0]==="enter")De.push(N);else{const T=De.pop();N=i(ae,T,N)}for(N=-1;++N<ae.length;){const T=e[ae[N][0]];QL.call(T,ae[N][1].type)&&T[ae[N][1].type].call(Object.assign({sliceSerialize:ae[N][2].sliceSerialize},Ce),ae[N][1])}if(Ce.tokenStack.length>0){const T=Ce.tokenStack[Ce.tokenStack.length-1];(T[1]||sx).call(Ce,void 0,T[0])}for(_e.position={start:Bi(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:Bi(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},N=-1;++N<e.transforms.length;)_e=e.transforms[N](_e)||_e;return _e}function i(ae,_e,Ce){let De=_e-1,N=-1,T=!1,k,V,Q,se;for(;++De<=Ce;){const ce=ae[De];switch(ce[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ce[0]==="enter"?N++:N--,se=void 0;break}case"lineEndingBlank":{ce[0]==="enter"&&(k&&!se&&!N&&!Q&&(Q=De),se=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:se=void 0}if(!N&&ce[0]==="enter"&&ce[1].type==="listItemPrefix"||N===-1&&ce[0]==="exit"&&(ce[1].type==="listUnordered"||ce[1].type==="listOrdered")){if(k){let Be=De;for(V=void 0;Be--;){const lt=ae[Be];if(lt[1].type==="lineEnding"||lt[1].type==="lineEndingBlank"){if(lt[0]==="exit")continue;V&&(ae[V][1].type="lineEndingBlank",T=!0),lt[1].type="lineEnding",V=Be}else if(!(lt[1].type==="linePrefix"||lt[1].type==="blockQuotePrefix"||lt[1].type==="blockQuotePrefixWhitespace"||lt[1].type==="blockQuoteMarker"||lt[1].type==="listItemIndent"))break}Q&&(!V||Q<V)&&(k._spread=!0),k.end=Object.assign({},V?ae[V][1].start:ce[1].end),ae.splice(V||De,0,["exit",k,ce[2]]),De++,Ce++}if(ce[1].type==="listItemPrefix"){const Be={type:"listItem",_spread:!1,start:Object.assign({},ce[1].start),end:void 0};k=Be,ae.splice(De,0,["enter",Be,ce[2]]),De++,Ce++,Q=void 0,se=!0}}}return ae[_e][1]._spread=T,Ce}function s(ae,_e){return Ce;function Ce(De){a.call(this,ae(De),De),_e&&_e.call(this,De)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ae,_e,Ce){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([_e,Ce||void 0]),ae.position={start:Bi(_e.start),end:void 0}}function l(ae){return _e;function _e(Ce){ae&&ae.call(this,Ce),u.call(this,Ce)}}function u(ae,_e){const Ce=this.stack.pop(),De=this.tokenStack.pop();if(De)De[0].type!==ae.type&&(_e?_e.call(this,ae,De[0]):(De[1]||sx).call(this,ae,De[0]));else throw new Error("Cannot close `"+ae.type+"` ("+jh({start:ae.start,end:ae.end})+"): its not open");Ce.position.end=Bi(ae.end)}function c(){return NQ(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(ae){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function d(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=ae}function _(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=ae}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function p(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ae.replace(/(\r?\n|\r)$/g,"")}function g(ae){const _e=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=_e,Ce.identifier=ta(this.sliceSerialize(ae)).toLowerCase()}function y(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.title=ae}function v(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.url=ae}function S(ae){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Ce=this.sliceSerialize(ae).length;_e.depth=Ce}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function C(ae){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function x(){this.data.setextHeadingSlurpLineEnding=void 0}function A(ae){const Ce=this.stack[this.stack.length-1].children;let De=Ce[Ce.length-1];(!De||De.type!=="text")&&(De=at(),De.position={start:Bi(ae.start),end:void 0},Ce.push(De)),this.stack.push(De)}function D(ae){const _e=this.stack.pop();_e.value+=this.sliceSerialize(ae),_e.position.end=Bi(ae.end)}function M(ae){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ce=_e.children[_e.children.length-1];Ce.position.end=Bi(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(A.call(this,ae),D.call(this,ae))}function H(){this.data.atHardBreak=!0}function B(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ae}function $(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ae}function G(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ae}function Z(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=_e,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function ee(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=_e,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function X(ae){const _e=this.sliceSerialize(ae),Ce=this.stack[this.stack.length-2];Ce.label=MZ(_e),Ce.identifier=ta(_e).toLowerCase()}function P(){const ae=this.stack[this.stack.length-1],_e=this.resume(),Ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ce.type==="link"){const De=ae.children;Ce.children=De}else Ce.alt=_e}function I(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.url=ae}function z(){const ae=this.resume(),_e=this.stack[this.stack.length-1];_e.title=ae}function K(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function J(ae){const _e=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=_e,Ce.identifier=ta(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function re(ae){this.data.characterReferenceType=ae.type}function oe(ae){const _e=this.sliceSerialize(ae),Ce=this.data.characterReferenceType;let De;Ce?(De=jL(_e,Ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):De=zy(_e);const N=this.stack[this.stack.length-1];N.value+=De}function q(ae){const _e=this.stack.pop();_e.position.end=Bi(ae.end)}function F(ae){D.call(this,ae);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(ae)}function ie(ae){D.call(this,ae);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(ae)}function ue(){return{type:"blockquote",children:[]}}function fe(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function Te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Fe(){return{type:"emphasis",children:[]}}function Je(){return{type:"heading",depth:0,children:[]}}function we(){return{type:"break"}}function de(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function Pe(){return{type:"link",title:null,url:"",children:[]}}function Oe(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Ke(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function Ue(){return{type:"paragraph",children:[]}}function Ne(){return{type:"strong",children:[]}}function at(){return{type:"text",value:""}}function nt(){return{type:"thematicBreak"}}}function Bi(t){return{line:t.line,column:t.column,offset:t.offset}}function JL(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?JL(t,r):HZ(t,r)}}function HZ(t,e){let n;for(n in e)if(QL.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function sx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+jh({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+jh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+jh({start:e.start,end:e.end})+") is still open")}function UZ(t){const e=this;e.parser=n;function n(r){return BZ(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function jZ(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function VZ(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function $Z(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function zZ(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function WZ(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ox=qZ(/[\dA-Za-z]/);function qZ(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Oa(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&ox(t.charCodeAt(n+1))&&ox(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function GZ(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Oa(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function KZ(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YZ(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function ZL(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function XZ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ZL(t,e);const i={src:Oa(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function QZ(t,e){const n={src:Oa(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function JZ(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function ZZ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ZL(t,e);const i={href:Oa(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function eee(t,e){const n={href:Oa(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function tee(t,e,n){const r=t.all(e),i=n?nee(n):eP(e),s={},o=[];if(typeof e.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function nee(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=eP(n[r])}return e}function eP(t){const e=t.spread;return e??t.children.length>1}function ree(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function iee(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function see(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function oee(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tP=rP("end"),nP=rP("start");function rP(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function aee(t){const e=nP(t),n=tP(t);if(e&&n)return{start:e,end:n}}function lee(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=nP(e.children[1]),l=tP(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function uee(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const h=e.children[l],f={},d=o?o[l]:void 0;d&&(f.align=d);let _={type:"element",tagName:s,properties:f,children:[]};h&&(_.children=t.all(h),t.patch(h,_),_=t.applyData(h,_)),u.push(_)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function cee(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ax=9,lx=32;function hee(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(ux(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(ux(e.slice(i),i>0,!1)),s.join("")}function ux(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===ax||s===lx;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===ax||s===lx;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function fee(t,e){const n={type:"text",value:hee(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function dee(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const pee={blockquote:jZ,break:VZ,code:$Z,delete:zZ,emphasis:WZ,footnoteReference:GZ,heading:KZ,html:YZ,imageReference:XZ,image:QZ,inlineCode:JZ,linkReference:ZZ,link:eee,listItem:tee,list:ree,paragraph:iee,root:see,strong:oee,table:lee,tableCell:cee,tableRow:uee,text:fee,thematicBreak:dee,toml:oh,yaml:oh,definition:oh,footnoteDefinition:oh};function oh(){}const iP=-1,np=0,Ml=1,Gf=2,Gy=3,Ky=4,Yy=5,Xy=6,sP=7,oP=8,cx=typeof self=="object"?self:globalThis,mee=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case np:case iP:return n(o,i);case Ml:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Gf:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case Gy:return n(new Date(o),i);case Ky:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Yy:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case Xy:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case sP:{const{name:a,message:l}=o;return n(new cx[a](l),i)}case oP:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new cx[s](o),i)};return r},hx=t=>mee(new Map,t)(0),xo="",{toString:gee}={},{keys:_ee}=Object,tl=t=>{const e=typeof t;if(e!=="object"||!t)return[np,e];const n=gee.call(t).slice(8,-1);switch(n){case"Array":return[Ml,xo];case"Object":return[Gf,xo];case"Date":return[Gy,xo];case"RegExp":return[Ky,xo];case"Map":return[Yy,xo];case"Set":return[Xy,xo];case"DataView":return[Ml,n]}return n.includes("Array")?[Ml,n]:n.includes("Error")?[sP,n]:[Gf,n]},ah=([t,e])=>t===np&&(e==="function"||e==="symbol"),bee=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=tl(o);switch(a){case np:{let c=o;switch(l){case"bigint":a=oP,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([iP],o)}return i([a,c],o)}case Ml:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const c=[],h=i([a,c],o);for(const f of o)c.push(s(f));return h}case Gf:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],h=i([a,c],o);for(const f of _ee(o))(t||!ah(tl(o[f])))&&c.push([s(f),s(o[f])]);return h}case Gy:return i([a,o.toISOString()],o);case Ky:{const{source:c,flags:h}=o;return i([a,{source:c,flags:h}],o)}case Yy:{const c=[],h=i([a,c],o);for(const[f,d]of o)(t||!(ah(tl(f))||ah(tl(d))))&&c.push([s(f),s(d)]);return h}case Xy:{const c=[],h=i([a,c],o);for(const f of o)(t||!ah(tl(f)))&&c.push(s(f));return h}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},fx=(t,{json:e,lossy:n}={})=>{const r=[];return bee(!(e||n),!!e,new Map,r)(t),r},no=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?hx(fx(t,e)):structuredClone(t):(t,e)=>hx(fx(t,e));function yee(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function vee(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Eee(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||yee,r=t.options.footnoteBackLabel||vee,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),h=String(u.identifier).toUpperCase(),f=Oa(h.toLowerCase());let d=0;const _=[],b=t.footnoteCounts.get(h);for(;b!==void 0&&++d<=b;){_.length>0&&_.push({type:"text",value:" "});let g=typeof n=="string"?n:n(l,d);typeof g=="string"&&(g={type:"text",value:g}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(g)?g:[g]})}const p=c[c.length-1];if(p&&p.type==="element"&&p.tagName==="p"){const g=p.children[p.children.length-1];g&&g.type==="text"?g.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(..._)}else c.push(..._);const m={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(c,!0)};t.patch(u,m),a.push(m)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...no(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const aP=function(t){if(t==null)return Cee;if(typeof t=="function")return rp(t);if(typeof t=="object")return Array.isArray(t)?See(t):wee(t);if(typeof t=="string")return xee(t);throw new Error("Expected function, string, or object as test")};function See(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=aP(t[n]);return rp(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function wee(t){const e=t;return rp(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function xee(t){return rp(e);function e(n){return n&&n.type===t}}function rp(t){return e;function e(n,r,i){return!!(Tee(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Cee(){return!0}function Tee(t){return t!==null&&typeof t=="object"&&"type"in t}const lP=[],Aee=!0,Kf=!1,uP="skip";function cP(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=aP(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=lP,_,b,p;if((!e||s(l,u,c[c.length-1]||void 0))&&(d=kee(n(l,c)),d[0]===Kf))return d;if("children"in l&&l.children){const m=l;if(m.children&&d[0]!==uP)for(b=(r?m.children.length:-1)+o,p=c.concat(m);b>-1&&b<m.children.length;){const g=m.children[b];if(_=a(g,b,p)(),_[0]===Kf)return _;b=typeof _[1]=="number"?_[1]:b+o}}return d}}}function kee(t){return Array.isArray(t)?t:typeof t=="number"?[Aee,t]:t==null?lP:[t]}function Ma(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),cP(t,s,a,i);function a(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}const Y0={}.hasOwnProperty,Ree={};function Iee(t,e){const n=e||Ree,r=new Map,i=new Map,s=new Map,o={...pee,...n.handlers},a={all:u,applyData:Lee,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Dee,wrap:Oee};return Ma(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();h.has(f)||h.set(f,c)}}),a;function l(c,h){const f=c.type,d=a.handlers[f];if(Y0.call(a.handlers,f)&&d)return d(a,c,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:b,...p}=c,m=no(p);return m.children=a.all(c),m}return no(c)}return(a.options.unknownHandler||Pee)(a,c,h)}function u(c){const h=[];if("children"in c){const f=c.children;let d=-1;for(;++d<f.length;){const _=a.one(f[d],c);if(_){if(d&&f[d-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=dx(_.value)),!Array.isArray(_)&&_.type==="element")){const b=_.children[0];b&&b.type==="text"&&(b.value=dx(b.value))}Array.isArray(_)?h.push(..._):h.push(_)}}}return h}}function Dee(t,e){t.position&&(e.position=aee(t))}function Lee(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,no(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Pee(t,e){const n=e.data||{},r="value"in e&&!(Y0.call(n,"hProperties")||Y0.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Oee(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function dx(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function px(t,e){const n=Iee(t,e),r=n.one(t,void 0),i=Eee(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Mee(t,e){return t&&"run"in t?async function(n,r){const i=px(n,{file:r,...e});await t.run(i,r)}:function(n,r){return px(n,{file:r,...t||e})}}function mx(t){if(t)throw t}var Vh=Object.prototype.hasOwnProperty,hP=Object.prototype.toString,gx=Object.defineProperty,_x=Object.getOwnPropertyDescriptor,bx=function(e){return typeof Array.isArray=="function"?Array.isArray(e):hP.call(e)==="[object Array]"},yx=function(e){if(!e||hP.call(e)!=="[object Object]")return!1;var n=Vh.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Vh.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Vh.call(e,i)},vx=function(e,n){gx&&n.name==="__proto__"?gx(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Ex=function(e,n){if(n==="__proto__")if(Vh.call(e,n)){if(_x)return _x(e,n).value}else return;return e[n]},Nee=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=Ex(a,n),i=Ex(e,n),a!==i&&(c&&i&&(yx(i)||(s=bx(i)))?(s?(s=!1,o=r&&bx(r)?r:[]):o=r&&yx(r)?r:{},vx(a,{name:n,newValue:t(c,o,i)})):typeof i<"u"&&vx(a,{name:n,newValue:i}));return a};const km=dd(Nee);function X0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Bee(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?Fee(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Fee(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Hr={basename:Hee,dirname:Uee,extname:jee,join:Vee,sep:"/"};function Hee(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');sc(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function Uee(t){if(sc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function jee(t){sc(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Vee(...t){let e=-1,n;for(;++e<t.length;)sc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":$ee(n)}function $ee(t){sc(t);const e=t.codePointAt(0)===47;let n=zee(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function zee(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function sc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Wee={cwd:qee};function qee(){return"/"}function Q0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Gee(t){if(typeof t=="string")t=new URL(t);else if(!Q0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Kee(t)}function Kee(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Rm=["history","path","basename","stem","extname","dirname"];let Yee=class{constructor(e){let n;e?Q0(e)?n={path:e}:typeof e=="string"||Xee(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Wee.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Rm.length;){const s=Rm[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Rm.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Hr.basename(this.path):void 0}set basename(e){Dm(e,"basename"),Im(e,"basename"),this.path=Hr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Hr.dirname(this.path):void 0}set dirname(e){Sx(this.basename,"dirname"),this.path=Hr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Hr.extname(this.path):void 0}set extname(e){if(Im(e,"extname"),Sx(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Hr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Q0(e)&&(e=Gee(e)),Dm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Hr.basename(this.path,this.extname):void 0}set stem(e){Dm(e,"stem"),Im(e,"stem"),this.path=Hr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new hn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function Im(t,e){if(t&&t.includes(Hr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Hr.sep+"`")}function Dm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Sx(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Xee(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Qee=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Jee={}.hasOwnProperty;class Qy extends Qee{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Bee()}copy(){const e=new Qy;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(km(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Om("data",this.frozen),this.namespace[e]=n,this):Jee.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Om("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=lh(e),r=this.parser||this.Parser;return Lm("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Lm("process",this.parser||this.Parser),Pm("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=lh(e),l=r.parse(a);r.run(l,a,function(c,h,f){if(c||!h||!f)return u(c);const d=h,_=r.stringify(d,f);tte(_)?f.value=_:f.result=_,u(c,f)});function u(c,h){c||!h?o(c):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),Lm("processSync",this.parser||this.Parser),Pm("processSync",this.compiler||this.Compiler),this.process(e,i),xx("processSync","process",n),r;function i(s,o){n=!0,mx(s),r=o}}run(e,n,r){wx(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=lh(n);i.run(e,l,u);function u(c,h,f){const d=h||e;c?a(c):o?o(d):r(void 0,d,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),xx("runSync","run",r),i;function s(o,a){mx(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=lh(n),i=this.compiler||this.Compiler;return Pm("stringify",i),wx(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(Om("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=km(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[d,..._]=c;const b=r[f][1];X0(b)&&X0(d)&&(d=km(!0,b,d)),r[f]=[u,d,..._]}}}}const Zee=new Qy().freeze();function Lm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Pm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Om(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function wx(t){if(!X0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function xx(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function lh(t){return ete(t)?t:new Yee(t)}function ete(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function tte(t){return typeof t=="string"||nte(t)}function nte(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Ur={basename:rte,dirname:ite,extname:ste,join:ote,sep:"/"};function rte(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');oc(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function ite(t){if(oc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function ste(t){oc(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function ote(...t){let e=-1,n;for(;++e<t.length;)oc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ate(n)}function ate(t){oc(t);const e=t.codePointAt(0)===47;let n=lte(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function lte(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function oc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const ute={cwd:cte};function cte(){return"/"}function J0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function hte(t){if(typeof t=="string")t=new URL(t);else if(!J0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return fte(t)}function fte(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Mm=["history","path","basename","stem","extname","dirname"];class dte{constructor(e){let n;e?J0(e)?n={path:e}:typeof e=="string"||pte(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":ute.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Mm.length;){const s=Mm[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Mm.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ur.basename(this.path):void 0}set basename(e){Bm(e,"basename"),Nm(e,"basename"),this.path=Ur.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ur.dirname(this.path):void 0}set dirname(e){Cx(this.basename,"dirname"),this.path=Ur.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ur.extname(this.path):void 0}set extname(e){if(Nm(e,"extname"),Cx(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ur.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){J0(e)&&(e=hte(e)),Bm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ur.basename(this.path,this.extname):void 0}set stem(e){Bm(e,"stem"),Nm(e,"stem"),this.path=Ur.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new hn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Nm(t,e){if(t&&t.includes(Ur.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ur.sep+"`")}function Bm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Cx(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function pte(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const mte="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Tx=[],Ax={allowDangerousHtml:!0},gte=/^(https?|ircs?|mailto|xmpp)$/i,_te=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bte(t){const e=yte(t),n=vte(t);return Ete(e.runSync(e.parse(n),n),t)}function yte(t){const e=t.rehypePlugins||Tx,n=t.remarkPlugins||Tx,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Ax}:Ax;return Zee().use(UZ).use(n).use(Mee,r).use(e)}function vte(t){const e=t.children||"",n=new dte;return typeof e=="string"&&(n.value=e),n}function Ete(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||Ste;for(const c of _te)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+mte+c.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),Ma(t,u),yQ(t,{Fragment:L.Fragment,components:i,ignoreInvalidStyle:!0,jsx:L.jsx,jsxs:L.jsxs,passKeys:!0,passNode:!0});function u(c,h,f){if(c.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let d;for(d in Cm)if(Object.hasOwn(Cm,d)&&Object.hasOwn(c.properties,d)){const _=c.properties[d],b=Cm[d];(b===null||b.includes(c.tagName))&&(c.properties[d]=l(String(_||""),d,c))}}if(c.type==="element"){let d=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!d&&r&&typeof h=="number"&&(d=!r(c,h,f)),d&&f&&typeof h=="number")return a&&c.children?f.children.splice(h,1,...c.children):f.children.splice(h,1),h}}}function Ste(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||gte.test(t.slice(0,e))?t:""}let ac=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};ac.prototype.normal={};ac.prototype.property={};ac.prototype.space=void 0;function fP(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new ac(n,r,e)}function bu(t){return t.toLowerCase()}let Bn=class{constructor(e,n){this.attribute=n,this.property=e}};Bn.prototype.attribute="";Bn.prototype.booleanish=!1;Bn.prototype.boolean=!1;Bn.prototype.commaOrSpaceSeparated=!1;Bn.prototype.commaSeparated=!1;Bn.prototype.defined=!1;Bn.prototype.mustUseProperty=!1;Bn.prototype.number=!1;Bn.prototype.overloadedBoolean=!1;Bn.prototype.property="";Bn.prototype.spaceSeparated=!1;Bn.prototype.space=void 0;let wte=0;const Ve=co(),Bt=co(),Z0=co(),ye=co(),gt=co(),na=co(),$n=co();function co(){return 2**++wte}const e_=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ve,booleanish:Bt,commaOrSpaceSeparated:$n,commaSeparated:na,number:ye,overloadedBoolean:Z0,spaceSeparated:gt},Symbol.toStringTag,{value:"Module"})),Fm=Object.keys(e_);let Jy=class extends Bn{constructor(e,n,r,i){let s=-1;if(super(e,n),kx(this,"space",i),typeof r=="number")for(;++s<Fm.length;){const o=Fm[s];kx(this,Fm[s],(r&e_[o])===e_[o])}}};Jy.prototype.defined=!0;function kx(t,e,n){n&&(t[e]=n)}function Na(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Jy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[bu(r)]=r,n[bu(s.attribute)]=r}return new ac(e,n,t.space)}const dP=Na({properties:{ariaActiveDescendant:null,ariaAtomic:Bt,ariaAutoComplete:null,ariaBusy:Bt,ariaChecked:Bt,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:gt,ariaCurrent:null,ariaDescribedBy:gt,ariaDetails:null,ariaDisabled:Bt,ariaDropEffect:gt,ariaErrorMessage:null,ariaExpanded:Bt,ariaFlowTo:gt,ariaGrabbed:Bt,ariaHasPopup:null,ariaHidden:Bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gt,ariaLevel:ye,ariaLive:null,ariaModal:Bt,ariaMultiLine:Bt,ariaMultiSelectable:Bt,ariaOrientation:null,ariaOwns:gt,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:Bt,ariaReadOnly:Bt,ariaRelevant:null,ariaRequired:Bt,ariaRoleDescription:gt,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:Bt,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function pP(t,e){return e in t?t[e]:e}function mP(t,e){return pP(t,e.toLowerCase())}const xte=Na({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:na,acceptCharset:gt,accessKey:gt,action:null,allow:null,allowFullScreen:Ve,allowPaymentRequest:Ve,allowUserMedia:Ve,alt:null,as:null,async:Ve,autoCapitalize:null,autoComplete:gt,autoFocus:Ve,autoPlay:Ve,blocking:gt,capture:null,charSet:null,checked:Ve,cite:null,className:gt,cols:ye,colSpan:null,content:null,contentEditable:Bt,controls:Ve,controlsList:gt,coords:ye|na,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ve,defer:Ve,dir:null,dirName:null,disabled:Ve,download:Z0,draggable:Bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ve,formTarget:null,headers:gt,height:ye,hidden:Z0,high:ye,href:null,hrefLang:null,htmlFor:gt,httpEquiv:gt,id:null,imageSizes:null,imageSrcSet:null,inert:Ve,inputMode:null,integrity:null,is:null,isMap:Ve,itemId:null,itemProp:gt,itemRef:gt,itemScope:Ve,itemType:gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ve,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:Ve,muted:Ve,name:null,nonce:null,noModule:Ve,noValidate:Ve,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ve,optimum:ye,pattern:null,ping:gt,placeholder:null,playsInline:Ve,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ve,referrerPolicy:null,rel:gt,required:Ve,reversed:Ve,rows:ye,rowSpan:ye,sandbox:gt,scope:null,scoped:Ve,seamless:Ve,selected:Ve,shadowRootClonable:Ve,shadowRootDelegatesFocus:Ve,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:Bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:Ve,useMap:null,value:Bt,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gt,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ve,declare:Ve,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:Ve,noHref:Ve,noShade:Ve,noWrap:Ve,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:Bt,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ve,disableRemotePlayback:Ve,prefix:null,property:null,results:ye,security:null,unselectable:null},space:"html",transform:mP}),Cte=Na({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:$n,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:Ve,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:na,g2:na,glyphName:na,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:$n,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$n,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$n,rev:$n,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$n,requiredFeatures:$n,requiredFonts:$n,requiredFormats:$n,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:$n,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$n,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$n,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:pP}),gP=Na({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),_P=Na({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:mP}),bP=Na({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Tte=/[A-Z]/g,Rx=/-[a-z]/g,Ate=/^data[-\w.:]+$/i;function kte(t,e){const n=bu(e);let r=e,i=Bn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Ate.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Rx,Ite);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Rx.test(s)){let o=s.replace(Tte,Rte);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Jy}return new i(r,e)}function Rte(t){return"-"+t.toLowerCase()}function Ite(t){return t.charAt(1).toUpperCase()}const Dte=fP([dP,xte,gP,_P,bP],"html"),Lte=fP([dP,Cte,gP,_P,bP],"svg"),Ix=/[#.]/g;function Pte(t,e){const n=t||"",r={};let i=0,s,o;for(;i<n.length;){Ix.lastIndex=i;const a=Ix.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function yP(t,e,n){const r=n?Bte(n):void 0;function i(s,o,...a){let l;if(s==null){l={type:"root",children:[]};const u=o;a.unshift(u)}else{l=Pte(s,e);const u=l.tagName.toLowerCase(),c=r?r.get(u):void 0;if(l.tagName=c||u,Ote(o))a.unshift(o);else for(const[h,f]of Object.entries(o))Mte(t,l.properties,h,f)}for(const u of a)t_(l.children,u);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Ote(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const o of s)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Mte(t,e,n,r){const i=kte(t,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=Fw(r):i.commaSeparated?s=Pw(r):i.commaOrSpaceSeparated?s=Fw(Pw(r).join(" ")):s=Dx(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?Nte(r):String(r);if(Array.isArray(s)){const o=[];for(const a of s)o.push(Dx(i,i.property,a));s=o}i.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[i.property]=s}}function t_(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)t_(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?t_(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function Dx(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||bu(n)===bu(e)))return!0}return n}function Nte(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function Bte(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const Fte=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Hte=yP(Dte,"div"),Ute=yP(Lte,"g",Fte);let lc=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};lc.prototype.normal={};lc.prototype.property={};lc.prototype.space=void 0;function vP(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new lc(n,r,e)}function n_(t){return t.toLowerCase()}let Fn=class{constructor(e,n){this.attribute=n,this.property=e}};Fn.prototype.attribute="";Fn.prototype.booleanish=!1;Fn.prototype.boolean=!1;Fn.prototype.commaOrSpaceSeparated=!1;Fn.prototype.commaSeparated=!1;Fn.prototype.defined=!1;Fn.prototype.mustUseProperty=!1;Fn.prototype.number=!1;Fn.prototype.overloadedBoolean=!1;Fn.prototype.property="";Fn.prototype.spaceSeparated=!1;Fn.prototype.space=void 0;let jte=0;const $e=ho(),Ft=ho(),r_=ho(),ve=ho(),_t=ho(),ra=ho(),zn=ho();function ho(){return 2**++jte}const i_=Object.freeze(Object.defineProperty({__proto__:null,boolean:$e,booleanish:Ft,commaOrSpaceSeparated:zn,commaSeparated:ra,number:ve,overloadedBoolean:r_,spaceSeparated:_t},Symbol.toStringTag,{value:"Module"})),Hm=Object.keys(i_);let Zy=class extends Fn{constructor(e,n,r,i){let s=-1;if(super(e,n),Lx(this,"space",i),typeof r=="number")for(;++s<Hm.length;){const o=Hm[s];Lx(this,Hm[s],(r&i_[o])===i_[o])}}};Zy.prototype.defined=!0;function Lx(t,e,n){n&&(t[e]=n)}function Ba(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Zy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[n_(r)]=r,n[n_(s.attribute)]=r}return new lc(e,n,t.space)}const EP=Ba({properties:{ariaActiveDescendant:null,ariaAtomic:Ft,ariaAutoComplete:null,ariaBusy:Ft,ariaChecked:Ft,ariaColCount:ve,ariaColIndex:ve,ariaColSpan:ve,ariaControls:_t,ariaCurrent:null,ariaDescribedBy:_t,ariaDetails:null,ariaDisabled:Ft,ariaDropEffect:_t,ariaErrorMessage:null,ariaExpanded:Ft,ariaFlowTo:_t,ariaGrabbed:Ft,ariaHasPopup:null,ariaHidden:Ft,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_t,ariaLevel:ve,ariaLive:null,ariaModal:Ft,ariaMultiLine:Ft,ariaMultiSelectable:Ft,ariaOrientation:null,ariaOwns:_t,ariaPlaceholder:null,ariaPosInSet:ve,ariaPressed:Ft,ariaReadOnly:Ft,ariaRelevant:null,ariaRequired:Ft,ariaRoleDescription:_t,ariaRowCount:ve,ariaRowIndex:ve,ariaRowSpan:ve,ariaSelected:Ft,ariaSetSize:ve,ariaSort:null,ariaValueMax:ve,ariaValueMin:ve,ariaValueNow:ve,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function SP(t,e){return e in t?t[e]:e}function wP(t,e){return SP(t,e.toLowerCase())}const Vte=Ba({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ra,acceptCharset:_t,accessKey:_t,action:null,allow:null,allowFullScreen:$e,allowPaymentRequest:$e,allowUserMedia:$e,alt:null,as:null,async:$e,autoCapitalize:null,autoComplete:_t,autoFocus:$e,autoPlay:$e,blocking:_t,capture:null,charSet:null,checked:$e,cite:null,className:_t,cols:ve,colSpan:null,content:null,contentEditable:Ft,controls:$e,controlsList:_t,coords:ve|ra,crossOrigin:null,data:null,dateTime:null,decoding:null,default:$e,defer:$e,dir:null,dirName:null,disabled:$e,download:r_,draggable:Ft,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:$e,formTarget:null,headers:_t,height:ve,hidden:r_,high:ve,href:null,hrefLang:null,htmlFor:_t,httpEquiv:_t,id:null,imageSizes:null,imageSrcSet:null,inert:$e,inputMode:null,integrity:null,is:null,isMap:$e,itemId:null,itemProp:_t,itemRef:_t,itemScope:$e,itemType:_t,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:$e,low:ve,manifest:null,max:null,maxLength:ve,media:null,method:null,min:null,minLength:ve,multiple:$e,muted:$e,name:null,nonce:null,noModule:$e,noValidate:$e,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:$e,optimum:ve,pattern:null,ping:_t,placeholder:null,playsInline:$e,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:$e,referrerPolicy:null,rel:_t,required:$e,reversed:$e,rows:ve,rowSpan:ve,sandbox:_t,scope:null,scoped:$e,seamless:$e,selected:$e,shadowRootClonable:$e,shadowRootDelegatesFocus:$e,shadowRootMode:null,shape:null,size:ve,sizes:null,slot:null,span:ve,spellCheck:Ft,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ve,step:null,style:null,tabIndex:ve,target:null,title:null,translate:null,type:null,typeMustMatch:$e,useMap:null,value:Ft,width:ve,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_t,axis:null,background:null,bgColor:null,border:ve,borderColor:null,bottomMargin:ve,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:$e,declare:$e,event:null,face:null,frame:null,frameBorder:null,hSpace:ve,leftMargin:ve,link:null,longDesc:null,lowSrc:null,marginHeight:ve,marginWidth:ve,noResize:$e,noHref:$e,noShade:$e,noWrap:$e,object:null,profile:null,prompt:null,rev:null,rightMargin:ve,rules:null,scheme:null,scrolling:Ft,standby:null,summary:null,text:null,topMargin:ve,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ve,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:$e,disableRemotePlayback:$e,prefix:null,property:null,results:ve,security:null,unselectable:null},space:"html",transform:wP}),$te=Ba({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:zn,accentHeight:ve,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ve,amplitude:ve,arabicForm:null,ascent:ve,attributeName:null,attributeType:null,azimuth:ve,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ve,by:null,calcMode:null,capHeight:ve,className:_t,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ve,diffuseConstant:ve,direction:null,display:null,dur:null,divisor:ve,dominantBaseline:null,download:$e,dx:null,dy:null,edgeMode:null,editable:null,elevation:ve,enableBackground:null,end:null,event:null,exponent:ve,externalResourcesRequired:null,fill:null,fillOpacity:ve,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ra,g2:ra,glyphName:ra,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ve,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ve,horizOriginX:ve,horizOriginY:ve,id:null,ideographic:ve,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ve,k:ve,k1:ve,k2:ve,k3:ve,k4:ve,kernelMatrix:zn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ve,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ve,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ve,overlineThickness:ve,paintOrder:null,panose1:null,path:null,pathLength:ve,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_t,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ve,pointsAtY:ve,pointsAtZ:ve,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zn,rev:zn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zn,requiredFeatures:zn,requiredFonts:zn,requiredFormats:zn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ve,specularExponent:ve,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ve,strikethroughThickness:ve,string:null,stroke:null,strokeDashArray:zn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ve,strokeOpacity:ve,strokeWidth:null,style:null,surfaceScale:ve,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zn,tabIndex:ve,tableValues:null,target:null,targetX:ve,targetY:ve,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ve,underlineThickness:ve,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ve,values:null,vAlphabetic:ve,vMathematical:ve,vectorEffect:null,vHanging:ve,vIdeographic:ve,version:null,vertAdvY:ve,vertOriginX:ve,vertOriginY:ve,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ve,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:SP}),xP=Ba({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),CP=Ba({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:wP}),TP=Ba({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),zte=/[A-Z]/g,Px=/-[a-z]/g,Wte=/^data[-\w.:]+$/i;function qte(t,e){const n=n_(e);let r=e,i=Fn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Wte.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Px,Kte);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Px.test(s)){let o=s.replace(zte,Gte);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Zy}return new i(r,e)}function Gte(t){return"-"+t.toLowerCase()}function Kte(t){return t.charAt(1).toUpperCase()}const AP=vP([EP,Vte,xP,CP,TP],"html"),kP=vP([EP,$te,xP,CP,TP],"svg");function Yte(t){const e=String(t),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=e.length){let o=0;for(;;){let a=n[o];if(a===void 0){const l=Ox(e,n[o-1]);a=l===-1?e.length+1:l+1,n[o]=a}if(a>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s};o++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const a=n[n.length-1],l=Ox(e,a),u=l===-1?e.length+1:l+1;if(a===u)break;n.push(u)}const o=(s.line>1?n[s.line-2]:0)+s.column-1;if(o<n[s.line-1])return o}}}function Ox(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Fs={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},RP={}.hasOwnProperty,Xte=Object.prototype;function Qte(t,e){const n=e||{};return e1({file:n.file||void 0,location:!1,schema:n.space==="svg"?kP:AP,verbose:n.verbose||!1},t)}function e1(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},$h(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:IP(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const s=String(t.file),o=Yte(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},$h(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},$h(t,r,n),n}default:return n=Jte(t,e),n}}function IP(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=e1(t,e[n]);r.push(i)}return r}function Jte(t,e){const n=t.schema;t.schema=e.namespaceURI===Fs.svg?kP:AP;let r=-1;const i={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;RP.call(Xte,l)||(i[l]=a.value)}const o=(t.schema.space==="svg"?Ute:Hte)(e.tagName,i,IP(t,e.childNodes));if($h(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,u=l&&l.startTag&&Ho(l.startTag),c=l&&l.endTag&&Ho(l.endTag),h=e1(t,a.content);u&&c&&t.file&&(h.position={start:u.end,end:c.start}),o.content=h}return t.schema=n,o}function $h(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=Zte(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function Zte(t,e,n){const r=Ho(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)RP.call(n.attrs,o)&&(s[qte(t.schema,o).property]=Ho(n.attrs[o]));n.startTag;const a=Ho(n.startTag),l=n.endTag?Ho(n.endTag):void 0,u={opening:a};l&&(u.closing=l),u.properties=s,e.data={position:u}}}return r}function Ho(t){const e=Mx({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=Mx({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function Mx(t){return t.line&&t.column?t:void 0}let uc=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};uc.prototype.normal={};uc.prototype.property={};uc.prototype.space=void 0;function DP(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new uc(n,r,e)}function s_(t){return t.toLowerCase()}let Hn=class{constructor(e,n){this.attribute=n,this.property=e}};Hn.prototype.attribute="";Hn.prototype.booleanish=!1;Hn.prototype.boolean=!1;Hn.prototype.commaOrSpaceSeparated=!1;Hn.prototype.commaSeparated=!1;Hn.prototype.defined=!1;Hn.prototype.mustUseProperty=!1;Hn.prototype.number=!1;Hn.prototype.overloadedBoolean=!1;Hn.prototype.property="";Hn.prototype.spaceSeparated=!1;Hn.prototype.space=void 0;let ene=0;const ze=fo(),Ht=fo(),o_=fo(),Ee=fo(),bt=fo(),ia=fo(),Wn=fo();function fo(){return 2**++ene}const a_=Object.freeze(Object.defineProperty({__proto__:null,boolean:ze,booleanish:Ht,commaOrSpaceSeparated:Wn,commaSeparated:ia,number:Ee,overloadedBoolean:o_,spaceSeparated:bt},Symbol.toStringTag,{value:"Module"})),Um=Object.keys(a_);let t1=class extends Hn{constructor(e,n,r,i){let s=-1;if(super(e,n),Nx(this,"space",i),typeof r=="number")for(;++s<Um.length;){const o=Um[s];Nx(this,Um[s],(r&a_[o])===a_[o])}}};t1.prototype.defined=!0;function Nx(t,e,n){n&&(t[e]=n)}function Fa(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new t1(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[s_(r)]=r,n[s_(s.attribute)]=r}return new uc(e,n,t.space)}const LP=Fa({properties:{ariaActiveDescendant:null,ariaAtomic:Ht,ariaAutoComplete:null,ariaBusy:Ht,ariaChecked:Ht,ariaColCount:Ee,ariaColIndex:Ee,ariaColSpan:Ee,ariaControls:bt,ariaCurrent:null,ariaDescribedBy:bt,ariaDetails:null,ariaDisabled:Ht,ariaDropEffect:bt,ariaErrorMessage:null,ariaExpanded:Ht,ariaFlowTo:bt,ariaGrabbed:Ht,ariaHasPopup:null,ariaHidden:Ht,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bt,ariaLevel:Ee,ariaLive:null,ariaModal:Ht,ariaMultiLine:Ht,ariaMultiSelectable:Ht,ariaOrientation:null,ariaOwns:bt,ariaPlaceholder:null,ariaPosInSet:Ee,ariaPressed:Ht,ariaReadOnly:Ht,ariaRelevant:null,ariaRequired:Ht,ariaRoleDescription:bt,ariaRowCount:Ee,ariaRowIndex:Ee,ariaRowSpan:Ee,ariaSelected:Ht,ariaSetSize:Ee,ariaSort:null,ariaValueMax:Ee,ariaValueMin:Ee,ariaValueNow:Ee,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function PP(t,e){return e in t?t[e]:e}function OP(t,e){return PP(t,e.toLowerCase())}const tne=Fa({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ia,acceptCharset:bt,accessKey:bt,action:null,allow:null,allowFullScreen:ze,allowPaymentRequest:ze,allowUserMedia:ze,alt:null,as:null,async:ze,autoCapitalize:null,autoComplete:bt,autoFocus:ze,autoPlay:ze,blocking:bt,capture:null,charSet:null,checked:ze,cite:null,className:bt,cols:Ee,colSpan:null,content:null,contentEditable:Ht,controls:ze,controlsList:bt,coords:Ee|ia,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ze,defer:ze,dir:null,dirName:null,disabled:ze,download:o_,draggable:Ht,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ze,formTarget:null,headers:bt,height:Ee,hidden:o_,high:Ee,href:null,hrefLang:null,htmlFor:bt,httpEquiv:bt,id:null,imageSizes:null,imageSrcSet:null,inert:ze,inputMode:null,integrity:null,is:null,isMap:ze,itemId:null,itemProp:bt,itemRef:bt,itemScope:ze,itemType:bt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ze,low:Ee,manifest:null,max:null,maxLength:Ee,media:null,method:null,min:null,minLength:Ee,multiple:ze,muted:ze,name:null,nonce:null,noModule:ze,noValidate:ze,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ze,optimum:Ee,pattern:null,ping:bt,placeholder:null,playsInline:ze,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ze,referrerPolicy:null,rel:bt,required:ze,reversed:ze,rows:Ee,rowSpan:Ee,sandbox:bt,scope:null,scoped:ze,seamless:ze,selected:ze,shadowRootClonable:ze,shadowRootDelegatesFocus:ze,shadowRootMode:null,shape:null,size:Ee,sizes:null,slot:null,span:Ee,spellCheck:Ht,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ee,step:null,style:null,tabIndex:Ee,target:null,title:null,translate:null,type:null,typeMustMatch:ze,useMap:null,value:Ht,width:Ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bt,axis:null,background:null,bgColor:null,border:Ee,borderColor:null,bottomMargin:Ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ze,declare:ze,event:null,face:null,frame:null,frameBorder:null,hSpace:Ee,leftMargin:Ee,link:null,longDesc:null,lowSrc:null,marginHeight:Ee,marginWidth:Ee,noResize:ze,noHref:ze,noShade:ze,noWrap:ze,object:null,profile:null,prompt:null,rev:null,rightMargin:Ee,rules:null,scheme:null,scrolling:Ht,standby:null,summary:null,text:null,topMargin:Ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ze,disableRemotePlayback:ze,prefix:null,property:null,results:Ee,security:null,unselectable:null},space:"html",transform:OP}),nne=Fa({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Wn,accentHeight:Ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ee,amplitude:Ee,arabicForm:null,ascent:Ee,attributeName:null,attributeType:null,azimuth:Ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ee,by:null,calcMode:null,capHeight:Ee,className:bt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ee,diffuseConstant:Ee,direction:null,display:null,dur:null,divisor:Ee,dominantBaseline:null,download:ze,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ee,enableBackground:null,end:null,event:null,exponent:Ee,externalResourcesRequired:null,fill:null,fillOpacity:Ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ia,g2:ia,glyphName:ia,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ee,horizOriginX:Ee,horizOriginY:Ee,id:null,ideographic:Ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ee,k:Ee,k1:Ee,k2:Ee,k3:Ee,k4:Ee,kernelMatrix:Wn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ee,overlineThickness:Ee,paintOrder:null,panose1:null,path:null,pathLength:Ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ee,pointsAtY:Ee,pointsAtZ:Ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Wn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Wn,rev:Wn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Wn,requiredFeatures:Wn,requiredFonts:Wn,requiredFormats:Wn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ee,specularExponent:Ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ee,strikethroughThickness:Ee,string:null,stroke:null,strokeDashArray:Wn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ee,strokeOpacity:Ee,strokeWidth:null,style:null,surfaceScale:Ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Wn,tabIndex:Ee,tableValues:null,target:null,targetX:Ee,targetY:Ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Wn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ee,underlineThickness:Ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ee,values:null,vAlphabetic:Ee,vMathematical:Ee,vectorEffect:null,vHanging:Ee,vIdeographic:Ee,version:null,vertAdvY:Ee,vertOriginX:Ee,vertOriginY:Ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:PP}),MP=Fa({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),NP=Fa({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:OP}),BP=Fa({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),rne=/[A-Z]/g,Bx=/-[a-z]/g,ine=/^data[-\w.:]+$/i;function sne(t,e){const n=s_(e);let r=e,i=Hn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ine.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Bx,ane);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Bx.test(s)){let o=s.replace(rne,one);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=t1}return new i(r,e)}function one(t){return"-"+t.toLowerCase()}function ane(t){return t.charAt(1).toUpperCase()}const lne=DP([LP,tne,MP,NP,BP],"html"),FP=DP([LP,nne,MP,NP,BP],"svg"),Fx={}.hasOwnProperty;function n1(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Fx.call(i,t)){const l=String(i[t]);o=Fx.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const une={},cne={}.hasOwnProperty,HP=n1("type",{handlers:{root:fne,element:_ne,text:mne,comment:gne,doctype:pne}});function hne(t,e){const r=(e||une).space;return HP(t,r==="svg"?FP:lne)}function fne(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=r1(t.children,n,e),Ha(t,n),n}function dne(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=r1(t.children,n,e),Ha(t,n),n}function pne(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ha(t,e),e}function mne(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Ha(t,e),e}function gne(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Ha(t,e),e}function _ne(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=FP);const i=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&cne.call(t.properties,s)){const l=bne(r,s,t.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:Fs[o],childNodes:[],parentNode:null};return a.childNodes=r1(t.children,a,r),Ha(t,a),t.tagName==="template"&&t.content&&(a.content=dne(t.content,r)),a}function bne(t,e,n){const r=sne(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Ny(n):Hy(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Fs[r.space]}return i}function r1(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const s=HP(t[r],n);s.parentNode=e,i.push(s)}return i}function Ha(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const UP=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],yne=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ct="";var U;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(U||(U={}));const An={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function jP(t){return t>=55296&&t<=57343}function vne(t){return t>=56320&&t<=57343}function Ene(t,e){return(t-55296)*1024+9216+e}function VP(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function $P(t){return t>=64976&&t<=65007||yne.has(t)}var le;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(le||(le={}));const Sne=65536;class wne{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Sne,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:i,offset:s}=this,o=i+n,a=s+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(vne(n))return this.pos++,this._addGap(),Ene(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,U.EOF;return this._err(le.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,U.EOF;const r=this.html.charCodeAt(n);return r===U.CARRIAGE_RETURN?U.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,U.EOF;let e=this.html.charCodeAt(this.pos);return e===U.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,U.LINE_FEED):e===U.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,jP(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===U.LINE_FEED||e===U.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){VP(e)?this._err(le.controlCharacterInInputStream):$P(e)&&this._err(le.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ze;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Ze||(Ze={}));function zP(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const xne=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),Cne=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function Tne(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Cne.get(t))!==null&&e!==void 0?e:t}var en;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(en||(en={}));const Ane=32;var Yi;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Yi||(Yi={}));function l_(t){return t>=en.ZERO&&t<=en.NINE}function kne(t){return t>=en.UPPER_A&&t<=en.UPPER_F||t>=en.LOWER_A&&t<=en.LOWER_F}function Rne(t){return t>=en.UPPER_A&&t<=en.UPPER_Z||t>=en.LOWER_A&&t<=en.LOWER_Z||l_(t)}function Ine(t){return t===en.EQUALS||Rne(t)}var Xt;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Xt||(Xt={}));var bi;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(bi||(bi={}));class Dne{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Xt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=bi.Strict}startEntity(e){this.decodeMode=e,this.state=Xt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Xt.EntityStart:return e.charCodeAt(n)===en.NUM?(this.state=Xt.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Xt.NamedEntity,this.stateNamedEntity(e,n));case Xt.NumericStart:return this.stateNumericStart(e,n);case Xt.NumericDecimal:return this.stateNumericDecimal(e,n);case Xt.NumericHex:return this.stateNumericHex(e,n);case Xt.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|Ane)===en.LOWER_X?(this.state=Xt.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Xt.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(l_(i)||kne(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(l_(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===en.SEMI)this.consumed+=1;else if(this.decodeMode===bi.Strict)return 0;return this.emitCodePoint(Tne(this.result),this.consumed),this.errors&&(e!==en.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Yi.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=Lne(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===bi.Attribute&&(s===0||Ine(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Yi.VALUE_LENGTH)>>14,s!==0){if(o===en.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==bi.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Yi.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Yi.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Xt.NamedEntity:return this.result!==0&&(this.decodeMode!==bi.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Xt.NumericDecimal:return this.emitNumericEntity(0,2);case Xt.NumericHex:return this.emitNumericEntity(0,3);case Xt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Xt.EntityStart:return 0}}}function Lne(t,e,n,r){const i=(e&Yi.BRANCH_LENGTH)>>7,s=e&Yi.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=t[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return t[l+i]}return-1}var pe;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(pe||(pe={}));var qs;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(qs||(qs={}));var ar;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(ar||(ar={}));var te;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(te||(te={}));var w;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(w||(w={}));const Pne=new Map([[te.A,w.A],[te.ADDRESS,w.ADDRESS],[te.ANNOTATION_XML,w.ANNOTATION_XML],[te.APPLET,w.APPLET],[te.AREA,w.AREA],[te.ARTICLE,w.ARTICLE],[te.ASIDE,w.ASIDE],[te.B,w.B],[te.BASE,w.BASE],[te.BASEFONT,w.BASEFONT],[te.BGSOUND,w.BGSOUND],[te.BIG,w.BIG],[te.BLOCKQUOTE,w.BLOCKQUOTE],[te.BODY,w.BODY],[te.BR,w.BR],[te.BUTTON,w.BUTTON],[te.CAPTION,w.CAPTION],[te.CENTER,w.CENTER],[te.CODE,w.CODE],[te.COL,w.COL],[te.COLGROUP,w.COLGROUP],[te.DD,w.DD],[te.DESC,w.DESC],[te.DETAILS,w.DETAILS],[te.DIALOG,w.DIALOG],[te.DIR,w.DIR],[te.DIV,w.DIV],[te.DL,w.DL],[te.DT,w.DT],[te.EM,w.EM],[te.EMBED,w.EMBED],[te.FIELDSET,w.FIELDSET],[te.FIGCAPTION,w.FIGCAPTION],[te.FIGURE,w.FIGURE],[te.FONT,w.FONT],[te.FOOTER,w.FOOTER],[te.FOREIGN_OBJECT,w.FOREIGN_OBJECT],[te.FORM,w.FORM],[te.FRAME,w.FRAME],[te.FRAMESET,w.FRAMESET],[te.H1,w.H1],[te.H2,w.H2],[te.H3,w.H3],[te.H4,w.H4],[te.H5,w.H5],[te.H6,w.H6],[te.HEAD,w.HEAD],[te.HEADER,w.HEADER],[te.HGROUP,w.HGROUP],[te.HR,w.HR],[te.HTML,w.HTML],[te.I,w.I],[te.IMG,w.IMG],[te.IMAGE,w.IMAGE],[te.INPUT,w.INPUT],[te.IFRAME,w.IFRAME],[te.KEYGEN,w.KEYGEN],[te.LABEL,w.LABEL],[te.LI,w.LI],[te.LINK,w.LINK],[te.LISTING,w.LISTING],[te.MAIN,w.MAIN],[te.MALIGNMARK,w.MALIGNMARK],[te.MARQUEE,w.MARQUEE],[te.MATH,w.MATH],[te.MENU,w.MENU],[te.META,w.META],[te.MGLYPH,w.MGLYPH],[te.MI,w.MI],[te.MO,w.MO],[te.MN,w.MN],[te.MS,w.MS],[te.MTEXT,w.MTEXT],[te.NAV,w.NAV],[te.NOBR,w.NOBR],[te.NOFRAMES,w.NOFRAMES],[te.NOEMBED,w.NOEMBED],[te.NOSCRIPT,w.NOSCRIPT],[te.OBJECT,w.OBJECT],[te.OL,w.OL],[te.OPTGROUP,w.OPTGROUP],[te.OPTION,w.OPTION],[te.P,w.P],[te.PARAM,w.PARAM],[te.PLAINTEXT,w.PLAINTEXT],[te.PRE,w.PRE],[te.RB,w.RB],[te.RP,w.RP],[te.RT,w.RT],[te.RTC,w.RTC],[te.RUBY,w.RUBY],[te.S,w.S],[te.SCRIPT,w.SCRIPT],[te.SEARCH,w.SEARCH],[te.SECTION,w.SECTION],[te.SELECT,w.SELECT],[te.SOURCE,w.SOURCE],[te.SMALL,w.SMALL],[te.SPAN,w.SPAN],[te.STRIKE,w.STRIKE],[te.STRONG,w.STRONG],[te.STYLE,w.STYLE],[te.SUB,w.SUB],[te.SUMMARY,w.SUMMARY],[te.SUP,w.SUP],[te.TABLE,w.TABLE],[te.TBODY,w.TBODY],[te.TEMPLATE,w.TEMPLATE],[te.TEXTAREA,w.TEXTAREA],[te.TFOOT,w.TFOOT],[te.TD,w.TD],[te.TH,w.TH],[te.THEAD,w.THEAD],[te.TITLE,w.TITLE],[te.TR,w.TR],[te.TRACK,w.TRACK],[te.TT,w.TT],[te.U,w.U],[te.UL,w.UL],[te.SVG,w.SVG],[te.VAR,w.VAR],[te.WBR,w.WBR],[te.XMP,w.XMP]]);function Ua(t){var e;return(e=Pne.get(t))!==null&&e!==void 0?e:w.UNKNOWN}const ge=w,One={[pe.HTML]:new Set([ge.ADDRESS,ge.APPLET,ge.AREA,ge.ARTICLE,ge.ASIDE,ge.BASE,ge.BASEFONT,ge.BGSOUND,ge.BLOCKQUOTE,ge.BODY,ge.BR,ge.BUTTON,ge.CAPTION,ge.CENTER,ge.COL,ge.COLGROUP,ge.DD,ge.DETAILS,ge.DIR,ge.DIV,ge.DL,ge.DT,ge.EMBED,ge.FIELDSET,ge.FIGCAPTION,ge.FIGURE,ge.FOOTER,ge.FORM,ge.FRAME,ge.FRAMESET,ge.H1,ge.H2,ge.H3,ge.H4,ge.H5,ge.H6,ge.HEAD,ge.HEADER,ge.HGROUP,ge.HR,ge.HTML,ge.IFRAME,ge.IMG,ge.INPUT,ge.LI,ge.LINK,ge.LISTING,ge.MAIN,ge.MARQUEE,ge.MENU,ge.META,ge.NAV,ge.NOEMBED,ge.NOFRAMES,ge.NOSCRIPT,ge.OBJECT,ge.OL,ge.P,ge.PARAM,ge.PLAINTEXT,ge.PRE,ge.SCRIPT,ge.SECTION,ge.SELECT,ge.SOURCE,ge.STYLE,ge.SUMMARY,ge.TABLE,ge.TBODY,ge.TD,ge.TEMPLATE,ge.TEXTAREA,ge.TFOOT,ge.TH,ge.THEAD,ge.TITLE,ge.TR,ge.TRACK,ge.UL,ge.WBR,ge.XMP]),[pe.MATHML]:new Set([ge.MI,ge.MO,ge.MN,ge.MS,ge.MTEXT,ge.ANNOTATION_XML]),[pe.SVG]:new Set([ge.TITLE,ge.FOREIGN_OBJECT,ge.DESC]),[pe.XLINK]:new Set,[pe.XML]:new Set,[pe.XMLNS]:new Set},u_=new Set([ge.H1,ge.H2,ge.H3,ge.H4,ge.H5,ge.H6]);te.STYLE,te.SCRIPT,te.XMP,te.IFRAME,te.NOEMBED,te.NOFRAMES,te.PLAINTEXT;var W;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(W||(W={}));const Ot={DATA:W.DATA,RCDATA:W.RCDATA,RAWTEXT:W.RAWTEXT,SCRIPT_DATA:W.SCRIPT_DATA,PLAINTEXT:W.PLAINTEXT,CDATA_SECTION:W.CDATA_SECTION};function Mne(t){return t>=U.DIGIT_0&&t<=U.DIGIT_9}function vl(t){return t>=U.LATIN_CAPITAL_A&&t<=U.LATIN_CAPITAL_Z}function Nne(t){return t>=U.LATIN_SMALL_A&&t<=U.LATIN_SMALL_Z}function Ui(t){return Nne(t)||vl(t)}function Hx(t){return Ui(t)||Mne(t)}function uh(t){return t+32}function WP(t){return t===U.SPACE||t===U.LINE_FEED||t===U.TABULATION||t===U.FORM_FEED}function Ux(t){return WP(t)||t===U.SOLIDUS||t===U.GREATER_THAN_SIGN}function Bne(t){return t===U.NULL?le.nullCharacterReference:t>1114111?le.characterReferenceOutsideUnicodeRange:jP(t)?le.surrogateCharacterReference:$P(t)?le.noncharacterCharacterReference:VP(t)||t===U.CARRIAGE_RETURN?le.controlCharacterReference:null}class Fne{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=W.DATA,this.returnState=W.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new wne(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new Dne(xne,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(le.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(le.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=Bne(r);i&&this._err(i,1)}}:void 0)}_err(e,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ze.START_TAG,tagName:"",tagID:w.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ze.END_TAG,tagName:"",tagID:w.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Ze.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Ze.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(zP(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(le.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Ua(e.tagName),e.type===Ze.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(le.endTagWithAttributes),e.selfClosing&&this._err(le.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Ze.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ze.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ze.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Ze.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=WP(e)?Ze.WHITESPACE_CHARACTER:e===U.NULL?Ze.NULL_CHARACTER:Ze.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Ze.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=W.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?bi.Attribute:bi.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===W.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===W.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===W.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case W.DATA:{this._stateData(e);break}case W.RCDATA:{this._stateRcdata(e);break}case W.RAWTEXT:{this._stateRawtext(e);break}case W.SCRIPT_DATA:{this._stateScriptData(e);break}case W.PLAINTEXT:{this._statePlaintext(e);break}case W.TAG_OPEN:{this._stateTagOpen(e);break}case W.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case W.TAG_NAME:{this._stateTagName(e);break}case W.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case W.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case W.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case W.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case W.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case W.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case W.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case W.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case W.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case W.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case W.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case W.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case W.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case W.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case W.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case W.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case W.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case W.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case W.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case W.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case W.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case W.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case W.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case W.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case W.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case W.BOGUS_COMMENT:{this._stateBogusComment(e);break}case W.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case W.COMMENT_START:{this._stateCommentStart(e);break}case W.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case W.COMMENT:{this._stateComment(e);break}case W.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case W.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case W.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case W.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case W.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case W.COMMENT_END:{this._stateCommentEnd(e);break}case W.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case W.DOCTYPE:{this._stateDoctype(e);break}case W.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case W.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case W.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case W.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case W.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case W.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case W.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case W.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case W.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case W.CDATA_SECTION:{this._stateCdataSection(e);break}case W.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case W.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case W.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case W.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case U.LESS_THAN_SIGN:{this.state=W.TAG_OPEN;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitCodePoint(e);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case U.AMPERSAND:{this._startCharacterReference();break}case U.LESS_THAN_SIGN:{this.state=W.RCDATA_LESS_THAN_SIGN;break}case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitChars(Ct);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case U.LESS_THAN_SIGN:{this.state=W.RAWTEXT_LESS_THAN_SIGN;break}case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitChars(Ct);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_LESS_THAN_SIGN;break}case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitChars(Ct);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitChars(Ct);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ui(e))this._createStartTagToken(),this.state=W.TAG_NAME,this._stateTagName(e);else switch(e){case U.EXCLAMATION_MARK:{this.state=W.MARKUP_DECLARATION_OPEN;break}case U.SOLIDUS:{this.state=W.END_TAG_OPEN;break}case U.QUESTION_MARK:{this._err(le.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=W.BOGUS_COMMENT,this._stateBogusComment(e);break}case U.EOF:{this._err(le.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(le.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=W.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ui(e))this._createEndTagToken(),this.state=W.TAG_NAME,this._stateTagName(e);else switch(e){case U.GREATER_THAN_SIGN:{this._err(le.missingEndTagName),this.state=W.DATA;break}case U.EOF:{this._err(le.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(le.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=W.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=W.BEFORE_ATTRIBUTE_NAME;break}case U.SOLIDUS:{this.state=W.SELF_CLOSING_START_TAG;break}case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentTagToken();break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.tagName+=Ct;break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(vl(e)?uh(e):e)}}_stateRcdataLessThanSign(e){e===U.SOLIDUS?this.state=W.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=W.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ui(e)?(this.state=W.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=W.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=W.BEFORE_ATTRIBUTE_NAME,!1;case U.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=W.SELF_CLOSING_START_TAG,!1;case U.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=W.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===U.SOLIDUS?this.state=W.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=W.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ui(e)?(this.state=W.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=W.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case U.SOLIDUS:{this.state=W.SCRIPT_DATA_END_TAG_OPEN;break}case U.EXCLAMATION_MARK:{this.state=W.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=W.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ui(e)?(this.state=W.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===U.HYPHEN_MINUS?(this.state=W.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===U.HYPHEN_MINUS?(this.state=W.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case U.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitChars(Ct);break}case U.EOF:{this._err(le.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case U.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_ESCAPED,this._emitChars(Ct);break}case U.EOF:{this._err(le.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case U.HYPHEN_MINUS:{this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case U.GREATER_THAN_SIGN:{this.state=W.SCRIPT_DATA,this._emitChars(">");break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_ESCAPED,this._emitChars(Ct);break}case U.EOF:{this._err(le.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===U.SOLIDUS?this.state=W.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ui(e)?(this._emitChars("<"),this.state=W.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ui(e)?(this.state=W.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(An.SCRIPT,!1)&&Ux(this.preprocessor.peek(An.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<An.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case U.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case U.NULL:{this._err(le.unexpectedNullCharacter),this._emitChars(Ct);break}case U.EOF:{this._err(le.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case U.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ct);break}case U.EOF:{this._err(le.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case U.HYPHEN_MINUS:{this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case U.GREATER_THAN_SIGN:{this.state=W.SCRIPT_DATA,this._emitChars(">");break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ct);break}case U.EOF:{this._err(le.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===U.SOLIDUS?(this.state=W.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(An.SCRIPT,!1)&&Ux(this.preprocessor.peek(An.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<An.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=W.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.SOLIDUS:case U.GREATER_THAN_SIGN:case U.EOF:{this.state=W.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case U.EQUALS_SIGN:{this._err(le.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=W.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=W.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:case U.SOLIDUS:case U.GREATER_THAN_SIGN:case U.EOF:{this._leaveAttrName(),this.state=W.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case U.EQUALS_SIGN:{this._leaveAttrName(),this.state=W.BEFORE_ATTRIBUTE_VALUE;break}case U.QUOTATION_MARK:case U.APOSTROPHE:case U.LESS_THAN_SIGN:{this._err(le.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.currentAttr.name+=Ct;break}default:this.currentAttr.name+=String.fromCodePoint(vl(e)?uh(e):e)}}_stateAfterAttributeName(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.SOLIDUS:{this.state=W.SELF_CLOSING_START_TAG;break}case U.EQUALS_SIGN:{this.state=W.BEFORE_ATTRIBUTE_VALUE;break}case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentTagToken();break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=W.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.QUOTATION_MARK:{this.state=W.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this.state=W.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(le.missingAttributeValue),this.state=W.DATA,this.emitCurrentTagToken();break}default:this.state=W.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case U.QUOTATION_MARK:{this.state=W.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.currentAttr.value+=Ct;break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case U.APOSTROPHE:{this.state=W.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.currentAttr.value+=Ct;break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this._leaveAttrValue(),this.state=W.BEFORE_ATTRIBUTE_NAME;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=W.DATA,this.emitCurrentTagToken();break}case U.NULL:{this._err(le.unexpectedNullCharacter),this.currentAttr.value+=Ct;break}case U.QUOTATION_MARK:case U.APOSTROPHE:case U.LESS_THAN_SIGN:case U.EQUALS_SIGN:case U.GRAVE_ACCENT:{this._err(le.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this._leaveAttrValue(),this.state=W.BEFORE_ATTRIBUTE_NAME;break}case U.SOLIDUS:{this._leaveAttrValue(),this.state=W.SELF_CLOSING_START_TAG;break}case U.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=W.DATA,this.emitCurrentTagToken();break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:this._err(le.missingWhitespaceBetweenAttributes),this.state=W.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case U.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=W.DATA,this.emitCurrentTagToken();break}case U.EOF:{this._err(le.eofInTag),this._emitEOFToken();break}default:this._err(le.unexpectedSolidusInTag),this.state=W.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentComment(n);break}case U.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.data+=Ct;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(An.DASH_DASH,!0)?(this._createCommentToken(An.DASH_DASH.length+1),this.state=W.COMMENT_START):this._consumeSequenceIfMatch(An.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(An.DOCTYPE.length+1),this.state=W.DOCTYPE):this._consumeSequenceIfMatch(An.CDATA_START,!0)?this.inForeignNode?this.state=W.CDATA_SECTION:(this._err(le.cdataInHtmlContent),this._createCommentToken(An.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=W.BOGUS_COMMENT):this._ensureHibernation()||(this._err(le.incorrectlyOpenedComment),this._createCommentToken(2),this.state=W.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case U.HYPHEN_MINUS:{this.state=W.COMMENT_START_DASH;break}case U.GREATER_THAN_SIGN:{this._err(le.abruptClosingOfEmptyComment),this.state=W.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=W.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case U.HYPHEN_MINUS:{this.state=W.COMMENT_END;break}case U.GREATER_THAN_SIGN:{this._err(le.abruptClosingOfEmptyComment),this.state=W.DATA,this.emitCurrentComment(n);break}case U.EOF:{this._err(le.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=W.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case U.HYPHEN_MINUS:{this.state=W.COMMENT_END_DASH;break}case U.LESS_THAN_SIGN:{n.data+="<",this.state=W.COMMENT_LESS_THAN_SIGN;break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.data+=Ct;break}case U.EOF:{this._err(le.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case U.EXCLAMATION_MARK:{n.data+="!",this.state=W.COMMENT_LESS_THAN_SIGN_BANG;break}case U.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=W.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===U.HYPHEN_MINUS?this.state=W.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=W.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===U.HYPHEN_MINUS?this.state=W.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=W.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==U.GREATER_THAN_SIGN&&e!==U.EOF&&this._err(le.nestedComment),this.state=W.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case U.HYPHEN_MINUS:{this.state=W.COMMENT_END;break}case U.EOF:{this._err(le.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=W.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentComment(n);break}case U.EXCLAMATION_MARK:{this.state=W.COMMENT_END_BANG;break}case U.HYPHEN_MINUS:{n.data+="-";break}case U.EOF:{this._err(le.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=W.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case U.HYPHEN_MINUS:{n.data+="--!",this.state=W.COMMENT_END_DASH;break}case U.GREATER_THAN_SIGN:{this._err(le.incorrectlyClosedComment),this.state=W.DATA,this.emitCurrentComment(n);break}case U.EOF:{this._err(le.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=W.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=W.BEFORE_DOCTYPE_NAME;break}case U.GREATER_THAN_SIGN:{this.state=W.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case U.EOF:{this._err(le.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingWhitespaceBeforeDoctypeName),this.state=W.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(vl(e))this._createDoctypeToken(String.fromCharCode(uh(e))),this.state=W.DOCTYPE_NAME;else switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.NULL:{this._err(le.unexpectedNullCharacter),this._createDoctypeToken(Ct),this.state=W.DOCTYPE_NAME;break}case U.GREATER_THAN_SIGN:{this._err(le.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.EOF:{this._err(le.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=W.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=W.AFTER_DOCTYPE_NAME;break}case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.name+=Ct;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(vl(e)?uh(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(An.PUBLIC,!1)?this.state=W.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(An.SYSTEM,!1)?this.state=W.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(le.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=W.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case U.QUOTATION_MARK:{this._err(le.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this._err(le.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(le.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.QUOTATION_MARK:{n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(le.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case U.QUOTATION_MARK:{this.state=W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.publicId+=Ct;break}case U.GREATER_THAN_SIGN:{this._err(le.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case U.APOSTROPHE:{this.state=W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.publicId+=Ct;break}case U.GREATER_THAN_SIGN:{this._err(le.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=W.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case U.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.QUOTATION_MARK:{this._err(le.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this._err(le.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.QUOTATION_MARK:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=W.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case U.QUOTATION_MARK:{this._err(le.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this._err(le.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(le.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.QUOTATION_MARK:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(le.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case U.QUOTATION_MARK:{this.state=W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.systemId+=Ct;break}case U.GREATER_THAN_SIGN:{this._err(le.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case U.APOSTROPHE:{this.state=W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case U.NULL:{this._err(le.unexpectedNullCharacter),n.systemId+=Ct;break}case U.GREATER_THAN_SIGN:{this._err(le.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.EOF:{this._err(le.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(le.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case U.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=W.DATA;break}case U.NULL:{this._err(le.unexpectedNullCharacter);break}case U.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case U.RIGHT_SQUARE_BRACKET:{this.state=W.CDATA_SECTION_BRACKET;break}case U.EOF:{this._err(le.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===U.RIGHT_SQUARE_BRACKET?this.state=W.CDATA_SECTION_END:(this._emitChars("]"),this.state=W.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case U.GREATER_THAN_SIGN:{this.state=W.DATA;break}case U.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=W.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(U.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Hx(this.preprocessor.peek(1))?W.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Hx(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===U.SEMICOLON&&this._err(le.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const qP=new Set([w.DD,w.DT,w.LI,w.OPTGROUP,w.OPTION,w.P,w.RB,w.RP,w.RT,w.RTC]),jx=new Set([...qP,w.CAPTION,w.COLGROUP,w.TBODY,w.TD,w.TFOOT,w.TH,w.THEAD,w.TR]),Yf=new Set([w.APPLET,w.CAPTION,w.HTML,w.MARQUEE,w.OBJECT,w.TABLE,w.TD,w.TEMPLATE,w.TH]),Hne=new Set([...Yf,w.OL,w.UL]),Une=new Set([...Yf,w.BUTTON]),Vx=new Set([w.ANNOTATION_XML,w.MI,w.MN,w.MO,w.MS,w.MTEXT]),$x=new Set([w.DESC,w.FOREIGN_OBJECT,w.TITLE]),jne=new Set([w.TR,w.TEMPLATE,w.HTML]),Vne=new Set([w.TBODY,w.TFOOT,w.THEAD,w.TEMPLATE,w.HTML]),$ne=new Set([w.TABLE,w.TEMPLATE,w.HTML]),zne=new Set([w.TD,w.TH]);class Wne{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=w.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===w.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===pe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==pe.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(u_,pe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(zne,pe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo($ne,pe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Vne,pe.HTML)}clearBackToTableRowContext(){this.clearBackTo(jne,pe.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===w.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===w.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case pe.HTML:{if(i===e)return!0;if(n.has(i))return!1;break}case pe.SVG:{if($x.has(i))return!1;break}case pe.MATHML:{if(Vx.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Yf)}hasInListItemScope(e){return this.hasInDynamicScope(e,Hne)}hasInButtonScope(e){return this.hasInDynamicScope(e,Une)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case pe.HTML:{if(u_.has(n))return!0;if(Yf.has(n))return!1;break}case pe.SVG:{if($x.has(n))return!1;break}case pe.MATHML:{if(Vx.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===pe.HTML)switch(this.tagIDs[n]){case e:return!0;case w.TABLE:case w.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===pe.HTML)switch(this.tagIDs[e]){case w.TBODY:case w.THEAD:case w.TFOOT:return!0;case w.TABLE:case w.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===pe.HTML)switch(this.tagIDs[n]){case e:return!0;case w.OPTION:case w.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&qP.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&jx.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&jx.has(this.currentTagId);)this.pop()}}const jm=3;var zr;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(zr||(zr={}));const zx={type:zr.Marker};class qne{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===zr.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<jm)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<jm)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=jm&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(zx)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:zr.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:zr.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(zx);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===zr.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===zr.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===zr.Element&&n.element===e)}}const ji={createDocument(){return{nodeName:"#document",mode:ar.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};ji.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(ji.isTextNode(n)){n.value+=e;return}}ji.appendChild(t,ji.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&ji.isTextNode(r)?r.value+=e:ji.insertBefore(t,ji.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},GP="html",Gne="about:legacy-compat",Kne="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",KP=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Yne=[...KP,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Xne=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),YP=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Qne=[...YP,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Wx(t,e){return e.some(n=>t.startsWith(n))}function Jne(t){return t.name===GP&&t.publicId===null&&(t.systemId===null||t.systemId===Gne)}function Zne(t){if(t.name!==GP)return ar.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===Kne)return ar.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),Xne.has(n))return ar.QUIRKS;let r=e===null?Yne:KP;if(Wx(n,r))return ar.QUIRKS;if(r=e===null?YP:Qne,Wx(n,r))return ar.LIMITED_QUIRKS}return ar.NO_QUIRKS}const qx={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},ere="definitionurl",tre="definitionURL",nre=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),rre=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:pe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:pe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:pe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:pe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:pe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:pe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:pe.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:pe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:pe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:pe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:pe.XMLNS}]]),ire=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),sre=new Set([w.B,w.BIG,w.BLOCKQUOTE,w.BODY,w.BR,w.CENTER,w.CODE,w.DD,w.DIV,w.DL,w.DT,w.EM,w.EMBED,w.H1,w.H2,w.H3,w.H4,w.H5,w.H6,w.HEAD,w.HR,w.I,w.IMG,w.LI,w.LISTING,w.MENU,w.META,w.NOBR,w.OL,w.P,w.PRE,w.RUBY,w.S,w.SMALL,w.SPAN,w.STRONG,w.STRIKE,w.SUB,w.SUP,w.TABLE,w.TT,w.U,w.UL,w.VAR]);function ore(t){const e=t.tagID;return e===w.FONT&&t.attrs.some(({name:r})=>r===qs.COLOR||r===qs.SIZE||r===qs.FACE)||sre.has(e)}function XP(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===ere){t.attrs[e].name=tre;break}}function QP(t){for(let e=0;e<t.attrs.length;e++){const n=nre.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function i1(t){for(let e=0;e<t.attrs.length;e++){const n=rre.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function are(t){const e=ire.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Ua(t.tagName))}function lre(t,e){return e===pe.MATHML&&(t===w.MI||t===w.MO||t===w.MN||t===w.MS||t===w.MTEXT)}function ure(t,e,n){if(e===pe.MATHML&&t===w.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===qs.ENCODING){const i=n[r].value.toLowerCase();return i===qx.TEXT_HTML||i===qx.APPLICATION_XML}}return e===pe.SVG&&(t===w.FOREIGN_OBJECT||t===w.DESC||t===w.TITLE)}function cre(t,e,n,r){return(!r||r===pe.HTML)&&ure(t,e,n)||(!r||r===pe.MATHML)&&lre(t,e)}const hre="hidden",fre=8,dre=3;var Y;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Y||(Y={}));const pre={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},JP=new Set([w.TABLE,w.TBODY,w.TFOOT,w.THEAD,w.TR]),Gx={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ji,onParseError:null};class Kx{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Y.INITIAL,this.originalInsertionMode=Y.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Gx,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Fne(this.options,this),this.activeFormattingElements=new qne(this.treeAdapter),this.fragmentContextID=r?Ua(this.treeAdapter.getTagName(r)):w.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Wne(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...Gx,...n};e??(e=r.treeAdapter.createElement(te.TEMPLATE,pe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",pe.HTML,[]),s=new this(r,i,e);return s.fragmentContextID===w.TEMPLATE&&s.tmplInsertionModeStack.unshift(Y.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const s=(i=e.location)!==null&&i!==void 0?i:pre,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===pe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,pe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Y.TEXT}switchToPlaintextParsing(){this.insertionMode=Y.TEXT,this.originalInsertionMode=Y.IN_BODY,this.tokenizer.state=Ot.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===te.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==pe.HTML))switch(this.fragmentContextID){case w.TITLE:case w.TEXTAREA:{this.tokenizer.state=Ot.RCDATA;break}case w.STYLE:case w.XMP:case w.IFRAME:case w.NOEMBED:case w.NOFRAMES:case w.NOSCRIPT:{this.tokenizer.state=Ot.RAWTEXT;break}case w.SCRIPT:{this.tokenizer.state=Ot.SCRIPT_DATA;break}case w.PLAINTEXT:{this.tokenizer.state=Ot.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,pe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,pe.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(te.HTML,pe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,w.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:u,endOffset:c}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),s=n.type===Ze.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===w.SVG&&this.treeAdapter.getTagName(n)===te.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===pe.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===w.MGLYPH||e.tagID===w.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,pe.HTML)}_processToken(e){switch(e.type){case Ze.CHARACTER:{this.onCharacter(e);break}case Ze.NULL_CHARACTER:{this.onNullCharacter(e);break}case Ze.COMMENT:{this.onComment(e);break}case Ze.DOCTYPE:{this.onDoctype(e);break}case Ze.START_TAG:{this._processStartTag(e);break}case Ze.END_TAG:{this.onEndTag(e);break}case Ze.EOF:{this.onEof(e);break}case Ze.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return cre(e,i,s,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===zr.Marker||this.openElements.contains(i.element)),r=n===-1?e-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Y.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(w.P),this.openElements.popUntilTagNamePopped(w.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case w.TR:{this.insertionMode=Y.IN_ROW;return}case w.TBODY:case w.THEAD:case w.TFOOT:{this.insertionMode=Y.IN_TABLE_BODY;return}case w.CAPTION:{this.insertionMode=Y.IN_CAPTION;return}case w.COLGROUP:{this.insertionMode=Y.IN_COLUMN_GROUP;return}case w.TABLE:{this.insertionMode=Y.IN_TABLE;return}case w.BODY:{this.insertionMode=Y.IN_BODY;return}case w.FRAMESET:{this.insertionMode=Y.IN_FRAMESET;return}case w.SELECT:{this._resetInsertionModeForSelect(e);return}case w.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case w.HTML:{this.insertionMode=this.headElement?Y.AFTER_HEAD:Y.BEFORE_HEAD;return}case w.TD:case w.TH:{if(e>0){this.insertionMode=Y.IN_CELL;return}break}case w.HEAD:{if(e>0){this.insertionMode=Y.IN_HEAD;return}break}}this.insertionMode=Y.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===w.TEMPLATE)break;if(r===w.TABLE){this.insertionMode=Y.IN_SELECT_IN_TABLE;return}}this.insertionMode=Y.IN_SELECT}_isElementCausesFosterParenting(e){return JP.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case w.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===pe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case w.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return One[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){zie(this,e);return}switch(this.insertionMode){case Y.INITIAL:{nl(this,e);break}case Y.BEFORE_HTML:{Nl(this,e);break}case Y.BEFORE_HEAD:{Bl(this,e);break}case Y.IN_HEAD:{Fl(this,e);break}case Y.IN_HEAD_NO_SCRIPT:{Hl(this,e);break}case Y.AFTER_HEAD:{Ul(this,e);break}case Y.IN_BODY:case Y.IN_CAPTION:case Y.IN_CELL:case Y.IN_TEMPLATE:{eO(this,e);break}case Y.TEXT:case Y.IN_SELECT:case Y.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case Y.IN_TABLE:case Y.IN_TABLE_BODY:case Y.IN_ROW:{Vm(this,e);break}case Y.IN_TABLE_TEXT:{oO(this,e);break}case Y.IN_COLUMN_GROUP:{Xf(this,e);break}case Y.AFTER_BODY:{Qf(this,e);break}case Y.AFTER_AFTER_BODY:{zh(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){$ie(this,e);return}switch(this.insertionMode){case Y.INITIAL:{nl(this,e);break}case Y.BEFORE_HTML:{Nl(this,e);break}case Y.BEFORE_HEAD:{Bl(this,e);break}case Y.IN_HEAD:{Fl(this,e);break}case Y.IN_HEAD_NO_SCRIPT:{Hl(this,e);break}case Y.AFTER_HEAD:{Ul(this,e);break}case Y.TEXT:{this._insertCharacters(e);break}case Y.IN_TABLE:case Y.IN_TABLE_BODY:case Y.IN_ROW:{Vm(this,e);break}case Y.IN_COLUMN_GROUP:{Xf(this,e);break}case Y.AFTER_BODY:{Qf(this,e);break}case Y.AFTER_AFTER_BODY:{zh(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){c_(this,e);return}switch(this.insertionMode){case Y.INITIAL:case Y.BEFORE_HTML:case Y.BEFORE_HEAD:case Y.IN_HEAD:case Y.IN_HEAD_NO_SCRIPT:case Y.AFTER_HEAD:case Y.IN_BODY:case Y.IN_TABLE:case Y.IN_CAPTION:case Y.IN_COLUMN_GROUP:case Y.IN_TABLE_BODY:case Y.IN_ROW:case Y.IN_CELL:case Y.IN_SELECT:case Y.IN_SELECT_IN_TABLE:case Y.IN_TEMPLATE:case Y.IN_FRAMESET:case Y.AFTER_FRAMESET:{c_(this,e);break}case Y.IN_TABLE_TEXT:{rl(this,e);break}case Y.AFTER_BODY:{Ere(this,e);break}case Y.AFTER_AFTER_BODY:case Y.AFTER_AFTER_FRAMESET:{Sre(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case Y.INITIAL:{wre(this,e);break}case Y.BEFORE_HEAD:case Y.IN_HEAD:case Y.IN_HEAD_NO_SCRIPT:case Y.AFTER_HEAD:{this._err(e,le.misplacedDoctype);break}case Y.IN_TABLE_TEXT:{rl(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,le.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Wie(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case Y.INITIAL:{nl(this,e);break}case Y.BEFORE_HTML:{xre(this,e);break}case Y.BEFORE_HEAD:{Tre(this,e);break}case Y.IN_HEAD:{Dr(this,e);break}case Y.IN_HEAD_NO_SCRIPT:{Rre(this,e);break}case Y.AFTER_HEAD:{Dre(this,e);break}case Y.IN_BODY:{En(this,e);break}case Y.IN_TABLE:{ba(this,e);break}case Y.IN_TABLE_TEXT:{rl(this,e);break}case Y.IN_CAPTION:{Aie(this,e);break}case Y.IN_COLUMN_GROUP:{a1(this,e);break}case Y.IN_TABLE_BODY:{op(this,e);break}case Y.IN_ROW:{ap(this,e);break}case Y.IN_CELL:{Iie(this,e);break}case Y.IN_SELECT:{uO(this,e);break}case Y.IN_SELECT_IN_TABLE:{Lie(this,e);break}case Y.IN_TEMPLATE:{Oie(this,e);break}case Y.AFTER_BODY:{Nie(this,e);break}case Y.IN_FRAMESET:{Bie(this,e);break}case Y.AFTER_FRAMESET:{Hie(this,e);break}case Y.AFTER_AFTER_BODY:{jie(this,e);break}case Y.AFTER_AFTER_FRAMESET:{Vie(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?qie(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case Y.INITIAL:{nl(this,e);break}case Y.BEFORE_HTML:{Cre(this,e);break}case Y.BEFORE_HEAD:{Are(this,e);break}case Y.IN_HEAD:{kre(this,e);break}case Y.IN_HEAD_NO_SCRIPT:{Ire(this,e);break}case Y.AFTER_HEAD:{Lre(this,e);break}case Y.IN_BODY:{sp(this,e);break}case Y.TEXT:{_ie(this,e);break}case Y.IN_TABLE:{yu(this,e);break}case Y.IN_TABLE_TEXT:{rl(this,e);break}case Y.IN_CAPTION:{kie(this,e);break}case Y.IN_COLUMN_GROUP:{Rie(this,e);break}case Y.IN_TABLE_BODY:{h_(this,e);break}case Y.IN_ROW:{lO(this,e);break}case Y.IN_CELL:{Die(this,e);break}case Y.IN_SELECT:{cO(this,e);break}case Y.IN_SELECT_IN_TABLE:{Pie(this,e);break}case Y.IN_TEMPLATE:{Mie(this,e);break}case Y.AFTER_BODY:{fO(this,e);break}case Y.IN_FRAMESET:{Fie(this,e);break}case Y.AFTER_FRAMESET:{Uie(this,e);break}case Y.AFTER_AFTER_BODY:{zh(this,e);break}}}onEof(e){switch(this.insertionMode){case Y.INITIAL:{nl(this,e);break}case Y.BEFORE_HTML:{Nl(this,e);break}case Y.BEFORE_HEAD:{Bl(this,e);break}case Y.IN_HEAD:{Fl(this,e);break}case Y.IN_HEAD_NO_SCRIPT:{Hl(this,e);break}case Y.AFTER_HEAD:{Ul(this,e);break}case Y.IN_BODY:case Y.IN_TABLE:case Y.IN_CAPTION:case Y.IN_COLUMN_GROUP:case Y.IN_TABLE_BODY:case Y.IN_ROW:case Y.IN_CELL:case Y.IN_SELECT:case Y.IN_SELECT_IN_TABLE:{iO(this,e);break}case Y.TEXT:{bie(this,e);break}case Y.IN_TABLE_TEXT:{rl(this,e);break}case Y.IN_TEMPLATE:{hO(this,e);break}case Y.AFTER_BODY:case Y.IN_FRAMESET:case Y.AFTER_FRAMESET:case Y.AFTER_AFTER_BODY:case Y.AFTER_AFTER_FRAMESET:{o1(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===U.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case Y.IN_HEAD:case Y.IN_HEAD_NO_SCRIPT:case Y.AFTER_HEAD:case Y.TEXT:case Y.IN_COLUMN_GROUP:case Y.IN_SELECT:case Y.IN_SELECT_IN_TABLE:case Y.IN_FRAMESET:case Y.AFTER_FRAMESET:{this._insertCharacters(e);break}case Y.IN_BODY:case Y.IN_CAPTION:case Y.IN_CELL:case Y.IN_TEMPLATE:case Y.AFTER_BODY:case Y.AFTER_AFTER_BODY:case Y.AFTER_AFTER_FRAMESET:{ZP(this,e);break}case Y.IN_TABLE:case Y.IN_TABLE_BODY:case Y.IN_ROW:{Vm(this,e);break}case Y.IN_TABLE_TEXT:{sO(this,e);break}}}}function mre(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):rO(t,e),n}function gre(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function _re(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let s=0,o=i;o!==n;s++,o=i){i=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&s>=dre;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=bre(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function bre(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function yre(t,e,n){const r=t.treeAdapter.getTagName(e),i=Ua(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);i===w.TEMPLATE&&s===pe.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function vre(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,i.tagID)}function s1(t,e){for(let n=0;n<fre;n++){const r=mre(t,e);if(!r)break;const i=gre(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const s=_re(t,i,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(s),o&&yre(t,o,s),vre(t,i,r)}}function c_(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function Ere(t,e){t._appendCommentNode(e,t.openElements.items[0])}function Sre(t,e){t._appendCommentNode(e,t.document)}function o1(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function wre(t,e){t._setDocumentType(e);const n=e.forceQuirks?ar.QUIRKS:Zne(e);Jne(e)||t._err(e,le.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=Y.BEFORE_HTML}function nl(t,e){t._err(e,le.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,ar.QUIRKS),t.insertionMode=Y.BEFORE_HTML,t._processToken(e)}function xre(t,e){e.tagID===w.HTML?(t._insertElement(e,pe.HTML),t.insertionMode=Y.BEFORE_HEAD):Nl(t,e)}function Cre(t,e){const n=e.tagID;(n===w.HTML||n===w.HEAD||n===w.BODY||n===w.BR)&&Nl(t,e)}function Nl(t,e){t._insertFakeRootElement(),t.insertionMode=Y.BEFORE_HEAD,t._processToken(e)}function Tre(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.HEAD:{t._insertElement(e,pe.HTML),t.headElement=t.openElements.current,t.insertionMode=Y.IN_HEAD;break}default:Bl(t,e)}}function Are(t,e){const n=e.tagID;n===w.HEAD||n===w.BODY||n===w.HTML||n===w.BR?Bl(t,e):t._err(e,le.endTagWithoutMatchingOpenElement)}function Bl(t,e){t._insertFakeElement(te.HEAD,w.HEAD),t.headElement=t.openElements.current,t.insertionMode=Y.IN_HEAD,t._processToken(e)}function Dr(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:{t._appendElement(e,pe.HTML),e.ackSelfClosing=!0;break}case w.TITLE:{t._switchToTextParsing(e,Ot.RCDATA);break}case w.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Ot.RAWTEXT):(t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_HEAD_NO_SCRIPT);break}case w.NOFRAMES:case w.STYLE:{t._switchToTextParsing(e,Ot.RAWTEXT);break}case w.SCRIPT:{t._switchToTextParsing(e,Ot.SCRIPT_DATA);break}case w.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=Y.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(Y.IN_TEMPLATE);break}case w.HEAD:{t._err(e,le.misplacedStartTagForHeadElement);break}default:Fl(t,e)}}function kre(t,e){switch(e.tagID){case w.HEAD:{t.openElements.pop(),t.insertionMode=Y.AFTER_HEAD;break}case w.BODY:case w.BR:case w.HTML:{Fl(t,e);break}case w.TEMPLATE:{po(t,e);break}default:t._err(e,le.endTagWithoutMatchingOpenElement)}}function po(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==w.TEMPLATE&&t._err(e,le.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(w.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,le.endTagWithoutMatchingOpenElement)}function Fl(t,e){t.openElements.pop(),t.insertionMode=Y.AFTER_HEAD,t._processToken(e)}function Rre(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.BASEFONT:case w.BGSOUND:case w.HEAD:case w.LINK:case w.META:case w.NOFRAMES:case w.STYLE:{Dr(t,e);break}case w.NOSCRIPT:{t._err(e,le.nestedNoscriptInHead);break}default:Hl(t,e)}}function Ire(t,e){switch(e.tagID){case w.NOSCRIPT:{t.openElements.pop(),t.insertionMode=Y.IN_HEAD;break}case w.BR:{Hl(t,e);break}default:t._err(e,le.endTagWithoutMatchingOpenElement)}}function Hl(t,e){const n=e.type===Ze.EOF?le.openElementsLeftAfterEof:le.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=Y.IN_HEAD,t._processToken(e)}function Dre(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.BODY:{t._insertElement(e,pe.HTML),t.framesetOk=!1,t.insertionMode=Y.IN_BODY;break}case w.FRAMESET:{t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_FRAMESET;break}case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:case w.NOFRAMES:case w.SCRIPT:case w.STYLE:case w.TEMPLATE:case w.TITLE:{t._err(e,le.abandonedHeadElementChild),t.openElements.push(t.headElement,w.HEAD),Dr(t,e),t.openElements.remove(t.headElement);break}case w.HEAD:{t._err(e,le.misplacedStartTagForHeadElement);break}default:Ul(t,e)}}function Lre(t,e){switch(e.tagID){case w.BODY:case w.HTML:case w.BR:{Ul(t,e);break}case w.TEMPLATE:{po(t,e);break}default:t._err(e,le.endTagWithoutMatchingOpenElement)}}function Ul(t,e){t._insertFakeElement(te.BODY,w.BODY),t.insertionMode=Y.IN_BODY,ip(t,e)}function ip(t,e){switch(e.type){case Ze.CHARACTER:{eO(t,e);break}case Ze.WHITESPACE_CHARACTER:{ZP(t,e);break}case Ze.COMMENT:{c_(t,e);break}case Ze.START_TAG:{En(t,e);break}case Ze.END_TAG:{sp(t,e);break}case Ze.EOF:{iO(t,e);break}}}function ZP(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function eO(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function Pre(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function Ore(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function Mre(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_FRAMESET)}function Nre(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,pe.HTML)}function Bre(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&u_.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,pe.HTML)}function Fre(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,pe.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function Hre(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,pe.HTML),n||(t.formElement=t.openElements.current))}function Ure(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===w.LI&&i===w.LI||(n===w.DD||n===w.DT)&&(i===w.DD||i===w.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==w.ADDRESS&&i!==w.DIV&&i!==w.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,pe.HTML)}function jre(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,pe.HTML),t.tokenizer.state=Ot.PLAINTEXT}function Vre(t,e){t.openElements.hasInScope(w.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(w.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML),t.framesetOk=!1}function $re(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(te.A);n&&(s1(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function zre(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Wre(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(w.NOBR)&&(s1(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,pe.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function qre(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function Gre(t,e){t.treeAdapter.getDocumentMode(t.document)!==ar.QUIRKS&&t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._insertElement(e,pe.HTML),t.framesetOk=!1,t.insertionMode=Y.IN_TABLE}function tO(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,pe.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function nO(t){const e=zP(t,qs.TYPE);return e!=null&&e.toLowerCase()===hre}function Kre(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,pe.HTML),nO(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function Yre(t,e){t._appendElement(e,pe.HTML),e.ackSelfClosing=!0}function Xre(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._appendElement(e,pe.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Qre(t,e){e.tagName=te.IMG,e.tagID=w.IMG,tO(t,e)}function Jre(t,e){t._insertElement(e,pe.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Ot.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=Y.TEXT}function Zre(t,e){t.openElements.hasInButtonScope(w.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Ot.RAWTEXT)}function eie(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Ot.RAWTEXT)}function Yx(t,e){t._switchToTextParsing(e,Ot.RAWTEXT)}function tie(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===Y.IN_TABLE||t.insertionMode===Y.IN_CAPTION||t.insertionMode===Y.IN_TABLE_BODY||t.insertionMode===Y.IN_ROW||t.insertionMode===Y.IN_CELL?Y.IN_SELECT_IN_TABLE:Y.IN_SELECT}function nie(t,e){t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML)}function rie(t,e){t.openElements.hasInScope(w.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,pe.HTML)}function iie(t,e){t.openElements.hasInScope(w.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(w.RTC),t._insertElement(e,pe.HTML)}function sie(t,e){t._reconstructActiveFormattingElements(),XP(e),i1(e),e.selfClosing?t._appendElement(e,pe.MATHML):t._insertElement(e,pe.MATHML),e.ackSelfClosing=!0}function oie(t,e){t._reconstructActiveFormattingElements(),QP(e),i1(e),e.selfClosing?t._appendElement(e,pe.SVG):t._insertElement(e,pe.SVG),e.ackSelfClosing=!0}function Xx(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,pe.HTML)}function En(t,e){switch(e.tagID){case w.I:case w.S:case w.B:case w.U:case w.EM:case w.TT:case w.BIG:case w.CODE:case w.FONT:case w.SMALL:case w.STRIKE:case w.STRONG:{zre(t,e);break}case w.A:{$re(t,e);break}case w.H1:case w.H2:case w.H3:case w.H4:case w.H5:case w.H6:{Bre(t,e);break}case w.P:case w.DL:case w.OL:case w.UL:case w.DIV:case w.DIR:case w.NAV:case w.MAIN:case w.MENU:case w.ASIDE:case w.CENTER:case w.FIGURE:case w.FOOTER:case w.HEADER:case w.HGROUP:case w.DIALOG:case w.DETAILS:case w.ADDRESS:case w.ARTICLE:case w.SEARCH:case w.SECTION:case w.SUMMARY:case w.FIELDSET:case w.BLOCKQUOTE:case w.FIGCAPTION:{Nre(t,e);break}case w.LI:case w.DD:case w.DT:{Ure(t,e);break}case w.BR:case w.IMG:case w.WBR:case w.AREA:case w.EMBED:case w.KEYGEN:{tO(t,e);break}case w.HR:{Xre(t,e);break}case w.RB:case w.RTC:{rie(t,e);break}case w.RT:case w.RP:{iie(t,e);break}case w.PRE:case w.LISTING:{Fre(t,e);break}case w.XMP:{Zre(t,e);break}case w.SVG:{oie(t,e);break}case w.HTML:{Pre(t,e);break}case w.BASE:case w.LINK:case w.META:case w.STYLE:case w.TITLE:case w.SCRIPT:case w.BGSOUND:case w.BASEFONT:case w.TEMPLATE:{Dr(t,e);break}case w.BODY:{Ore(t,e);break}case w.FORM:{Hre(t,e);break}case w.NOBR:{Wre(t,e);break}case w.MATH:{sie(t,e);break}case w.TABLE:{Gre(t,e);break}case w.INPUT:{Kre(t,e);break}case w.PARAM:case w.TRACK:case w.SOURCE:{Yre(t,e);break}case w.IMAGE:{Qre(t,e);break}case w.BUTTON:{Vre(t,e);break}case w.APPLET:case w.OBJECT:case w.MARQUEE:{qre(t,e);break}case w.IFRAME:{eie(t,e);break}case w.SELECT:{tie(t,e);break}case w.OPTION:case w.OPTGROUP:{nie(t,e);break}case w.NOEMBED:case w.NOFRAMES:{Yx(t,e);break}case w.FRAMESET:{Mre(t,e);break}case w.TEXTAREA:{Jre(t,e);break}case w.NOSCRIPT:{t.options.scriptingEnabled?Yx(t,e):Xx(t,e);break}case w.PLAINTEXT:{jre(t,e);break}case w.COL:case w.TH:case w.TD:case w.TR:case w.HEAD:case w.FRAME:case w.TBODY:case w.TFOOT:case w.THEAD:case w.CAPTION:case w.COLGROUP:break;default:Xx(t,e)}}function aie(t,e){if(t.openElements.hasInScope(w.BODY)&&(t.insertionMode=Y.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function lie(t,e){t.openElements.hasInScope(w.BODY)&&(t.insertionMode=Y.AFTER_BODY,fO(t,e))}function uie(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function cie(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(w.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(w.FORM):n&&t.openElements.remove(n))}function hie(t){t.openElements.hasInButtonScope(w.P)||t._insertFakeElement(te.P,w.P),t._closePElement()}function fie(t){t.openElements.hasInListItemScope(w.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(w.LI),t.openElements.popUntilTagNamePopped(w.LI))}function die(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function pie(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function mie(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function gie(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(te.BR,w.BR),t.openElements.pop(),t.framesetOk=!1}function rO(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const s=t.openElements.items[i],o=t.openElements.tagIDs[i];if(r===o&&(r!==w.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(s,o))break}}function sp(t,e){switch(e.tagID){case w.A:case w.B:case w.I:case w.S:case w.U:case w.EM:case w.TT:case w.BIG:case w.CODE:case w.FONT:case w.NOBR:case w.SMALL:case w.STRIKE:case w.STRONG:{s1(t,e);break}case w.P:{hie(t);break}case w.DL:case w.UL:case w.OL:case w.DIR:case w.DIV:case w.NAV:case w.PRE:case w.MAIN:case w.MENU:case w.ASIDE:case w.BUTTON:case w.CENTER:case w.FIGURE:case w.FOOTER:case w.HEADER:case w.HGROUP:case w.DIALOG:case w.ADDRESS:case w.ARTICLE:case w.DETAILS:case w.SEARCH:case w.SECTION:case w.SUMMARY:case w.LISTING:case w.FIELDSET:case w.BLOCKQUOTE:case w.FIGCAPTION:{uie(t,e);break}case w.LI:{fie(t);break}case w.DD:case w.DT:{die(t,e);break}case w.H1:case w.H2:case w.H3:case w.H4:case w.H5:case w.H6:{pie(t);break}case w.BR:{gie(t);break}case w.BODY:{aie(t,e);break}case w.HTML:{lie(t,e);break}case w.FORM:{cie(t);break}case w.APPLET:case w.OBJECT:case w.MARQUEE:{mie(t,e);break}case w.TEMPLATE:{po(t,e);break}default:rO(t,e)}}function iO(t,e){t.tmplInsertionModeStack.length>0?hO(t,e):o1(t,e)}function _ie(t,e){var n;e.tagID===w.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function bie(t,e){t._err(e,le.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function Vm(t,e){if(t.openElements.currentTagId!==void 0&&JP.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=Y.IN_TABLE_TEXT,e.type){case Ze.CHARACTER:{oO(t,e);break}case Ze.WHITESPACE_CHARACTER:{sO(t,e);break}}else cc(t,e)}function yie(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_CAPTION}function vie(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_COLUMN_GROUP}function Eie(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(te.COLGROUP,w.COLGROUP),t.insertionMode=Y.IN_COLUMN_GROUP,a1(t,e)}function Sie(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_TABLE_BODY}function wie(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(te.TBODY,w.TBODY),t.insertionMode=Y.IN_TABLE_BODY,op(t,e)}function xie(t,e){t.openElements.hasInTableScope(w.TABLE)&&(t.openElements.popUntilTagNamePopped(w.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function Cie(t,e){nO(e)?t._appendElement(e,pe.HTML):cc(t,e),e.ackSelfClosing=!0}function Tie(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,pe.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function ba(t,e){switch(e.tagID){case w.TD:case w.TH:case w.TR:{wie(t,e);break}case w.STYLE:case w.SCRIPT:case w.TEMPLATE:{Dr(t,e);break}case w.COL:{Eie(t,e);break}case w.FORM:{Tie(t,e);break}case w.TABLE:{xie(t,e);break}case w.TBODY:case w.TFOOT:case w.THEAD:{Sie(t,e);break}case w.INPUT:{Cie(t,e);break}case w.CAPTION:{yie(t,e);break}case w.COLGROUP:{vie(t,e);break}default:cc(t,e)}}function yu(t,e){switch(e.tagID){case w.TABLE:{t.openElements.hasInTableScope(w.TABLE)&&(t.openElements.popUntilTagNamePopped(w.TABLE),t._resetInsertionMode());break}case w.TEMPLATE:{po(t,e);break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TBODY:case w.TD:case w.TFOOT:case w.TH:case w.THEAD:case w.TR:break;default:cc(t,e)}}function cc(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,ip(t,e),t.fosterParentingEnabled=n}function sO(t,e){t.pendingCharacterTokens.push(e)}function oO(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function rl(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)cc(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const aO=new Set([w.CAPTION,w.COL,w.COLGROUP,w.TBODY,w.TD,w.TFOOT,w.TH,w.THEAD,w.TR]);function Aie(t,e){const n=e.tagID;aO.has(n)?t.openElements.hasInTableScope(w.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(w.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Y.IN_TABLE,ba(t,e)):En(t,e)}function kie(t,e){const n=e.tagID;switch(n){case w.CAPTION:case w.TABLE:{t.openElements.hasInTableScope(w.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(w.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Y.IN_TABLE,n===w.TABLE&&yu(t,e));break}case w.BODY:case w.COL:case w.COLGROUP:case w.HTML:case w.TBODY:case w.TD:case w.TFOOT:case w.TH:case w.THEAD:case w.TR:break;default:sp(t,e)}}function a1(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.COL:{t._appendElement(e,pe.HTML),e.ackSelfClosing=!0;break}case w.TEMPLATE:{Dr(t,e);break}default:Xf(t,e)}}function Rie(t,e){switch(e.tagID){case w.COLGROUP:{t.openElements.currentTagId===w.COLGROUP&&(t.openElements.pop(),t.insertionMode=Y.IN_TABLE);break}case w.TEMPLATE:{po(t,e);break}case w.COL:break;default:Xf(t,e)}}function Xf(t,e){t.openElements.currentTagId===w.COLGROUP&&(t.openElements.pop(),t.insertionMode=Y.IN_TABLE,t._processToken(e))}function op(t,e){switch(e.tagID){case w.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_ROW;break}case w.TH:case w.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(te.TR,w.TR),t.insertionMode=Y.IN_ROW,ap(t,e);break}case w.CAPTION:case w.COL:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE,ba(t,e));break}default:ba(t,e)}}function h_(t,e){const n=e.tagID;switch(e.tagID){case w.TBODY:case w.TFOOT:case w.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE);break}case w.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE,yu(t,e));break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TD:case w.TH:case w.TR:break;default:yu(t,e)}}function ap(t,e){switch(e.tagID){case w.TH:case w.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,pe.HTML),t.insertionMode=Y.IN_CELL,t.activeFormattingElements.insertMarker();break}case w.CAPTION:case w.COL:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:case w.TR:{t.openElements.hasInTableScope(w.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE_BODY,op(t,e));break}default:ba(t,e)}}function lO(t,e){switch(e.tagID){case w.TR:{t.openElements.hasInTableScope(w.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE_BODY);break}case w.TABLE:{t.openElements.hasInTableScope(w.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE_BODY,h_(t,e));break}case w.TBODY:case w.TFOOT:case w.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(w.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Y.IN_TABLE_BODY,h_(t,e));break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TD:case w.TH:break;default:yu(t,e)}}function Iie(t,e){const n=e.tagID;aO.has(n)?(t.openElements.hasInTableScope(w.TD)||t.openElements.hasInTableScope(w.TH))&&(t._closeTableCell(),ap(t,e)):En(t,e)}function Die(t,e){const n=e.tagID;switch(n){case w.TD:case w.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Y.IN_ROW);break}case w.TABLE:case w.TBODY:case w.TFOOT:case w.THEAD:case w.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),lO(t,e));break}case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:break;default:sp(t,e)}}function uO(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.OPTION:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t._insertElement(e,pe.HTML);break}case w.OPTGROUP:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t.openElements.currentTagId===w.OPTGROUP&&t.openElements.pop(),t._insertElement(e,pe.HTML);break}case w.HR:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop(),t.openElements.currentTagId===w.OPTGROUP&&t.openElements.pop(),t._appendElement(e,pe.HTML),e.ackSelfClosing=!0;break}case w.INPUT:case w.KEYGEN:case w.TEXTAREA:case w.SELECT:{t.openElements.hasInSelectScope(w.SELECT)&&(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode(),e.tagID!==w.SELECT&&t._processStartTag(e));break}case w.SCRIPT:case w.TEMPLATE:{Dr(t,e);break}}}function cO(t,e){switch(e.tagID){case w.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===w.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===w.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===w.OPTGROUP&&t.openElements.pop();break}case w.OPTION:{t.openElements.currentTagId===w.OPTION&&t.openElements.pop();break}case w.SELECT:{t.openElements.hasInSelectScope(w.SELECT)&&(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode());break}case w.TEMPLATE:{po(t,e);break}}}function Lie(t,e){const n=e.tagID;n===w.CAPTION||n===w.TABLE||n===w.TBODY||n===w.TFOOT||n===w.THEAD||n===w.TR||n===w.TD||n===w.TH?(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode(),t._processStartTag(e)):uO(t,e)}function Pie(t,e){const n=e.tagID;n===w.CAPTION||n===w.TABLE||n===w.TBODY||n===w.TFOOT||n===w.THEAD||n===w.TR||n===w.TD||n===w.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(w.SELECT),t._resetInsertionMode(),t.onEndTag(e)):cO(t,e)}function Oie(t,e){switch(e.tagID){case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:case w.NOFRAMES:case w.SCRIPT:case w.STYLE:case w.TEMPLATE:case w.TITLE:{Dr(t,e);break}case w.CAPTION:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:{t.tmplInsertionModeStack[0]=Y.IN_TABLE,t.insertionMode=Y.IN_TABLE,ba(t,e);break}case w.COL:{t.tmplInsertionModeStack[0]=Y.IN_COLUMN_GROUP,t.insertionMode=Y.IN_COLUMN_GROUP,a1(t,e);break}case w.TR:{t.tmplInsertionModeStack[0]=Y.IN_TABLE_BODY,t.insertionMode=Y.IN_TABLE_BODY,op(t,e);break}case w.TD:case w.TH:{t.tmplInsertionModeStack[0]=Y.IN_ROW,t.insertionMode=Y.IN_ROW,ap(t,e);break}default:t.tmplInsertionModeStack[0]=Y.IN_BODY,t.insertionMode=Y.IN_BODY,En(t,e)}}function Mie(t,e){e.tagID===w.TEMPLATE&&po(t,e)}function hO(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(w.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):o1(t,e)}function Nie(t,e){e.tagID===w.HTML?En(t,e):Qf(t,e)}function fO(t,e){var n;if(e.tagID===w.HTML){if(t.fragmentContext||(t.insertionMode=Y.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===w.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else Qf(t,e)}function Qf(t,e){t.insertionMode=Y.IN_BODY,ip(t,e)}function Bie(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.FRAMESET:{t._insertElement(e,pe.HTML);break}case w.FRAME:{t._appendElement(e,pe.HTML),e.ackSelfClosing=!0;break}case w.NOFRAMES:{Dr(t,e);break}}}function Fie(t,e){e.tagID===w.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==w.FRAMESET&&(t.insertionMode=Y.AFTER_FRAMESET))}function Hie(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.NOFRAMES:{Dr(t,e);break}}}function Uie(t,e){e.tagID===w.HTML&&(t.insertionMode=Y.AFTER_AFTER_FRAMESET)}function jie(t,e){e.tagID===w.HTML?En(t,e):zh(t,e)}function zh(t,e){t.insertionMode=Y.IN_BODY,ip(t,e)}function Vie(t,e){switch(e.tagID){case w.HTML:{En(t,e);break}case w.NOFRAMES:{Dr(t,e);break}}}function $ie(t,e){e.chars=Ct,t._insertCharacters(e)}function zie(t,e){t._insertCharacters(e),t.framesetOk=!1}function dO(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==pe.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function Wie(t,e){if(ore(e))dO(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===pe.MATHML?XP(e):r===pe.SVG&&(are(e),QP(e)),i1(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function qie(t,e){if(e.tagID===w.P||e.tagID===w.BR){dO(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===pe.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}te.AREA,te.BASE,te.BASEFONT,te.BGSOUND,te.BR,te.COL,te.EMBED,te.FRAME,te.HR,te.IMG,te.INPUT,te.KEYGEN,te.LINK,te.META,te.PARAM,te.SOURCE,te.TRACK,te.WBR;const pO=mO("end"),mo=mO("start");function mO(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const Gie=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,Kie=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Qx={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function gO(t,e){const n=ise(t),r=n1("type",{handlers:{root:Yie,element:Xie,text:Qie,comment:bO,doctype:Jie,raw:ese},unknown:tse}),i={parser:n?new Kx(Qx):Kx.getFragmentParser(void 0,Qx),handle(a){r(a,i)},stitches:!1,options:e||{}};r(t,i),ja(i,mo());const s=n?i.parser.document:i.parser.getFragment(),o=Qte(s,{file:i.options.file});return i.stitches&&Ma(o,"comment",function(a,l,u){const c=a;if(c.value.stitch&&u&&l!==void 0){const h=u.children;return h[l]=c.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function _O(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function Yie(t,e){_O(t.children,e)}function Xie(t,e){nse(t,e),_O(t.children,e),rse(t,e)}function Qie(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:Ze.CHARACTER,chars:t.value,location:hc(t)};ja(e,mo(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Jie(t,e){const n={type:Ze.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:hc(t)};ja(e,mo(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Zie(t,e){e.stitches=!0;const n=sse(t);if("children"in t&&"children"in n){const r=gO({type:"root",children:t.children},e.options);n.children=r.children}bO({type:"comment",value:{stitch:n}},e)}function bO(t,e){const n=t.value,r={type:Ze.COMMENT,data:n,location:hc(t)};ja(e,mo(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function ese(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,yO(e,mo(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(Gie,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function tse(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))Zie(n,e);else{let r="";throw Kie.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ja(t,e){yO(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Ot.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function yO(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function nse(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Ot.PLAINTEXT)return;ja(e,mo(t));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Fs.html;i===Fs.html&&n==="svg"&&(i=Fs.svg);const s=hne({...t,children:[]},{space:i===Fs.svg?"svg":"html"}),o={type:Ze.START_TAG,tagName:n,tagID:Ua(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:hc(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function rse(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&UP.includes(n)||e.parser.tokenizer.state===Ot.PLAINTEXT)return;ja(e,pO(t));const r={type:Ze.END_TAG,tagName:n,tagID:Ua(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:hc(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Ot.RCDATA||e.parser.tokenizer.state===Ot.RAWTEXT||e.parser.tokenizer.state===Ot.SCRIPT_DATA)&&(e.parser.tokenizer.state=Ot.DATA)}function ise(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function hc(t){const e=mo(t)||{line:void 0,column:void 0,offset:void 0},n=pO(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function sse(t){return"children"in t?no({...t,children:[]}):no(t)}function ose(t){return function(e,n){return gO(e,{...t,file:n})}}function Jf(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const ase=vO(/\p{P}|\p{S}/u),lse=vO(/\s/);function vO(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function use(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const EO=function(t){if(t==null)return dse;if(typeof t=="function")return lp(t);if(typeof t=="object")return Array.isArray(t)?cse(t):hse(t);if(typeof t=="string")return fse(t);throw new Error("Expected function, string, or object as test")};function cse(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=EO(t[n]);return lp(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function hse(t){const e=t;return lp(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function fse(t){return lp(e);function e(n){return n&&n.type===t}}function lp(t){return e;function e(n,r,i){return!!(pse(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function dse(){return!0}function pse(t){return t!==null&&typeof t=="object"&&"type"in t}function mse(t,e,n){const i=EO((n||{}).ignore||[]),s=gse(e);let o=-1;for(;++o<s.length;)cP(t,"text",a);function a(u,c){let h=-1,f;for(;++h<c.length;){const d=c[h],_=f?f.children:void 0;if(i(d,_?_.indexOf(d):void 0,f))return;f=d}if(f)return l(u,c)}function l(u,c){const h=c[c.length-1],f=s[o][0],d=s[o][1];let _=0;const p=h.children.indexOf(u);let m=!1,g=[];f.lastIndex=0;let y=f.exec(u.value);for(;y;){const v=y.index,S={index:y.index,input:y.input,stack:[...c,u]};let E=d(...y,S);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?f.lastIndex=v+1:(_!==v&&g.push({type:"text",value:u.value.slice(_,v)}),Array.isArray(E)?g.push(...E):E&&g.push(E),_=v+y[0].length,m=!0),!f.global)break;y=f.exec(u.value)}return m?(_<u.value.length&&g.push({type:"text",value:u.value.slice(_)}),h.children.splice(p,1,...g)):g=[u],p+g.length}}function gse(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([_se(i[0]),bse(i[1])])}return e}function _se(t){return typeof t=="string"?new RegExp(use(t),"g"):t}function bse(t){return typeof t=="function"?t:function(){return t}}const $m="phrasing",zm=["autolink","link","image","label"];function yse(){return{transforms:[Tse],enter:{literalAutolink:Ese,literalAutolinkEmail:Wm,literalAutolinkHttp:Wm,literalAutolinkWww:Wm},exit:{literalAutolink:Cse,literalAutolinkEmail:xse,literalAutolinkHttp:Sse,literalAutolinkWww:wse}}}function vse(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:$m,notInConstruct:zm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:$m,notInConstruct:zm},{character:":",before:"[ps]",after:"\\/",inConstruct:$m,notInConstruct:zm}]}}function Ese(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Wm(t){this.config.enter.autolinkProtocol.call(this,t)}function Sse(t){this.config.exit.autolinkProtocol.call(this,t)}function wse(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function xse(t){this.config.exit.autolinkEmail.call(this,t)}function Cse(t){this.exit(t)}function Tse(t){mse(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ase],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,kse]],{ignore:["link","linkReference"]})}function Ase(t,e,n,r,i){let s="";if(!SO(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Rse(n)))return!1;const o=Ise(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function kse(t,e,n,r){return!SO(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Rse(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Ise(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Jf(t,"(");let s=Jf(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function SO(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||lse(n)||ase(n))&&(!e||n!==47)}function wO(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}xO.peek=Hse;function Dse(){this.buffer()}function Lse(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Pse(){this.buffer()}function Ose(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Mse(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wO(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Nse(t){this.exit(t)}function Bse(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wO(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Fse(t){this.exit(t)}function Hse(){return"["}function xO(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Use(){return{enter:{gfmFootnoteCallString:Dse,gfmFootnoteCall:Lse,gfmFootnoteDefinitionLabelString:Pse,gfmFootnoteDefinition:Ose},exit:{gfmFootnoteCallString:Mse,gfmFootnoteCall:Nse,gfmFootnoteDefinitionLabelString:Bse,gfmFootnoteDefinition:Fse}}}function jse(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:xO},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),c(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?CO:Vse))),u(),l}}function Vse(t,e,n){return e===0?t:CO(t,e,n)}function CO(t,e,n){return(n?"":"    ")+t}const $se=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];TO.peek=Kse;function zse(){return{canContainEols:["delete"],enter:{strikethrough:qse},exit:{strikethrough:Gse}}}function Wse(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:$se}],handlers:{delete:TO}}}function qse(t){this.enter({type:"delete",children:[]},t)}function Gse(t){this.exit(t)}function TO(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Kse(){return"~"}function Yse(t){return t.length}function Xse(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Yse,s=[],o=[],a=[],l=[];let u=0,c=-1;for(;++c<t.length;){const b=[],p=[];let m=-1;for(t[c].length>u&&(u=t[c].length);++m<t[c].length;){const g=Qse(t[c][m]);if(n.alignDelimiters!==!1){const y=i(g);p[m]=y,(l[m]===void 0||y>l[m])&&(l[m]=y)}b.push(g)}o[c]=b,a[c]=p}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)s[h]=Jx(r[h]);else{const b=Jx(r);for(;++h<u;)s[h]=b}h=-1;const f=[],d=[];for(;++h<u;){const b=s[h];let p="",m="";b===99?(p=":",m=":"):b===108?p=":":b===114&&(m=":");let g=n.alignDelimiters===!1?1:Math.max(1,l[h]-p.length-m.length);const y=p+"-".repeat(g)+m;n.alignDelimiters!==!1&&(g=p.length+g+m.length,g>l[h]&&(l[h]=g),d[h]=g),f[h]=y}o.splice(1,0,f),a.splice(1,0,d),c=-1;const _=[];for(;++c<o.length;){const b=o[c],p=a[c];h=-1;const m=[];for(;++h<u;){const g=b[h]||"";let y="",v="";if(n.alignDelimiters!==!1){const S=l[h]-(p[h]||0),E=s[h];E===114?y=" ".repeat(S):E===99?S%2?(y=" ".repeat(S/2+.5),v=" ".repeat(S/2-.5)):(y=" ".repeat(S/2),v=y):v=" ".repeat(S)}n.delimiterStart!==!1&&!h&&m.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&g==="")&&(n.delimiterStart!==!1||h)&&m.push(" "),n.alignDelimiters!==!1&&m.push(y),m.push(g),n.alignDelimiters!==!1&&m.push(v),n.padding!==!1&&m.push(" "),(n.delimiterEnd!==!1||h!==u-1)&&m.push("|")}_.push(n.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return _.join(`
`)}function Qse(t){return t==null?"":String(t)}function Jx(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Jse(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Zse);return i(),o}function Zse(t,e,n){return">"+(n?"":" ")+t}function eoe(t,e){return Zx(t,e.inConstruct,!0)&&!Zx(t,e.notInConstruct,!1)}function Zx(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function eC(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&eoe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function AO(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function toe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function noe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function roe(t,e,n,r){const i=noe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(toe(t,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,ioe);return h(),f}const a=n.createTracker(r),l=i.repeat(Math.max(AO(s,i)+1,3)),u=n.enter("codeFenced");let c=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);c+=a.move(n.safe(t.lang,{before:c,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(n.safe(t.meta,{before:c,after:`
`,encode:["`"],...a.current()})),h()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(l),u(),c}function ioe(t,e,n){return(n?"":"    ")+t}function l1(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function soe(t,e,n,r){const i=l1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function ooe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function vu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function aoe(t){return t!==null&&(t<0||t===32)}const loe=kO(/\p{P}|\p{S}/u),uoe=kO(/\s/);function kO(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function tC(t){if(t===null||aoe(t)||uoe(t))return 1;if(loe(t))return 2}function Zf(t,e,n){const r=tC(t),i=tC(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}RO.peek=coe;function RO(t,e,n,r){const i=ooe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=Zf(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=vu(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=Zf(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+vu(h));const d=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+d}function coe(t,e,n){return n.options.emphasis||"*"}const hoe={};function IO(t,e){const n=hoe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return DO(t,r,i)}function DO(t,e,n){if(foe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return nC(t.children,e,n)}return Array.isArray(t)?nC(t,e,n):""}function nC(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=DO(t[i],e,n);return r.join("")}function foe(t){return!!(t&&typeof t=="object")}function doe(t,e){let n=!1;return Ma(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Kf}),!!((!t.depth||t.depth<3)&&IO(t)&&(e.options.setext||n))}function poe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(doe(t,n)){const c=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=vu(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}LO.peek=moe;function LO(t){return t.value||""}function moe(){return"<"}PO.peek=goe;function PO(t,e,n,r){const i=l1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function goe(){return"!"}OO.peek=_oe;function OO(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const u=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function _oe(){return"!"}MO.peek=boe;function MO(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function boe(){return"`"}function NO(t,e){const n=IO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}BO.peek=yoe;function BO(t,e,n,r){const i=l1(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(NO(t,n)){const c=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=c,h}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function yoe(t,e,n){return NO(t,n)?"<":"["}FO.peek=voe;function FO(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function voe(){return"["}function u1(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Eoe(t){const e=u1(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Soe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function HO(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function woe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Soe(n):u1(n);const a=t.ordered?o==="."?")":".":Eoe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const c=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),HO(n)===o&&c){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function xoe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Coe(t,e,n,r){const i=xoe(n);let s=n.bulletCurrent||u1(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),c);return l(),u;function c(h,f,d){return f?(d?"":" ".repeat(o))+h:(d?s:s+" ".repeat(o-s.length))+h}}function Toe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const UO=function(t){if(t==null)return Ioe;if(typeof t=="function")return up(t);if(typeof t=="object")return Array.isArray(t)?Aoe(t):koe(t);if(typeof t=="string")return Roe(t);throw new Error("Expected function, string, or object as test")};function Aoe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=UO(t[n]);return up(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function koe(t){const e=t;return up(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Roe(t){return up(e);function e(n){return n&&n.type===t}}function up(t){return e;function e(n,r,i){return!!(Doe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ioe(){return!0}function Doe(t){return t!==null&&typeof t=="object"&&"type"in t}const Loe=UO(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Poe(t,e,n,r){return(t.children.some(function(o){return Loe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Ooe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}jO.peek=Moe;function jO(t,e,n,r){const i=Ooe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=Zf(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=vu(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=Zf(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+vu(h));const d=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+d}function Moe(t,e,n){return n.options.strong||"*"}function Noe(t,e,n,r){return n.safe(t.value,r)}function Boe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Foe(t,e,n){const r=(HO(n)+(n.options.ruleSpaces?" ":"")).repeat(Boe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Hoe={blockquote:Jse,break:eC,code:roe,definition:soe,emphasis:RO,hardBreak:eC,heading:poe,html:LO,image:PO,imageReference:OO,inlineCode:MO,link:BO,linkReference:FO,list:woe,listItem:Coe,paragraph:Toe,root:Poe,strong:jO,text:Noe,thematicBreak:Foe};function Uoe(){return{enter:{table:joe,tableData:rC,tableHeader:rC,tableRow:$oe},exit:{codeText:zoe,table:Voe,tableData:qm,tableHeader:qm,tableRow:qm}}}function joe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Voe(t){this.exit(t),this.data.inTable=void 0}function $oe(t){this.enter({type:"tableRow",children:[]},t)}function qm(t){this.exit(t)}function rC(t){this.enter({type:"tableCell",children:[]},t)}function zoe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Woe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Woe(t,e){return e==="|"?e:t}function qoe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(d,_,b,p){return u(c(d,b,p),d.align)}function a(d,_,b,p){const m=h(d,b,p),g=u([m]);return g.slice(0,g.indexOf(`
`))}function l(d,_,b,p){const m=b.enter("tableCell"),g=b.enter("phrasing"),y=b.containerPhrasing(d,{...p,before:s,after:s});return g(),m(),y}function u(d,_){return Xse(d,{align:_,alignDelimiters:r,padding:n,stringLength:i})}function c(d,_,b){const p=d.children;let m=-1;const g=[],y=_.enter("table");for(;++m<p.length;)g[m]=h(p[m],_,b);return y(),g}function h(d,_,b){const p=d.children;let m=-1;const g=[],y=_.enter("tableRow");for(;++m<p.length;)g[m]=l(p[m],d,_,b);return y(),g}function f(d,_,b){let p=Hoe.inlineCode(d,_,b);return b.stack.includes("tableCell")&&(p=p.replace(/\|/g,"\\$&")),p}}function Goe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Koe);return i(),o}function Koe(t,e,n){return">"+(n?"":" ")+t}function Yoe(t,e){return iC(t,e.inConstruct,!0)&&!iC(t,e.notInConstruct,!1)}function iC(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function sC(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Yoe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Xoe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Qoe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Joe(t,e,n,r){const i=Qoe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Xoe(t,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,Zoe);return h(),f}const a=n.createTracker(r),l=i.repeat(Math.max(AO(s,i)+1,3)),u=n.enter("codeFenced");let c=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);c+=a.move(n.safe(t.lang,{before:c,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(n.safe(t.meta,{before:c,after:`
`,encode:["`"],...a.current()})),h()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(l),u(),c}function Zoe(t,e,n){return(n?"":"    ")+t}function c1(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function eae(t,e,n,r){const i=c1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function tae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Eu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function nae(t){return t!==null&&(t<0||t===32)}const rae=VO(/\p{P}|\p{S}/u),iae=VO(/\s/);function VO(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function oC(t){if(t===null||nae(t)||iae(t))return 1;if(rae(t))return 2}function ed(t,e,n){const r=oC(t),i=oC(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}$O.peek=sae;function $O(t,e,n,r){const i=tae(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=ed(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Eu(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=ed(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Eu(h));const d=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+d}function sae(t,e,n){return n.options.emphasis||"*"}const oae={};function zO(t,e){const n=oae,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return WO(t,r,i)}function WO(t,e,n){if(aae(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return aC(t.children,e,n)}return Array.isArray(t)?aC(t,e,n):""}function aC(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=WO(t[i],e,n);return r.join("")}function aae(t){return!!(t&&typeof t=="object")}function lae(t,e){let n=!1;return Ma(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Kf}),!!((!t.depth||t.depth<3)&&zO(t)&&(e.options.setext||n))}function uae(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(lae(t,n)){const c=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Eu(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}qO.peek=cae;function qO(t){return t.value||""}function cae(){return"<"}GO.peek=hae;function GO(t,e,n,r){const i=c1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function hae(){return"!"}KO.peek=fae;function KO(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const u=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function fae(){return"!"}YO.peek=dae;function YO(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function dae(){return"`"}function XO(t,e){const n=zO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}QO.peek=pae;function QO(t,e,n,r){const i=c1(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(XO(t,n)){const c=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=c,h}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function pae(t,e,n){return XO(t,n)?"<":"["}JO.peek=mae;function JO(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function mae(){return"["}function h1(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function gae(t){const e=h1(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function _ae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ZO(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function bae(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?_ae(n):h1(n);const a=t.ordered?o==="."?")":".":gae(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const c=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),ZO(n)===o&&c){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function yae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function vae(t,e,n,r){const i=yae(n);let s=n.bulletCurrent||h1(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),c);return l(),u;function c(h,f,d){return f?(d?"":" ".repeat(o))+h:(d?s:s+" ".repeat(o-s.length))+h}}function Eae(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const eM=function(t){if(t==null)return Cae;if(typeof t=="function")return cp(t);if(typeof t=="object")return Array.isArray(t)?Sae(t):wae(t);if(typeof t=="string")return xae(t);throw new Error("Expected function, string, or object as test")};function Sae(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=eM(t[n]);return cp(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function wae(t){const e=t;return cp(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function xae(t){return cp(e);function e(n){return n&&n.type===t}}function cp(t){return e;function e(n,r,i){return!!(Tae(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Cae(){return!0}function Tae(t){return t!==null&&typeof t=="object"&&"type"in t}const Aae=eM(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kae(t,e,n,r){return(t.children.some(function(o){return Aae(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Rae(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}tM.peek=Iae;function tM(t,e,n,r){const i=Rae(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=ed(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Eu(u)+l.slice(1));const h=l.charCodeAt(l.length-1),f=ed(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Eu(h));const d=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+d}function Iae(t,e,n){return n.options.strong||"*"}function Dae(t,e,n,r){return n.safe(t.value,r)}function Lae(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Pae(t,e,n){const r=(ZO(n)+(n.options.ruleSpaces?" ":"")).repeat(Lae(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Oae={blockquote:Goe,break:sC,code:Joe,definition:eae,emphasis:$O,hardBreak:sC,heading:uae,html:qO,image:GO,imageReference:KO,inlineCode:YO,link:QO,linkReference:JO,list:bae,listItem:vae,paragraph:Eae,root:kae,strong:tM,text:Dae,thematicBreak:Pae};function Mae(){return{exit:{taskListCheckValueChecked:lC,taskListCheckValueUnchecked:lC,paragraph:Bae}}}function Nae(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Fae}}}function lC(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Bae(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Fae(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=Oae.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function Hae(){return[yse(),Use(),zse(),Uoe(),Mae()]}function Uae(t){return{extensions:[vse(),jse(t),Wse(),qoe(t),Nae()]}}function jae(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}const uC={}.hasOwnProperty;function Vae(t){const e={};let n=-1;for(;++n<t.length;)$ae(e,t[n]);return e}function $ae(t,e){let n;for(n in e){const i=(uC.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){uC.call(i,o)||(i[o]=[]);const a=s[o];zae(i[o],Array.isArray(a)?a:a?[a]:[])}}}function zae(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);jae(t,0,0,r)}const Su=hp(/[A-Za-z]/),f1=hp(/[\dA-Za-z]/);function Wae(t){return t!==null&&(t<32||t===127)}function ya(t){return t!==null&&(t<0||t===32)}const nM=hp(/\p{P}|\p{S}/u),wu=hp(/\s/);function hp(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}const qae={tokenize:Jae,partial:!0},rM={tokenize:Zae,partial:!0},iM={tokenize:ele,partial:!0},sM={tokenize:tle,partial:!0},Gae={tokenize:nle,partial:!0},oM={name:"wwwAutolink",tokenize:Xae,previous:lM},aM={name:"protocolAutolink",tokenize:Qae,previous:uM},Mi={name:"emailAutolink",tokenize:Yae,previous:cM},pi={};function Kae(){return{text:pi}}let vs=48;for(;vs<123;)pi[vs]=Mi,vs++,vs===58?vs=65:vs===91&&(vs=97);pi[43]=Mi;pi[45]=Mi;pi[46]=Mi;pi[95]=Mi;pi[72]=[Mi,aM];pi[104]=[Mi,aM];pi[87]=[Mi,oM];pi[119]=[Mi,oM];function Yae(t,e,n){const r=this;let i,s;return o;function o(h){return!f_(h)||!cM.call(r,r.previous)||d1(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return f_(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(Gae,c,u)(h):h===45||h===95||f1(h)?(s=!0,t.consume(h),l):c(h)}function u(h){return t.consume(h),i=!0,l}function c(h){return s&&i&&Su(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function Xae(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!lM.call(r,r.previous)||d1(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(qae,t.attempt(rM,t.attempt(iM,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Qae(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&uM.call(r,r.previous)&&!d1(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(Su(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?u:(s=!0,l)):n(h)}function u(h){return h===null||Wae(h)||ya(h)||wu(h)||nM(h)?n(h):t.attempt(rM,t.attempt(iM,c),n)(h)}function c(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function Jae(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Zae(t,e,n){let r,i,s;return o;function o(u){return u===46||u===95?t.check(sM,l,a)(u):u===null||ya(u)||wu(u)||u!==45&&nM(u)?l(u):(s=!0,t.consume(u),o)}function a(u){return u===95?r=!0:(i=r,r=void 0),t.consume(u),o}function l(u){return i||r||!s?n(u):e(u)}}function ele(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(sM,e,s)(o):o===null||ya(o)||wu(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function tle(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||ya(a)||wu(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||ya(a)||wu(a)?e(a):r(a)}function s(a){return Su(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Su(a)?(t.consume(a),o):n(a)}}function nle(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return f1(s)?n(s):e(s)}}function lM(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ya(t)}function uM(t){return!Su(t)}function cM(t){return!(t===47||f_(t))}function f_(t){return t===43||t===45||t===46||t===95||f1(t)}function d1(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function rle(t){return t!==null&&t<-2}function td(t){return t!==null&&(t<0||t===32)}function d_(t){return t===-2||t===-1||t===32}function p1(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return d_(l)?(t.enter(n),a(l)):e(l)}function a(l){return d_(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const ile={partial:!0,tokenize:sle};function sle(t,e,n){return r;function r(s){return d_(s)?p1(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||rle(s)?e(s):n(s)}}function m1(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ole={tokenize:ple,partial:!0};function ale(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:hle,continuation:{tokenize:fle},exit:dle}},text:{91:{name:"gfmFootnoteCall",tokenize:cle},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:lle,resolveTo:ule}}}}function lle(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=m1(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function ule(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function cle(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(h){if(s>999||h===93&&!o||h===null||h===91||td(h))return n(h);if(h===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return i.includes(m1(r.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return td(h)||(o=!0),s++,t.consume(h),h===92?c:u}function c(h){return h===91||h===92||h===93?(t.consume(h),s++,u):u(h)}}function hle(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(_){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(_){return _===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",c):n(_)}function c(_){if(o>999||_===93&&!a||_===null||_===91||td(_))return n(_);if(_===93){t.exit("chunkString");const b=t.exit("gfmFootnoteDefinitionLabelString");return s=m1(r.sliceSerialize(b)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return td(_)||(a=!0),o++,t.consume(_),_===92?h:c}function h(_){return _===91||_===92||_===93?(t.consume(_),o++,c):c(_)}function f(_){return _===58?(t.enter("definitionMarker"),t.consume(_),t.exit("definitionMarker"),i.includes(s)||i.push(s),p1(t,d,"gfmFootnoteDefinitionWhitespace")):n(_)}function d(_){return e(_)}}function fle(t,e,n){return t.check(ile,e,t.attempt(ole,e,n))}function dle(t){t.exit("gfmFootnoteDefinition")}function ple(t,e,n){const r=this;return p1(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Gm(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function mle(t){return t!==null&&(t<0||t===32)}const gle=hM(/\p{P}|\p{S}/u),_le=hM(/\s/);function hM(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function cC(t){if(t===null||mle(t)||_le(t))return 1;if(gle(t))return 2}function ble(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}function yle(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",c,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",h,a]],d=a.parser.constructs.insideSpan.null;d&&Gm(f,f.length,0,ble(d,o.slice(u+1,l),a)),Gm(f,f.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",c,a]]),Gm(o,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,c=this.events;let h=0;return f;function f(_){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(_):(o.enter("strikethroughSequenceTemporary"),d(_))}function d(_){const b=cC(u);if(_===126)return h>1?l(_):(o.consume(_),h++,d);if(h<2&&!n)return l(_);const p=o.exit("strikethroughSequenceTemporary"),m=cC(_);return p._open=!m||m===2&&!!b,p._close=!b||b===2&&!!m,a(_)}}}function ch(t){return t!==null&&t<-2}function hC(t){return t!==null&&(t<0||t===32)}function Ds(t){return t===-2||t===-1||t===32}function il(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Ds(l)?(t.enter(n),a(l)):e(l)}function a(l){return Ds(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}class vle{constructor(){this.map=[]}add(e,n,r){Ele(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function Ele(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function Sle(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function wle(){return{flow:{null:{name:"table",tokenize:xle,resolveAll:Cle}}}}function xle(t,e,n){const r=this;let i=0,s=0,o;return a;function a(D){let M=r.events.length-1;for(;M>-1;){const $=r.events[M][1].type;if($==="lineEnding"||$==="linePrefix")M--;else break}const H=M>-1?r.events[M][1].type:null,B=H==="tableHead"||H==="tableRow"?E:l;return B===E&&r.parser.lazy[r.now().line]?n(D):B(D)}function l(D){return t.enter("tableHead"),t.enter("tableRow"),u(D)}function u(D){return D===124||(o=!0,s+=1),c(D)}function c(D){return D===null?n(D):ch(D)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),d):n(D):Ds(D)?il(t,c,"whitespace")(D):(s+=1,o&&(o=!1,i+=1),D===124?(t.enter("tableCellDivider"),t.consume(D),t.exit("tableCellDivider"),o=!0,c):(t.enter("data"),h(D)))}function h(D){return D===null||D===124||hC(D)?(t.exit("data"),c(D)):(t.consume(D),D===92?f:h)}function f(D){return D===92||D===124?(t.consume(D),h):h(D)}function d(D){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(D):(t.enter("tableDelimiterRow"),o=!1,Ds(D)?il(t,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):_(D))}function _(D){return D===45||D===58?p(D):D===124?(o=!0,t.enter("tableCellDivider"),t.consume(D),t.exit("tableCellDivider"),b):S(D)}function b(D){return Ds(D)?il(t,p,"whitespace")(D):p(D)}function p(D){return D===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(D),t.exit("tableDelimiterMarker"),m):D===45?(s+=1,m(D)):D===null||ch(D)?v(D):S(D)}function m(D){return D===45?(t.enter("tableDelimiterFiller"),g(D)):S(D)}function g(D){return D===45?(t.consume(D),g):D===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(D),t.exit("tableDelimiterMarker"),y):(t.exit("tableDelimiterFiller"),y(D))}function y(D){return Ds(D)?il(t,v,"whitespace")(D):v(D)}function v(D){return D===124?_(D):D===null||ch(D)?!o||i!==s?S(D):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(D)):S(D)}function S(D){return n(D)}function E(D){return t.enter("tableRow"),C(D)}function C(D){return D===124?(t.enter("tableCellDivider"),t.consume(D),t.exit("tableCellDivider"),C):D===null||ch(D)?(t.exit("tableRow"),e(D)):Ds(D)?il(t,C,"whitespace")(D):(t.enter("data"),x(D))}function x(D){return D===null||D===124||hC(D)?(t.exit("data"),C(D)):(t.consume(D),D===92?A:x)}function A(D){return D===92||D===124?(t.consume(D),x):x(D)}}function Cle(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,c,h;const f=new vle;for(;++n<t.length;){const d=t[n],_=d[1];d[0]==="enter"?_.type==="tableHead"?(a=!1,l!==0&&(fC(f,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},_.start),end:Object.assign({},_.end)},f.add(n,0,[["enter",u,e]])):_.type==="tableRow"||_.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,c={type:"tableBody",start:Object.assign({},_.start),end:Object.assign({},_.end)},f.add(n,0,[["enter",c,e]])),i=_.type==="tableDelimiterRow"?2:c?3:1):i&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=hh(f,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):_.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=hh(f,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):_.type==="tableHead"?(a=!0,l=n):_.type==="tableRow"||_.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=hh(f,e,s,i,n,h)):o[1]!==0&&(h=hh(f,e,o,i,n,h)),i=0):i&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&fC(f,e,l,u,c),f.consume(e.events),n=-1;++n<e.events.length;){const d=e.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=Sle(e.events,n))}return t}function hh(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},ko(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=ko(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=ko(e.events,n[2]),c=ko(e.events,n[3]),h={type:a,start:Object.assign({},u),end:Object.assign({},c)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const f=e.events[n[2]],d=e.events[n[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const _=n[2]+1,b=n[3]-n[2]-1;t.add(_,b,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},ko(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function fC(t,e,n,r,i){const s=[],o=ko(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function ko(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}function Tle(t){return t!==null&&t<-2}function Ale(t){return t!==null&&(t<0||t===32)}function p_(t){return t===-2||t===-1||t===32}function kle(t,e,n,r){const i=Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return p_(l)?(t.enter(n),a(l)):e(l)}function a(l){return p_(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const Rle={name:"tasklistCheck",tokenize:Dle};function Ile(){return{text:{91:Rle}}}function Dle(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return Ale(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Tle(l)?e(l):p_(l)?t.check({tokenize:Lle},e,n)(l):n(l)}}function Lle(t,e,n){return kle(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function Ple(t){return Vae([Kae(),ale(),yle(t),wle(),Ile()])}const Ole={};function Mle(t){const e=this,n=t||Ole,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Ple(n)),s.push(Hae()),o.push(Uae(n))}const Nle=fM("end"),Ble=fM("start");function fM(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Fle(t){const e=Ble(t),n=Nle(t);if(e&&n)return{start:e,end:n}}const Es=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],jl={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Es,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Es],h2:[["className","sr-only"]],img:[...Es,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Es,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Es],table:[...Es],ul:[...Es,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},zi={}.hasOwnProperty;function Hle(t,e){let n={type:"root",children:[]};const r={schema:e?{...jl,...e}:jl,stack:[]},i=dM(r,t);return i&&(Array.isArray(i)?i.length===1?n=i[0]:n.children=i:n=i),n}function dM(t,e){if(e&&typeof e=="object"){const n=e;switch(typeof n.type=="string"?n.type:""){case"comment":return Ule(t,n);case"doctype":return jle(t,n);case"element":return Vle(t,n);case"root":return $le(t,n);case"text":return zle(t,n)}}}function Ule(t,e){if(t.schema.allowComments){const n=typeof e.value=="string"?e.value:"",r=n.indexOf("-->"),s={type:"comment",value:r<0?n:n.slice(0,r)};return fc(s,e),s}}function jle(t,e){if(t.schema.allowDoctypes){const n={type:"doctype"};return fc(n,e),n}}function Vle(t,e){const n=typeof e.tagName=="string"?e.tagName:"";t.stack.push(n);const r=pM(t,e.children),i=Wle(t,e.properties);t.stack.pop();let s=!1;if(n&&n!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(n))&&(s=!0,t.schema.ancestors&&zi.call(t.schema.ancestors,n))){const a=t.schema.ancestors[n];let l=-1;for(s=!1;++l<a.length;)t.stack.includes(a[l])&&(s=!0)}if(!s)return t.schema.strip&&!t.schema.strip.includes(n)?r:void 0;const o={type:"element",tagName:n,properties:i,children:r};return fc(o,e),o}function $le(t,e){const r={type:"root",children:pM(t,e.children)};return fc(r,e),r}function zle(t,e){const r={type:"text",value:typeof e.value=="string"?e.value:""};return fc(r,e),r}function pM(t,e){const n=[];if(Array.isArray(e)){const r=e;let i=-1;for(;++i<r.length;){const s=dM(t,r[i]);s&&(Array.isArray(s)?n.push(...s):n.push(s))}}return n}function Wle(t,e){const n=t.stack[t.stack.length-1],r=t.schema.attributes,i=t.schema.required,s=r&&zi.call(r,n)?r[n]:void 0,o=r&&zi.call(r,"*")?r["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let u;for(u in a)if(zi.call(a,u)){const c=a[u];let h=dC(t,pC(s,u),u,c);h==null&&(h=dC(t,pC(o,u),u,c)),h!=null&&(l[u]=h)}if(i&&zi.call(i,n)){const c=i[n];for(u in c)zi.call(c,u)&&!zi.call(l,u)&&(l[u]=c[u])}return l}function dC(t,e,n,r){return e?Array.isArray(r)?qle(t,e,n,r):mM(t,e,n,r):void 0}function qle(t,e,n,r){let i=-1;const s=[];for(;++i<r.length;){const o=mM(t,e,n,r[i]);(typeof o=="number"||typeof o=="string")&&s.push(o)}return s}function mM(t,e,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&Gle(t,n,r)){if(typeof e=="object"&&e.length>1){let i=!1,s=0;for(;++s<e.length;){const o=e[s];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(r))){i=!0;break}}else if(o===r){i=!0;break}}if(!i)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(n)?t.schema.clobberPrefix+r:r}}function Gle(t,e,n){const r=t.schema.protocols&&zi.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!r||r.length===0)return!0;const i=String(n),s=i.indexOf(":"),o=i.indexOf("?"),a=i.indexOf("#"),l=i.indexOf("/");if(s<0||l>-1&&s>l||o>-1&&s>o||a>-1&&s>a)return!0;let u=-1;for(;++u<r.length;){const c=r[u];if(s===c.length&&i.slice(0,c.length)===c)return!0}return!1}function fc(t,e){const n=Fle(e);e.data&&(t.data=no(e.data)),n&&(t.position=n)}function pC(t,e){let n,r=-1;if(t)for(;++r<t.length;){const i=t[r],s=typeof i=="string"?i:i[0];if(s===e)return i;s==="data*"&&(n=i)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return n}function Kle(t){return function(e){return Hle(e,t)}}const gM=["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var"],Yle={...jl,tagNames:gM,attributes:{...jl.attributes,div:[...jl.attributes?.div??[],"data*",["className","__boltArtifact__"]]},strip:[]};function Xle(t){const e=[Mle];return t&&e.unshift(Jle),e}function Qle(t){const e=[];return t&&e.push(ose,[Kle,Yle]),e}const Jle=()=>(t,e)=>{const n=e.toString();Ma(t,(r,i,s)=>{if(i==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(r.type)||!r.position)return!0;let o=n.slice(r.position.start.offset,r.position.end.offset);return r.type==="heading"&&(o=`
${o}`),s.children[i]={type:"text",value:o},[uP,i]})},_M=[{id:"abap",name:"ABAP",import:()=>j(()=>import("./abap-DsBKuouk.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>j(()=>import("./actionscript-3-D_z4Izcz.js"),[])},{id:"ada",name:"Ada",import:()=>j(()=>import("./ada-727ZlQH0.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>j(()=>import("./angular-html-LfdN0zeE.js").then(t=>t.f),__vite__mapDeps([12,13,14,15]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>j(()=>import("./angular-ts-CKsD7JZE.js"),__vite__mapDeps([16,12,13,14,15,17]))},{id:"apache",name:"Apache Conf",import:()=>j(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>j(()=>import("./apex-COJ4H7py.js"),[])},{id:"apl",name:"APL",import:()=>j(()=>import("./apl-BBq3IX1j.js"),__vite__mapDeps([18,13,14,15,19,20,21]))},{id:"applescript",name:"AppleScript",import:()=>j(()=>import("./applescript-Bu5BbsvL.js"),[])},{id:"ara",name:"Ara",import:()=>j(()=>import("./ara-7O62HKoU.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>j(()=>import("./asciidoc-BPT9niGB.js"),[])},{id:"asm",name:"Assembly",import:()=>j(()=>import("./asm-Dhn9LcZ4.js"),[])},{id:"astro",name:"Astro",import:()=>j(()=>import("./astro-CqkE3fuf.js"),__vite__mapDeps([22,21,14,23,15,24]))},{id:"awk",name:"AWK",import:()=>j(()=>import("./awk-eg146-Ew.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>j(()=>import("./ballerina-Du268qiB.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>j(()=>import("./bat-fje9CFhw.js"),[])},{id:"beancount",name:"Beancount",import:()=>j(()=>import("./beancount-BwXTMy5W.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>j(()=>import("./berry-3xVqZejG.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>j(()=>import("./bibtex-xW4inM5L.js"),[])},{id:"bicep",name:"Bicep",import:()=>j(()=>import("./bicep-DHo0CJ0O.js"),[])},{id:"blade",name:"Blade",import:()=>j(()=>import("./blade-a8OxSdnT.js"),__vite__mapDeps([25,13,14,15,19,20,26,21]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>j(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([27,28]))},{id:"c",name:"C",import:()=>j(()=>import("./c-C3t2pwGQ.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>j(()=>import("./cadence-DNquZEk8.js"),[])},{id:"cairo",name:"Cairo",import:()=>j(()=>import("./cairo--RitsXJZ.js"),__vite__mapDeps([29,30]))},{id:"clarity",name:"Clarity",import:()=>j(()=>import("./clarity-BHOwM8T6.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>j(()=>import("./clojure-DxSadP1t.js"),[])},{id:"cmake",name:"CMake",import:()=>j(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>j(()=>import("./cobol-PTqiYgYu.js"),__vite__mapDeps([31,13,14,15,20]))},{id:"codeowners",name:"CODEOWNERS",import:()=>j(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>j(()=>import("./codeql-sacFqUAJ.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>j(()=>import("./coffee-dyiR41kL.js"),__vite__mapDeps([32,14]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>j(()=>import("./common-lisp-C7gG9l05.js"),[])},{id:"coq",name:"Coq",import:()=>j(()=>import("./coq-Dsg_Bt_b.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>j(()=>import("./cpp-BksuvNSY.js"),__vite__mapDeps([33,34,35,36,26]))},{id:"crystal",name:"Crystal",import:()=>j(()=>import("./crystal-DtDmRg-F.js"),__vite__mapDeps([37,13,14,15,26,36,38]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>j(()=>import("./csharp-D9R-vmeu.js"),[])},{id:"css",name:"CSS",import:()=>j(()=>import("./css-BPhBrDlE.js"),[])},{id:"csv",name:"CSV",import:()=>j(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>j(()=>import("./cue-DtFQj3wx.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>j(()=>import("./cypher-m2LEI-9-.js"),[])},{id:"d",name:"D",import:()=>j(()=>import("./d-BoXegm-a.js"),[])},{id:"dart",name:"Dart",import:()=>j(()=>import("./dart-B9wLZaAG.js"),[])},{id:"dax",name:"DAX",import:()=>j(()=>import("./dax-ClGRhx96.js"),[])},{id:"desktop",name:"Desktop",import:()=>j(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>j(()=>import("./diff-BgYniUM_.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>j(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>j(()=>import("./dotenv-BjQB5zDj.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>j(()=>import("./dream-maker-C-nORZOA.js"),[])},{id:"edge",name:"Edge",import:()=>j(()=>import("./edge-D5gP-w-T.js"),__vite__mapDeps([39,23,13,14,15,40]))},{id:"elixir",name:"Elixir",import:()=>j(()=>import("./elixir-CLiX3zqd.js"),__vite__mapDeps([41,13,14,15]))},{id:"elm",name:"Elm",import:()=>j(()=>import("./elm-CmHSxxaM.js"),__vite__mapDeps([42,35,36]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>j(()=>import("./emacs-lisp-BX77sIaO.js"),[])},{id:"erb",name:"ERB",import:()=>j(()=>import("./erb-BYTLMnw6.js"),__vite__mapDeps([43,13,14,15,44,45,19,20,26,46,23,47,48,33,34,35,36,38,49,50]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>j(()=>import("./erlang-B-DoSBHF.js"),[])},{id:"fennel",name:"Fennel",import:()=>j(()=>import("./fennel-bCA53EVm.js"),[])},{id:"fish",name:"Fish",import:()=>j(()=>import("./fish-w-ucz2PV.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>j(()=>import("./fluent-Dayu4EKP.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>j(()=>import("./fortran-fixed-form-TqA4NnZg.js"),__vite__mapDeps([51,52]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>j(()=>import("./fortran-free-form-DKXYxT9g.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>j(()=>import("./fsharp-XplgxFYe.js"),__vite__mapDeps([53,54]))},{id:"gdresource",name:"GDResource",import:()=>j(()=>import("./gdresource-BHYsBjWJ.js"),__vite__mapDeps([55,56,57]))},{id:"gdscript",name:"GDScript",import:()=>j(()=>import("./gdscript-DfxzS6Rs.js"),[])},{id:"gdshader",name:"GDShader",import:()=>j(()=>import("./gdshader-SKMF96pI.js"),[])},{id:"genie",name:"Genie",import:()=>j(()=>import("./genie-ajMbGru0.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>j(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>j(()=>import("./git-commit-i4q6IMui.js"),__vite__mapDeps([58,59]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>j(()=>import("./git-rebase-B-v9cOL2.js"),__vite__mapDeps([60,38]))},{id:"gleam",name:"Gleam",import:()=>j(()=>import("./gleam-B430Bg39.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>j(()=>import("./glimmer-js-D-cwc0-E.js"),__vite__mapDeps([61,14,23,15,13]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>j(()=>import("./glimmer-ts-pgjy16dm.js"),__vite__mapDeps([62,23,15,14,13]))},{id:"glsl",name:"GLSL",import:()=>j(()=>import("./glsl-DBO2IWDn.js"),__vite__mapDeps([35,36]))},{id:"gnuplot",name:"Gnuplot",import:()=>j(()=>import("./gnuplot-CM8KxXT1.js"),[])},{id:"go",name:"Go",import:()=>j(()=>import("./go-B1SYOhNW.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>j(()=>import("./graphql-cDcHW_If.js"),__vite__mapDeps([46,14,23,47,48]))},{id:"groovy",name:"Groovy",import:()=>j(()=>import("./groovy-DkBy-JyN.js"),[])},{id:"hack",name:"Hack",import:()=>j(()=>import("./hack-D1yCygmZ.js"),__vite__mapDeps([63,13,14,15,26]))},{id:"haml",name:"Ruby Haml",import:()=>j(()=>import("./haml-B2EZWmdv.js"),__vite__mapDeps([45,14,15]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>j(()=>import("./handlebars-BQGss363.js"),__vite__mapDeps([64,13,14,15,50]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>j(()=>import("./haskell-BILxekzW.js"),[])},{id:"haxe",name:"Haxe",import:()=>j(()=>import("./haxe-C5wWYbrZ.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>j(()=>import("./hcl-HzYwdGDm.js"),[])},{id:"hjson",name:"Hjson",import:()=>j(()=>import("./hjson-T-Tgc4AT.js"),[])},{id:"hlsl",name:"HLSL",import:()=>j(()=>import("./hlsl-ifBTmRxC.js"),[])},{id:"html",name:"HTML",import:()=>j(()=>import("./html-C2L_23MC.js"),__vite__mapDeps([13,14,15]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>j(()=>import("./html-derivative-CSfWNPLT.js"),__vite__mapDeps([40,13,14,15]))},{id:"http",name:"HTTP",import:()=>j(()=>import("./http-FRrOvY1W.js"),__vite__mapDeps([65,38,21,19,20,46,14,23,47,48]))},{id:"hxml",name:"HXML",import:()=>j(()=>import("./hxml-TIA70rKU.js"),__vite__mapDeps([66,67]))},{id:"hy",name:"Hy",import:()=>j(()=>import("./hy-BMj5Y0dO.js"),[])},{id:"imba",name:"Imba",import:()=>j(()=>import("./imba-bv_oIlVt.js"),__vite__mapDeps([68,23]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>j(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>j(()=>import("./java-xI-RfyKK.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>j(()=>import("./javascript-ySlJ1b_l.js"),[])},{id:"jinja",name:"Jinja",import:()=>j(()=>import("./jinja-DGy0s7-h.js"),__vite__mapDeps([69,13,14,15]))},{id:"jison",name:"Jison",import:()=>j(()=>import("./jison-BqZprYcd.js"),__vite__mapDeps([70,14]))},{id:"json",name:"JSON",import:()=>j(()=>import("./json-BQoSv7ci.js"),[])},{id:"json5",name:"JSON5",import:()=>j(()=>import("./json5-w8dY5SsB.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>j(()=>import("./jsonc-TU54ms6u.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>j(()=>import("./jsonl-DREVFZK8.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>j(()=>import("./jsonnet-BfivnA6A.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>j(()=>import("./jssm-P4WzXJd0.js"),[])},{id:"jsx",name:"JSX",import:()=>j(()=>import("./jsx-BAng5TT0.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>j(()=>import("./julia-BBuGR-5E.js"),__vite__mapDeps([71,33,34,35,36,26,30,14,72]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>j(()=>import("./kotlin-B5lbUyaz.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>j(()=>import("./kusto-mebxcVVE.js"),[])},{id:"latex",name:"LaTeX",import:()=>j(()=>import("./latex-C-cWTeAZ.js"),__vite__mapDeps([73,74,72]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>j(()=>import("./lean-XBlWyCtg.js"),[])},{id:"less",name:"Less",import:()=>j(()=>import("./less-BfCpw3nA.js"),[])},{id:"liquid",name:"Liquid",import:()=>j(()=>import("./liquid-D3W5UaiH.js"),__vite__mapDeps([75,13,14,15,21]))},{id:"log",name:"Log file",import:()=>j(()=>import("./log-Cc5clBb7.js"),[])},{id:"logo",name:"Logo",import:()=>j(()=>import("./logo-IuBKFhSY.js"),[])},{id:"lua",name:"Lua",import:()=>j(()=>import("./lua-CvWAzNxB.js"),__vite__mapDeps([49,36]))},{id:"luau",name:"Luau",import:()=>j(()=>import("./luau-Du5NY7AG.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>j(()=>import("./make-Bvotw-X0.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>j(()=>import("./markdown-UIAJJxZW.js"),[])},{id:"marko",name:"Marko",import:()=>j(()=>import("./marko-z0MBrx5-.js"),__vite__mapDeps([76,15,77,17,14]))},{id:"matlab",name:"MATLAB",import:()=>j(()=>import("./matlab-D9-PGadD.js"),[])},{id:"mdc",name:"MDC",import:()=>j(()=>import("./mdc-DB_EDNY_.js"),__vite__mapDeps([78,54,50,40,13,14,15]))},{id:"mdx",name:"MDX",import:()=>j(()=>import("./mdx-sdHcTMYB.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>j(()=>import("./mermaid-Ci6OQyBP.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>j(()=>import("./mipsasm-BC5c_5Pe.js"),[])},{id:"mojo",name:"Mojo",import:()=>j(()=>import("./mojo-Tz6hzZYG.js"),[])},{id:"move",name:"Move",import:()=>j(()=>import("./move-DB_GagMm.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>j(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>j(()=>import("./nextflow-B0XVJmRM.js"),[])},{id:"nginx",name:"Nginx",import:()=>j(()=>import("./nginx-D_VnBJ67.js"),__vite__mapDeps([79,49,36]))},{id:"nim",name:"Nim",import:()=>j(()=>import("./nim-ZlGxZxc3.js"),__vite__mapDeps([80,36,13,14,15,19,20,35,54]))},{id:"nix",name:"Nix",import:()=>j(()=>import("./nix-shcSOmrb.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>j(()=>import("./nushell-D4Tzg5kh.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>j(()=>import("./objective-c-Deuh7S70.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>j(()=>import("./objective-cpp-BUEGK8hf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>j(()=>import("./ocaml-BNioltXt.js"),[])},{id:"pascal",name:"Pascal",import:()=>j(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>j(()=>import("./perl-CHQXSrWU.js"),__vite__mapDeps([81,13,14,15,19,20,26]))},{id:"php",name:"PHP",import:()=>j(()=>import("./php-B5ebYQev.js"),__vite__mapDeps([82,13,14,15,19,20,26,21]))},{id:"plsql",name:"PL/SQL",import:()=>j(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>j(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>j(()=>import("./polar-DKykz6zU.js"),[])},{id:"postcss",name:"PostCSS",import:()=>j(()=>import("./postcss-B3ZDOciz.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>j(()=>import("./powerquery-CSHBycmS.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>j(()=>import("./powershell-BIEUsx6d.js"),[])},{id:"prisma",name:"Prisma",import:()=>j(()=>import("./prisma-B48N-Iqd.js"),[])},{id:"prolog",name:"Prolog",import:()=>j(()=>import("./prolog-BY-TUvya.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>j(()=>import("./proto-zocC4JxJ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>j(()=>import("./pug-CM9l7STV.js"),__vite__mapDeps([83,14,15,13]))},{id:"puppet",name:"Puppet",import:()=>j(()=>import("./puppet-Cza_XSSt.js"),[])},{id:"purescript",name:"PureScript",import:()=>j(()=>import("./purescript-Bg-kzb6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>j(()=>import("./python-DhUJRlN_.js"),[])},{id:"qml",name:"QML",import:()=>j(()=>import("./qml-D8XfuvdV.js"),__vite__mapDeps([84,14]))},{id:"qmldir",name:"QML Directory",import:()=>j(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>j(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>j(()=>import("./r-CwjWoCRV.js"),[])},{id:"racket",name:"Racket",import:()=>j(()=>import("./racket-CzouJOBO.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>j(()=>import("./raku-B1bQXN8T.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>j(()=>import("./razor-CNLDkMZG.js"),__vite__mapDeps([85,13,14,15,86]))},{id:"reg",name:"Windows Registry Script",import:()=>j(()=>import("./reg-5LuOXUq_.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>j(()=>import("./regexp-DWJ3fJO_.js"),[])},{id:"rel",name:"Rel",import:()=>j(()=>import("./rel-DJlmqQ1C.js"),[])},{id:"riscv",name:"RISC-V",import:()=>j(()=>import("./riscv-QhoSD0DR.js"),[])},{id:"rst",name:"reStructuredText",import:()=>j(()=>import("./rst-4NLicBqY.js"),__vite__mapDeps([87,40,13,14,15,33,34,35,36,26,30,38,50,88,44,45,19,20,46,23,47,48,49]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>j(()=>import("./ruby-DeZ3UC14.js"),__vite__mapDeps([44,13,14,15,45,19,20,26,46,23,47,48,33,34,35,36,38,49,50]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>j(()=>import("./rust-Be6lgOlo.js"),[])},{id:"sas",name:"SAS",import:()=>j(()=>import("./sas-BmTFh92c.js"),__vite__mapDeps([89,26]))},{id:"sass",name:"Sass",import:()=>j(()=>import("./sass-BJ4Li9vH.js"),[])},{id:"scala",name:"Scala",import:()=>j(()=>import("./scala-DQVVAn-B.js"),[])},{id:"scheme",name:"Scheme",import:()=>j(()=>import("./scheme-BJGe-b2p.js"),[])},{id:"scss",name:"SCSS",import:()=>j(()=>import("./scss-C31hgJw-.js"),__vite__mapDeps([17,15]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>j(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>j(()=>import("./shaderlab-B7qAK45m.js"),__vite__mapDeps([90,91]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>j(()=>import("./shellscript-atvbtKCR.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>j(()=>import("./shellsession-C_rIy8kc.js"),__vite__mapDeps([92,38]))},{id:"smalltalk",name:"Smalltalk",import:()=>j(()=>import("./smalltalk-DkLiglaE.js"),[])},{id:"solidity",name:"Solidity",import:()=>j(()=>import("./solidity-C1w2a3ep.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>j(()=>import("./soy-C-lX7w71.js"),__vite__mapDeps([93,13,14,15]))},{id:"sparql",name:"SPARQL",import:()=>j(()=>import("./sparql-bYkjHRlG.js"),__vite__mapDeps([94,95]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>j(()=>import("./splunk-Cf8iN4DR.js"),[])},{id:"sql",name:"SQL",import:()=>j(()=>import("./sql-COK4E0Yg.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>j(()=>import("./ssh-config-BknIz3MU.js"),[])},{id:"stata",name:"Stata",import:()=>j(()=>import("./stata-DorPZHa4.js"),__vite__mapDeps([96,26]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>j(()=>import("./stylus-BeQkCIfX.js"),[])},{id:"svelte",name:"Svelte",import:()=>j(()=>import("./svelte-MSaWC3Je.js"),__vite__mapDeps([97,14,23,15,24]))},{id:"swift",name:"Swift",import:()=>j(()=>import("./swift-BSxZ-RaX.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>j(()=>import("./system-verilog-C7L56vO4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>j(()=>import("./systemd-CUnW07Te.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>j(()=>import("./talonscript-C1XDQQGZ.js"),[])},{id:"tasl",name:"Tasl",import:()=>j(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>j(()=>import("./tcl-DQ1-QYvQ.js"),[])},{id:"templ",name:"Templ",import:()=>j(()=>import("./templ-dwX3ZSMB.js"),__vite__mapDeps([98,99,14,15]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>j(()=>import("./terraform-BbSNqyBO.js"),[])},{id:"tex",name:"TeX",import:()=>j(()=>import("./tex-rYs2v40G.js"),__vite__mapDeps([74,72]))},{id:"toml",name:"TOML",import:()=>j(()=>import("./toml-CB2ApiWb.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>j(()=>import("./ts-tags-CipyTH0X.js"),__vite__mapDeps([100,23,15,14,35,36,13,26,19,20]))},{id:"tsv",name:"TSV",import:()=>j(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>j(()=>import("./tsx-B6W0miNI.js"),[])},{id:"turtle",name:"Turtle",import:()=>j(()=>import("./turtle-BMR_PYu6.js"),[])},{id:"twig",name:"Twig",import:()=>j(()=>import("./twig-NC5TFiHP.js"),__vite__mapDeps([101,15,14,17,82,13,19,20,26,21,30,44,45,46,23,47,48,33,34,35,36,38,49,50]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>j(()=>import("./typescript-Dj6nwHGl.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>j(()=>import("./typespec-BpWG_bgh.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>j(()=>import("./typst-BVUVsWT6.js"),[])},{id:"v",name:"V",import:()=>j(()=>import("./v-CAQ2eGtk.js"),[])},{id:"vala",name:"Vala",import:()=>j(()=>import("./vala-BFOHcciG.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>j(()=>import("./vb-CdO5JTpU.js"),[])},{id:"verilog",name:"Verilog",import:()=>j(()=>import("./verilog-CJaU5se_.js"),[])},{id:"vhdl",name:"VHDL",import:()=>j(()=>import("./vhdl-DYoNaHQp.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>j(()=>import("./viml-m4uW47V2.js"),[])},{id:"vue",name:"Vue",import:()=>j(()=>import("./vue-BuYVFjOK.js"),__vite__mapDeps([102,13,14,15,23,21,40]))},{id:"vue-html",name:"Vue HTML",import:()=>j(()=>import("./vue-html-xdeiXROB.js"),__vite__mapDeps([103,102,13,14,15,23,21,40]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>j(()=>import("./vyper-nyqBNV6O.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>j(()=>import("./wasm-C6j12Q_x.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>j(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>j(()=>import("./wgsl-CB0Krxn9.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>j(()=>import("./wikitext-DCE3LsBG.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>j(()=>import("./wolfram-C3FkfJm5.js"),[])},{id:"xml",name:"XML",import:()=>j(()=>import("./xml-e3z08dGr.js"),__vite__mapDeps([19,20]))},{id:"xsl",name:"XSL",import:()=>j(()=>import("./xsl-Dd0NUgwM.js"),__vite__mapDeps([104,19,20]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>j(()=>import("./yaml-CVw76BM1.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>j(()=>import("./zenscript-HnGAYVZD.js"),[])},{id:"zig",name:"Zig",import:()=>j(()=>import("./zig-BVz_zdnA.js"),[])}],Zle=Object.fromEntries(_M.map(t=>[t.id,t.import])),eue=Object.fromEntries(_M.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),bM={...Zle,...eue},tue=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>j(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>j(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>j(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>j(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>j(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>j(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>j(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>j(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>j(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>j(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>j(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>j(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>j(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>j(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>j(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>j(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>j(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>j(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>j(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>j(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>j(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>j(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>j(()=>import("./kanagawa-wave-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>j(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>j(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>j(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>j(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>j(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>j(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>j(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>j(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>j(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>j(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>j(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>j(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>j(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>j(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>j(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>j(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>j(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>j(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>j(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>j(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>j(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>j(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>j(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>j(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>j(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>j(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>j(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>j(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>j(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>j(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>j(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],nue=Object.fromEntries(tue.map(t=>[t.id,t.import]));let Ci=class extends Error{constructor(e){super(e),this.name="ShikiError"}},g1=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function rue(){return 2147483648}function iue(){return typeof performance<"u"?performance.now():Date.now()}const sue=(t,e)=>t+(e-t%e)%e;async function oue(t){let e,n;const r={};function i(d){n=d,r.HEAPU8=new Uint8Array(d),r.HEAPU32=new Uint32Array(d)}function s(d,_,b){r.HEAPU8.copyWithin(d,_,_+b)}function o(d){try{return e.grow(d-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(d){const _=r.HEAPU8.length;d=d>>>0;const b=rue();if(d>b)return!1;for(let p=1;p<=4;p*=2){let m=_*(1+.2/p);m=Math.min(m,d+100663296);const g=Math.min(b,sue(Math.max(d,m),65536));if(o(g))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function u(d,_,b=1024){const p=_+b;let m=_;for(;d[m]&&!(m>=p);)++m;if(m-_>16&&d.buffer&&l)return l.decode(d.subarray(_,m));let g="";for(;_<m;){let y=d[_++];if(!(y&128)){g+=String.fromCharCode(y);continue}const v=d[_++]&63;if((y&224)===192){g+=String.fromCharCode((y&31)<<6|v);continue}const S=d[_++]&63;if((y&240)===224?y=(y&15)<<12|v<<6|S:y=(y&7)<<18|v<<12|S<<6|d[_++]&63,y<65536)g+=String.fromCharCode(y);else{const E=y-65536;g+=String.fromCharCode(55296|E>>10,56320|E&1023)}}return g}function c(d,_){return d?u(r.HEAPU8,d,_):""}const h={emscripten_get_now:iue,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function f(){const _=await t({env:h,wasi_snapshot_preview1:h});e=_.memory,i(e.buffer),Object.assign(r,_),r.UTF8ToString=c}return await f(),r}var aue=Object.defineProperty,lue=(t,e,n)=>e in t?aue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qt=(t,e,n)=>(lue(t,typeof e!="symbol"?e+"":e,n),n);let Jt=null;function uue(t){throw new g1(t.UTF8ToString(t.getLastOnigError()))}class fp{constructor(e){qt(this,"utf16Length"),qt(this,"utf8Length"),qt(this,"utf16Value"),qt(this,"utf8Value"),qt(this,"utf16OffsetToUtf8"),qt(this,"utf8OffsetToUtf16");const n=e.length,r=fp._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let u=0;u<n;u++){const c=e.charCodeAt(u);let h=c,f=!1;if(c>=55296&&c<=56319&&u+1<n){const d=e.charCodeAt(u+1);d>=56320&&d<=57343&&(h=(c-55296<<10)+65536|d-56320,f=!0)}i&&(s[u]=l,f&&(s[u+1]=l),h<=127?o[l+0]=u:h<=2047?(o[l+0]=u,o[l+1]=u):h<=65535?(o[l+0]=u,o[l+1]=u,o[l+2]=u):(o[l+0]=u,o[l+1]=u,o[l+2]=u,o[l+3]=u)),h<=127?a[l++]=h:h<=2047?(a[l++]=192|(h&1984)>>>6,a[l++]=128|(h&63)>>>0):h<=65535?(a[l++]=224|(h&61440)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0):(a[l++]=240|(h&1835008)>>>18,a[l++]=128|(h&258048)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0),f&&u++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const Br=class{constructor(t){if(qt(this,"id",++Br.LAST_ID),qt(this,"_onigBinding"),qt(this,"content"),qt(this,"utf16Length"),qt(this,"utf8Length"),qt(this,"utf16OffsetToUtf8"),qt(this,"utf8OffsetToUtf16"),qt(this,"ptr"),!Jt)throw new g1("Must invoke loadWasm first.");this._onigBinding=Jt,this.content=t;const e=new fp(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!Br._sharedPtrInUse?(Br._sharedPtr||(Br._sharedPtr=Jt.omalloc(1e4)),Br._sharedPtrInUse=!0,Jt.HEAPU8.set(e.utf8Value,Br._sharedPtr),this.ptr=Br._sharedPtr):this.ptr=e.createString(Jt)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Br._sharedPtr?Br._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let dc=Br;qt(dc,"LAST_ID",0);qt(dc,"_sharedPtr",0);qt(dc,"_sharedPtrInUse",!1);class cue{constructor(e){if(qt(this,"_onigBinding"),qt(this,"_ptr"),!Jt)throw new g1("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const u=new fp(e[a]);n[a]=u.createString(Jt),r[a]=u.utf8Length}const i=Jt.omalloc(4*e.length);Jt.HEAPU32.set(n,i/4);const s=Jt.omalloc(4*e.length);Jt.HEAPU32.set(r,s/4);const o=Jt.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)Jt.ofree(n[a]);Jt.ofree(s),Jt.ofree(i),o===0&&uue(Jt),this._onigBinding=Jt,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new dc(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const u=a[l++],c=a[l++],h=[];for(let f=0;f<c;f++){const d=e.convertUtf8OffsetToUtf16(a[l++]),_=e.convertUtf8OffsetToUtf16(a[l++]);h[f]={start:d,end:_,length:_-d}}return{index:u,captureIndices:h}}}function hue(t){return typeof t.instantiator=="function"}function fue(t){return typeof t.default=="function"}function due(t){return typeof t.data<"u"}function pue(t){return typeof Response<"u"&&t instanceof Response}function mue(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof uf<"u"&&uf.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let fh;function gue(t){if(fh)return fh;async function e(){Jt=await oue(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),hue(r)?r=await r.instantiator(n):fue(r)?r=await r.default(n):(due(r)&&(r=r.data),pue(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await _ue(r)(n):r=await bue(r)(n):mue(r)?r=await Km(r)(n):r instanceof WebAssembly.Module?r=await Km(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await Km(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return fh=e(),fh}function Km(t){return e=>WebAssembly.instantiate(t,e)}function _ue(t){return e=>WebAssembly.instantiateStreaming(t,e)}function bue(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let yue;function vue(){return yue}async function yM(t){return t&&await gue(t),{createScanner(e){return new cue(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new dc(e)}}}function Eue(t){return _1(t)}function _1(t){return Array.isArray(t)?Sue(t):t instanceof RegExp?t:typeof t=="object"?wue(t):t}function Sue(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=_1(t[n]);return e}function wue(t){let e={};for(let n in t)e[n]=_1(t[n]);return e}function vM(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function EM(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?EM(t.substring(0,t.length-1)):t.substr(~e+1)}var Ym=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,dh=class{static hasCaptures(t){return t===null?!1:(Ym.lastIndex=0,Ym.test(t))}static replaceCaptures(t,e,n){return t.replace(Ym,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function SM(t,e){return t<e?-1:t>e?1:0}function wM(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=SM(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function mC(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function xM(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var CM=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},nd=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(Tue(t),e)}static createFromParsedTheme(t,e){return kue(t,e)}_cachedMatchRoot=new CM(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>xue(t.parent,i.parentScopes));return r?new TM(r.fontStyle,r.foreground,r.background):null}},Xm=class Wh{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Wh(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Wh(n,e[r]);return n}push(e){return new Wh(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function xue(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!Cue(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function Cue(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var TM=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function Tue(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let h=o.scope;h=h.replace(/^[,]+/,""),h=h.replace(/[,]+$/,""),a=h.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let h=o.settings.fontStyle.split(" ");for(let f=0,d=h.length;f<d;f++)switch(h[f]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let u=null;typeof o.settings.foreground=="string"&&mC(o.settings.foreground)&&(u=o.settings.foreground);let c=null;typeof o.settings.background=="string"&&mC(o.settings.background)&&(c=o.settings.background);for(let h=0,f=a.length;h<f;h++){let _=a[h].trim().split(" "),b=_[_.length-1],p=null;_.length>1&&(p=_.slice(0,_.length-1),p.reverse()),n[r++]=new Aue(b,p,i,l,u,c)}}return n}var Aue=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},Si=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Si||{});function kue(t,e){t.sort((l,u)=>{let c=SM(l.scope,u.scope);return c!==0||(c=wM(l.parentScopes,u.parentScopes),c!==0)?c:l.index-u.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new Rue(e),o=new TM(n,s.getId(r),s.getId(i)),a=new Due(new m_(0,null,-1,0,0),[]);for(let l=0,u=t.length;l<u;l++){let c=t[l];a.insert(0,c.scope,c.parentScopes,c.fontStyle,s.getId(c.foreground),s.getId(c.background))}return new nd(s,o,a)}var Rue=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Iue=Object.freeze([]),m_=class AM{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||Iue,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new AM(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},Due=class g_{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(g_._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,u;a===-1?(l=n,u=""):(l=n.substring(0,a),u=n.substring(a+1));let c;this._children.hasOwnProperty(l)?c=this._children[l]:(c=new g_(this._mainRule.clone(),m_.cloneArr(this._rulesWithParentScopes)),this._children[l]=c),c.insert(e+1,u,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(wM(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new m_(e,n,r,i,s))}},va=class nr{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=nr.getLanguageId(e),r=nr.getTokenType(e),i=nr.getFontStyle(e),s=nr.getForeground(e),o=nr.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let l=nr.getLanguageId(e),u=nr.getTokenType(e),c=nr.containsBalancedBrackets(e)?1:0,h=nr.getFontStyle(e),f=nr.getForeground(e),d=nr.getBackground(e);return n!==0&&(l=n),r!==8&&(u=r),i!==null&&(c=i?1:0),s!==-1&&(h=s),o!==0&&(f=o),a!==0&&(d=a),(l<<0|u<<8|c<<10|h<<11|f<<15|d<<24)>>>0}};function rd(t,e){const n=[],r=Lue(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let u=o();if(n.push({matcher:u,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return u=>!!l&&!l(u)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(gC(i)){const l=[];do l.push(i),i=r.next();while(gC(i));return u=>e(l,u)}return null}function o(){const l=[];let u=s();for(;u;)l.push(u),u=s();return c=>l.every(h=>h(c))}function a(){const l=[];let u=o();for(;u&&(l.push(u),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");u=o()}return c=>l.some(h=>h(c))}}function gC(t){return!!t&&!!t.match(/[\w\.:]+/)}function Lue(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function kM(t){typeof t.dispose=="function"&&t.dispose()}var xu=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Pue=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Oue=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Mue=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new xu(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Oue;for(const n of t)Nue(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof xu){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Nue(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof xu?qh({baseGrammar:s,selfGrammar:i},r):__(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new xu(a))}function __(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];id([r],e,n)}}function qh(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&id(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&id(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function id(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?vM({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&id(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=RM(s);switch(o.kind){case 0:qh({...e,selfGrammar:e.baseGrammar},n);break;case 1:qh(e,n);break;case 2:__(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?__(o.ruleName,l,n):qh(l,n)}else o.kind===4?n.add(new Pue(o.scopeName,o.ruleName)):n.add(new xu(o.scopeName));break}}}var Bue=class{kind=0},Fue=class{kind=1},Hue=class{constructor(t){this.ruleName=t}kind=2},Uue=class{constructor(t){this.scopeName=t}kind=3},jue=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function RM(t){if(t==="$base")return new Bue;if(t==="$self")return new Fue;const e=t.indexOf("#");if(e===-1)return new Uue(t);if(e===0)return new Hue(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new jue(n,r)}}var Vue=/\\(\d+)/,_C=/\\(\d+)/g,$ue=-1,IM=-2;var pc=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=dh.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=dh.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${EM(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:dh.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:dh.replaceCaptures(this._contentName,t,e)}},zue=class extends pc{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},Wue=class extends pc{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new Cu(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Tu,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},bC=class extends pc{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Tu,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},b_=class extends pc{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,l,u){super(t,e,n,r),this._begin=new Cu(i,this.id),this.beginCaptures=s,this._end=new Cu(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Tu;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},sd=class extends pc{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r),this._begin=new Cu(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new Cu(o,IM),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Tu;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Tu,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},DM=class fn{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new zue(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new Wue(e.$vscodeTextmateLocation,e.id,e.name,e.match,fn._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=vM({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new bC(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,fn._compilePatterns(s,n,r))}return e.while?new sd(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,fn._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,fn._compileCaptures(e.whileCaptures||e.captures,n,r),fn._compilePatterns(e.patterns,n,r)):new b_(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,fn._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,fn._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,fn._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=fn.getCompiledRuleId(e[o],n,r)),i[a]=fn.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const u=RM(a.include);switch(u.kind){case 0:case 1:l=fn.getCompiledRuleId(r[a.include],n,r);break;case 2:let c=r[u.ruleName];c&&(l=fn.getCompiledRuleId(c,n,r));break;case 3:case 4:const h=u.scopeName,f=u.kind===4?u.ruleName:null,d=n.getExternalGrammar(h,r);if(d)if(f){let _=d.repository[f];_&&(l=fn.getCompiledRuleId(_,n,d.repository))}else l=fn.getCompiledRuleId(d.repository.$self,n,d.repository);break}}else l=fn.getCompiledRuleId(a,n,r);if(l!==-1){const u=n.getRule(l);let c=!1;if((u instanceof bC||u instanceof b_||u instanceof sd)&&u.hasMissingPatterns&&u.patterns.length===0&&(c=!0),c)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},Cu=class LM{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const u=e.charAt(a+1);u==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(u==="A"||u==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=Vue.test(this.source):this.hasBackReferences=!1}clone(){return new LM(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return _C.lastIndex=0,this.source.replace(_C,(i,s)=>xM(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Tu=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new yC(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new yC(t,r,this._items.map(i=>i.ruleId))}},yC=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},Qm=class{constructor(t,e){this.languageId=t,this.tokenType=e}},que=class y_{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new Qm(e,8),this._embeddedLanguagesMatcher=new Gue(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?y_._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new Qm(0,0);_getBasicScopeAttributes=new CM(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new Qm(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(y_.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},Gue=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>xM(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},vC=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function PM(t,e,n,r,i,s,o,a){const l=e.content.length;let u=!1,c=-1;if(o){const d=Kue(t,e,n,r,i,s);i=d.stack,r=d.linePos,n=d.isFirstLine,c=d.anchorPosition}const h=Date.now();for(;!u;){if(a!==0&&Date.now()-h>a)return new vC(i,!0);f()}return new vC(i,!1);function f(){const d=Yue(t,e,n,r,i,c);if(!d){s.produce(i,l),u=!0;return}const _=d.captureIndices,b=d.matchedRuleId,p=_&&_.length>0?_[0].end>r:!1;if(b===$ue){const m=i.getRule(t);s.produce(i,_[0].start),i=i.withContentNameScopesList(i.nameScopesList),El(t,e,n,i,s,m.endCaptures,_),s.produce(i,_[0].end);const g=i;if(i=i.parent,c=g.getAnchorPos(),!p&&g.getEnterPos()===r){i=g,s.produce(i,l),u=!0;return}}else{const m=t.getRule(b);s.produce(i,_[0].start);const g=i,y=m.getName(e.content,_),v=i.contentNameScopesList.pushAttributed(y,t);if(i=i.push(b,r,c,_[0].end===l,null,v,v),m instanceof b_){const S=m;El(t,e,n,i,s,S.beginCaptures,_),s.produce(i,_[0].end),c=_[0].end;const E=S.getContentName(e.content,_),C=v.pushAttributed(E,t);if(i=i.withContentNameScopesList(C),S.endHasBackReferences&&(i=i.withEndRule(S.getEndWithResolvedBackReferences(e.content,_))),!p&&g.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),u=!0;return}}else if(m instanceof sd){const S=m;El(t,e,n,i,s,S.beginCaptures,_),s.produce(i,_[0].end),c=_[0].end;const E=S.getContentName(e.content,_),C=v.pushAttributed(E,t);if(i=i.withContentNameScopesList(C),S.whileHasBackReferences&&(i=i.withEndRule(S.getWhileWithResolvedBackReferences(e.content,_))),!p&&g.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),u=!0;return}}else if(El(t,e,n,i,s,m.captures,_),s.produce(i,_[0].end),i=i.pop(),!p){i=i.safePop(),s.produce(i,l),u=!0;return}}_[0].end>r&&(r=_[0].end,n=!1)}}function Kue(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const u=l.getRule(t);u instanceof sd&&a.push({rule:u,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:u,findOptions:c}=Jue(l.rule,t,l.stack.endRule,n,r===o),h=u.findNextMatchSync(e,r,c);if(h){if(h.ruleId!==IM){i=l.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(s.produce(l.stack,h.captureIndices[0].start),El(t,e,n,l.stack,s,l.rule.whileCaptures,h.captureIndices),s.produce(l.stack,h.captureIndices[0].end),o=h.captureIndices[0].end,h.captureIndices[0].end>r&&(r=h.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function Yue(t,e,n,r,i,s){const o=Xue(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=Que(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const u=o.captureIndices[0].start,c=l.captureIndices[0].start;return c<u||l.priorityMatch&&c===u?l:o}function Xue(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=OM(o,t,i.endRule,n,r===s),u=a.findNextMatchSync(e,r,l);return u?{captureIndices:u.captureIndices,matchedRuleId:u.ruleId}:null}function Que(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,u,c=0;const h=s.contentNameScopesList.getScopeNames();for(let f=0,d=t.length;f<d;f++){const _=t[f];if(!_.matcher(h))continue;const b=e.getRule(_.ruleId),{ruleScanner:p,findOptions:m}=OM(b,e,null,r,i===o),g=p.findNextMatchSync(n,i,m);if(!g)continue;const y=g.captureIndices[0].start;if(!(y>=a)&&(a=y,l=g.captureIndices,u=g.ruleId,c=_.priority,a===i))break}return l?{priorityMatch:c===-1,captureIndices:l,matchedRuleId:u}:null}function OM(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function Jue(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function El(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),u=[],c=o[0].end;for(let h=0;h<l;h++){const f=s[h];if(f===null)continue;const d=o[h];if(d.length===0)continue;if(d.start>c)break;for(;u.length>0&&u[u.length-1].endPos<=d.start;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?i.produceFromScopes(u[u.length-1].scopes,d.start):i.produce(r,d.start),f.retokenizeCapturedWithRuleId){const b=f.getName(a,o),p=r.contentNameScopesList.pushAttributed(b,t),m=f.getContentName(a,o),g=p.pushAttributed(m,t),y=r.push(f.retokenizeCapturedWithRuleId,d.start,-1,!1,null,p,g),v=t.createOnigString(a.substring(0,d.end));PM(t,v,n&&d.start===0,d.start,y,i,!1,0),kM(v);continue}const _=f.getName(a,o);if(_!==null){const p=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(_,t);u.push(new Zue(p,d.end))}}for(;u.length>0;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var Zue=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function ece(t,e,n,r,i,s,o,a){return new nce(t,e,n,r,i,s,o,a)}function EC(t,e,n,r,i){const s=rd(e,od),o=DM.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function od(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(tce(e[i],r))return n=i+1,!0;return!1})}function tce(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var nce=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new que(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=SC(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const u=rd(l,od);for(const c of u)this._tokenTypeMatchers.push({matcher:c.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)EC(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&EC(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=SC(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=DM.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===v_.NULL){i=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),c=this.themeProvider.getDefaults(),h=va.set(0,u.languageId,u.tokenType,null,c.fontStyle,c.foregroundId,c.backgroundId),f=this.getRule(this._rootId).getName(null,null);let d;f?d=Vl.createRootAndLookUpScopeName(f,h,this):d=Vl.createRoot("unknown",h),e=new v_(null,this._rootId,-1,-1,!1,null,d,d)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new ice(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=PM(this,s,i,0,e,a,!0,r);return kM(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function SC(t,e){return t=Eue(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Vl=class Fr{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=Xm.push(i,s.scopeNames),r=new Fr(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new Fr(null,new Xm(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new Xm(null,e),o=r.themeProvider.themeMatch(s),a=Fr.mergeAttributes(n,i,o);return new Fr(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Fr.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),va.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Fr._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=Fr._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=Fr.mergeAttributes(e.tokenAttributes,i,o);return new Fr(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},v_=class Ts{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new Ts(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Ts._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Vl.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ts._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new Ts(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ts(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Vl.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Ts(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Vl.fromExtension(r,n.contentNameScopesList))}},rce=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):rd(n,od).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>rd(n,od).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},ice=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=va.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=va.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},sce=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,ece(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},oce=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new sce(nd.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(nd.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new rce(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new Mue(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},E_=v_.NULL;class mc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}mc.prototype.normal={};mc.prototype.property={};mc.prototype.space=void 0;function MM(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new mc(n,r,e)}function S_(t){return t.toLowerCase()}class Un{constructor(e,n){this.attribute=n,this.property=e}}Un.prototype.attribute="";Un.prototype.booleanish=!1;Un.prototype.boolean=!1;Un.prototype.commaOrSpaceSeparated=!1;Un.prototype.commaSeparated=!1;Un.prototype.defined=!1;Un.prototype.mustUseProperty=!1;Un.prototype.number=!1;Un.prototype.overloadedBoolean=!1;Un.prototype.property="";Un.prototype.spaceSeparated=!1;Un.prototype.space=void 0;let ace=0;const We=go(),Ut=go(),w_=go(),Se=go(),yt=go(),sa=go(),qn=go();function go(){return 2**++ace}const x_=Object.freeze(Object.defineProperty({__proto__:null,boolean:We,booleanish:Ut,commaOrSpaceSeparated:qn,commaSeparated:sa,number:Se,overloadedBoolean:w_,spaceSeparated:yt},Symbol.toStringTag,{value:"Module"})),Jm=Object.keys(x_);class b1 extends Un{constructor(e,n,r,i){let s=-1;if(super(e,n),wC(this,"space",i),typeof r=="number")for(;++s<Jm.length;){const o=Jm[s];wC(this,Jm[s],(r&x_[o])===x_[o])}}}b1.prototype.defined=!0;function wC(t,e,n){n&&(t[e]=n)}function Va(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new b1(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[S_(r)]=r,n[S_(s.attribute)]=r}return new mc(e,n,t.space)}const NM=Va({properties:{ariaActiveDescendant:null,ariaAtomic:Ut,ariaAutoComplete:null,ariaBusy:Ut,ariaChecked:Ut,ariaColCount:Se,ariaColIndex:Se,ariaColSpan:Se,ariaControls:yt,ariaCurrent:null,ariaDescribedBy:yt,ariaDetails:null,ariaDisabled:Ut,ariaDropEffect:yt,ariaErrorMessage:null,ariaExpanded:Ut,ariaFlowTo:yt,ariaGrabbed:Ut,ariaHasPopup:null,ariaHidden:Ut,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:yt,ariaLevel:Se,ariaLive:null,ariaModal:Ut,ariaMultiLine:Ut,ariaMultiSelectable:Ut,ariaOrientation:null,ariaOwns:yt,ariaPlaceholder:null,ariaPosInSet:Se,ariaPressed:Ut,ariaReadOnly:Ut,ariaRelevant:null,ariaRequired:Ut,ariaRoleDescription:yt,ariaRowCount:Se,ariaRowIndex:Se,ariaRowSpan:Se,ariaSelected:Ut,ariaSetSize:Se,ariaSort:null,ariaValueMax:Se,ariaValueMin:Se,ariaValueNow:Se,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function BM(t,e){return e in t?t[e]:e}function FM(t,e){return BM(t,e.toLowerCase())}const lce=Va({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:sa,acceptCharset:yt,accessKey:yt,action:null,allow:null,allowFullScreen:We,allowPaymentRequest:We,allowUserMedia:We,alt:null,as:null,async:We,autoCapitalize:null,autoComplete:yt,autoFocus:We,autoPlay:We,blocking:yt,capture:null,charSet:null,checked:We,cite:null,className:yt,cols:Se,colSpan:null,content:null,contentEditable:Ut,controls:We,controlsList:yt,coords:Se|sa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:We,defer:We,dir:null,dirName:null,disabled:We,download:w_,draggable:Ut,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:We,formTarget:null,headers:yt,height:Se,hidden:w_,high:Se,href:null,hrefLang:null,htmlFor:yt,httpEquiv:yt,id:null,imageSizes:null,imageSrcSet:null,inert:We,inputMode:null,integrity:null,is:null,isMap:We,itemId:null,itemProp:yt,itemRef:yt,itemScope:We,itemType:yt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:We,low:Se,manifest:null,max:null,maxLength:Se,media:null,method:null,min:null,minLength:Se,multiple:We,muted:We,name:null,nonce:null,noModule:We,noValidate:We,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:We,optimum:Se,pattern:null,ping:yt,placeholder:null,playsInline:We,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:We,referrerPolicy:null,rel:yt,required:We,reversed:We,rows:Se,rowSpan:Se,sandbox:yt,scope:null,scoped:We,seamless:We,selected:We,shadowRootClonable:We,shadowRootDelegatesFocus:We,shadowRootMode:null,shape:null,size:Se,sizes:null,slot:null,span:Se,spellCheck:Ut,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Se,step:null,style:null,tabIndex:Se,target:null,title:null,translate:null,type:null,typeMustMatch:We,useMap:null,value:Ut,width:Se,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:yt,axis:null,background:null,bgColor:null,border:Se,borderColor:null,bottomMargin:Se,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:We,declare:We,event:null,face:null,frame:null,frameBorder:null,hSpace:Se,leftMargin:Se,link:null,longDesc:null,lowSrc:null,marginHeight:Se,marginWidth:Se,noResize:We,noHref:We,noShade:We,noWrap:We,object:null,profile:null,prompt:null,rev:null,rightMargin:Se,rules:null,scheme:null,scrolling:Ut,standby:null,summary:null,text:null,topMargin:Se,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Se,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:We,disableRemotePlayback:We,prefix:null,property:null,results:Se,security:null,unselectable:null},space:"html",transform:FM}),uce=Va({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:qn,accentHeight:Se,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Se,amplitude:Se,arabicForm:null,ascent:Se,attributeName:null,attributeType:null,azimuth:Se,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Se,by:null,calcMode:null,capHeight:Se,className:yt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Se,diffuseConstant:Se,direction:null,display:null,dur:null,divisor:Se,dominantBaseline:null,download:We,dx:null,dy:null,edgeMode:null,editable:null,elevation:Se,enableBackground:null,end:null,event:null,exponent:Se,externalResourcesRequired:null,fill:null,fillOpacity:Se,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:sa,g2:sa,glyphName:sa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Se,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Se,horizOriginX:Se,horizOriginY:Se,id:null,ideographic:Se,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Se,k:Se,k1:Se,k2:Se,k3:Se,k4:Se,kernelMatrix:qn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Se,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Se,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Se,overlineThickness:Se,paintOrder:null,panose1:null,path:null,pathLength:Se,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:yt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Se,pointsAtY:Se,pointsAtZ:Se,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qn,rev:qn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qn,requiredFeatures:qn,requiredFonts:qn,requiredFormats:qn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Se,specularExponent:Se,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Se,strikethroughThickness:Se,string:null,stroke:null,strokeDashArray:qn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Se,strokeOpacity:Se,strokeWidth:null,style:null,surfaceScale:Se,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qn,tabIndex:Se,tableValues:null,target:null,targetX:Se,targetY:Se,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Se,underlineThickness:Se,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Se,values:null,vAlphabetic:Se,vMathematical:Se,vectorEffect:null,vHanging:Se,vIdeographic:Se,version:null,vertAdvY:Se,vertOriginX:Se,vertOriginY:Se,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Se,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:BM}),HM=Va({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),UM=Va({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:FM}),jM=Va({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),cce=/[A-Z]/g,xC=/-[a-z]/g,hce=/^data[-\w.:]+$/i;function fce(t,e){const n=S_(e);let r=e,i=Un;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&hce.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(xC,pce);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!xC.test(s)){let o=s.replace(cce,dce);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=b1}return new i(r,e)}function dce(t){return"-"+t.toLowerCase()}function pce(t){return t.charAt(1).toUpperCase()}const mce=MM([NM,lce,HM,UM,jM],"html"),VM=MM([NM,uce,HM,UM,jM],"svg"),gce=/["&'<>`]/g,_ce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bce=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,yce=/[|\\{}()[\]^$+*?.]/g,CC=new WeakMap;function vce(t,e){if(t=t.replace(e.subset?Ece(e.subset):gce,r),e.subset||e.escapeOnly)return t;return t.replace(_ce,n).replace(bce,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function Ece(t){let e=CC.get(t);return e||(e=Sce(t),CC.set(t,e)),e}function Sce(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(yce,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const wce=/[\dA-Fa-f]/;function xce(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!wce.test(String.fromCharCode(e))?r:r+";"}const Cce=/\d/;function Tce(t,e,n){const r="&#"+String(t);return n&&e&&!Cce.test(String.fromCharCode(e))?r:r+";"}const Ace=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Zm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},kce=["cent","copy","divide","gt","lt","not","para","times"],$M={}.hasOwnProperty,C_={};let ph;for(ph in Zm)$M.call(Zm,ph)&&(C_[Zm[ph]]=ph);const Rce=/[^\dA-Za-z]/;function Ice(t,e,n,r){const i=String.fromCharCode(t);if($M.call(C_,i)){const s=C_[i],o="&"+s;return n&&Ace.includes(s)&&!kce.includes(s)&&(!r||e&&e!==61&&Rce.test(String.fromCharCode(e)))?o:o+";"}return""}function Dce(t,e,n){let r=xce(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=Ice(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=Tce(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function oa(t,e){return vce(t,Object.assign({format:Dce},e))}const Lce=/^>|^->|<!--|-->|--!>|<!-$/g,Pce=[">"],Oce=["<",">"];function Mce(t,e,n,r){return r.settings.bogusComments?"<?"+oa(t.value,Object.assign({},r.settings.characterReferences,{subset:Pce}))+">":"<!--"+t.value.replace(Lce,i)+"-->";function i(s){return oa(s,Object.assign({},r.settings.characterReferences,{subset:Oce}))}}function Nce(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Bce=/[ \t\n\f\r]/g;function y1(t){return typeof t=="object"?t.type==="text"?TC(t.value):!1:TC(t)}function TC(t){return t.replace(Bce,"")===""}const Yt=WM(1),zM=WM(-1),Fce=[];function WM(t){return e;function e(n,r,i){const s=n?n.children:Fce;let o=(r||0)+t,a=s[o];if(!i)for(;a&&y1(a);)o+=t,a=s[o];return a}}const Hce={}.hasOwnProperty;function qM(t){return e;function e(n,r,i){return Hce.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const v1=qM({body:jce,caption:eg,colgroup:eg,dd:Wce,dt:zce,head:eg,html:Uce,li:$ce,optgroup:qce,option:Gce,p:Vce,rp:AC,rt:AC,tbody:Yce,td:kC,tfoot:Xce,th:kC,thead:Kce,tr:Qce});function eg(t,e,n){const r=Yt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&y1(r.value.charAt(0)))}function Uce(t,e,n){const r=Yt(n,e);return!r||r.type!=="comment"}function jce(t,e,n){const r=Yt(n,e);return!r||r.type!=="comment"}function Vce(t,e,n){const r=Yt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function $ce(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function zce(t,e,n){const r=Yt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Wce(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function AC(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function qce(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function Gce(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function Kce(t,e,n){const r=Yt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function Yce(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function Xce(t,e,n){return!Yt(n,e)}function Qce(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function kC(t,e,n){const r=Yt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const Jce=qM({body:the,colgroup:nhe,head:ehe,html:Zce,tbody:rhe});function Zce(t){const e=Yt(t,-1);return!e||e.type!=="comment"}function ehe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function the(t){const e=Yt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&y1(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function nhe(t,e,n){const r=zM(n,e),i=Yt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&v1(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function rhe(t,e,n){const r=zM(n,e),i=Yt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&v1(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const mh={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function ihe(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=VM);const u=she(r,t.properties),c=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,c&&(o=!1),(u||!s||!Jce(t,e,n))&&(a.push("<",t.tagName,u?" "+u:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=u.charAt(u.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(c),!o&&(!s||!v1(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function she(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=ohe(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function ohe(t,e,n){const r=fce(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=oa(r.attribute,Object.assign({},t.settings.characterReferences,{subset:mh.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?Ny:Hy)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=oa(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:mh.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&Jf(n,o)>Jf(n,t.alternative)&&(o=t.alternative),a=o+oa(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?mh.single:mh.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const ahe=["<","&"];function GM(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:oa(t.value,Object.assign({},r.settings.characterReferences,{subset:ahe}))}function lhe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:GM(t,e,n,r)}function uhe(t,e,n,r){return r.all(t)}const che=n1("type",{invalid:hhe,unknown:fhe,handlers:{comment:Mce,doctype:Nce,element:ihe,raw:lhe,root:uhe,text:GM}});function hhe(t){throw new Error("Expected node, not `"+t+"`")}function fhe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const dhe={},phe={},mhe=[];function ghe(t,e){const n=dhe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:_he,all:bhe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||UP,characterReferences:n.characterReferences||phe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?VM:mce,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function _he(t,e,n){return che(t,e,n,this)}function bhe(t){const e=[],n=t&&t.children||mhe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function yhe(t){return Array.isArray(t)?t:[t]}function dp(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function E1(t){return!t||["plaintext","txt","text","plain"].includes(t)}function S1(t){return t==="ansi"||E1(t)}function w1(t){return t==="none"}function KM(t){return w1(t)}function YM(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function vhe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function Ehe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?vhe(i,s):i})):t}async function XM(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function ad(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function Hs(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function QM(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Si.Italic&&(e["font-style"]="italic"),t.fontStyle&Si.Bold&&(e["font-weight"]="bold"),t.fontStyle&Si.Underline&&(e["text-decoration"]="underline")),e}function She(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function whe(t){const e=dp(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}class wn extends Error{constructor(e){super(e),this.name="ShikiError"}}const JM=new WeakMap;function pp(t,e){JM.set(t,e)}function Au(t){return JM.get(t)}class $a{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new $a(Object.fromEntries(yhe(n).map(r=>[r,E_])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return RC(this._stacks[this.theme])}getScopes(e=this.theme){return RC(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function RC(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function xhe(t,e){if(!(t instanceof $a))throw new wn("Invalid grammar state");return t.getInternalStack(e)}function Che(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new wn(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new wn(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);if(o.character<0||o.character>a.length)throw new wn(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:i.posToIndex(o.line,o.character)}}};const i=whe(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));The(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return Ehe(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(c=>c.type==="element"&&c.tagName==="span");if(i.length!==r.converter.lines.length)throw new wn(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(c,h,f,d){const _=i[c];let b="",p=-1,m=-1;if(h===0&&(p=0),f===0&&(m=0),f===Number.POSITIVE_INFINITY&&(m=_.children.length),p===-1||m===-1)for(let y=0;y<_.children.length;y++)b+=ZM(_.children[y]),p===-1&&b.length===h&&(p=y+1),m===-1&&b.length===f&&(m=y+1);if(p===-1)throw new wn(`Failed to find start index for decoration ${JSON.stringify(d.start)}`);if(m===-1)throw new wn(`Failed to find end index for decoration ${JSON.stringify(d.end)}`);const g=_.children.slice(p,m);if(!d.alwaysWrap&&g.length===_.children.length)a(_,d,"line");else if(!d.alwaysWrap&&g.length===1&&g[0].type==="element")a(g[0],d,"token");else{const y={type:"element",tagName:"span",properties:{},children:g};a(y,d,"wrapper"),_.children.splice(p,g.length,y)}}function o(c,h){i[c]=a(i[c],h,"line")}function a(c,h,f){const d=h.properties||{},_=h.transform||(b=>b);return c.tagName=h.tagName||"span",c.properties={...c.properties,...d,class:c.properties.class},h.properties?.class&&YM(c,h.properties.class),c=_(c,f)||c,c}const l=[],u=r.decorations.sort((c,h)=>h.start.offset-c.start.offset);for(const c of u){const{start:h,end:f}=c;if(h.line===f.line)s(h.line,h.character,f.character,c);else if(h.line<f.line){s(h.line,h.character,Number.POSITIVE_INFINITY,c);for(let d=h.line+1;d<f.line;d++)l.unshift(()=>o(d,c));s(f.line,0,f.character,c)}}l.forEach(c=>c())}}}function The(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new wn(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<n.end.offset,a=i.start.offset<n.start.offset&&n.start.offset<i.end.offset,l=i.start.offset<n.end.offset&&n.end.offset<i.end.offset;if(s||o||a||l){if(o&&o||a&&l)continue;throw new wn(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function ZM(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(ZM).join(""):""}const Ahe=[Che()];function ld(t){return[...t.transformers||[],...Ahe]}var Us=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],tg={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function khe(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function IC(t,e){let n=1;const r=t[e+n++];let i;if(r==="2"){const s=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(t[e+n]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[n,i]}function Rhe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=Number.parseInt(r);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)tg[i]&&e.push({type:"setDecoration",value:tg[i]});else if(i<=29){const s=tg[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Us[i-30]}});else if(i===38){const[s,o]=IC(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Us[i-40]}});else if(i===48){const[s,o]=IC(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Us[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Us[i-100+8]}})}return e}function Ihe(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=khe(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=Rhe(o.sequence);for(const u of l)u.type==="resetAll"?(t=null,e=null,n.clear()):u.type==="resetForegroundColor"?t=null:u.type==="resetBackgroundColor"?e=null:u.type==="resetDecoration"&&n.delete(u.value);for(const u of l)u.type==="setForegroundColor"?t=u.value:u.type==="setBackgroundColor"?e=u.value:u.type==="setDecoration"&&n.add(u.value)}s=o.position}while(s<r.length);return i}}}var Dhe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Lhe(t=Dhe){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let u=0;u<Us.length;u++)r.push(e(Us[u]));let a=[0,95,135,175,215,255];for(let u=0;u<6;u++)for(let c=0;c<6;c++)for(let h=0;h<6;h++)r.push(n([a[u],a[c],a[h]]));let l=8;for(let u=0;u<24;u++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function Phe(t,e,n){const r=ad(t,n),i=dp(e),s=Lhe(Object.fromEntries(Us.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=Ihe();return i.map(a=>o.parse(a[0]).map(l=>{let u,c;l.decorations.has("reverse")?(u=l.background?s.value(l.background):t.bg,c=l.foreground?s.value(l.foreground):t.fg):(u=l.foreground?s.value(l.foreground):t.fg,c=l.background?s.value(l.background):void 0),u=Hs(u,r),c=Hs(c,r),l.decorations.has("dim")&&(u=Ohe(u));let h=Si.None;return l.decorations.has("bold")&&(h|=Si.Bold),l.decorations.has("italic")&&(h|=Si.Italic),l.decorations.has("underline")&&(h|=Si.Underline),{content:l.value,offset:a[1],color:u,bgColor:c,fontStyle:h}}))}function Ohe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function x1(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(E1(r)||w1(i))return dp(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return Phe(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new Ci(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new Ci(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return Nhe(e,a,s,o,n)}function Mhe(...t){if(t.length===2)return Au(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(E1(i)||w1(s))throw new Ci("Plain language does not have grammar state");if(i==="ansi")throw new Ci("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new $a(ud(n,l,o,a,r).stateStack,l.name,o.name)}function Nhe(t,e,n,r,i){const s=ud(t,e,n,r,i),o=new $a(ud(t,e,n,r,i).stateStack,e.name,n.name);return pp(s.tokens,o),s.tokens}function ud(t,e,n,r,i){const s=ad(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=dp(t);let u=i.grammarState?xhe(i.grammarState,n.name)??E_:i.grammarContextCode!=null?ud(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:E_,c=[];const h=[];for(let f=0,d=l.length;f<d;f++){const[_,b]=l[f];if(_===""){c=[],h.push([]);continue}if(o>0&&_.length>=o){c=[],h.push([{content:_,offset:b,color:"",fontStyle:0}]);continue}let p,m,g;i.includeExplanation&&(p=e.tokenizeLine(_,u),m=p.tokens,g=0);const y=e.tokenizeLine2(_,u,a),v=y.tokens.length/2;for(let S=0;S<v;S++){const E=y.tokens[2*S],C=S+1<v?y.tokens[2*S+2]:_.length;if(E===C)continue;const x=y.tokens[2*S+1],A=Hs(r[va.getForeground(x)],s),D=va.getFontStyle(x),M={content:_.substring(E,C),offset:b+E,color:A,fontStyle:D};if(i.includeExplanation){const H=[];if(i.includeExplanation!=="scopeName")for(const $ of n.settings){let G;switch(typeof $.scope){case"string":G=$.scope.split(/,/).map(Z=>Z.trim());break;case"object":G=$.scope;break;default:continue}H.push({settings:$,selectors:G.map(Z=>Z.split(/ /))})}M.explanation=[];let B=0;for(;E+B<C;){const $=m[g],G=_.substring($.startIndex,$.endIndex);B+=G.length,M.explanation.push({content:G,scopes:i.includeExplanation==="scopeName"?Bhe($.scopes):Fhe(H,$.scopes)}),g+=1}}c.push(M)}h.push(c),c=[],u=y.ruleStack}return{tokens:h,stateStack:u}}function Bhe(t){return t.map(e=>({scopeName:e}))}function Fhe(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:Uhe(t,s,e.slice(0,r))}}return n}function DC(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Hhe(t,e,n){if(!DC(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)DC(t[r],n[i])&&(r-=1),i-=1;return r===-1}function Uhe(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(Hhe(o,e,n)){r.push(s);break}return r}function eN(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=r.map(l=>{const u=x1(t,e,{...n,theme:l.theme}),c=Au(u),h=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:u,state:c,theme:h}}),s=jhe(...i.map(l=>l.tokens)),o=s[0].map((l,u)=>l.map((c,h)=>{const f={content:c.content,variants:{},offset:c.offset};return"includeExplanation"in n&&n.includeExplanation&&(f.explanation=c.explanation),s.forEach((d,_)=>{const{content:b,explanation:p,offset:m,...g}=d[u][h];f.variants[r[_].color]=g}),f})),a=i[0].state?new $a(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&pp(o,a),o}function jhe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,u)=>l.push(s[u]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(u=>u.content.length));for(let u=0;u<n;u++){const c=a[u];c.content.length===l?(s[u].push(c),o[u]+=1,a[u]=i[u][o[u]]):(s[u].push({...c,content:c.content.slice(0,l)}),a[u]={...c,content:c.content.slice(l),offset:c.offset+l})}}}return e}function cd(t,e,n){let r,i,s,o,a,l;if("themes"in n){const{defaultColor:u="light",cssVariablePrefix:c="--shiki-"}=n,h=Object.entries(n.themes).filter(p=>p[1]).map(p=>({color:p[0],theme:p[1]})).sort((p,m)=>p.color===u?-1:m.color===u?1:0);if(h.length===0)throw new Ci("`themes` option must not be empty");const f=eN(t,e,n);if(l=Au(f),u&&!h.find(p=>p.color===u))throw new Ci(`\`themes\` option must contain the defaultColor key \`${u}\``);const d=h.map(p=>t.getTheme(p.theme)),_=h.map(p=>p.color);s=f.map(p=>p.map(m=>Vhe(m,_,c,u))),l&&pp(s,l);const b=h.map(p=>ad(p.theme,n));i=h.map((p,m)=>(m===0&&u?"":`${c+p.color}:`)+(Hs(d[m].fg,b[m])||"inherit")).join(";"),r=h.map((p,m)=>(m===0&&u?"":`${c+p.color}-bg:`)+(Hs(d[m].bg,b[m])||"inherit")).join(";"),o=`shiki-themes ${d.map(p=>p.name).join(" ")}`,a=u?void 0:[i,r].join(";")}else if("theme"in n){const u=ad(n.theme,n);s=x1(t,e,n);const c=t.getTheme(n.theme);r=Hs(c.bg,u),i=Hs(c.fg,u),o=c.name,l=Au(s)}else throw new Ci("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:l}}function Vhe(t,e,n,r){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>QM(t.variants[l])),o=new Set(s.flatMap(l=>Object.keys(l))),a={};return s.forEach((l,u)=>{for(const c of o){const h=l[c]||"inherit";if(u===0&&r)a[c]=h;else{const f=c==="color"?"":c==="background-color"?"-bg":`-${c}`,d=n+e[u]+(c==="color"?"":f);a[d]=h}}}),i.htmlStyle=a,i}function hd(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>hd(t,i,s),codeToTokens:(i,s)=>cd(t,i,s)}){let i=e;for(const d of ld(n))i=d.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:u,grammarState:c}=cd(t,i,n);const{mergeWhitespaces:h=!0}=n;h===!0?s=zhe(s):h==="never"&&(s=Whe(s));const f={...r,get source(){return i}};for(const d of ld(n))s=d.tokens?.call(f,s)||s;return $he(s,{...n,fg:o,bg:a,themeName:l,rootStyle:u},f,c)}function $he(t,e,n,r=Au(t)){const i=ld(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let u={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([_])=>!_.startsWith("_")))},children:[]},c={type:"element",tagName:"code",properties:{},children:s};const h=[],f={...n,structure:a,addClassToHast:YM,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return u},get code(){return c},get lines(){return h}};if(t.forEach((_,b)=>{b&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let p={type:"element",tagName:"span",properties:{class:"line"},children:[]},m=0;for(const g of _){let y={type:"element",tagName:"span",properties:{...g.htmlAttrs},children:[{type:"text",value:g.content}]};g.htmlStyle;const v=She(g.htmlStyle||QM(g));v&&(y.properties.style=v);for(const S of i)y=S?.span?.call(f,y,b+1,m,p,g)||y;a==="inline"?o.children.push(y):a==="classic"&&p.children.push(y),m+=g.content.length}if(a==="classic"){for(const g of i)p=g?.line?.call(f,p,b+1)||p;h.push(p),s.push(p)}}),a==="classic"){for(const _ of i)c=_?.code?.call(f,c)||c;u.children.push(c);for(const _ of i)u=_?.pre?.call(f,u)||u;o.children.push(u)}let d=o;for(const _ of i)d=_?.root?.call(f,d)||d;return r&&pp(d,r),d}function zhe(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const l=!(s.fontStyle&&s.fontStyle&Si.Underline);l&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function Whe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function qhe(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>hd(t,s,o),codeToTokens:(s,o)=>cd(t,s,o)};let i=ghe(hd(t,e,n,r));for(const s of ld(n))i=s.postprocess?.call(r,i,n)||i;return i}const LC={light:"#333333",dark:"#bbbbbb"},PC={light:"#fffffe",dark:"#1e1e1e"},OC="__shiki_resolved";function C1(t){if(t?.[OC])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?LC.light:LC.dark),n||(n=e.type==="light"?PC.light:PC.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),u=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!u)return a;const c={...a,settings:{...a.settings}};if(l){const h=o(a.settings.foreground);e.colorReplacements[h]=a.settings.foreground,c.settings.foreground=h}if(u){const h=o(a.settings.background);e.colorReplacements[h]=a.settings.background,c.settings.background=h}return c});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,OC,{enumerable:!1,writable:!1,value:!0}),e}async function tN(t){return Array.from(new Set((await Promise.all(t.filter(e=>!S1(e)).map(async e=>await XM(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function nN(t){return(await Promise.all(t.map(async n=>KM(n)?null:C1(await XM(n))))).filter(n=>!!n)}class Ghe extends oce{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=C1(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=nd.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new wn(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(s=>!r.includes(s));throw new wn(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class Khe{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let sl=0;function Yhe(t){sl+=1,t.warnings!==!1&&sl>=10&&sl%10===0&&console.warn(`[Shiki] ${sl} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new wn("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(C1),i=new Khe(t.engine,n),s=new Ghe(i,r,n,t.langAlias);let o;function a(g){p();const y=s.getGrammar(typeof g=="string"?g:g.name);if(!y)throw new wn(`Language \`${g}\` not found, you may need to load it first`);return y}function l(g){if(g==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};p();const y=s.getTheme(g);if(!y)throw new wn(`Theme \`${g}\` not found, you may need to load it first`);return y}function u(g){p();const y=l(g);o!==g&&(s.setTheme(y),o=g);const v=s.getColorMap();return{theme:y,colorMap:v}}function c(){return p(),s.getLoadedThemes()}function h(){return p(),s.getLoadedLanguages()}function f(...g){p(),s.loadLanguages(g.flat(1))}async function d(...g){return f(await tN(g))}function _(...g){p();for(const y of g.flat(1))s.loadTheme(y)}async function b(...g){return p(),_(await nN(g))}function p(){if(e)throw new wn("Shiki instance has been disposed")}function m(){e||(e=!0,s.dispose(),sl-=1)}return{setTheme:u,getTheme:l,getLanguage:a,getLoadedThemes:c,getLoadedLanguages:h,loadLanguage:d,loadLanguageSync:f,loadTheme:b,loadThemeSync:_,dispose:m,[Symbol.dispose]:m}}async function Xhe(t={}){t.loadWasm;const[e,n,r]=await Promise.all([nN(t.themes||[]),tN(t.langs||[]),t.engine||yM(t.loadWasm||vue())]);return Yhe({...t,themes:e,langs:n,engine:r})}async function Qhe(t={}){const e=await Xhe(t);return{getLastGrammarState:(...n)=>Mhe(e,...n),codeToTokensBase:(n,r)=>x1(e,n,r),codeToTokensWithThemes:(n,r)=>eN(e,n,r),codeToTokens:(n,r)=>cd(e,n,r),codeToHast:(n,r)=>hd(e,n,r),codeToHtml:(n,r)=>qhe(e,n,r),...e,getInternalContext:()=>e}}function Jhe(t,e,n){let r,i,s;{const a=t;r=a.langs,i=a.themes,s=a.engine}async function o(a){function l(d){if(typeof d=="string"){if(S1(d))return[];const _=r[d];if(!_)throw new Ci(`Language \`${d}\` is not included in this bundle. You may want to load it from external source.`);return _}return d}function u(d){if(KM(d))return"none";if(typeof d=="string"){const _=i[d];if(!_)throw new Ci(`Theme \`${d}\` is not included in this bundle. You may want to load it from external source.`);return _}return d}const c=(a.themes??[]).map(d=>u(d)),h=(a.langs??[]).map(d=>l(d)),f=await Qhe({engine:a.engine??s(),...a,themes:c,langs:h});return{...f,loadLanguage(...d){return f.loadLanguage(...d.map(l))},loadTheme(...d){return f.loadTheme(...d.map(u))}}}return o}function Zhe(t){let e;async function n(r={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function efe(t){const e=Zhe(t);return{getSingletonHighlighter(n){return e(n)},async codeToHtml(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHtml(n,r)},async codeToHast(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHast(n,r)},async codeToTokens(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToTokens(n,r)},async codeToTokensBase(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).codeToTokensBase(n,r)},async codeToTokensWithThemes(n,r){return(await e({langs:[r.lang],themes:Object.values(r.themes).filter(Boolean)})).codeToTokensWithThemes(n,r)},async getLastGrammarState(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).getLastGrammarState(n,r)}}}const rN=Jhe({langs:bM,themes:nue,engine:()=>yM(j(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:tfe}=efe(rN),nfe={langs:["shell"],themes:["light-plus","dark-plus"]},rfe=await rN(nfe),ife=R.memo(({messageId:t})=>{const e=R.useRef(!1),[n,r]=R.useState(!1),s=Pt(He.artifacts)[t],o=Pt(M_(s.runner.actions,l=>Object.values(l))),a=()=>{e.current=!0,r(!n)};return R.useEffect(()=>{o.length&&!n&&!e.current&&r(!0)},[o]),L.jsxs("div",{className:"artifact border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[L.jsxs("div",{className:"flex",children:[L.jsx("button",{className:"flex items-stretch bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:()=>{const l=He.showWorkbench.get();He.showWorkbench.set(!l)},children:L.jsxs("div",{className:"px-5 p-3.5 w-full text-left",children:[L.jsx("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:s?.title}),L.jsx("div",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:"Click to open Workbench"})]})}),L.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"}),L.jsx(Kh,{children:o.length&&L.jsx(xr.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:ui},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:a,children:L.jsx("div",{className:"p-4",children:L.jsx("div",{className:n?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})})})]}),L.jsx(Kh,{children:n&&o.length>0&&L.jsxs(xr.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[L.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),L.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:L.jsx(afe,{actions:o})})]})})]})});function sfe({classsName:t,code:e}){return L.jsx("div",{className:Xe("text-xs",t),dangerouslySetInnerHTML:{__html:rfe.codeToHtml(e,{lang:"shell",theme:"dark-plus"})}})}const ofe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},afe=R.memo(({actions:t})=>L.jsx(xr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:L.jsx("ul",{className:"list-none space-y-2.5",children:t.map((e,n)=>{const{status:r,type:i,content:s}=e,o=n===t.length-1;return L.jsxs(xr.li,{variants:ofe,initial:"hidden",animate:"visible",transition:{duration:.2,ease:ui},children:[L.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[L.jsx("div",{className:Xe("text-lg",lfe(e.status)),children:r==="running"?L.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):r==="pending"?L.jsx("div",{className:"i-ph:circle-duotone"}):r==="complete"?L.jsx("div",{className:"i-ph:check"}):r==="failed"||r==="aborted"?L.jsx("div",{className:"i-ph:x"}):null}),i==="file"?L.jsxs("div",{children:["Create"," ",L.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md",children:e.filePath})]}):i==="shell"?L.jsx("div",{className:"flex items-center w-full min-h-[28px]",children:L.jsx("span",{className:"flex-1",children:"Run command"})}):null]}),i==="shell"&&L.jsx(sfe,{classsName:Xe("mt-1",{"mb-3.5":!o}),code:s})]},n)})})}));function lfe(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const ufe="c",cfe={CopyButtonContainer:ufe},MC=Mn("CodeBlock"),hfe=R.memo(({className:t,code:e,language:n="plaintext",theme:r="dark-plus",disableCopy:i=!1})=>{const[s,o]=R.useState(void 0),[a,l]=R.useState(!1),u=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return R.useEffect(()=>{n&&!S1(n)&&!(n in bM)&&MC.warn(`Unsupported language '${n}'`),MC.trace(`Language = ${n}`),(async()=>{o(await tfe(e,{lang:n,theme:r}))})()},[e]),L.jsxs("div",{className:Xe("relative group text-left",t),children:[L.jsx("div",{className:Xe(cfe.CopyButtonContainer,"bg-white absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!i&&L.jsx("button",{className:Xe("flex items-center bg-transparent p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>u(),children:L.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),L.jsx("div",{dangerouslySetInnerHTML:{__html:s??""}})]})}),ffe="b",dfe={MarkdownContent:ffe},NC=Mn("MarkdownComponent"),iN=R.memo(({children:t,html:e=!1,limitedMarkdown:n=!1})=>{NC.trace("Render");const r=R.useMemo(()=>({div:({className:i,children:s,node:o,...a})=>{if(i?.includes("__boltArtifact__")){const l=o?.properties.dataMessageId;return l||NC.error(`Invalid message id ${l}`),L.jsx(ife,{messageId:l})}return L.jsx("div",{className:i,...a,children:s})},pre:i=>{const{children:s,node:o,...a}=i,[l]=o?.children??[];if(l&&l.type==="element"&&l.tagName==="code"&&l.children[0].type==="text"){const{className:u,...c}=l.properties,[,h="plaintext"]=/language-(\w+)/.exec(String(u)||"")??[];return L.jsx(hfe,{code:l.children[0].value,language:h,...c})}return L.jsx("pre",{...a,children:s})}}),[]);return L.jsx(bte,{allowedElements:gM,className:dfe.MarkdownContent,components:r,remarkPlugins:Xle(n),rehypePlugins:Qle(e),children:t})}),pfe=R.memo(({content:t})=>L.jsx("div",{className:"overflow-hidden w-full",children:L.jsx(iN,{html:!0,children:t})}));function mfe({content:t}){return L.jsx("div",{className:"overflow-hidden pt-[4px]",children:L.jsx(iN,{limitedMarkdown:!0,children:gfe(t)})})}function gfe(t){return t.replace(IH,"").trim()}const _fe=Ye.forwardRef((t,e)=>{const{id:n,isStreaming:r=!1,messages:i=[]}=t;return L.jsxs("div",{id:n,ref:e,className:t.className,children:[i.length>0?i.map((s,o)=>{const{role:a,content:l}=s,u=a==="user",c=o===0,h=o===i.length-1;return L.jsxs("div",{className:Xe("flex gap-4 p-6 w-full rounded-[calc(0.75rem-1px)]",{"bg-bolt-elements-messages-background":u||!r||r&&!h,"bg-gradient-to-b from-bolt-elements-messages-background from-30% to-transparent":r&&h,"mt-4":!c}),children:[u&&L.jsx("div",{className:"flex items-center justify-center w-[34px] h-[34px] overflow-hidden bg-white text-gray-600 rounded-full shrink-0 self-start",children:L.jsx("div",{className:"i-ph:user-fill text-xl"})}),L.jsx("div",{className:"grid grid-col-1 w-full",children:u?L.jsx(mfe,{content:l}):L.jsx(pfe,{content:l})})]},o)}):null,r&&L.jsx("div",{className:"text-center w-full text-bolt-elements-textSecondary i-svg-spinners:3-dots-fade text-4xl mt-4"})]})});function bfe(){const t=tT(),[e,n]=R.useState([]),[r,i]=R.useState(!0);R.useEffect(()=>{Rn?Lk(Rn).then(o=>{const a=o.filter(l=>l.urlId&&l.description).sort((l,u)=>new Date(u.timestamp).getTime()-new Date(l.timestamp).getTime());n(a)}).catch(o=>console.error(o)).finally(()=>i(!1)):i(!1)},[]);const s=(o,a)=>{o.stopPropagation(),Rn&&confirm("Are you sure you want to delete this project?")&&Pk(Rn,a).then(()=>{n(l=>l.filter(u=>u.id!==a)),it.success("Project deleted")}).catch(()=>it.error("Failed to delete"))};return r||e.length===0?null:L.jsxs("div",{className:"w-full max-w-chat mx-auto mt-12 animate-fade-in",children:[L.jsx("div",{className:"flex items-center justify-between mb-4",children:L.jsx("h2",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Your Projects"})}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(o=>L.jsx("div",{onClick:()=>t(`/chat/${o.urlId}`),className:"group relative flex flex-col p-4 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded-xl hover:border-bolt-elements-borderColorActive hover:shadow-lg transition-all cursor-pointer",children:L.jsxs("div",{className:"flex items-start justify-between",children:[L.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[L.jsx("h3",{className:"font-medium text-bolt-elements-textPrimary truncate",children:o.description}),L.jsx("p",{className:"text-xs text-bolt-elements-textTertiary mt-1",children:new Date(o.timestamp).toLocaleDateString()})]}),L.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:L.jsx(ci,{icon:"i-ph:trash",size:"md",className:"hover:text-red-500",onClick:a=>s(a,o.id)})})]})},o.id))})]})}const yr=cs({started:!1,aborted:!1,showChat:!0,model:"mistralai/mistral-7b-instruct:free"}),yfe=Mn("ModelSelector");function vfe(){const{model:t}=Pt(yr),[e,n]=R.useState([]),[r,i]=R.useState(!1);R.useEffect(()=>{(async()=>{i(!0);try{const a=await fetch("https://openrouter.ai/api/v1/models");if(!a.ok)throw new Error("Failed to fetch models");const l=await a.json();n(l.data.sort((u,c)=>u.name.localeCompare(c.name)))}catch(a){yfe.error("Failed to fetch OpenRouter models",a),it.error("Failed to fetch OpenRouter models")}finally{i(!1)}})()},[]);const s=R.useCallback(o=>{yr.setKey("model",o.target.value)},[]);return L.jsxs("div",{className:"mb-2 flex gap-2 items-center text-sm",children:[L.jsx("label",{className:"text-bolt-elements-textSecondary text-xs",children:"Model:"}),r?L.jsx("div",{className:"text-bolt-elements-textTertiary text-xs",children:"Loading..."}):L.jsx("select",{value:t,onChange:s,className:"flex-1 max-w-[200px] bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary rounded px-2 py-1 border border-bolt-elements-borderColor focus:outline-none text-xs",children:e.map(o=>L.jsx("option",{value:o.id,children:o.name},o.id))})]})}const Efe=io(.4,0,.2,1);function Sfe({show:t,isStreaming:e,onClick:n}){return L.jsx(Kh,{children:t?L.jsx(xr.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-accent-500 hover:brightness-94 color-white rounded-md w-[34px] h-[34px] transition-theme",transition:{ease:Efe,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},onClick:r=>{r.preventDefault(),n?.(r)},children:L.jsx("div",{className:"text-lg",children:e?L.jsx("div",{className:"i-ph:stop-circle-bold"}):L.jsx("div",{className:"i-ph:arrow-right"})})}):null})}const wfe="_",xfe="a",BC={BaseChat:wfe,Chat:xfe},Cfe=[{text:"Build a todo app in React using Tailwind"},{text:"Build a simple blog using Astro"},{text:"Create a cookie consent form using Material UI"},{text:"Make a space invaders game"},{text:"How do I center a div?"}],Tfe=76,sN=Ye.forwardRef(({textareaRef:t,messageRef:e,scrollRef:n,showChat:r=!0,chatStarted:i=!1,isStreaming:s=!1,enhancingPrompt:o=!1,promptEnhanced:a=!1,messages:l,input:u="",sendMessage:c,handleInputChange:h,enhancePrompt:f,handleStop:d},_)=>{const b=i?400:200;return L.jsxs("div",{ref:_,className:Xe(BC.BaseChat,"relative flex h-full w-full overflow-hidden bg-bolt-elements-background-depth-1"),"data-chat-visible":r,children:[L.jsx($r,{children:()=>L.jsx(cU,{})}),L.jsxs("div",{ref:n,className:"flex w-full h-full relative z-0",children:[L.jsxs("div",{className:Xe(BC.Chat,"flex flex-col flex-grow min-w-[var(--chat-min-width)] h-full"),children:[!i&&L.jsx("div",{id:"intro",className:"flex flex-col justify-center flex-grow max-w-chat mx-auto w-full",children:L.jsxs("div",{className:"flex flex-col items-center mb-8",children:[L.jsx("h1",{className:"text-5xl text-center font-bold text-bolt-elements-textPrimary mb-4 animate-fade-in",children:"New Title"}),L.jsx("p",{className:"text-center text-bolt-elements-textSecondary text-lg animate-fade-in animate-delay-100 max-w-lg",children:"New Name"})]})}),L.jsxs("div",{className:Xe("w-full",{"h-full flex flex-col":i}),children:[L.jsx($r,{children:()=>i?L.jsx(_fe,{ref:e,className:"flex flex-col w-full flex-1 max-w-chat px-4 pb-6 mx-auto z-1",messages:l,isStreaming:s}):null}),L.jsxs("div",{className:Xe("relative w-full max-w-chat mx-auto z-prompt",{"sticky bottom-0":i}),children:[L.jsxs("div",{className:Xe("bg-bolt-elements-prompt-background backdrop-filter backdrop-blur-[8px] rounded-3xl overflow-hidden p-2 mb-4 mx-4 shadow-lg"),children:[L.jsx($r,{children:()=>L.jsx(vfe,{})}),L.jsx("textarea",{ref:t,className:"w-full pl-4 pt-4 pr-16 focus:outline-none resize-none text-md text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent",onKeyDown:p=>{if(p.key==="Enter"){if(p.shiftKey)return;p.preventDefault(),c?.(p)}},value:u,onChange:p=>{h?.(p)},style:{minHeight:Tfe,maxHeight:b},placeholder:"How can New Title help you today?",translate:"no"}),L.jsx($r,{children:()=>L.jsx(Sfe,{show:u.length>0||s,isStreaming:s,onClick:p=>{if(s){d?.();return}c?.(p)}})}),L.jsxs("div",{className:"flex justify-between text-sm p-4 pt-2",children:[L.jsxs("div",{className:"flex gap-1 items-center",children:[L.jsx(ci,{title:"Enhance prompt",disabled:u.length===0||o,className:Xe({"opacity-100!":o,"text-bolt-elements-item-contentAccent! pr-1.5 enabled:hover:bg-bolt-elements-item-backgroundAccent!":a}),onClick:()=>f?.(),children:o?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl"}),L.jsx("div",{className:"ml-1.5",children:"Enhancing prompt..."})]}):L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"i-bolt:stars text-xl"}),L.jsx("div",{className:"ml-1.5",children:"Plan"})]})}),L.jsx(ci,{title:"Visual edits",children:L.jsx("div",{className:"i-ph:paint-brush-broad text-xl"})})]}),u.length>3?L.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Use ",L.jsx("kbd",{className:"kdb",children:"Shift"})," + ",L.jsx("kbd",{className:"kdb",children:"Return"})," for a new line"]}):null]})]}),L.jsx("div",{className:"bg-bolt-elements-background-depth-1 pb-6"})]})]}),!i&&L.jsxs(L.Fragment,{children:[L.jsx("div",{id:"examples",className:"relative w-full max-w-xl mx-auto mt-8 flex justify-center",children:L.jsx("div",{className:"flex flex-col space-y-2 [mask-image:linear-gradient(to_bottom,black_0%,transparent_180%)] hover:[mask-image:none]",children:Cfe.map((p,m)=>L.jsxs("button",{onClick:g=>{c?.(g,p.text)},className:"group flex items-center w-full gap-2 justify-center bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-theme",children:[p.text,L.jsx("div",{className:"i-ph:arrow-bend-down-left"})]},m))})}),L.jsx($r,{children:()=>L.jsx(bfe,{})})]})]}),L.jsx($r,{children:()=>L.jsx(SX,{chatStarted:i,isStreaming:s})})]})]})});var za={exports:{}};const Afe=typeof uf<"u",FC=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,HC=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function oN(t,e,n){n==null&&e!==null&&typeof e=="object"&&(n=e,e=void 0),Afe&&uf.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));const r=JSON.parse(t,e);if(r===null||typeof r!="object")return r;const i=n&&n.protoAction||"error",s=n&&n.constructorAction||"error";if(i==="ignore"&&s==="ignore")return r;if(i!=="ignore"&&s!=="ignore"){if(FC.test(t)===!1&&HC.test(t)===!1)return r}else if(i!=="ignore"&&s==="ignore"){if(FC.test(t)===!1)return r}else if(HC.test(t)===!1)return r;return aN(r,{protoAction:i,constructorAction:s,safe:n&&n.safe})}function aN(t,{protoAction:e="error",constructorAction:n="error",safe:r}={}){let i=[t];for(;i.length;){const s=i;i=[];for(const o of s){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(r===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const a in o){const l=o[a];l&&typeof l=="object"&&i.push(l)}}}return t}function T1(t,e,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return oN(t,e,n)}finally{Error.stackTraceLimit=r}}function kfe(t,e){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return oN(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}}za.exports=T1;za.exports.default=T1;za.exports.parse=T1;za.exports.safeParse=kfe;za.exports.scan=aN;var Rfe=za.exports;const UC=dd(Rfe);var lN="vercel.ai.error",Ife=Symbol.for(lN),uN,Dfe=class cN extends Error{constructor({name:e,message:n,cause:r}){super(n),this[uN]=!0,this.name=e,this.cause=r}static isInstance(e){return cN.hasMarker(e,lN)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};uN=Ife;var jC=Dfe,hN="AI_InvalidArgumentError",fN=`vercel.ai.error.${hN}`,Lfe=Symbol.for(fN),dN,Pfe=class extends jC{constructor({message:t,cause:e,argument:n}){super({name:hN,message:t,cause:e}),this[dN]=!0,this.argument=n}static isInstance(t){return jC.hasMarker(t,fN)}};dN=Lfe;let Ofe=(t,e=21)=>(n=e)=>{let r="",i=n|0;for(;i--;)r+=t[Math.random()*t.length|0];return r};var Mfe=({prefix:t,size:e=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Ofe(n,e);if(t==null)return i;if(n.includes(r))throw new Pfe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return s=>`${t}${r}${i(s)}`},pN=Mfe();new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Nfe(t){const e=["ROOT"];let n=-1,r=null;function i(l,u,c){switch(l){case'"':{n=u,e.pop(),e.push(c),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,e.pop(),e.push(c),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(c),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,e.pop(),e.push(c),e.push("INSIDE_NUMBER");break}case"{":{n=u,e.pop(),e.push(c),e.push("INSIDE_OBJECT_START");break}case"[":{n=u,e.pop(),e.push(c),e.push("INSIDE_ARRAY_START");break}}}function s(l,u){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,e.pop();break}}}function o(l,u){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,e.pop();break}}}for(let l=0;l<t.length;l++){const u=t[l];switch(e[e.length-1]){case"ROOT":i(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{e.pop(),n=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,e.pop();break}default:{n=l,i(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,e.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(u,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(u,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const h=t.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(u,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l)):n=l;break}}}let a=t.slice(0,n+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const c=t.substring(r,t.length);"true".startsWith(c)?a+="true".slice(c.length):"false".startsWith(c)?a+="false".slice(c.length):"null".startsWith(c)&&(a+="null".slice(c.length))}}return a}function Bfe(t){if(t===void 0)return{value:void 0,state:"undefined-input"};try{return{value:UC.parse(t),state:"successful-parse"}}catch{try{return{value:UC.parse(Nfe(t)),state:"repaired-parse"}}catch{}}return{value:void 0,state:"failed-parse"}}var ku={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},Ru={code:"1",name:"function_call",parse:t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}}},Iu={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},Du={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Lu={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},Pu={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},Ou={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},Mu={code:"7",name:"tool_calls",parse:t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}}},Nu={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},Bu={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},Fu={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},Hu={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},Uu={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},ju={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},Vu={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},Ffe=[ku,Ru,Iu,Du,Lu,Pu,Ou,Mu,Nu,Bu,Fu,Hu,Uu,ju,Vu],Hfe={[ku.code]:ku,[Ru.code]:Ru,[Iu.code]:Iu,[Du.code]:Du,[Lu.code]:Lu,[Pu.code]:Pu,[Ou.code]:Ou,[Mu.code]:Mu,[Nu.code]:Nu,[Bu.code]:Bu,[Fu.code]:Fu,[Hu.code]:Hu,[Uu.code]:Uu,[ju.code]:ju,[Vu.code]:Vu};ku.name+"",ku.code,Ru.name+"",Ru.code,Iu.name+"",Iu.code,Du.name+"",Du.code,Lu.name+"",Lu.code,Pu.name+"",Pu.code,Ou.name+"",Ou.code,Mu.name+"",Mu.code,Nu.name+"",Nu.code,Bu.name+"",Bu.code,Fu.name+"",Fu.code,Hu.name+"",Hu.code,Uu.name+"",Uu.code,ju.name+"",ju.code,Vu.name+"",Vu.code;var Ufe=Ffe.map(t=>t.code),jfe=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const n=t.slice(0,e);if(!Ufe.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,i=t.slice(e+1),s=JSON.parse(i);return Hfe[r].parse(s)},Vfe=10;function $fe(t,e){const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return t.length=0,n}async function*zfe(t,{isAborted:e}={}){const n=new TextDecoder,r=[];let i=0;for(;;){const{value:s}=await t.read();if(s&&(r.push(s),i+=s.length,s[s.length-1]!==Vfe))continue;if(r.length===0)break;const o=$fe(r,i);i=0;const a=n.decode(o,{stream:!0}).split(`
`).filter(l=>l!=="").map(jfe);for(const l of a)yield l;if(e?.()){t.cancel();break}}}function gh(t,e){return!t||!e||!e.length?t:{...t,annotations:[...e]}}async function Wfe({reader:t,abortControllerRef:e,update:n,onToolCall:r,onFinish:i,generateId:s=pN,getCurrentDate:o=()=>new Date}){var a;const l=o();let u={},c;const h=[],f=[];let d;const _={};let b={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},p="unknown";for await(const{type:m,value:g}of zfe(t,{isAborted:()=>e?.current===null})){if(m==="error")throw new Error(g);if(m==="finish_step"){g.isContinued||(c={});continue}if(m==="finish_message"){if(p=g.finishReason,g.usage!=null){const{completionTokens:C,promptTokens:x}=g.usage;b={completionTokens:C,promptTokens:x,totalTokens:C+x}}continue}if(c!=null&&(m==="text"||m==="tool_call"||m==="tool_call_streaming_start"||m==="tool_call_delta"||m==="tool_result")&&(u.text&&h.push(u.text),u.function_call&&h.push(u.function_call),u.tool_calls&&h.push(u.tool_calls),u=c,c=void 0),m==="text"&&(u.text?u.text={...u.text,content:(u.text.content||"")+g}:u.text={id:s(),role:"assistant",content:g,createdAt:l}),m==="tool_call_streaming_start")u.text==null&&(u.text={id:s(),role:"assistant",content:"",createdAt:l}),u.text.toolInvocations==null&&(u.text.toolInvocations=[]),_[g.toolCallId]={text:"",toolName:g.toolName,prefixMapIndex:u.text.toolInvocations.length},u.text.toolInvocations.push({state:"partial-call",toolCallId:g.toolCallId,toolName:g.toolName,args:void 0});else if(m==="tool_call_delta"){const C=_[g.toolCallId];C.text+=g.argsTextDelta;const{value:x}=Bfe(C.text);u.text.toolInvocations[C.prefixMapIndex]={state:"partial-call",toolCallId:g.toolCallId,toolName:C.toolName,args:x},u.text.internalUpdateId=s()}else if(m==="tool_call"){if(_[g.toolCallId]!=null?u.text.toolInvocations[_[g.toolCallId].prefixMapIndex]={state:"call",...g}:(u.text==null&&(u.text={id:s(),role:"assistant",content:"",createdAt:l}),u.text.toolInvocations==null&&(u.text.toolInvocations=[]),u.text.toolInvocations.push({state:"call",...g})),u.text.internalUpdateId=s(),r){const C=await r({toolCall:g});C!=null&&(u.text.toolInvocations[u.text.toolInvocations.length-1]={state:"result",...g,result:C})}}else if(m==="tool_result"){const C=(a=u.text)==null?void 0:a.toolInvocations;if(C==null)throw new Error("tool_result must be preceded by a tool_call");const x=C.findIndex(A=>A.toolCallId===g.toolCallId);if(x===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");C[x]={...C[x],state:"result",...g}}let y=null;m==="function_call"&&(u.function_call={id:s(),role:"assistant",content:"",function_call:g.function_call,name:g.function_call.name,createdAt:l},y=u.function_call);let v=null;m==="tool_calls"&&(u.tool_calls={id:s(),role:"assistant",content:"",tool_calls:g.tool_calls,createdAt:l},v=u.tool_calls),m==="data"&&f.push(...g);let S=u.text;m==="message_annotations"&&(d?d.push(...g):d=[...g],y=gh(u.function_call,d),v=gh(u.tool_calls,d),S=gh(u.text,d),u.text!=null&&(u.text.internalUpdateId=s())),d?.length&&(u.text&&(u.text.annotations=[...d]),u.function_call&&(u.function_call.annotations=[...d]),u.tool_calls&&(u.tool_calls.annotations=[...d]));const E=[y,v,S].filter(Boolean).map(C=>({...gh(C,d)}));n([...h,...E],[...f])}return i?.({message:u.text,finishReason:p,usage:b}),{messages:[u.text,u.function_call,u.tool_calls].filter(Boolean),data:f}}var qfe=()=>fetch;async function Gfe({api:t,body:e,streamProtocol:n="data",credentials:r,headers:i,abortController:s,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:u,onToolCall:c,generateId:h,fetch:f=qfe()}){var d,_;const b=await f(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...i},signal:(d=s?.())==null?void 0:d.signal,credentials:r}).catch(m=>{throw o(),m});if(a)try{await a(b)}catch(m){throw m}if(!b.ok)throw o(),new Error((_=await b.text())!=null?_:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");const p=b.body.getReader();switch(n){case"text":{const m=Kfe(),g={id:h(),createdAt:new Date,role:"assistant",content:""};for(;;){const{done:y,value:v}=await p.read();if(y)break;if(g.content+=m(v),l([{...g}],[]),s?.()===null){p.cancel();break}}return u?.(g,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"}),{messages:[g],data:[]}}case"data":return await Wfe({reader:p,abortControllerRef:s!=null?{current:s()}:void 0,update:l,onToolCall:c,onFinish({message:m,finishReason:g,usage:y}){u&&m!=null&&u(m,{usage:y,finishReason:g})},generateId:h});default:{const m=n;throw new Error(`Unknown stream protocol: ${m}`)}}}function Kfe(t){const e=new TextDecoder;return function(n){return n?e.decode(n,{stream:!0}):""}}async function Yfe({getStreamedResponse:t,experimental_onFunctionCall:e,experimental_onToolCall:n,updateChatRequest:r,getCurrentMessages:i}){for(;;){const s=await t();if("messages"in s){let o=!1;for(const a of s.messages)if(!((a.function_call===void 0||typeof a.function_call=="string")&&(a.tool_calls===void 0||typeof a.tool_calls=="string"))){if(o=!0,e){const l=a.function_call;if(typeof l!="object"){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}const u=await e(i(),l);if(u===void 0){o=!1;break}r(u)}if(n){const l=a.tool_calls;if(!Array.isArray(l)||l.some(c=>typeof c!="object")){console.warn("experimental_onToolCall should not be defined when using tools");continue}const u=await n(i(),l);if(u===void 0){o=!1;break}r(u)}}if(!o)break}else{let o=function(l){for(const u of l.messages){if(u.tool_calls!==void 0)for(const c of u.tool_calls)typeof c=="object"&&c.function.arguments&&typeof c.function.arguments!="string"&&(c.function.arguments=JSON.stringify(c.function.arguments));u.function_call!==void 0&&typeof u.function_call=="object"&&u.function_call.arguments&&typeof u.function_call.arguments!="string"&&(u.function_call.arguments=JSON.stringify(u.function_call.arguments))}};const a=s;if((a.function_call===void 0||typeof a.function_call=="string")&&(a.tool_calls===void 0||typeof a.tool_calls=="string"))break;if(e){const l=a.function_call;if(typeof l!="object"){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}const u=await e(i(),l);if(u===void 0)break;o(u),r(u)}if(n){const l=a.tool_calls;if(typeof l!="object"){console.warn("experimental_onToolCall should not be defined when using functions");continue}const u=await n(i(),l);if(u===void 0)break;o(u),r(u)}}}}var mN={exports:{}},gN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=R;function Xfe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qfe=typeof Object.is=="function"?Object.is:Xfe,Jfe=Ea.useState,Zfe=Ea.useEffect,ede=Ea.useLayoutEffect,tde=Ea.useDebugValue;function nde(t,e){var n=e(),r=Jfe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return ede(function(){i.value=n,i.getSnapshot=e,ng(i)&&s({inst:i})},[t,n,e]),Zfe(function(){return ng(i)&&s({inst:i}),t(function(){ng(i)&&s({inst:i})})},[t]),tde(n),n}function ng(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qfe(t,n)}catch{return!0}}function rde(t,e){return e()}var ide=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rde:nde;gN.useSyncExternalStore=Ea.useSyncExternalStore!==void 0?Ea.useSyncExternalStore:ide;mN.exports=gN;var VC=mN.exports;const _N=0,bN=1,yN=2,$C=3;var zC=Object.prototype.hasOwnProperty;function T_(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&T_(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(zC.call(t,n)&&++r&&!zC.call(e,n)||!(n in e)||!T_(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const yi=new WeakMap,wi=()=>{},gn=wi(),A_=Object,rt=t=>t===gn,Qr=t=>typeof t=="function",us=(t,e)=>({...t,...e}),vN=t=>Qr(t.then),rg={},_h={},A1="undefined",gc=typeof window!=A1,k_=typeof document!=A1,sde=gc&&"Deno"in window,ode=()=>gc&&typeof window.requestAnimationFrame!=A1,EN=(t,e)=>{const n=yi.get(t);return[()=>!rt(e)&&t.get(e)||rg,r=>{if(!rt(e)){const i=t.get(e);e in _h||(_h[e]=i),n[5](e,us(i,r),i||rg)}},n[6],()=>!rt(e)&&e in _h?_h[e]:!rt(e)&&t.get(e)||rg]};let R_=!0;const ade=()=>R_,[I_,D_]=gc&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[wi,wi],lde=()=>{const t=k_&&document.visibilityState;return rt(t)||t!=="hidden"},ude=t=>(k_&&document.addEventListener("visibilitychange",t),I_("focus",t),()=>{k_&&document.removeEventListener("visibilitychange",t),D_("focus",t)}),cde=t=>{const e=()=>{R_=!0,t()},n=()=>{R_=!1};return I_("online",e),I_("offline",n),()=>{D_("online",e),D_("offline",n)}},hde={isOnline:ade,isVisible:lde},fde={initFocus:ude,initReconnect:cde},WC=!Ye.useId,aa=!gc||sde,dde=t=>ode()?window.requestAnimationFrame(t):setTimeout(t,1),ig=aa?R.useEffect:R.useLayoutEffect,sg=typeof navigator<"u"&&navigator.connection,qC=!aa&&sg&&(["slow-2g","2g"].includes(sg.effectiveType)||sg.saveData),bh=new WeakMap,pde=t=>A_.prototype.toString.call(t),og=(t,e)=>t===`[object ${e}]`;let mde=0;const L_=t=>{const e=typeof t,n=pde(t),r=og(n,"Date"),i=og(n,"RegExp"),s=og(n,"Object");let o,a;if(A_(t)===t&&!r&&!i){if(o=bh.get(t),o)return o;if(o=++mde+"~",bh.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=L_(t[a])+",";bh.set(t,o)}if(s){o="#";const l=A_.keys(t).sort();for(;!rt(a=l.pop());)rt(t[a])||(o+=a+":"+L_(t[a])+",");bh.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},k1=t=>{if(Qr(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?L_(t):"",[t,e]};let gde=0;const P_=()=>++gde;async function SN(...t){const[e,n,r,i]=t,s=us({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const u=f=>typeof a=="function"?a(f):a!==!1,c=s.throwOnError;if(Qr(n)){const f=n,d=[],_=e.keys();for(const b of _)!/^\$(inf|sub)\$/.test(b)&&f(e.get(b)._k)&&d.push(b);return Promise.all(d.map(h))}return h(n);async function h(f){const[d]=k1(f);if(!d)return;const[_,b]=EN(e,d),[p,m,g,y]=yi.get(e),v=()=>{const $=p[d];return(Qr(s.revalidate)?s.revalidate(_().data,f):s.revalidate!==!1)&&(delete g[d],delete y[d],$&&$[0])?$[0](yN).then(()=>_().data):_().data};if(t.length<3)return v();let S=r,E,C=!1;const x=P_();m[d]=[x,0];const A=!rt(l),D=_(),M=D.data,H=D._c,B=rt(H)?M:H;if(A&&(l=Qr(l)?l(B,M):l,b({data:l,_c:B})),Qr(S))try{S=S(B)}catch($){E=$,C=!0}if(S&&vN(S))if(S=await S.catch($=>{E=$,C=!0}),x!==m[d][0]){if(C)throw E;return S}else C&&A&&u(E)&&(o=!0,b({data:B,_c:gn}));if(o&&!C)if(Qr(o)){const $=o(S,B);b({data:$,error:gn,_c:gn})}else b({data:S,error:gn,_c:gn});if(m[d][1]=P_(),Promise.resolve(v()).then(()=>{b({_c:gn})}),C){if(c)throw E;return}return S}}const GC=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},_de=(t,e)=>{if(!yi.has(t)){const n=us(fde,e),r=Object.create(null),i=SN.bind(gn,t);let s=wi;const o=Object.create(null),a=(c,h)=>{const f=o[c]||[];return o[c]=f,f.push(h),()=>f.splice(f.indexOf(h),1)},l=(c,h,f)=>{t.set(c,h);const d=o[c];if(d)for(const _ of d)_(h,f)},u=()=>{if(!yi.has(t)&&(yi.set(t,[r,Object.create(null),Object.create(null),Object.create(null),i,l,a]),!aa)){const c=n.initFocus(setTimeout.bind(gn,GC.bind(gn,r,_N))),h=n.initReconnect(setTimeout.bind(gn,GC.bind(gn,r,bN)));s=()=>{c&&c(),h&&h(),yi.delete(t)}}};return u(),[t,i,u,s]}return[t,yi.get(t)[4]]},bde=(t,e,n,r,i)=>{const s=n.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!rt(s)&&o>s||setTimeout(r,a,i)},yde=T_,[wN,vde]=_de(new Map),Ede=us({onLoadingSlow:wi,onSuccess:wi,onError:wi,onErrorRetry:bde,onDiscarded:wi,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:qC?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:qC?5e3:3e3,compare:yde,isPaused:()=>!1,cache:wN,mutate:vde,fallback:{}},hde),Sde=(t,e)=>{const n=us(t,e);if(e){const{use:r,fallback:i}=t,{use:s,fallback:o}=e;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=us(i,o))}return n},wde=R.createContext({}),xde="$inf$",xN=gc&&window.__SWR_DEVTOOLS_USE__,Cde=xN?window.__SWR_DEVTOOLS_USE__:[],Tde=()=>{xN&&(window.__SWR_DEVTOOLS_REACT__=Ye)},Ade=t=>Qr(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],kde=()=>{const t=R.useContext(wde);return R.useMemo(()=>us(Ede,t),[t])},Rde=t=>(e,n,r)=>t(e,n&&((...s)=>{const[o]=k1(e),[,,,a]=yi.get(wN);if(o.startsWith(xde))return n(...s);const l=a[o];return rt(l)?n(...s):(delete a[o],l)}),r),Ide=Cde.concat(Rde),Dde=t=>function(...n){const r=kde(),[i,s,o]=Ade(n),a=Sde(r,o);let l=t;const{use:u}=a,c=(u||[]).concat(Ide);for(let h=c.length;h--;)l=c[h](l);return l(i,s||a.fetcher||null,a)},Lde=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};Tde();const ag=Ye.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),lg={dedupe:!0},KC=Promise.resolve(gn),Pde=()=>wi,Ode=(t,e,n)=>{const{cache:r,compare:i,suspense:s,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:u,refreshWhenHidden:c,refreshWhenOffline:h,keepPreviousData:f,strictServerPrefetchWarning:d}=n,[_,b,p,m]=yi.get(r),[g,y]=k1(t),v=R.useRef(!1),S=R.useRef(!1),E=R.useRef(g),C=R.useRef(e),x=R.useRef(n),A=()=>x.current,D=()=>A().isVisible()&&A().isOnline(),[M,H,B,$]=EN(r,g),G=R.useRef({}).current,Z=rt(o)?rt(n.fallback)?gn:n.fallback[g]:o,ee=(we,de)=>{for(const ke in G){const Pe=ke;if(Pe==="data"){if(!i(we[Pe],de[Pe])&&(!rt(we[Pe])||!i(oe,de[Pe])))return!1}else if(de[Pe]!==we[Pe])return!1}return!0},X=!v.current,P=R.useMemo(()=>{const we=M(),de=$(),ke=Ue=>{const Ne=us(Ue);return delete Ne._k,(()=>{if(!g||!e||A().isPaused())return!1;if(X&&!rt(a))return a;const nt=rt(Z)?Ne.data:Z;return rt(nt)||l})()?{isValidating:!0,isLoading:!0,...Ne}:Ne},Pe=ke(we),Oe=we===de?Pe:ke(de);let Ke=Pe;return[()=>{const Ue=ke(M());return ee(Ue,Ke)?(Ke.data=Ue.data,Ke.isLoading=Ue.isLoading,Ke.isValidating=Ue.isValidating,Ke.error=Ue.error,Ke):(Ke=Ue,Ue)},()=>Oe]},[r,g]),I=VC.useSyncExternalStore(R.useCallback(we=>B(g,(de,ke)=>{ee(ke,de)||we()}),[r,g]),P[0],P[1]),z=_[g]&&_[g].length>0,K=I.data,O=rt(K)?Z&&vN(Z)?ag(Z):Z:K,J=I.error,re=R.useRef(O),oe=f?rt(K)?rt(re.current)?O:re.current:K:O,q=g&&rt(O),F=R.useRef(null);!aa&&VC.useSyncExternalStore(Pde,()=>(F.current=!1,F),()=>(F.current=!0,F));const ie=F.current;d&&ie&&!s&&q&&console.warn(`Missing pre-initiated data for serialized key "${g}" during server-side rendering. Data fetching should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);const ue=!g||!e||A().isPaused()||z&&!rt(J)?!1:X&&!rt(a)?a:s?rt(O)?!1:l:rt(O)||l,fe=rt(I.isValidating)?ue:I.isValidating,me=rt(I.isLoading)?ue:I.isLoading,Te=R.useCallback(async we=>{const de=C.current;if(!g||!de||S.current||A().isPaused())return!1;let ke,Pe,Oe=!0;const Ke=we||{},Ue=!p[g]||!Ke.dedupe,Ne=()=>WC?!S.current&&g===E.current&&v.current:g===E.current,at={isValidating:!1,isLoading:!1},nt=()=>{H(at)},ae=()=>{const Ce=p[g];Ce&&Ce[1]===Pe&&delete p[g]},_e={isValidating:!0};rt(M().data)&&(_e.isLoading=!0);try{if(Ue&&(H(_e),n.loadingTimeout&&rt(M().data)&&setTimeout(()=>{Oe&&Ne()&&A().onLoadingSlow(g,n)},n.loadingTimeout),p[g]=[de(y),P_()]),[ke,Pe]=p[g],ke=await ke,Ue&&setTimeout(ae,n.dedupingInterval),!p[g]||p[g][1]!==Pe)return Ue&&Ne()&&A().onDiscarded(g),!1;at.error=gn;const Ce=b[g];if(!rt(Ce)&&(Pe<=Ce[0]||Pe<=Ce[1]||Ce[1]===0))return nt(),Ue&&Ne()&&A().onDiscarded(g),!1;const De=M().data;at.data=i(De,ke)?De:ke,Ue&&Ne()&&A().onSuccess(ke,g,n)}catch(Ce){ae();const De=A(),{shouldRetryOnError:N}=De;De.isPaused()||(at.error=Ce,Ue&&Ne()&&(De.onError(Ce,g,De),(N===!0||Qr(N)&&N(Ce))&&(!A().revalidateOnFocus||!A().revalidateOnReconnect||D())&&De.onErrorRetry(Ce,g,De,T=>{const k=_[g];k&&k[0]&&k[0]($C,T)},{retryCount:(Ke.retryCount||0)+1,dedupe:!0})))}return Oe=!1,nt(),!0},[g,r]),Fe=R.useCallback((...we)=>SN(r,E.current,...we),[]);if(ig(()=>{C.current=e,x.current=n,rt(K)||(re.current=K)}),ig(()=>{if(!g)return;const we=Te.bind(gn,lg);let de=0;A().revalidateOnFocus&&(de=Date.now()+A().focusThrottleInterval);const Pe=Lde(g,_,(Oe,Ke={})=>{if(Oe==_N){const Ue=Date.now();A().revalidateOnFocus&&Ue>de&&D()&&(de=Ue+A().focusThrottleInterval,we())}else if(Oe==bN)A().revalidateOnReconnect&&D()&&we();else{if(Oe==yN)return Te();if(Oe==$C)return Te(Ke)}});return S.current=!1,E.current=g,v.current=!0,H({_k:y}),ue&&(p[g]||(rt(O)||aa?we():dde(we))),()=>{S.current=!0,Pe()}},[g]),ig(()=>{let we;function de(){const Pe=Qr(u)?u(M().data):u;Pe&&we!==-1&&(we=setTimeout(ke,Pe))}function ke(){!M().error&&(c||A().isVisible())&&(h||A().isOnline())?Te(lg).then(de):de()}return de(),()=>{we&&(clearTimeout(we),we=-1)}},[u,c,h,g]),R.useDebugValue(oe),s){if(!WC&&aa&&q)throw new Error("Fallback data is required when using Suspense in SSR.");q&&(C.current=e,x.current=n,S.current=!1);const we=m[g],de=!rt(we)&&q?Fe(we):KC;if(ag(de),!rt(J)&&q)throw J;const ke=q?Te(lg):KC;!rt(oe)&&q&&(ke.status="fulfilled",ke.value=!0),ag(ke)}return{mutate:Fe,get data(){return G.data=!0,oe},get error(){return G.error=!0,J},get isValidating(){return G.isValidating=!0,fe},get isLoading(){return G.isLoading=!0,me}}},yh=Dde(Ode);function Mde(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let n,r=0;return function(...s){clearTimeout(n);const o=Date.now(),a=o-r,l=e-a;l<=0?(r=o,t.apply(this,s)):n=setTimeout(()=>{r=Date.now(),t.apply(this,s)},l)}}var Nde=Mde;const Bde=dd(Nde);function YC(t,e){return e!=null?Bde(t,e):t}var Fde=async(t,e,n,r,i,s,o,a,l,u,c,h,f,d,_,b,p)=>{var m;const g=o.current;n(e.messages,!1);const y=d?e.messages:e.messages.map(({role:S,content:E,experimental_attachments:C,name:x,data:A,annotations:D,toolInvocations:M,function_call:H,tool_calls:B,tool_call_id:$})=>({role:S,content:E,...C!==void 0&&{experimental_attachments:C},...x!==void 0&&{name:x},...A!==void 0&&{data:A},...D!==void 0&&{annotations:D},...M!==void 0&&{toolInvocations:M},tool_call_id:$,...H!==void 0&&{function_call:H},...B!==void 0&&{tool_calls:B}})),v=i.current;return await Gfe({api:t,body:(m=_?.({messages:e.messages,requestData:e.data,requestBody:e.body}))!=null?m:{messages:y,data:e.data,...s.current.body,...e.body,...e.functions!==void 0&&{functions:e.functions},...e.function_call!==void 0&&{function_call:e.function_call},...e.tools!==void 0&&{tools:e.tools},...e.tool_choice!==void 0&&{tool_choice:e.tool_choice}},streamProtocol:u,credentials:s.current.credentials,headers:{...s.current.headers,...e.headers},abortController:()=>a.current,restoreMessagesOnFailure(){p||n(g,!1)},onResponse:h,onUpdate(S,E){n([...e.messages,...S],!1),r([...v??[],...E??[]],!1)},onToolCall:f,onFinish:c,generateId:l,fetch:b})};function Hde({api:t="/api/chat",id:e,initialMessages:n,initialInput:r="",sendExtraMessageFields:i,experimental_onFunctionCall:s,experimental_onToolCall:o,onToolCall:a,experimental_prepareRequestBody:l,experimental_maxAutomaticRoundtrips:u=0,maxAutomaticRoundtrips:c=u,maxToolRoundtrips:h=c,maxSteps:f=h!=null?h+1:1,streamMode:d,streamProtocol:_,onResponse:b,onFinish:p,onError:m,credentials:g,headers:y,body:v,generateId:S=pN,fetch:E,keepLastMessageOnError:C=!1,experimental_throttle:x}={}){d&&(_??(_=d==="text"?"text":void 0));const A=R.useId(),D=e??A,M=typeof t=="string"?[t,D]:D,[H]=R.useState([]),{data:B,mutate:$}=yh([M,"messages"],null,{fallbackData:n??H}),G=R.useRef(B||[]);R.useEffect(()=>{G.current=B||[]},[B]);const{data:Z,mutate:ee}=yh([M,"streamData"],null),X=R.useRef(Z);R.useEffect(()=>{X.current=Z},[Z]);const{data:P=!1,mutate:I}=yh([M,"loading"],null),{data:z=void 0,mutate:K}=yh([M,"error"],null),O=R.useRef(null),J=R.useRef({credentials:g,headers:y,body:v});R.useEffect(()=>{J.current={credentials:g,headers:y,body:v}},[g,y,v]);const re=R.useCallback(async we=>{const de=G.current.length;try{I(!0),K(void 0);const Oe=new AbortController;O.current=Oe,await Yfe({getStreamedResponse:()=>Fde(t,we,YC($,x),YC(ee,x),X,J,G,O,S,_,p,b,a,i,l,E,C),experimental_onFunctionCall:s,experimental_onToolCall:o,updateChatRequest:Ke=>{we=Ke},getCurrentMessages:()=>G.current}),O.current=null}catch(Oe){if(Oe.name==="AbortError")return O.current=null,null;m&&Oe instanceof Error&&m(Oe),K(Oe)}finally{I(!1)}const ke=G.current,Pe=ke[ke.length-1];ke.length>de&&Pe!=null&&f>1&&XC(Pe)&&Ude(ke)<f&&await re({messages:ke})},[$,I,t,J,b,p,m,K,ee,X,_,i,s,o,l,a,f,G,O,S,E,C,x]),oe=R.useCallback(async(we,{options:de,functions:ke,function_call:Pe,tools:Oe,tool_choice:Ke,data:Ue,headers:Ne,body:at,experimental_attachments:nt}={})=>{var ae,_e;we.id||(we.id=S());const Ce=await QC(nt),De={headers:Ne??de?.headers,body:at??de?.body},T={messages:G.current.concat({...we,id:(ae=we.id)!=null?ae:S(),createdAt:(_e=we.createdAt)!=null?_e:new Date,experimental_attachments:Ce.length>0?Ce:void 0}),options:De,headers:De.headers,body:De.body,data:Ue,...ke!==void 0&&{functions:ke},...Pe!==void 0&&{function_call:Pe},...Oe!==void 0&&{tools:Oe},...Ke!==void 0&&{tool_choice:Ke}};return re(T)},[re,S]),q=R.useCallback(async({options:we,functions:de,function_call:ke,tools:Pe,tool_choice:Oe,data:Ke,headers:Ue,body:Ne}={})=>{if(G.current.length===0)return null;const at={headers:Ue??we?.headers,body:Ne??we?.body};if(G.current[G.current.length-1].role==="assistant"){const _e={messages:G.current.slice(0,-1),options:at,headers:at.headers,body:at.body,data:Ke,...de!==void 0&&{functions:de},...ke!==void 0&&{function_call:ke},...Pe!==void 0&&{tools:Pe},...Oe!==void 0&&{tool_choice:Oe}};return re(_e)}const ae={messages:G.current,options:at,headers:at.headers,body:at.body,data:Ke,...de!==void 0&&{functions:de},...ke!==void 0&&{function_call:ke},...Pe!==void 0&&{tools:Pe},...Oe!==void 0&&{tool_choice:Oe}};return re(ae)},[re]),F=R.useCallback(()=>{O.current&&(O.current.abort(),O.current=null)},[]),ie=R.useCallback(we=>{typeof we=="function"&&(we=we(G.current)),$(we,!1),G.current=we},[$]),ue=R.useCallback(we=>{typeof we=="function"&&(we=we(X.current)),ee(we,!1),X.current=we},[ee]),[fe,me]=R.useState(r),Te=R.useCallback(async(we,de={},ke)=>{var Pe,Oe,Ke,Ue,Ne;if((Pe=we?.preventDefault)==null||Pe.call(we),!fe&&!de.allowEmptySubmit)return;ke&&(J.current={...J.current,...ke});const at=await QC(de.experimental_attachments),nt={headers:(Ke=de.headers)!=null?Ke:(Oe=de.options)==null?void 0:Oe.headers,body:(Ne=de.body)!=null?Ne:(Ue=de.options)==null?void 0:Ue.body},_e={messages:!fe&&!at.length&&de.allowEmptySubmit?G.current:G.current.concat({id:S(),createdAt:new Date,role:"user",content:fe,experimental_attachments:at.length>0?at:void 0}),options:nt,headers:nt.headers,body:nt.body,data:de.data};re(_e),me("")},[fe,S,re]),Fe=we=>{me(we.target.value)},Je=({toolCallId:we,result:de})=>{const ke=G.current.map((Oe,Ke,Ue)=>Ke===Ue.length-1&&Oe.role==="assistant"&&Oe.toolInvocations?{...Oe,toolInvocations:Oe.toolInvocations.map(Ne=>Ne.toolCallId===we?{...Ne,result:de}:Ne)}:Oe);$(ke,!1);const Pe=ke[ke.length-1];XC(Pe)&&re({messages:ke})};return{messages:B||[],setMessages:ie,data:Z,setData:ue,error:z,append:oe,reload:q,stop:F,input:fe,setInput:me,handleInputChange:Fe,handleSubmit:Te,isLoading:P,addToolResult:Je,experimental_addToolResult:Je}}function XC(t){return t.role==="assistant"&&t.toolInvocations&&t.toolInvocations.length>0&&t.toolInvocations.every(e=>"result"in e)}function Ude(t){let e=0;for(let n=t.length-1;n>=0&&t[n].role==="assistant";n--)e++;return e}async function QC(t){if(t==null)return[];if(t instanceof FileList)return Promise.all(Array.from(t).map(async e=>{const{name:n,type:r}=e,i=await new Promise((s,o)=>{const a=new FileReader;a.onload=l=>{var u;s((u=l.target)==null?void 0:u.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:n,contentType:r,url:i}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}var jde=Hde;const Vde=qu({enter:"animated fadeInRight",exit:"animated fadeOutRight"}),JC=Mn("Chat");function $de(){Ca.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:n}=qH();return L.jsxs(L.Fragment,{children:[t&&L.jsx(zde,{initialMessages:e,storeMessageHistory:n}),L.jsx(R5,{closeButton:({closeToast:r})=>L.jsx("button",{className:"Toastify__close-button",onClick:r,children:L.jsx("div",{className:"i-ph:x text-lg"})}),icon:({type:r})=>{switch(r){case"success":return L.jsx("div",{className:"i-ph:check-bold text-bolt-elements-icon-success text-2xl"});case"error":return L.jsx("div",{className:"i-ph:warning-circle-bold text-bolt-elements-icon-error text-2xl"})}},position:"bottom-right",pauseOnFocusLoss:!0,transition:Vde})]})}const zde=R.memo(({initialMessages:t,storeMessageHistory:e})=>{Gq();const n=R.useRef(null),[r,i]=R.useState(t.length>0),{showChat:s,provider:o,model:a,openRouterApiKey:l}=Pt(yr),[u,c]=_5(),{messages:h,isLoading:f,input:d,handleInputChange:_,setInput:b,stop:p,append:m}=jde({api:"/api/chat",body:{provider:o,model:a,openRouterApiKey:l},onError:G=>{JC.error(`Request failed

`,G),it.error("There was an error processing your request")},onFinish:()=>{JC.debug("Finished streaming")},initialMessages:t}),{enhancingPrompt:g,promptEnhanced:y,enhancePrompt:v,resetEnhancer:S}=Wq(),{parsedMessages:E,parseMessages:C}=zq(),x=r?400:200;R.useEffect(()=>{yr.setKey("started",t.length>0)},[]),R.useEffect(()=>{C(h,f),h.length>t.length&&e(h).catch(G=>it.error(G.message))},[h,f,C]);const A=()=>{const G=n.current;G&&(G.scrollTop=G.scrollHeight)},D=()=>{p(),yr.setKey("aborted",!0),He.abortAllActions()};R.useEffect(()=>{const G=n.current;if(G){G.style.height="auto";const Z=G.scrollHeight;G.style.height=`${Math.min(Z,x)}px`,G.style.overflowY=Z>x?"auto":"hidden"}},[d,n]);const M=async()=>{r||(await Promise.all([c("#examples",{opacity:0,display:"none"},{duration:.1}),c("#intro",{opacity:0,flex:1},{duration:.2,ease:ui})]),yr.setKey("started",!0),i(!0))},H=async(G,Z)=>{const ee=Z||d;if(ee.length===0||f)return;await He.saveAllFiles();const X=He.getFileModifcations();if(yr.setKey("aborted",!1),M(),X!==void 0){const P=PH(X);m({role:"user",content:`${P}

${ee}`}),He.resetAllFileModifications()}else m({role:"user",content:ee});b(""),S(),n.current?.blur()},[B,$]=Kq();return L.jsx(sN,{ref:u,textareaRef:n,input:d,showChat:s,chatStarted:r,isStreaming:f,enhancingPrompt:g,promptEnhanced:y,sendMessage:H,messageRef:B,scrollRef:$,handleInputChange:_,handleStop:D,messages:h.map((G,Z)=>G.role==="user"?G:{...G,content:E[Z]||""}),enhancePrompt:()=>{v(d,G=>{b(G),A()})}})});function Wde({}){const t=Pt(He.showWorkbench),{showChat:e}=Pt(yr),n=t||!e;return L.jsx("div",{className:"flex",children:L.jsxs("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:[L.jsx(ZC,{active:e,disabled:!n,onClick:()=>{n&&yr.setKey("showChat",!e)},children:L.jsx("div",{className:"i-bolt:chat text-sm"})}),L.jsx("div",{className:"w-[1px] bg-bolt-elements-borderColor"}),L.jsx(ZC,{active:t,onClick:()=>{t&&!e&&yr.setKey("showChat",!0),He.showWorkbench.set(!t)},children:L.jsx("div",{className:"i-ph:code-bold"})})]})})}function ZC({active:t=!1,disabled:e=!1,children:n,onClick:r}){return L.jsx("button",{className:Xe("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e}),onClick:r,children:n})}function qde(){return Pt(hl)}const fd=cs({user:null,isAuthenticated:!1,isLoading:!1});function Gde(t,e){fd.setKey("isLoading",!0),setTimeout(()=>{fd.set({user:{email:t,username:e,avatar:`https://api.dicebear.com/9.x/avataaars/svg?seed=${e}`},isAuthenticated:!0,isLoading:!1})},1e3)}function Kde(){fd.set({user:null,isAuthenticated:!1,isLoading:!1})}function Yde(){const{user:t,isAuthenticated:e,isLoading:n}=Pt(fd),[r,i]=R.useState(!1),[s,o]=R.useState(!0),[a,l]=R.useState(""),[u,c]=R.useState(""),[h,f]=R.useState(""),d=_=>{_.preventDefault(),Gde(a,u||a.split("@")[0]),i(!1)};return e&&t?L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"text-sm text-bolt-elements-textSecondary hidden sm:inline",children:t.username}),L.jsxs("div",{className:"relative group",children:[L.jsx("img",{src:t.avatar,alt:"Profile",className:"w-8 h-8 rounded-full border border-bolt-elements-borderColor cursor-pointer hover:border-bolt-elements-item-contentAccent transition-colors",onClick:()=>Kde()}),L.jsx("div",{className:"absolute right-0 top-full mt-2 w-max px-2 py-1 bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Click to logout"})]})]}):L.jsxs(Sk,{open:r,onOpenChange:i,children:[L.jsx(wk,{asChild:!0,children:L.jsx("button",{className:"px-3 py-1.5 text-sm bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent rounded hover:opacity-90 transition-opacity",children:"Login"})}),L.jsxs(xk,{children:[L.jsx(Ck,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),L.jsxs(Tk,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-sm bg-bolt-elements-background-depth-2 p-6 rounded-lg shadow-xl border border-bolt-elements-borderColor z-50 focus:outline-none",children:[L.jsx(Ak,{className:"text-xl font-bold text-bolt-elements-textPrimary mb-4",children:s?"Welcome Back":"Create Account"}),L.jsxs("form",{onSubmit:d,className:"flex flex-col gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-bolt-elements-textSecondary mb-1 block",children:"Email"}),L.jsx("input",{type:"email",value:a,onChange:_=>l(_.target.value),className:"w-full bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor rounded p-2 text-bolt-elements-textPrimary focus:border-bolt-elements-item-contentAccent outline-none",required:!0})]}),!s&&L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-bolt-elements-textSecondary mb-1 block",children:"Username"}),L.jsx("input",{type:"text",value:u,onChange:_=>c(_.target.value),className:"w-full bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor rounded p-2 text-bolt-elements-textPrimary focus:border-bolt-elements-item-contentAccent outline-none",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-xs text-bolt-elements-textSecondary mb-1 block",children:"Password"}),L.jsx("input",{type:"password",value:h,onChange:_=>f(_.target.value),className:"w-full bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor rounded p-2 text-bolt-elements-textPrimary focus:border-bolt-elements-item-contentAccent outline-none",required:!0})]}),L.jsx("button",{type:"submit",disabled:n,className:"mt-2 w-full bg-bolt-elements-item-contentAccent text-white rounded p-2 font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:n?"Processing...":s?"Login":"Register"})]}),L.jsx("div",{className:"mt-6 border-t border-bolt-elements-borderColor pt-4",children:L.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary rounded-lg transition-all active:scale-95",children:[L.jsx("span",{children:s?"Don't have an account?":"Already have an account?"}),L.jsx("span",{className:"font-medium text-bolt-elements-item-contentAccent",children:s?"Register":"Login"})]})}),L.jsx(kk,{asChild:!0,children:L.jsx(ci,{className:"absolute top-4 right-4",icon:"i-ph:x"})})]})]})]})}function Xde(){const t=Pt(yr);return L.jsxs("header",{className:Xe("flex items-center bg-bolt-elements-background-depth-1/80 backdrop-blur-md p-5 mb-10 h-[var(--header-height)] z-20 sticky top-0",{"border-transparent":!0}),children:[L.jsxs("div",{className:"flex items-center gap-2 z-logo text-bolt-elements-textPrimary cursor-pointer",children:[L.jsx("div",{className:"i-ph:sidebar-simple-duotone text-xl"}),L.jsx("a",{href:"/",className:"text-2xl font-semibold text-accent flex items-center",children:L.jsx("span",{className:"text-xl font-bold text-accent",children:"New Title"})})]}),L.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textPrimary",children:L.jsx($r,{children:()=>L.jsx(qde,{})})}),L.jsxs("div",{className:"flex items-center gap-2 mr-1",children:[L.jsx($r,{children:()=>L.jsx(Yde,{})}),t.started&&L.jsx($r,{children:()=>L.jsx(Wde,{})})]})]})}const Qde=R.memo(()=>L.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none",children:L.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
                    radial-gradient(circle at 50% 0%, rgba(147, 51, 234, 0.1) 0%, rgba(0, 0, 0, 0) 50%),
                    radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, rgba(0, 0, 0, 0) 50%),
                    linear-gradient(180deg, rgba(5, 5, 5, 0) 0%, rgba(5, 5, 5, 1) 100%)
                `}})})),Ope=()=>[{title:"Purple"},{name:"description",content:"Talk with Purple, your AI assistant"}];function Mpe(){return L.jsxs("div",{className:"flex flex-col h-full w-full bg-bolt-elements-background-depth-1",children:[L.jsx(Qde,{}),L.jsx(Xde,{}),L.jsx($r,{fallback:L.jsx(sN,{}),children:()=>L.jsx($de,{})})]})}export{o$ as A,mpe as B,GR as C,eV as D,he as E,d$ as F,fpe as G,CV as H,pt as I,gpe as J,spe as K,cpe as L,Mpe as M,DR as N,Ope as O,aV as P,$t as T,y0 as a,ppe as b,On as c,hpe as d,tt as e,HV as f,dpe as g,sr as h,RV as i,ape as j,cn as k,Rd as l,ps as m,Nd as n,Ie as o,Og as p,Er as q,Aa as r,yV as s,ne as t,FV as u,xV as v,ot as w,No as x,dn as y,Tf as z};
